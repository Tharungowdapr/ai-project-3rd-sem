var Ore=Object.defineProperty;var Are=(t,e,n)=>e in t?Ore(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var za=(t,e,n)=>Are(t,typeof e!="symbol"?e+"":e,n);function _P(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var _o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function PP(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var kU={exports:{}},tC={},OU={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0=Symbol.for("react.element"),_re=Symbol.for("react.portal"),Pre=Symbol.for("react.fragment"),Rre=Symbol.for("react.strict_mode"),Dre=Symbol.for("react.profiler"),Fre=Symbol.for("react.provider"),Mre=Symbol.for("react.context"),Lre=Symbol.for("react.forward_ref"),jre=Symbol.for("react.suspense"),zre=Symbol.for("react.memo"),Bre=Symbol.for("react.lazy"),vL=Symbol.iterator;function Vre(t){return t===null||typeof t!="object"?null:(t=vL&&t[vL]||t["@@iterator"],typeof t=="function"?t:null)}var AU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_U=Object.assign,PU={};function sm(t,e,n){this.props=t,this.context=e,this.refs=PU,this.updater=n||AU}sm.prototype.isReactComponent={};sm.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sm.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RU(){}RU.prototype=sm.prototype;function RP(t,e,n){this.props=t,this.context=e,this.refs=PU,this.updater=n||AU}var DP=RP.prototype=new RU;DP.constructor=RP;_U(DP,sm.prototype);DP.isPureReactComponent=!0;var yL=Array.isArray,DU=Object.prototype.hasOwnProperty,FP={current:null},FU={key:!0,ref:!0,__self:!0,__source:!0};function MU(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)DU.call(e,r)&&!FU.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:W0,type:t,key:a,ref:o,props:i,_owner:FP.current}}function Wre(t,e){return{$$typeof:W0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function MP(t){return typeof t=="object"&&t!==null&&t.$$typeof===W0}function Ure(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bL=/\/+/g;function QT(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ure(""+t.key):e.toString(36)}function uw(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case W0:case _re:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+QT(o,0):r,yL(i)?(n="",t!=null&&(n=t.replace(bL,"$&/")+"/"),uw(i,e,n,"",function(c){return c})):i!=null&&(MP(i)&&(i=Wre(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bL,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",yL(t))for(var s=0;s<t.length;s++){a=t[s];var l=r+QT(a,s);o+=uw(a,e,n,l,i)}else if(l=Vre(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=r+QT(a,s++),o+=uw(a,e,n,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function i1(t,e,n){if(t==null)return t;var r=[],i=0;return uw(t,r,"","",function(a){return e.call(n,a,i++)}),r}function Hre(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ga={current:null},dw={transition:null},Gre={ReactCurrentDispatcher:ga,ReactCurrentBatchConfig:dw,ReactCurrentOwner:FP};function LU(){throw Error("act(...) is not supported in production builds of React.")}Rt.Children={map:i1,forEach:function(t,e,n){i1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return i1(t,function(){e++}),e},toArray:function(t){return i1(t,function(e){return e})||[]},only:function(t){if(!MP(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Rt.Component=sm;Rt.Fragment=Pre;Rt.Profiler=Dre;Rt.PureComponent=RP;Rt.StrictMode=Rre;Rt.Suspense=jre;Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gre;Rt.act=LU;Rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_U({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=FP.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)DU.call(e,l)&&!FU.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:W0,type:t.type,key:i,ref:a,props:r,_owner:o}};Rt.createContext=function(t){return t={$$typeof:Mre,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Fre,_context:t},t.Consumer=t};Rt.createElement=MU;Rt.createFactory=function(t){var e=MU.bind(null,t);return e.type=t,e};Rt.createRef=function(){return{current:null}};Rt.forwardRef=function(t){return{$$typeof:Lre,render:t}};Rt.isValidElement=MP;Rt.lazy=function(t){return{$$typeof:Bre,_payload:{_status:-1,_result:t},_init:Hre}};Rt.memo=function(t,e){return{$$typeof:zre,type:t,compare:e===void 0?null:e}};Rt.startTransition=function(t){var e=dw.transition;dw.transition={};try{t()}finally{dw.transition=e}};Rt.unstable_act=LU;Rt.useCallback=function(t,e){return ga.current.useCallback(t,e)};Rt.useContext=function(t){return ga.current.useContext(t)};Rt.useDebugValue=function(){};Rt.useDeferredValue=function(t){return ga.current.useDeferredValue(t)};Rt.useEffect=function(t,e){return ga.current.useEffect(t,e)};Rt.useId=function(){return ga.current.useId()};Rt.useImperativeHandle=function(t,e,n){return ga.current.useImperativeHandle(t,e,n)};Rt.useInsertionEffect=function(t,e){return ga.current.useInsertionEffect(t,e)};Rt.useLayoutEffect=function(t,e){return ga.current.useLayoutEffect(t,e)};Rt.useMemo=function(t,e){return ga.current.useMemo(t,e)};Rt.useReducer=function(t,e,n){return ga.current.useReducer(t,e,n)};Rt.useRef=function(t){return ga.current.useRef(t)};Rt.useState=function(t){return ga.current.useState(t)};Rt.useSyncExternalStore=function(t,e,n){return ga.current.useSyncExternalStore(t,e,n)};Rt.useTransition=function(){return ga.current.useTransition()};Rt.version="18.3.1";OU.exports=Rt;var S=OU.exports;const B=Gt(S),nC=_P({__proto__:null,default:B},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qre=S,Kre=Symbol.for("react.element"),Xre=Symbol.for("react.fragment"),Yre=Object.prototype.hasOwnProperty,Zre=qre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qre={key:!0,ref:!0,__self:!0,__source:!0};function jU(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Yre.call(e,r)&&!Qre.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Kre,type:t,key:a,ref:o,props:i,_owner:Zre.current}}tC.Fragment=Xre;tC.jsx=jU;tC.jsxs=jU;kU.exports=tC;var M=kU.exports,lk={},zU={exports:{}},po={},BU={exports:{}},VU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,F){var V=R.length;R.push(F);e:for(;0<V;){var H=V-1>>>1,U=R[H];if(0<i(U,F))R[H]=F,R[V]=U,V=H;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var F=R[0],V=R.pop();if(V!==F){R[0]=V;e:for(var H=0,U=R.length,W=U>>>1;H<W;){var G=2*(H+1)-1,q=R[G],X=G+1,re=R[X];if(0>i(q,V))X<U&&0>i(re,q)?(R[H]=re,R[X]=V,H=X):(R[H]=q,R[G]=V,H=G);else if(X<U&&0>i(re,V))R[H]=re,R[X]=V,H=X;else break e}}return F}function i(R,F){var V=R.sortIndex-F.sortIndex;return V!==0?V:R.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,g=!1,m=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(R){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=R)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function w(R){if(g=!1,b(R),!p)if(n(l)!==null)p=!0,D(x);else{var F=n(c);F!==null&&L(w,F.startTime-R)}}function x(R,F){p=!1,g&&(g=!1,v(E),E=-1),h=!0;var V=f;try{for(b(F),d=n(l);d!==null&&(!(d.expirationTime>F)||R&&!N());){var H=d.callback;if(typeof H=="function"){d.callback=null,f=d.priorityLevel;var U=H(d.expirationTime<=F);F=t.unstable_now(),typeof U=="function"?d.callback=U:d===n(l)&&r(l),b(F)}else r(l);d=n(l)}if(d!==null)var W=!0;else{var G=n(c);G!==null&&L(w,G.startTime-F),W=!1}return W}finally{d=null,f=V,h=!1}}var $=!1,C=null,E=-1,I=5,T=-1;function N(){return!(t.unstable_now()-T<I)}function k(){if(C!==null){var R=t.unstable_now();T=R;var F=!0;try{F=C(!0,R)}finally{F?O():($=!1,C=null)}}else $=!1}var O;if(typeof y=="function")O=function(){y(k)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,P=_.port2;_.port1.onmessage=k,O=function(){P.postMessage(null)}}else O=function(){m(k,0)};function D(R){C=R,$||($=!0,O())}function L(R,F){E=m(function(){R(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,D(x))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var V=f;f=F;try{return R()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var V=f;f=R;try{return F()}finally{f=V}},t.unstable_scheduleCallback=function(R,F,V){var H=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?H+V:H):V=H,R){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=V+U,R={id:u++,callback:F,priorityLevel:R,startTime:V,expirationTime:U,sortIndex:-1},V>H?(R.sortIndex=V,e(c,R),n(l)===null&&R===n(c)&&(g?(v(E),E=-1):g=!0,L(w,V-H))):(R.sortIndex=U,e(l,R),p||h||(p=!0,D(x))),R},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(R){var F=f;return function(){var V=f;f=F;try{return R.apply(this,arguments)}finally{f=V}}}})(VU);BU.exports=VU;var Jre=BU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eie=S,uo=Jre;function Oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var WU=new Set,cy={};function wf(t,e){ap(t,e),ap(t+"Capture",e)}function ap(t,e){for(cy[t]=e,t=0;t<e.length;t++)WU.add(e[t])}var Xl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ck=Object.prototype.hasOwnProperty,tie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xL={},wL={};function nie(t){return ck.call(wL,t)?!0:ck.call(xL,t)?!1:tie.test(t)?wL[t]=!0:(xL[t]=!0,!1)}function rie(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iie(t,e,n,r){if(e===null||typeof e>"u"||rie(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function va(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ei[t]=new va(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ei[e]=new va(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ei[t]=new va(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ei[t]=new va(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ei[t]=new va(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ei[t]=new va(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ei[t]=new va(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ei[t]=new va(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ei[t]=new va(t,5,!1,t.toLowerCase(),null,!1,!1)});var LP=/[\-:]([a-z])/g;function jP(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(LP,jP);Ei[e]=new va(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(LP,jP);Ei[e]=new va(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(LP,jP);Ei[e]=new va(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ei[t]=new va(t,1,!1,t.toLowerCase(),null,!1,!1)});Ei.xlinkHref=new va("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ei[t]=new va(t,1,!1,t.toLowerCase(),null,!0,!0)});function zP(t,e,n,r){var i=Ei.hasOwnProperty(e)?Ei[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iie(e,n,i,r)&&(n=null),r||i===null?nie(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var sc=eie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a1=Symbol.for("react.element"),bh=Symbol.for("react.portal"),xh=Symbol.for("react.fragment"),BP=Symbol.for("react.strict_mode"),uk=Symbol.for("react.profiler"),UU=Symbol.for("react.provider"),HU=Symbol.for("react.context"),VP=Symbol.for("react.forward_ref"),dk=Symbol.for("react.suspense"),fk=Symbol.for("react.suspense_list"),WP=Symbol.for("react.memo"),Dc=Symbol.for("react.lazy"),GU=Symbol.for("react.offscreen"),SL=Symbol.iterator;function Hg(t){return t===null||typeof t!="object"?null:(t=SL&&t[SL]||t["@@iterator"],typeof t=="function"?t:null)}var Xn=Object.assign,JT;function Sv(t){if(JT===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);JT=e&&e[1]||""}return`
`+JT+t}var eI=!1;function tI(t,e){if(!t||eI)return"";eI=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{eI=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Sv(t):""}function aie(t){switch(t.tag){case 5:return Sv(t.type);case 16:return Sv("Lazy");case 13:return Sv("Suspense");case 19:return Sv("SuspenseList");case 0:case 2:case 15:return t=tI(t.type,!1),t;case 11:return t=tI(t.type.render,!1),t;case 1:return t=tI(t.type,!0),t;default:return""}}function hk(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xh:return"Fragment";case bh:return"Portal";case uk:return"Profiler";case BP:return"StrictMode";case dk:return"Suspense";case fk:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case HU:return(t.displayName||"Context")+".Consumer";case UU:return(t._context.displayName||"Context")+".Provider";case VP:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case WP:return e=t.displayName||null,e!==null?e:hk(t.type)||"Memo";case Dc:e=t._payload,t=t._init;try{return hk(t(e))}catch{}}return null}function oie(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hk(e);case 8:return e===BP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function du(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qU(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sie(t){var e=qU(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function o1(t){t._valueTracker||(t._valueTracker=sie(t))}function KU(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qU(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function jw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pk(t,e){var n=e.checked;return Xn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $L(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=du(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function XU(t,e){e=e.checked,e!=null&&zP(t,"checked",e,!1)}function mk(t,e){XU(t,e);var n=du(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gk(t,e.type,n):e.hasOwnProperty("defaultValue")&&gk(t,e.type,du(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function CL(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gk(t,e,n){(e!=="number"||jw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $v=Array.isArray;function Bh(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+du(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function vk(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return Xn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function EL(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Oe(92));if($v(n)){if(1<n.length)throw Error(Oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:du(n)}}function YU(t,e){var n=du(e.value),r=du(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function TL(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZU(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yk(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZU(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var s1,QU=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(s1=s1||document.createElement("div"),s1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=s1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lie=["Webkit","ms","Moz","O"];Object.keys(Bv).forEach(function(t){lie.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bv[e]=Bv[t]})});function JU(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bv.hasOwnProperty(t)&&Bv[t]?(""+e).trim():e+"px"}function eH(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=JU(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var cie=Xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bk(t,e){if(e){if(cie[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Oe(62))}}function xk(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wk=null;function UP(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sk=null,Vh=null,Wh=null;function IL(t){if(t=G0(t)){if(typeof Sk!="function")throw Error(Oe(280));var e=t.stateNode;e&&(e=sC(e),Sk(t.stateNode,t.type,e))}}function tH(t){Vh?Wh?Wh.push(t):Wh=[t]:Vh=t}function nH(){if(Vh){var t=Vh,e=Wh;if(Wh=Vh=null,IL(t),e)for(t=0;t<e.length;t++)IL(e[t])}}function rH(t,e){return t(e)}function iH(){}var nI=!1;function aH(t,e,n){if(nI)return t(e,n);nI=!0;try{return rH(t,e,n)}finally{nI=!1,(Vh!==null||Wh!==null)&&(iH(),nH())}}function dy(t,e){var n=t.stateNode;if(n===null)return null;var r=sC(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Oe(231,e,typeof n));return n}var $k=!1;if(Xl)try{var Gg={};Object.defineProperty(Gg,"passive",{get:function(){$k=!0}}),window.addEventListener("test",Gg,Gg),window.removeEventListener("test",Gg,Gg)}catch{$k=!1}function uie(t,e,n,r,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Vv=!1,zw=null,Bw=!1,Ck=null,die={onError:function(t){Vv=!0,zw=t}};function fie(t,e,n,r,i,a,o,s,l){Vv=!1,zw=null,uie.apply(die,arguments)}function hie(t,e,n,r,i,a,o,s,l){if(fie.apply(this,arguments),Vv){if(Vv){var c=zw;Vv=!1,zw=null}else throw Error(Oe(198));Bw||(Bw=!0,Ck=c)}}function Sf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oH(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function NL(t){if(Sf(t)!==t)throw Error(Oe(188))}function pie(t){var e=t.alternate;if(!e){if(e=Sf(t),e===null)throw Error(Oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return NL(i),t;if(a===r)return NL(i),e;a=a.sibling}throw Error(Oe(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(Oe(189))}}if(n.alternate!==r)throw Error(Oe(190))}if(n.tag!==3)throw Error(Oe(188));return n.stateNode.current===n?t:e}function sH(t){return t=pie(t),t!==null?lH(t):null}function lH(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lH(t);if(e!==null)return e;t=t.sibling}return null}var cH=uo.unstable_scheduleCallback,kL=uo.unstable_cancelCallback,mie=uo.unstable_shouldYield,gie=uo.unstable_requestPaint,dr=uo.unstable_now,vie=uo.unstable_getCurrentPriorityLevel,HP=uo.unstable_ImmediatePriority,uH=uo.unstable_UserBlockingPriority,Vw=uo.unstable_NormalPriority,yie=uo.unstable_LowPriority,dH=uo.unstable_IdlePriority,rC=null,tl=null;function bie(t){if(tl&&typeof tl.onCommitFiberRoot=="function")try{tl.onCommitFiberRoot(rC,t,void 0,(t.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:Sie,xie=Math.log,wie=Math.LN2;function Sie(t){return t>>>=0,t===0?32:31-(xie(t)/wie|0)|0}var l1=64,c1=4194304;function Cv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ww(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~i;s!==0?r=Cv(s):(a&=o,a!==0&&(r=Cv(a)))}else o=n&~i,o!==0?r=Cv(o):a!==0&&(r=Cv(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vs(e),i=1<<n,r|=t[n],e&=~i;return r}function $ie(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cie(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-vs(a),s=1<<o,l=i[o];l===-1?(!(s&n)||s&r)&&(i[o]=$ie(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function Ek(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fH(){var t=l1;return l1<<=1,!(l1&4194240)&&(l1=64),t}function rI(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function U0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vs(e),t[e]=n}function Eie(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vs(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function GP(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var an=0;function hH(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pH,qP,mH,gH,vH,Tk=!1,u1=[],Qc=null,Jc=null,eu=null,fy=new Map,hy=new Map,jc=[],Tie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function OL(t,e){switch(t){case"focusin":case"focusout":Qc=null;break;case"dragenter":case"dragleave":Jc=null;break;case"mouseover":case"mouseout":eu=null;break;case"pointerover":case"pointerout":fy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hy.delete(e.pointerId)}}function qg(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=G0(e),e!==null&&qP(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Iie(t,e,n,r,i){switch(e){case"focusin":return Qc=qg(Qc,t,e,n,r,i),!0;case"dragenter":return Jc=qg(Jc,t,e,n,r,i),!0;case"mouseover":return eu=qg(eu,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return fy.set(a,qg(fy.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,hy.set(a,qg(hy.get(a)||null,t,e,n,r,i)),!0}return!1}function yH(t){var e=wd(t.target);if(e!==null){var n=Sf(e);if(n!==null){if(e=n.tag,e===13){if(e=oH(n),e!==null){t.blockedOn=e,vH(t.priority,function(){mH(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fw(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ik(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wk=r,n.target.dispatchEvent(r),wk=null}else return e=G0(n),e!==null&&qP(e),t.blockedOn=n,!1;e.shift()}return!0}function AL(t,e,n){fw(t)&&n.delete(e)}function Nie(){Tk=!1,Qc!==null&&fw(Qc)&&(Qc=null),Jc!==null&&fw(Jc)&&(Jc=null),eu!==null&&fw(eu)&&(eu=null),fy.forEach(AL),hy.forEach(AL)}function Kg(t,e){t.blockedOn===e&&(t.blockedOn=null,Tk||(Tk=!0,uo.unstable_scheduleCallback(uo.unstable_NormalPriority,Nie)))}function py(t){function e(i){return Kg(i,t)}if(0<u1.length){Kg(u1[0],t);for(var n=1;n<u1.length;n++){var r=u1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qc!==null&&Kg(Qc,t),Jc!==null&&Kg(Jc,t),eu!==null&&Kg(eu,t),fy.forEach(e),hy.forEach(e),n=0;n<jc.length;n++)r=jc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<jc.length&&(n=jc[0],n.blockedOn===null);)yH(n),n.blockedOn===null&&jc.shift()}var Uh=sc.ReactCurrentBatchConfig,Uw=!0;function kie(t,e,n,r){var i=an,a=Uh.transition;Uh.transition=null;try{an=1,KP(t,e,n,r)}finally{an=i,Uh.transition=a}}function Oie(t,e,n,r){var i=an,a=Uh.transition;Uh.transition=null;try{an=4,KP(t,e,n,r)}finally{an=i,Uh.transition=a}}function KP(t,e,n,r){if(Uw){var i=Ik(t,e,n,r);if(i===null)hI(t,e,r,Hw,n),OL(t,r);else if(Iie(i,t,e,n,r))r.stopPropagation();else if(OL(t,r),e&4&&-1<Tie.indexOf(t)){for(;i!==null;){var a=G0(i);if(a!==null&&pH(a),a=Ik(t,e,n,r),a===null&&hI(t,e,r,Hw,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else hI(t,e,r,null,n)}}var Hw=null;function Ik(t,e,n,r){if(Hw=null,t=UP(r),t=wd(t),t!==null)if(e=Sf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oH(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hw=t,null}function bH(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vie()){case HP:return 1;case uH:return 4;case Vw:case yie:return 16;case dH:return 536870912;default:return 16}default:return 16}}var Vc=null,XP=null,hw=null;function xH(){if(hw)return hw;var t,e=XP,n=e.length,r,i="value"in Vc?Vc.value:Vc.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return hw=i.slice(t,1<r?1-r:void 0)}function pw(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function d1(){return!0}function _L(){return!1}function mo(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?d1:_L,this.isPropagationStopped=_L,this}return Xn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=d1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=d1)},persist:function(){},isPersistent:d1}),e}var lm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},YP=mo(lm),H0=Xn({},lm,{view:0,detail:0}),Aie=mo(H0),iI,aI,Xg,iC=Xn({},H0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ZP,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xg&&(Xg&&t.type==="mousemove"?(iI=t.screenX-Xg.screenX,aI=t.screenY-Xg.screenY):aI=iI=0,Xg=t),iI)},movementY:function(t){return"movementY"in t?t.movementY:aI}}),PL=mo(iC),_ie=Xn({},iC,{dataTransfer:0}),Pie=mo(_ie),Rie=Xn({},H0,{relatedTarget:0}),oI=mo(Rie),Die=Xn({},lm,{animationName:0,elapsedTime:0,pseudoElement:0}),Fie=mo(Die),Mie=Xn({},lm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lie=mo(Mie),jie=Xn({},lm,{data:0}),RL=mo(jie),zie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wie(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Vie[t])?!!e[t]:!1}function ZP(){return Wie}var Uie=Xn({},H0,{key:function(t){if(t.key){var e=zie[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pw(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bie[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ZP,charCode:function(t){return t.type==="keypress"?pw(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pw(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hie=mo(Uie),Gie=Xn({},iC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DL=mo(Gie),qie=Xn({},H0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ZP}),Kie=mo(qie),Xie=Xn({},lm,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yie=mo(Xie),Zie=Xn({},iC,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qie=mo(Zie),Jie=[9,13,27,32],QP=Xl&&"CompositionEvent"in window,Wv=null;Xl&&"documentMode"in document&&(Wv=document.documentMode);var eae=Xl&&"TextEvent"in window&&!Wv,wH=Xl&&(!QP||Wv&&8<Wv&&11>=Wv),FL=" ",ML=!1;function SH(t,e){switch(t){case"keyup":return Jie.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $H(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wh=!1;function tae(t,e){switch(t){case"compositionend":return $H(e);case"keypress":return e.which!==32?null:(ML=!0,FL);case"textInput":return t=e.data,t===FL&&ML?null:t;default:return null}}function nae(t,e){if(wh)return t==="compositionend"||!QP&&SH(t,e)?(t=xH(),hw=XP=Vc=null,wh=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wH&&e.locale!=="ko"?null:e.data;default:return null}}var rae={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LL(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rae[t.type]:e==="textarea"}function CH(t,e,n,r){tH(r),e=Gw(e,"onChange"),0<e.length&&(n=new YP("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Uv=null,my=null;function iae(t){DH(t,0)}function aC(t){var e=Ch(t);if(KU(e))return t}function aae(t,e){if(t==="change")return e}var EH=!1;if(Xl){var sI;if(Xl){var lI="oninput"in document;if(!lI){var jL=document.createElement("div");jL.setAttribute("oninput","return;"),lI=typeof jL.oninput=="function"}sI=lI}else sI=!1;EH=sI&&(!document.documentMode||9<document.documentMode)}function zL(){Uv&&(Uv.detachEvent("onpropertychange",TH),my=Uv=null)}function TH(t){if(t.propertyName==="value"&&aC(my)){var e=[];CH(e,my,t,UP(t)),aH(iae,e)}}function oae(t,e,n){t==="focusin"?(zL(),Uv=e,my=n,Uv.attachEvent("onpropertychange",TH)):t==="focusout"&&zL()}function sae(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return aC(my)}function lae(t,e){if(t==="click")return aC(e)}function cae(t,e){if(t==="input"||t==="change")return aC(e)}function uae(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ts=typeof Object.is=="function"?Object.is:uae;function gy(t,e){if(Ts(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ck.call(e,i)||!Ts(t[i],e[i]))return!1}return!0}function BL(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function VL(t,e){var n=BL(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=BL(n)}}function IH(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?IH(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function NH(){for(var t=window,e=jw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jw(t.document)}return e}function JP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dae(t){var e=NH(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&IH(n.ownerDocument.documentElement,n)){if(r!==null&&JP(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=VL(n,a);var o=VL(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fae=Xl&&"documentMode"in document&&11>=document.documentMode,Sh=null,Nk=null,Hv=null,kk=!1;function WL(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kk||Sh==null||Sh!==jw(r)||(r=Sh,"selectionStart"in r&&JP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hv&&gy(Hv,r)||(Hv=r,r=Gw(Nk,"onSelect"),0<r.length&&(e=new YP("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Sh)))}function f1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $h={animationend:f1("Animation","AnimationEnd"),animationiteration:f1("Animation","AnimationIteration"),animationstart:f1("Animation","AnimationStart"),transitionend:f1("Transition","TransitionEnd")},cI={},kH={};Xl&&(kH=document.createElement("div").style,"AnimationEvent"in window||(delete $h.animationend.animation,delete $h.animationiteration.animation,delete $h.animationstart.animation),"TransitionEvent"in window||delete $h.transitionend.transition);function oC(t){if(cI[t])return cI[t];if(!$h[t])return t;var e=$h[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kH)return cI[t]=e[n];return t}var OH=oC("animationend"),AH=oC("animationiteration"),_H=oC("animationstart"),PH=oC("transitionend"),RH=new Map,UL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tu(t,e){RH.set(t,e),wf(e,[t])}for(var uI=0;uI<UL.length;uI++){var dI=UL[uI],hae=dI.toLowerCase(),pae=dI[0].toUpperCase()+dI.slice(1);Tu(hae,"on"+pae)}Tu(OH,"onAnimationEnd");Tu(AH,"onAnimationIteration");Tu(_H,"onAnimationStart");Tu("dblclick","onDoubleClick");Tu("focusin","onFocus");Tu("focusout","onBlur");Tu(PH,"onTransitionEnd");ap("onMouseEnter",["mouseout","mouseover"]);ap("onMouseLeave",["mouseout","mouseover"]);ap("onPointerEnter",["pointerout","pointerover"]);ap("onPointerLeave",["pointerout","pointerover"]);wf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wf("onBeforeInput",["compositionend","keypress","textInput","paste"]);wf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ev="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mae=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ev));function HL(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,hie(r,e,void 0,t),t.currentTarget=null}function DH(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;HL(i,s,c),a=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;HL(i,s,c),a=l}}}if(Bw)throw t=Ck,Bw=!1,Ck=null,t}function Nn(t,e){var n=e[Rk];n===void 0&&(n=e[Rk]=new Set);var r=t+"__bubble";n.has(r)||(FH(e,t,2,!1),n.add(r))}function fI(t,e,n){var r=0;e&&(r|=4),FH(n,t,r,e)}var h1="_reactListening"+Math.random().toString(36).slice(2);function vy(t){if(!t[h1]){t[h1]=!0,WU.forEach(function(n){n!=="selectionchange"&&(mae.has(n)||fI(n,!1,t),fI(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[h1]||(e[h1]=!0,fI("selectionchange",!1,e))}}function FH(t,e,n,r){switch(bH(e)){case 1:var i=kie;break;case 4:i=Oie;break;default:i=KP}n=i.bind(null,e,n,t),i=void 0,!$k||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function hI(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=wd(s),o===null)return;if(l=o.tag,l===5||l===6){r=a=o;continue e}s=s.parentNode}}r=r.return}aH(function(){var c=a,u=UP(n),d=[];e:{var f=RH.get(t);if(f!==void 0){var h=YP,p=t;switch(t){case"keypress":if(pw(n)===0)break e;case"keydown":case"keyup":h=Hie;break;case"focusin":p="focus",h=oI;break;case"focusout":p="blur",h=oI;break;case"beforeblur":case"afterblur":h=oI;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=PL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Pie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Kie;break;case OH:case AH:case _H:h=Fie;break;case PH:h=Yie;break;case"scroll":h=Aie;break;case"wheel":h=Qie;break;case"copy":case"cut":case"paste":h=Lie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=DL}var g=(e&4)!==0,m=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var y=c,b;y!==null;){b=y;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,v!==null&&(w=dy(y,v),w!=null&&g.push(yy(y,w,b)))),m)break;y=y.return}0<g.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==wk&&(p=n.relatedTarget||n.fromElement)&&(wd(p)||p[Yl]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?wd(p):null,p!==null&&(m=Sf(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=PL,w="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=DL,w="onPointerLeave",v="onPointerEnter",y="pointer"),m=h==null?f:Ch(h),b=p==null?f:Ch(p),f=new g(w,y+"leave",h,n,u),f.target=m,f.relatedTarget=b,w=null,wd(u)===c&&(g=new g(v,y+"enter",p,n,u),g.target=b,g.relatedTarget=m,w=g),m=w,h&&p)t:{for(g=h,v=p,y=0,b=g;b;b=Zf(b))y++;for(b=0,w=v;w;w=Zf(w))b++;for(;0<y-b;)g=Zf(g),y--;for(;0<b-y;)v=Zf(v),b--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=Zf(g),v=Zf(v)}g=null}else g=null;h!==null&&GL(d,f,h,g,!1),p!==null&&m!==null&&GL(d,m,p,g,!0)}}e:{if(f=c?Ch(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var x=aae;else if(LL(f))if(EH)x=cae;else{x=sae;var $=oae}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=lae);if(x&&(x=x(t,c))){CH(d,x,n,u);break e}$&&$(t,f,c),t==="focusout"&&($=f._wrapperState)&&$.controlled&&f.type==="number"&&gk(f,"number",f.value)}switch($=c?Ch(c):window,t){case"focusin":(LL($)||$.contentEditable==="true")&&(Sh=$,Nk=c,Hv=null);break;case"focusout":Hv=Nk=Sh=null;break;case"mousedown":kk=!0;break;case"contextmenu":case"mouseup":case"dragend":kk=!1,WL(d,n,u);break;case"selectionchange":if(fae)break;case"keydown":case"keyup":WL(d,n,u)}var C;if(QP)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else wh?SH(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(wH&&n.locale!=="ko"&&(wh||E!=="onCompositionStart"?E==="onCompositionEnd"&&wh&&(C=xH()):(Vc=u,XP="value"in Vc?Vc.value:Vc.textContent,wh=!0)),$=Gw(c,E),0<$.length&&(E=new RL(E,t,null,n,u),d.push({event:E,listeners:$}),C?E.data=C:(C=$H(n),C!==null&&(E.data=C)))),(C=eae?tae(t,n):nae(t,n))&&(c=Gw(c,"onBeforeInput"),0<c.length&&(u=new RL("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}DH(d,e)})}function yy(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gw(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=dy(t,n),a!=null&&r.unshift(yy(t,a,i)),a=dy(t,e),a!=null&&r.push(yy(t,a,i))),t=t.return}return r}function Zf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function GL(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,i?(l=dy(n,a),l!=null&&o.unshift(yy(n,l,s))):i||(l=dy(n,a),l!=null&&o.push(yy(n,l,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gae=/\r\n?/g,vae=/\u0000|\uFFFD/g;function qL(t){return(typeof t=="string"?t:""+t).replace(gae,`
`).replace(vae,"")}function p1(t,e,n){if(e=qL(e),qL(t)!==e&&n)throw Error(Oe(425))}function qw(){}var Ok=null,Ak=null;function _k(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pk=typeof setTimeout=="function"?setTimeout:void 0,yae=typeof clearTimeout=="function"?clearTimeout:void 0,KL=typeof Promise=="function"?Promise:void 0,bae=typeof queueMicrotask=="function"?queueMicrotask:typeof KL<"u"?function(t){return KL.resolve(null).then(t).catch(xae)}:Pk;function xae(t){setTimeout(function(){throw t})}function pI(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),py(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);py(e)}function tu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function XL(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var cm=Math.random().toString(36).slice(2),Xs="__reactFiber$"+cm,by="__reactProps$"+cm,Yl="__reactContainer$"+cm,Rk="__reactEvents$"+cm,wae="__reactListeners$"+cm,Sae="__reactHandles$"+cm;function wd(t){var e=t[Xs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yl]||n[Xs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=XL(t);t!==null;){if(n=t[Xs])return n;t=XL(t)}return e}t=n,n=t.parentNode}return null}function G0(t){return t=t[Xs]||t[Yl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ch(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Oe(33))}function sC(t){return t[by]||null}var Dk=[],Eh=-1;function Iu(t){return{current:t}}function _n(t){0>Eh||(t.current=Dk[Eh],Dk[Eh]=null,Eh--)}function $n(t,e){Eh++,Dk[Eh]=t.current,t.current=e}var fu={},Ui=Iu(fu),ka=Iu(!1),Ud=fu;function op(t,e){var n=t.type.contextTypes;if(!n)return fu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Oa(t){return t=t.childContextTypes,t!=null}function Kw(){_n(ka),_n(Ui)}function YL(t,e,n){if(Ui.current!==fu)throw Error(Oe(168));$n(Ui,e),$n(ka,n)}function MH(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Oe(108,oie(t)||"Unknown",i));return Xn({},n,r)}function Xw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fu,Ud=Ui.current,$n(Ui,t),$n(ka,ka.current),!0}function ZL(t,e,n){var r=t.stateNode;if(!r)throw Error(Oe(169));n?(t=MH(t,e,Ud),r.__reactInternalMemoizedMergedChildContext=t,_n(ka),_n(Ui),$n(Ui,t)):_n(ka),$n(ka,n)}var _l=null,lC=!1,mI=!1;function LH(t){_l===null?_l=[t]:_l.push(t)}function $ae(t){lC=!0,LH(t)}function Nu(){if(!mI&&_l!==null){mI=!0;var t=0,e=an;try{var n=_l;for(an=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_l=null,lC=!1}catch(i){throw _l!==null&&(_l=_l.slice(t+1)),cH(HP,Nu),i}finally{an=e,mI=!1}}return null}var Th=[],Ih=0,Yw=null,Zw=0,ko=[],Oo=0,Hd=null,Ll=1,jl="";function sd(t,e){Th[Ih++]=Zw,Th[Ih++]=Yw,Yw=t,Zw=e}function jH(t,e,n){ko[Oo++]=Ll,ko[Oo++]=jl,ko[Oo++]=Hd,Hd=t;var r=Ll;t=jl;var i=32-vs(r)-1;r&=~(1<<i),n+=1;var a=32-vs(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ll=1<<32-vs(e)+i|n<<i|r,jl=a+t}else Ll=1<<a|n<<i|r,jl=t}function eR(t){t.return!==null&&(sd(t,1),jH(t,1,0))}function tR(t){for(;t===Yw;)Yw=Th[--Ih],Th[Ih]=null,Zw=Th[--Ih],Th[Ih]=null;for(;t===Hd;)Hd=ko[--Oo],ko[Oo]=null,jl=ko[--Oo],ko[Oo]=null,Ll=ko[--Oo],ko[Oo]=null}var ao=null,eo=null,jn=!1,fs=null;function zH(t,e){var n=Po(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function QL(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ao=t,eo=tu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ao=t,eo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hd!==null?{id:Ll,overflow:jl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Po(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ao=t,eo=null,!0):!1;default:return!1}}function Fk(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mk(t){if(jn){var e=eo;if(e){var n=e;if(!QL(t,e)){if(Fk(t))throw Error(Oe(418));e=tu(n.nextSibling);var r=ao;e&&QL(t,e)?zH(r,n):(t.flags=t.flags&-4097|2,jn=!1,ao=t)}}else{if(Fk(t))throw Error(Oe(418));t.flags=t.flags&-4097|2,jn=!1,ao=t}}}function JL(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ao=t}function m1(t){if(t!==ao)return!1;if(!jn)return JL(t),jn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_k(t.type,t.memoizedProps)),e&&(e=eo)){if(Fk(t))throw BH(),Error(Oe(418));for(;e;)zH(t,e),e=tu(e.nextSibling)}if(JL(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){eo=tu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}eo=null}}else eo=ao?tu(t.stateNode.nextSibling):null;return!0}function BH(){for(var t=eo;t;)t=tu(t.nextSibling)}function sp(){eo=ao=null,jn=!1}function nR(t){fs===null?fs=[t]:fs.push(t)}var Cae=sc.ReactCurrentBatchConfig;function Yg(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Oe(309));var r=n.stateNode}if(!r)throw Error(Oe(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Oe(284));if(!n._owner)throw Error(Oe(290,t))}return t}function g1(t,e){throw t=Object.prototype.toString.call(e),Error(Oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ej(t){var e=t._init;return e(t._payload)}function VH(t){function e(v,y){if(t){var b=v.deletions;b===null?(v.deletions=[y],v.flags|=16):b.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(v,y){return v=au(v,y),v.index=0,v.sibling=null,v}function a(v,y,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<y?(v.flags|=2,y):b):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function s(v,y,b,w){return y===null||y.tag!==6?(y=SI(b,v.mode,w),y.return=v,y):(y=i(y,b),y.return=v,y)}function l(v,y,b,w){var x=b.type;return x===xh?u(v,y,b.props.children,w,b.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Dc&&ej(x)===y.type)?(w=i(y,b.props),w.ref=Yg(v,y,b),w.return=v,w):(w=ww(b.type,b.key,b.props,null,v.mode,w),w.ref=Yg(v,y,b),w.return=v,w)}function c(v,y,b,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=$I(b,v.mode,w),y.return=v,y):(y=i(y,b.children||[]),y.return=v,y)}function u(v,y,b,w,x){return y===null||y.tag!==7?(y=Rd(b,v.mode,w,x),y.return=v,y):(y=i(y,b),y.return=v,y)}function d(v,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=SI(""+y,v.mode,b),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case a1:return b=ww(y.type,y.key,y.props,null,v.mode,b),b.ref=Yg(v,null,y),b.return=v,b;case bh:return y=$I(y,v.mode,b),y.return=v,y;case Dc:var w=y._init;return d(v,w(y._payload),b)}if($v(y)||Hg(y))return y=Rd(y,v.mode,b,null),y.return=v,y;g1(v,y)}return null}function f(v,y,b,w){var x=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:s(v,y,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case a1:return b.key===x?l(v,y,b,w):null;case bh:return b.key===x?c(v,y,b,w):null;case Dc:return x=b._init,f(v,y,x(b._payload),w)}if($v(b)||Hg(b))return x!==null?null:u(v,y,b,w,null);g1(v,b)}return null}function h(v,y,b,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(b)||null,s(y,v,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case a1:return v=v.get(w.key===null?b:w.key)||null,l(y,v,w,x);case bh:return v=v.get(w.key===null?b:w.key)||null,c(y,v,w,x);case Dc:var $=w._init;return h(v,y,b,$(w._payload),x)}if($v(w)||Hg(w))return v=v.get(b)||null,u(y,v,w,x,null);g1(y,w)}return null}function p(v,y,b,w){for(var x=null,$=null,C=y,E=y=0,I=null;C!==null&&E<b.length;E++){C.index>E?(I=C,C=null):I=C.sibling;var T=f(v,C,b[E],w);if(T===null){C===null&&(C=I);break}t&&C&&T.alternate===null&&e(v,C),y=a(T,y,E),$===null?x=T:$.sibling=T,$=T,C=I}if(E===b.length)return n(v,C),jn&&sd(v,E),x;if(C===null){for(;E<b.length;E++)C=d(v,b[E],w),C!==null&&(y=a(C,y,E),$===null?x=C:$.sibling=C,$=C);return jn&&sd(v,E),x}for(C=r(v,C);E<b.length;E++)I=h(C,v,E,b[E],w),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?E:I.key),y=a(I,y,E),$===null?x=I:$.sibling=I,$=I);return t&&C.forEach(function(N){return e(v,N)}),jn&&sd(v,E),x}function g(v,y,b,w){var x=Hg(b);if(typeof x!="function")throw Error(Oe(150));if(b=x.call(b),b==null)throw Error(Oe(151));for(var $=x=null,C=y,E=y=0,I=null,T=b.next();C!==null&&!T.done;E++,T=b.next()){C.index>E?(I=C,C=null):I=C.sibling;var N=f(v,C,T.value,w);if(N===null){C===null&&(C=I);break}t&&C&&N.alternate===null&&e(v,C),y=a(N,y,E),$===null?x=N:$.sibling=N,$=N,C=I}if(T.done)return n(v,C),jn&&sd(v,E),x;if(C===null){for(;!T.done;E++,T=b.next())T=d(v,T.value,w),T!==null&&(y=a(T,y,E),$===null?x=T:$.sibling=T,$=T);return jn&&sd(v,E),x}for(C=r(v,C);!T.done;E++,T=b.next())T=h(C,v,E,T.value,w),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?E:T.key),y=a(T,y,E),$===null?x=T:$.sibling=T,$=T);return t&&C.forEach(function(k){return e(v,k)}),jn&&sd(v,E),x}function m(v,y,b,w){if(typeof b=="object"&&b!==null&&b.type===xh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case a1:e:{for(var x=b.key,$=y;$!==null;){if($.key===x){if(x=b.type,x===xh){if($.tag===7){n(v,$.sibling),y=i($,b.props.children),y.return=v,v=y;break e}}else if($.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Dc&&ej(x)===$.type){n(v,$.sibling),y=i($,b.props),y.ref=Yg(v,$,b),y.return=v,v=y;break e}n(v,$);break}else e(v,$);$=$.sibling}b.type===xh?(y=Rd(b.props.children,v.mode,w,b.key),y.return=v,v=y):(w=ww(b.type,b.key,b.props,null,v.mode,w),w.ref=Yg(v,y,b),w.return=v,v=w)}return o(v);case bh:e:{for($=b.key;y!==null;){if(y.key===$)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(v,y.sibling),y=i(y,b.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=$I(b,v.mode,w),y.return=v,v=y}return o(v);case Dc:return $=b._init,m(v,y,$(b._payload),w)}if($v(b))return p(v,y,b,w);if(Hg(b))return g(v,y,b,w);g1(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(v,y.sibling),y=i(y,b),y.return=v,v=y):(n(v,y),y=SI(b,v.mode,w),y.return=v,v=y),o(v)):n(v,y)}return m}var lp=VH(!0),WH=VH(!1),Qw=Iu(null),Jw=null,Nh=null,rR=null;function iR(){rR=Nh=Jw=null}function aR(t){var e=Qw.current;_n(Qw),t._currentValue=e}function Lk(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hh(t,e){Jw=t,rR=Nh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ta=!0),t.firstContext=null)}function Wo(t){var e=t._currentValue;if(rR!==t)if(t={context:t,memoizedValue:e,next:null},Nh===null){if(Jw===null)throw Error(Oe(308));Nh=t,Jw.dependencies={lanes:0,firstContext:t}}else Nh=Nh.next=t;return e}var Sd=null;function oR(t){Sd===null?Sd=[t]:Sd.push(t)}function UH(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,oR(e)):(n.next=i.next,i.next=n),e.interleaved=n,Zl(t,r)}function Zl(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fc=!1;function sR(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HH(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ht&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zl(t,n)}return i=r.interleaved,i===null?(e.next=e,oR(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zl(t,n)}function mw(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,GP(t,n)}}function tj(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function eS(t,e,n,r){var i=t.updateQueue;Fc=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,o===null?a=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;o=0,u=c=l=null,s=a;do{var f=s.lane,h=s.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=t,g=s;switch(f=e,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Xn({},d,f);break e;case 2:Fc=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;f=s,s=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);qd|=o,t.lanes=o,t.memoizedState=d}}function nj(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Oe(191,i));i.call(r)}}}var q0={},nl=Iu(q0),xy=Iu(q0),wy=Iu(q0);function $d(t){if(t===q0)throw Error(Oe(174));return t}function lR(t,e){switch($n(wy,e),$n(xy,t),$n(nl,q0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yk(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yk(e,t)}_n(nl),$n(nl,e)}function cp(){_n(nl),_n(xy),_n(wy)}function GH(t){$d(wy.current);var e=$d(nl.current),n=yk(e,t.type);e!==n&&($n(xy,t),$n(nl,n))}function cR(t){xy.current===t&&(_n(nl),_n(xy))}var Gn=Iu(0);function tS(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gI=[];function uR(){for(var t=0;t<gI.length;t++)gI[t]._workInProgressVersionPrimary=null;gI.length=0}var gw=sc.ReactCurrentDispatcher,vI=sc.ReactCurrentBatchConfig,Gd=0,Kn=null,Dr=null,ri=null,nS=!1,Gv=!1,Sy=0,Eae=0;function Ai(){throw Error(Oe(321))}function dR(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ts(t[n],e[n]))return!1;return!0}function fR(t,e,n,r,i,a){if(Gd=a,Kn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gw.current=t===null||t.memoizedState===null?kae:Oae,t=n(r,i),Gv){a=0;do{if(Gv=!1,Sy=0,25<=a)throw Error(Oe(301));a+=1,ri=Dr=null,e.updateQueue=null,gw.current=Aae,t=n(r,i)}while(Gv)}if(gw.current=rS,e=Dr!==null&&Dr.next!==null,Gd=0,ri=Dr=Kn=null,nS=!1,e)throw Error(Oe(300));return t}function hR(){var t=Sy!==0;return Sy=0,t}function Us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ri===null?Kn.memoizedState=ri=t:ri=ri.next=t,ri}function Uo(){if(Dr===null){var t=Kn.alternate;t=t!==null?t.memoizedState:null}else t=Dr.next;var e=ri===null?Kn.memoizedState:ri.next;if(e!==null)ri=e,Dr=t;else{if(t===null)throw Error(Oe(310));Dr=t,t={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},ri===null?Kn.memoizedState=ri=t:ri=ri.next=t}return ri}function $y(t,e){return typeof e=="function"?e(t):e}function yI(t){var e=Uo(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=Dr,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,l=null,c=a;do{var u=c.lane;if((Gd&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=d,o=r):l=l.next=d,Kn.lanes|=u,qd|=u}c=c.next}while(c!==null&&c!==a);l===null?o=r:l.next=s,Ts(r,e.memoizedState)||(Ta=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Kn.lanes|=a,qd|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bI(t){var e=Uo(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Ts(a,e.memoizedState)||(Ta=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function qH(){}function KH(t,e){var n=Kn,r=Uo(),i=e(),a=!Ts(r.memoizedState,i);if(a&&(r.memoizedState=i,Ta=!0),r=r.queue,pR(ZH.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||ri!==null&&ri.memoizedState.tag&1){if(n.flags|=2048,Cy(9,YH.bind(null,n,r,i,e),void 0,null),si===null)throw Error(Oe(349));Gd&30||XH(n,e,i)}return i}function XH(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Kn.updateQueue,e===null?(e={lastEffect:null,stores:null},Kn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function YH(t,e,n,r){e.value=n,e.getSnapshot=r,QH(e)&&JH(t)}function ZH(t,e,n){return n(function(){QH(e)&&JH(t)})}function QH(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ts(t,n)}catch{return!0}}function JH(t){var e=Zl(t,1);e!==null&&ys(e,t,1,-1)}function rj(t){var e=Us();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$y,lastRenderedState:t},e.queue=t,t=t.dispatch=Nae.bind(null,Kn,t),[e.memoizedState,t]}function Cy(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Kn.updateQueue,e===null?(e={lastEffect:null,stores:null},Kn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function e8(){return Uo().memoizedState}function vw(t,e,n,r){var i=Us();Kn.flags|=t,i.memoizedState=Cy(1|e,n,void 0,r===void 0?null:r)}function cC(t,e,n,r){var i=Uo();r=r===void 0?null:r;var a=void 0;if(Dr!==null){var o=Dr.memoizedState;if(a=o.destroy,r!==null&&dR(r,o.deps)){i.memoizedState=Cy(e,n,a,r);return}}Kn.flags|=t,i.memoizedState=Cy(1|e,n,a,r)}function ij(t,e){return vw(8390656,8,t,e)}function pR(t,e){return cC(2048,8,t,e)}function t8(t,e){return cC(4,2,t,e)}function n8(t,e){return cC(4,4,t,e)}function r8(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function i8(t,e,n){return n=n!=null?n.concat([t]):null,cC(4,4,r8.bind(null,e,t),n)}function mR(){}function a8(t,e){var n=Uo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dR(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function o8(t,e){var n=Uo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dR(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function s8(t,e,n){return Gd&21?(Ts(n,e)||(n=fH(),Kn.lanes|=n,qd|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ta=!0),t.memoizedState=n)}function Tae(t,e){var n=an;an=n!==0&&4>n?n:4,t(!0);var r=vI.transition;vI.transition={};try{t(!1),e()}finally{an=n,vI.transition=r}}function l8(){return Uo().memoizedState}function Iae(t,e,n){var r=iu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},c8(t))u8(e,n);else if(n=UH(t,e,n,r),n!==null){var i=sa();ys(n,t,r,i),d8(n,e,r)}}function Nae(t,e,n){var r=iu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(c8(t))u8(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Ts(s,o)){var l=e.interleaved;l===null?(i.next=i,oR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=UH(t,e,i,r),n!==null&&(i=sa(),ys(n,t,r,i),d8(n,e,r))}}function c8(t){var e=t.alternate;return t===Kn||e!==null&&e===Kn}function u8(t,e){Gv=nS=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function d8(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,GP(t,n)}}var rS={readContext:Wo,useCallback:Ai,useContext:Ai,useEffect:Ai,useImperativeHandle:Ai,useInsertionEffect:Ai,useLayoutEffect:Ai,useMemo:Ai,useReducer:Ai,useRef:Ai,useState:Ai,useDebugValue:Ai,useDeferredValue:Ai,useTransition:Ai,useMutableSource:Ai,useSyncExternalStore:Ai,useId:Ai,unstable_isNewReconciler:!1},kae={readContext:Wo,useCallback:function(t,e){return Us().memoizedState=[t,e===void 0?null:e],t},useContext:Wo,useEffect:ij,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vw(4194308,4,r8.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vw(4194308,4,t,e)},useInsertionEffect:function(t,e){return vw(4,2,t,e)},useMemo:function(t,e){var n=Us();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Us();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Iae.bind(null,Kn,t),[r.memoizedState,t]},useRef:function(t){var e=Us();return t={current:t},e.memoizedState=t},useState:rj,useDebugValue:mR,useDeferredValue:function(t){return Us().memoizedState=t},useTransition:function(){var t=rj(!1),e=t[0];return t=Tae.bind(null,t[1]),Us().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Kn,i=Us();if(jn){if(n===void 0)throw Error(Oe(407));n=n()}else{if(n=e(),si===null)throw Error(Oe(349));Gd&30||XH(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,ij(ZH.bind(null,r,a,t),[t]),r.flags|=2048,Cy(9,YH.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Us(),e=si.identifierPrefix;if(jn){var n=jl,r=Ll;n=(r&~(1<<32-vs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sy++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Eae++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Oae={readContext:Wo,useCallback:a8,useContext:Wo,useEffect:pR,useImperativeHandle:i8,useInsertionEffect:t8,useLayoutEffect:n8,useMemo:o8,useReducer:yI,useRef:e8,useState:function(){return yI($y)},useDebugValue:mR,useDeferredValue:function(t){var e=Uo();return s8(e,Dr.memoizedState,t)},useTransition:function(){var t=yI($y)[0],e=Uo().memoizedState;return[t,e]},useMutableSource:qH,useSyncExternalStore:KH,useId:l8,unstable_isNewReconciler:!1},Aae={readContext:Wo,useCallback:a8,useContext:Wo,useEffect:pR,useImperativeHandle:i8,useInsertionEffect:t8,useLayoutEffect:n8,useMemo:o8,useReducer:bI,useRef:e8,useState:function(){return bI($y)},useDebugValue:mR,useDeferredValue:function(t){var e=Uo();return Dr===null?e.memoizedState=t:s8(e,Dr.memoizedState,t)},useTransition:function(){var t=bI($y)[0],e=Uo().memoizedState;return[t,e]},useMutableSource:qH,useSyncExternalStore:KH,useId:l8,unstable_isNewReconciler:!1};function as(t,e){if(t&&t.defaultProps){e=Xn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jk(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uC={isMounted:function(t){return(t=t._reactInternals)?Sf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=sa(),i=iu(t),a=Wl(r,i);a.payload=e,n!=null&&(a.callback=n),e=nu(t,a,i),e!==null&&(ys(e,t,i,r),mw(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=sa(),i=iu(t),a=Wl(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=nu(t,a,i),e!==null&&(ys(e,t,i,r),mw(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sa(),r=iu(t),i=Wl(n,r);i.tag=2,e!=null&&(i.callback=e),e=nu(t,i,r),e!==null&&(ys(e,t,r,n),mw(e,t,r))}};function aj(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!gy(n,r)||!gy(i,a):!0}function f8(t,e,n){var r=!1,i=fu,a=e.contextType;return typeof a=="object"&&a!==null?a=Wo(a):(i=Oa(e)?Ud:Ui.current,r=e.contextTypes,a=(r=r!=null)?op(t,i):fu),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uC,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function oj(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uC.enqueueReplaceState(e,e.state,null)}function zk(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},sR(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Wo(a):(a=Oa(e)?Ud:Ui.current,i.context=op(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(jk(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&uC.enqueueReplaceState(i,i.state,null),eS(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function up(t,e){try{var n="",r=e;do n+=aie(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function xI(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bk(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _ae=typeof WeakMap=="function"?WeakMap:Map;function h8(t,e,n){n=Wl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){aS||(aS=!0,Zk=r),Bk(t,e)},n}function p8(t,e,n){n=Wl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bk(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Bk(t,e),typeof r!="function"&&(ru===null?ru=new Set([this]):ru.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sj(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _ae;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Gae.bind(null,t,e,n),e.then(t,t))}function lj(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cj(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wl(-1,1),e.tag=2,nu(n,e,1))),n.lanes|=1),t)}var Pae=sc.ReactCurrentOwner,Ta=!1;function ta(t,e,n,r){e.child=t===null?WH(e,null,n,r):lp(e,t.child,n,r)}function uj(t,e,n,r,i){n=n.render;var a=e.ref;return Hh(e,i),r=fR(t,e,n,r,a,i),n=hR(),t!==null&&!Ta?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ql(t,e,i)):(jn&&n&&eR(e),e.flags|=1,ta(t,e,r,i),e.child)}function dj(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!$R(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,m8(t,e,a,r,i)):(t=ww(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:gy,n(o,r)&&t.ref===e.ref)return Ql(t,e,i)}return e.flags|=1,t=au(a,r),t.ref=e.ref,t.return=e,e.child=t}function m8(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(gy(a,r)&&t.ref===e.ref)if(Ta=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(Ta=!0);else return e.lanes=t.lanes,Ql(t,e,i)}return Vk(t,e,n,r,i)}function g8(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(Oh,Xa),Xa|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$n(Oh,Xa),Xa|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,$n(Oh,Xa),Xa|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,$n(Oh,Xa),Xa|=r;return ta(t,e,i,n),e.child}function v8(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vk(t,e,n,r,i){var a=Oa(n)?Ud:Ui.current;return a=op(e,a),Hh(e,i),n=fR(t,e,n,r,a,i),r=hR(),t!==null&&!Ta?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ql(t,e,i)):(jn&&r&&eR(e),e.flags|=1,ta(t,e,n,i),e.child)}function fj(t,e,n,r,i){if(Oa(n)){var a=!0;Xw(e)}else a=!1;if(Hh(e,i),e.stateNode===null)yw(t,e),f8(e,n,r),zk(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Wo(c):(c=Oa(n)?Ud:Ui.current,c=op(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==c)&&oj(e,o,r,c),Fc=!1;var f=e.memoizedState;o.state=f,eS(e,r,o,i),l=e.memoizedState,s!==r||f!==l||ka.current||Fc?(typeof u=="function"&&(jk(e,n,u,r),l=e.memoizedState),(s=Fc||aj(e,n,s,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,HH(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:as(e.type,s),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Wo(l):(l=Oa(n)?Ud:Ui.current,l=op(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==d||f!==l)&&oj(e,o,r,l),Fc=!1,f=e.memoizedState,o.state=f,eS(e,r,o,i);var p=e.memoizedState;s!==d||f!==p||ka.current||Fc?(typeof h=="function"&&(jk(e,n,h,r),p=e.memoizedState),(c=Fc||aj(e,n,c,r,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Wk(t,e,n,r,a,i)}function Wk(t,e,n,r,i,a){v8(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ZL(e,n,!1),Ql(t,e,a);r=e.stateNode,Pae.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=lp(e,t.child,null,a),e.child=lp(e,null,s,a)):ta(t,e,s,a),e.memoizedState=r.state,i&&ZL(e,n,!0),e.child}function y8(t){var e=t.stateNode;e.pendingContext?YL(t,e.pendingContext,e.pendingContext!==e.context):e.context&&YL(t,e.context,!1),lR(t,e.containerInfo)}function hj(t,e,n,r,i){return sp(),nR(i),e.flags|=256,ta(t,e,n,r),e.child}var Uk={dehydrated:null,treeContext:null,retryLane:0};function Hk(t){return{baseLanes:t,cachePool:null,transitions:null}}function b8(t,e,n){var r=e.pendingProps,i=Gn.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),$n(Gn,i&1),t===null)return Mk(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=hC(o,r,0,null),t=Rd(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Hk(n),e.memoizedState=Uk,t):gR(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Rae(t,e,o,r,s,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=au(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=au(s,a):(a=Rd(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?Hk(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=Uk,r}return a=t.child,t=a.sibling,r=au(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gR(t,e){return e=hC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function v1(t,e,n,r){return r!==null&&nR(r),lp(e,t.child,null,n),t=gR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Rae(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=xI(Error(Oe(422))),v1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=hC({mode:"visible",children:r.children},i,0,null),a=Rd(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&lp(e,t.child,null,o),e.child.memoizedState=Hk(o),e.memoizedState=Uk,a);if(!(e.mode&1))return v1(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(Oe(419)),r=xI(a,r,void 0),v1(t,e,o,r)}if(s=(o&t.childLanes)!==0,Ta||s){if(r=si,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Zl(t,i),ys(r,t,i,-1))}return SR(),r=xI(Error(Oe(421))),v1(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qae.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,eo=tu(i.nextSibling),ao=e,jn=!0,fs=null,t!==null&&(ko[Oo++]=Ll,ko[Oo++]=jl,ko[Oo++]=Hd,Ll=t.id,jl=t.overflow,Hd=e),e=gR(e,r.children),e.flags|=4096,e)}function pj(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Lk(t.return,e,n)}function wI(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function x8(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(ta(t,e,r.children,n),r=Gn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pj(t,n,e);else if(t.tag===19)pj(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($n(Gn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&tS(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),wI(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&tS(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}wI(e,!0,n,null,a);break;case"together":wI(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yw(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ql(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qd|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Oe(153));if(e.child!==null){for(t=e.child,n=au(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=au(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Dae(t,e,n){switch(e.tag){case 3:y8(e),sp();break;case 5:GH(e);break;case 1:Oa(e.type)&&Xw(e);break;case 4:lR(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;$n(Qw,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($n(Gn,Gn.current&1),e.flags|=128,null):n&e.child.childLanes?b8(t,e,n):($n(Gn,Gn.current&1),t=Ql(t,e,n),t!==null?t.sibling:null);$n(Gn,Gn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return x8(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$n(Gn,Gn.current),r)break;return null;case 22:case 23:return e.lanes=0,g8(t,e,n)}return Ql(t,e,n)}var w8,Gk,S8,$8;w8=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gk=function(){};S8=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,$d(nl.current);var a=null;switch(n){case"input":i=pk(t,i),r=pk(t,r),a=[];break;case"select":i=Xn({},i,{value:void 0}),r=Xn({},r,{value:void 0}),a=[];break;case"textarea":i=vk(t,i),r=vk(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qw)}bk(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(cy.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(s=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(cy.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Nn("scroll",t),a||s===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};$8=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zg(t,e){if(!jn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _i(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fae(t,e,n){var r=e.pendingProps;switch(tR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _i(e),null;case 1:return Oa(e.type)&&Kw(),_i(e),null;case 3:return r=e.stateNode,cp(),_n(ka),_n(Ui),uR(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(m1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fs!==null&&(eO(fs),fs=null))),Gk(t,e),_i(e),null;case 5:cR(e);var i=$d(wy.current);if(n=e.type,t!==null&&e.stateNode!=null)S8(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Oe(166));return _i(e),null}if(t=$d(nl.current),m1(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Xs]=e,r[by]=a,t=(e.mode&1)!==0,n){case"dialog":Nn("cancel",r),Nn("close",r);break;case"iframe":case"object":case"embed":Nn("load",r);break;case"video":case"audio":for(i=0;i<Ev.length;i++)Nn(Ev[i],r);break;case"source":Nn("error",r);break;case"img":case"image":case"link":Nn("error",r),Nn("load",r);break;case"details":Nn("toggle",r);break;case"input":$L(r,a),Nn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Nn("invalid",r);break;case"textarea":EL(r,a),Nn("invalid",r)}bk(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&p1(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&p1(r.textContent,s,t),i=["children",""+s]):cy.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Nn("scroll",r)}switch(n){case"input":o1(r),CL(r,a,!0);break;case"textarea":o1(r),TL(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=qw)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZU(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xs]=e,t[by]=r,w8(t,e,!1,!1),e.stateNode=t;e:{switch(o=xk(n,r),n){case"dialog":Nn("cancel",t),Nn("close",t),i=r;break;case"iframe":case"object":case"embed":Nn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ev.length;i++)Nn(Ev[i],t);i=r;break;case"source":Nn("error",t),i=r;break;case"img":case"image":case"link":Nn("error",t),Nn("load",t),i=r;break;case"details":Nn("toggle",t),i=r;break;case"input":$L(t,r),i=pk(t,r),Nn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xn({},r,{value:void 0}),Nn("invalid",t);break;case"textarea":EL(t,r),i=vk(t,r),Nn("invalid",t);break;default:i=r}bk(n,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?eH(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&QU(t,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&uy(t,l):typeof l=="number"&&uy(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(cy.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Nn("scroll",t):l!=null&&zP(t,a,l,o))}switch(n){case"input":o1(t),CL(t,r,!1);break;case"textarea":o1(t),TL(t);break;case"option":r.value!=null&&t.setAttribute("value",""+du(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Bh(t,!!r.multiple,a,!1):r.defaultValue!=null&&Bh(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=qw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _i(e),null;case 6:if(t&&e.stateNode!=null)$8(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Oe(166));if(n=$d(wy.current),$d(nl.current),m1(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xs]=e,(a=r.nodeValue!==n)&&(t=ao,t!==null))switch(t.tag){case 3:p1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&p1(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xs]=e,e.stateNode=r}return _i(e),null;case 13:if(_n(Gn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jn&&eo!==null&&e.mode&1&&!(e.flags&128))BH(),sp(),e.flags|=98560,a=!1;else if(a=m1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Oe(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Oe(317));a[Xs]=e}else sp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_i(e),a=!1}else fs!==null&&(eO(fs),fs=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Gn.current&1?jr===0&&(jr=3):SR())),e.updateQueue!==null&&(e.flags|=4),_i(e),null);case 4:return cp(),Gk(t,e),t===null&&vy(e.stateNode.containerInfo),_i(e),null;case 10:return aR(e.type._context),_i(e),null;case 17:return Oa(e.type)&&Kw(),_i(e),null;case 19:if(_n(Gn),a=e.memoizedState,a===null)return _i(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Zg(a,!1);else{if(jr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=tS(t),o!==null){for(e.flags|=128,Zg(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $n(Gn,Gn.current&1|2),e.child}t=t.sibling}a.tail!==null&&dr()>dp&&(e.flags|=128,r=!0,Zg(a,!1),e.lanes=4194304)}else{if(!r)if(t=tS(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zg(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!jn)return _i(e),null}else 2*dr()-a.renderingStartTime>dp&&n!==1073741824&&(e.flags|=128,r=!0,Zg(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=dr(),e.sibling=null,n=Gn.current,$n(Gn,r?n&1|2:n&1),e):(_i(e),null);case 22:case 23:return wR(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xa&1073741824&&(_i(e),e.subtreeFlags&6&&(e.flags|=8192)):_i(e),null;case 24:return null;case 25:return null}throw Error(Oe(156,e.tag))}function Mae(t,e){switch(tR(e),e.tag){case 1:return Oa(e.type)&&Kw(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cp(),_n(ka),_n(Ui),uR(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cR(e),null;case 13:if(_n(Gn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Oe(340));sp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _n(Gn),null;case 4:return cp(),null;case 10:return aR(e.type._context),null;case 22:case 23:return wR(),null;case 24:return null;default:return null}}var y1=!1,Mi=!1,Lae=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function kh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Jn(t,e,r)}else n.current=null}function qk(t,e,n){try{n()}catch(r){Jn(t,e,r)}}var mj=!1;function jae(t,e){if(Ok=Uw,t=NH(),JP(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(s=o+i),d!==a||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(s=o),f===a&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ak={focusedElem:t,selectionRange:n},Uw=!1,Ge=e;Ge!==null;)if(e=Ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ge=t;else for(;Ge!==null;){e=Ge;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,m=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:as(e.type,g),m);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(w){Jn(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Ge=t;break}Ge=e.return}return p=mj,mj=!1,p}function qv(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&qk(e,n,a)}i=i.next}while(i!==r)}}function dC(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kk(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function C8(t){var e=t.alternate;e!==null&&(t.alternate=null,C8(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xs],delete e[by],delete e[Rk],delete e[wae],delete e[Sae])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function E8(t){return t.tag===5||t.tag===3||t.tag===4}function gj(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||E8(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qw));else if(r!==4&&(t=t.child,t!==null))for(Xk(t,e,n),t=t.sibling;t!==null;)Xk(t,e,n),t=t.sibling}function Yk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yk(t,e,n),t=t.sibling;t!==null;)Yk(t,e,n),t=t.sibling}var wi=null,ss=!1;function Oc(t,e,n){for(n=n.child;n!==null;)T8(t,e,n),n=n.sibling}function T8(t,e,n){if(tl&&typeof tl.onCommitFiberUnmount=="function")try{tl.onCommitFiberUnmount(rC,n)}catch{}switch(n.tag){case 5:Mi||kh(n,e);case 6:var r=wi,i=ss;wi=null,Oc(t,e,n),wi=r,ss=i,wi!==null&&(ss?(t=wi,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wi.removeChild(n.stateNode));break;case 18:wi!==null&&(ss?(t=wi,n=n.stateNode,t.nodeType===8?pI(t.parentNode,n):t.nodeType===1&&pI(t,n),py(t)):pI(wi,n.stateNode));break;case 4:r=wi,i=ss,wi=n.stateNode.containerInfo,ss=!0,Oc(t,e,n),wi=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Mi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&qk(n,e,o),i=i.next}while(i!==r)}Oc(t,e,n);break;case 1:if(!Mi&&(kh(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Jn(n,e,s)}Oc(t,e,n);break;case 21:Oc(t,e,n);break;case 22:n.mode&1?(Mi=(r=Mi)||n.memoizedState!==null,Oc(t,e,n),Mi=r):Oc(t,e,n);break;default:Oc(t,e,n)}}function vj(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Lae),e.forEach(function(r){var i=Kae.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function es(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:wi=s.stateNode,ss=!1;break e;case 3:wi=s.stateNode.containerInfo,ss=!0;break e;case 4:wi=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(wi===null)throw Error(Oe(160));T8(a,o,i),wi=null,ss=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Jn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)I8(e,t),e=e.sibling}function I8(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(es(e,t),Bs(t),r&4){try{qv(3,t,t.return),dC(3,t)}catch(g){Jn(t,t.return,g)}try{qv(5,t,t.return)}catch(g){Jn(t,t.return,g)}}break;case 1:es(e,t),Bs(t),r&512&&n!==null&&kh(n,n.return);break;case 5:if(es(e,t),Bs(t),r&512&&n!==null&&kh(n,n.return),t.flags&32){var i=t.stateNode;try{uy(i,"")}catch(g){Jn(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&XU(i,a),xk(s,o);var c=xk(s,a);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?eH(i,d):u==="dangerouslySetInnerHTML"?QU(i,d):u==="children"?uy(i,d):zP(i,u,d,c)}switch(s){case"input":mk(i,a);break;case"textarea":YU(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?Bh(i,!!a.multiple,h,!1):f!==!!a.multiple&&(a.defaultValue!=null?Bh(i,!!a.multiple,a.defaultValue,!0):Bh(i,!!a.multiple,a.multiple?[]:"",!1))}i[by]=a}catch(g){Jn(t,t.return,g)}}break;case 6:if(es(e,t),Bs(t),r&4){if(t.stateNode===null)throw Error(Oe(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(g){Jn(t,t.return,g)}}break;case 3:if(es(e,t),Bs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{py(e.containerInfo)}catch(g){Jn(t,t.return,g)}break;case 4:es(e,t),Bs(t);break;case 13:es(e,t),Bs(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(bR=dr())),r&4&&vj(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Mi=(c=Mi)||u,es(e,t),Mi=c):es(e,t),Bs(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ge=t,u=t.child;u!==null;){for(d=Ge=u;Ge!==null;){switch(f=Ge,h=f.child,f.tag){case 0:case 11:case 14:case 15:qv(4,f,f.return);break;case 1:kh(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Jn(r,n,g)}}break;case 5:kh(f,f.return);break;case 22:if(f.memoizedState!==null){bj(d);continue}}h!==null?(h.return=f,Ge=h):bj(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=JU("display",o))}catch(g){Jn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Jn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:es(e,t),Bs(t),r&4&&vj(t);break;case 21:break;default:es(e,t),Bs(t)}}function Bs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(E8(n)){var r=n;break e}n=n.return}throw Error(Oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(uy(i,""),r.flags&=-33);var a=gj(t);Yk(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=gj(t);Xk(t,s,o);break;default:throw Error(Oe(161))}}catch(l){Jn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zae(t,e,n){Ge=t,N8(t)}function N8(t,e,n){for(var r=(t.mode&1)!==0;Ge!==null;){var i=Ge,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||y1;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||Mi;s=y1;var c=Mi;if(y1=o,(Mi=l)&&!c)for(Ge=i;Ge!==null;)o=Ge,l=o.child,o.tag===22&&o.memoizedState!==null?xj(i):l!==null?(l.return=o,Ge=l):xj(i);for(;a!==null;)Ge=a,N8(a),a=a.sibling;Ge=i,y1=s,Mi=c}yj(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ge=a):yj(t)}}function yj(t){for(;Ge!==null;){var e=Ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mi||dC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Mi)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:as(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&nj(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nj(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&py(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}Mi||e.flags&512&&Kk(e)}catch(f){Jn(e,e.return,f)}}if(e===t){Ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ge=n;break}Ge=e.return}}function bj(t){for(;Ge!==null;){var e=Ge;if(e===t){Ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ge=n;break}Ge=e.return}}function xj(t){for(;Ge!==null;){var e=Ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dC(4,e)}catch(l){Jn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Jn(e,i,l)}}var a=e.return;try{Kk(e)}catch(l){Jn(e,a,l)}break;case 5:var o=e.return;try{Kk(e)}catch(l){Jn(e,o,l)}}}catch(l){Jn(e,e.return,l)}if(e===t){Ge=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Ge=s;break}Ge=e.return}}var Bae=Math.ceil,iS=sc.ReactCurrentDispatcher,vR=sc.ReactCurrentOwner,zo=sc.ReactCurrentBatchConfig,Ht=0,si=null,$r=null,Ci=0,Xa=0,Oh=Iu(0),jr=0,Ey=null,qd=0,fC=0,yR=0,Kv=null,Ca=null,bR=0,dp=1/0,Ol=null,aS=!1,Zk=null,ru=null,b1=!1,Wc=null,oS=0,Xv=0,Qk=null,bw=-1,xw=0;function sa(){return Ht&6?dr():bw!==-1?bw:bw=dr()}function iu(t){return t.mode&1?Ht&2&&Ci!==0?Ci&-Ci:Cae.transition!==null?(xw===0&&(xw=fH()),xw):(t=an,t!==0||(t=window.event,t=t===void 0?16:bH(t.type)),t):1}function ys(t,e,n,r){if(50<Xv)throw Xv=0,Qk=null,Error(Oe(185));U0(t,n,r),(!(Ht&2)||t!==si)&&(t===si&&(!(Ht&2)&&(fC|=n),jr===4&&zc(t,Ci)),Aa(t,r),n===1&&Ht===0&&!(e.mode&1)&&(dp=dr()+500,lC&&Nu()))}function Aa(t,e){var n=t.callbackNode;Cie(t,e);var r=Ww(t,t===si?Ci:0);if(r===0)n!==null&&kL(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kL(n),e===1)t.tag===0?$ae(wj.bind(null,t)):LH(wj.bind(null,t)),bae(function(){!(Ht&6)&&Nu()}),n=null;else{switch(hH(r)){case 1:n=HP;break;case 4:n=uH;break;case 16:n=Vw;break;case 536870912:n=dH;break;default:n=Vw}n=F8(n,k8.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function k8(t,e){if(bw=-1,xw=0,Ht&6)throw Error(Oe(327));var n=t.callbackNode;if(Gh()&&t.callbackNode!==n)return null;var r=Ww(t,t===si?Ci:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sS(t,r);else{e=r;var i=Ht;Ht|=2;var a=A8();(si!==t||Ci!==e)&&(Ol=null,dp=dr()+500,Pd(t,e));do try{Uae();break}catch(s){O8(t,s)}while(!0);iR(),iS.current=a,Ht=i,$r!==null?e=0:(si=null,Ci=0,e=jr)}if(e!==0){if(e===2&&(i=Ek(t),i!==0&&(r=i,e=Jk(t,i))),e===1)throw n=Ey,Pd(t,0),zc(t,r),Aa(t,dr()),n;if(e===6)zc(t,r);else{if(i=t.current.alternate,!(r&30)&&!Vae(i)&&(e=sS(t,r),e===2&&(a=Ek(t),a!==0&&(r=a,e=Jk(t,a))),e===1))throw n=Ey,Pd(t,0),zc(t,r),Aa(t,dr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Oe(345));case 2:ld(t,Ca,Ol);break;case 3:if(zc(t,r),(r&130023424)===r&&(e=bR+500-dr(),10<e)){if(Ww(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){sa(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Pk(ld.bind(null,t,Ca,Ol),e);break}ld(t,Ca,Ol);break;case 4:if(zc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-vs(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=dr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Bae(r/1960))-r,10<r){t.timeoutHandle=Pk(ld.bind(null,t,Ca,Ol),r);break}ld(t,Ca,Ol);break;case 5:ld(t,Ca,Ol);break;default:throw Error(Oe(329))}}}return Aa(t,dr()),t.callbackNode===n?k8.bind(null,t):null}function Jk(t,e){var n=Kv;return t.current.memoizedState.isDehydrated&&(Pd(t,e).flags|=256),t=sS(t,e),t!==2&&(e=Ca,Ca=n,e!==null&&eO(e)),t}function eO(t){Ca===null?Ca=t:Ca.push.apply(Ca,t)}function Vae(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Ts(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zc(t,e){for(e&=~yR,e&=~fC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vs(e),r=1<<n;t[n]=-1,e&=~r}}function wj(t){if(Ht&6)throw Error(Oe(327));Gh();var e=Ww(t,0);if(!(e&1))return Aa(t,dr()),null;var n=sS(t,e);if(t.tag!==0&&n===2){var r=Ek(t);r!==0&&(e=r,n=Jk(t,r))}if(n===1)throw n=Ey,Pd(t,0),zc(t,e),Aa(t,dr()),n;if(n===6)throw Error(Oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ld(t,Ca,Ol),Aa(t,dr()),null}function xR(t,e){var n=Ht;Ht|=1;try{return t(e)}finally{Ht=n,Ht===0&&(dp=dr()+500,lC&&Nu())}}function Kd(t){Wc!==null&&Wc.tag===0&&!(Ht&6)&&Gh();var e=Ht;Ht|=1;var n=zo.transition,r=an;try{if(zo.transition=null,an=1,t)return t()}finally{an=r,zo.transition=n,Ht=e,!(Ht&6)&&Nu()}}function wR(){Xa=Oh.current,_n(Oh)}function Pd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yae(n)),$r!==null)for(n=$r.return;n!==null;){var r=n;switch(tR(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Kw();break;case 3:cp(),_n(ka),_n(Ui),uR();break;case 5:cR(r);break;case 4:cp();break;case 13:_n(Gn);break;case 19:_n(Gn);break;case 10:aR(r.type._context);break;case 22:case 23:wR()}n=n.return}if(si=t,$r=t=au(t.current,null),Ci=Xa=e,jr=0,Ey=null,yR=fC=qd=0,Ca=Kv=null,Sd!==null){for(e=0;e<Sd.length;e++)if(n=Sd[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Sd=null}return t}function O8(t,e){do{var n=$r;try{if(iR(),gw.current=rS,nS){for(var r=Kn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}nS=!1}if(Gd=0,ri=Dr=Kn=null,Gv=!1,Sy=0,vR.current=null,n===null||n.return===null){jr=1,Ey=e,$r=null;break}e:{var a=t,o=n.return,s=n,l=e;if(e=Ci,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=lj(o);if(h!==null){h.flags&=-257,cj(h,o,s,a,e),h.mode&1&&sj(a,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){sj(a,c,e),SR();break e}l=Error(Oe(426))}}else if(jn&&s.mode&1){var m=lj(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),cj(m,o,s,a,e),nR(up(l,s));break e}}a=l=up(l,s),jr!==4&&(jr=2),Kv===null?Kv=[a]:Kv.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var v=h8(a,l,e);tj(a,v);break e;case 1:s=l;var y=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ru===null||!ru.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=p8(a,s,e);tj(a,w);break e}}a=a.return}while(a!==null)}P8(n)}catch(x){e=x,$r===n&&n!==null&&($r=n=n.return);continue}break}while(!0)}function A8(){var t=iS.current;return iS.current=rS,t===null?rS:t}function SR(){(jr===0||jr===3||jr===2)&&(jr=4),si===null||!(qd&268435455)&&!(fC&268435455)||zc(si,Ci)}function sS(t,e){var n=Ht;Ht|=2;var r=A8();(si!==t||Ci!==e)&&(Ol=null,Pd(t,e));do try{Wae();break}catch(i){O8(t,i)}while(!0);if(iR(),Ht=n,iS.current=r,$r!==null)throw Error(Oe(261));return si=null,Ci=0,jr}function Wae(){for(;$r!==null;)_8($r)}function Uae(){for(;$r!==null&&!mie();)_8($r)}function _8(t){var e=D8(t.alternate,t,Xa);t.memoizedProps=t.pendingProps,e===null?P8(t):$r=e,vR.current=null}function P8(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Mae(n,e),n!==null){n.flags&=32767,$r=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jr=6,$r=null;return}}else if(n=Fae(n,e,Xa),n!==null){$r=n;return}if(e=e.sibling,e!==null){$r=e;return}$r=e=t}while(e!==null);jr===0&&(jr=5)}function ld(t,e,n){var r=an,i=zo.transition;try{zo.transition=null,an=1,Hae(t,e,n,r)}finally{zo.transition=i,an=r}return null}function Hae(t,e,n,r){do Gh();while(Wc!==null);if(Ht&6)throw Error(Oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Oe(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(Eie(t,a),t===si&&($r=si=null,Ci=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||b1||(b1=!0,F8(Vw,function(){return Gh(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=zo.transition,zo.transition=null;var o=an;an=1;var s=Ht;Ht|=4,vR.current=null,jae(t,n),I8(n,t),dae(Ak),Uw=!!Ok,Ak=Ok=null,t.current=n,zae(n),gie(),Ht=s,an=o,zo.transition=a}else t.current=n;if(b1&&(b1=!1,Wc=t,oS=i),a=t.pendingLanes,a===0&&(ru=null),bie(n.stateNode),Aa(t,dr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(aS)throw aS=!1,t=Zk,Zk=null,t;return oS&1&&t.tag!==0&&Gh(),a=t.pendingLanes,a&1?t===Qk?Xv++:(Xv=0,Qk=t):Xv=0,Nu(),null}function Gh(){if(Wc!==null){var t=hH(oS),e=zo.transition,n=an;try{if(zo.transition=null,an=16>t?16:t,Wc===null)var r=!1;else{if(t=Wc,Wc=null,oS=0,Ht&6)throw Error(Oe(331));var i=Ht;for(Ht|=4,Ge=t.current;Ge!==null;){var a=Ge,o=a.child;if(Ge.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(Ge=c;Ge!==null;){var u=Ge;switch(u.tag){case 0:case 11:case 15:qv(8,u,a)}var d=u.child;if(d!==null)d.return=u,Ge=d;else for(;Ge!==null;){u=Ge;var f=u.sibling,h=u.return;if(C8(u),u===c){Ge=null;break}if(f!==null){f.return=h,Ge=f;break}Ge=h}}}var p=a.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(g!==null)}}Ge=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Ge=o;else e:for(;Ge!==null;){if(a=Ge,a.flags&2048)switch(a.tag){case 0:case 11:case 15:qv(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,Ge=v;break e}Ge=a.return}}var y=t.current;for(Ge=y;Ge!==null;){o=Ge;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ge=b;else e:for(o=y;Ge!==null;){if(s=Ge,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:dC(9,s)}}catch(x){Jn(s,s.return,x)}if(s===o){Ge=null;break e}var w=s.sibling;if(w!==null){w.return=s.return,Ge=w;break e}Ge=s.return}}if(Ht=i,Nu(),tl&&typeof tl.onPostCommitFiberRoot=="function")try{tl.onPostCommitFiberRoot(rC,t)}catch{}r=!0}return r}finally{an=n,zo.transition=e}}return!1}function Sj(t,e,n){e=up(n,e),e=h8(t,e,1),t=nu(t,e,1),e=sa(),t!==null&&(U0(t,1,e),Aa(t,e))}function Jn(t,e,n){if(t.tag===3)Sj(t,t,n);else for(;e!==null;){if(e.tag===3){Sj(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ru===null||!ru.has(r))){t=up(n,t),t=p8(e,t,1),e=nu(e,t,1),t=sa(),e!==null&&(U0(e,1,t),Aa(e,t));break}}e=e.return}}function Gae(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=sa(),t.pingedLanes|=t.suspendedLanes&n,si===t&&(Ci&n)===n&&(jr===4||jr===3&&(Ci&130023424)===Ci&&500>dr()-bR?Pd(t,0):yR|=n),Aa(t,e)}function R8(t,e){e===0&&(t.mode&1?(e=c1,c1<<=1,!(c1&130023424)&&(c1=4194304)):e=1);var n=sa();t=Zl(t,e),t!==null&&(U0(t,e,n),Aa(t,n))}function qae(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),R8(t,n)}function Kae(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Oe(314))}r!==null&&r.delete(e),R8(t,n)}var D8;D8=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ka.current)Ta=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ta=!1,Dae(t,e,n);Ta=!!(t.flags&131072)}else Ta=!1,jn&&e.flags&1048576&&jH(e,Zw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yw(t,e),t=e.pendingProps;var i=op(e,Ui.current);Hh(e,n),i=fR(null,e,r,t,i,n);var a=hR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oa(r)?(a=!0,Xw(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,sR(e),i.updater=uC,e.stateNode=i,i._reactInternals=e,zk(e,r,t,n),e=Wk(null,e,r,!0,a,n)):(e.tag=0,jn&&a&&eR(e),ta(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yw(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Yae(r),t=as(r,t),i){case 0:e=Vk(null,e,r,t,n);break e;case 1:e=fj(null,e,r,t,n);break e;case 11:e=uj(null,e,r,t,n);break e;case 14:e=dj(null,e,r,as(r.type,t),n);break e}throw Error(Oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:as(r,i),Vk(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:as(r,i),fj(t,e,r,i,n);case 3:e:{if(y8(e),t===null)throw Error(Oe(387));r=e.pendingProps,a=e.memoizedState,i=a.element,HH(t,e),eS(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=up(Error(Oe(423)),e),e=hj(t,e,r,n,i);break e}else if(r!==i){i=up(Error(Oe(424)),e),e=hj(t,e,r,n,i);break e}else for(eo=tu(e.stateNode.containerInfo.firstChild),ao=e,jn=!0,fs=null,n=WH(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sp(),r===i){e=Ql(t,e,n);break e}ta(t,e,r,n)}e=e.child}return e;case 5:return GH(e),t===null&&Mk(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,_k(r,i)?o=null:a!==null&&_k(r,a)&&(e.flags|=32),v8(t,e),ta(t,e,o,n),e.child;case 6:return t===null&&Mk(e),null;case 13:return b8(t,e,n);case 4:return lR(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=lp(e,null,r,n):ta(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:as(r,i),uj(t,e,r,i,n);case 7:return ta(t,e,e.pendingProps,n),e.child;case 8:return ta(t,e,e.pendingProps.children,n),e.child;case 12:return ta(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,$n(Qw,r._currentValue),r._currentValue=o,a!==null)if(Ts(a.value,o)){if(a.children===i.children&&!ka.current){e=Ql(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=Wl(-1,n&-n),l.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Lk(a.return,n,e),s.lanes|=n;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Oe(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),Lk(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ta(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Hh(e,n),i=Wo(i),r=r(i),e.flags|=1,ta(t,e,r,n),e.child;case 14:return r=e.type,i=as(r,e.pendingProps),i=as(r.type,i),dj(t,e,r,i,n);case 15:return m8(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:as(r,i),yw(t,e),e.tag=1,Oa(r)?(t=!0,Xw(e)):t=!1,Hh(e,n),f8(e,r,i),zk(e,r,i,n),Wk(null,e,r,!0,t,n);case 19:return x8(t,e,n);case 22:return g8(t,e,n)}throw Error(Oe(156,e.tag))};function F8(t,e){return cH(t,e)}function Xae(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Po(t,e,n,r){return new Xae(t,e,n,r)}function $R(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yae(t){if(typeof t=="function")return $R(t)?1:0;if(t!=null){if(t=t.$$typeof,t===VP)return 11;if(t===WP)return 14}return 2}function au(t,e){var n=t.alternate;return n===null?(n=Po(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ww(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")$R(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xh:return Rd(n.children,i,a,e);case BP:o=8,i|=8;break;case uk:return t=Po(12,n,e,i|2),t.elementType=uk,t.lanes=a,t;case dk:return t=Po(13,n,e,i),t.elementType=dk,t.lanes=a,t;case fk:return t=Po(19,n,e,i),t.elementType=fk,t.lanes=a,t;case GU:return hC(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case UU:o=10;break e;case HU:o=9;break e;case VP:o=11;break e;case WP:o=14;break e;case Dc:o=16,r=null;break e}throw Error(Oe(130,t==null?t:typeof t,""))}return e=Po(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Rd(t,e,n,r){return t=Po(7,t,r,e),t.lanes=n,t}function hC(t,e,n,r){return t=Po(22,t,r,e),t.elementType=GU,t.lanes=n,t.stateNode={isHidden:!1},t}function SI(t,e,n){return t=Po(6,t,null,e),t.lanes=n,t}function $I(t,e,n){return e=Po(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Zae(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rI(0),this.expirationTimes=rI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rI(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function CR(t,e,n,r,i,a,o,s,l){return t=new Zae(t,e,n,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Po(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sR(a),t}function Qae(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bh,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function M8(t){if(!t)return fu;t=t._reactInternals;e:{if(Sf(t)!==t||t.tag!==1)throw Error(Oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Oa(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Oe(171))}if(t.tag===1){var n=t.type;if(Oa(n))return MH(t,n,e)}return e}function L8(t,e,n,r,i,a,o,s,l){return t=CR(n,r,!0,t,i,a,o,s,l),t.context=M8(null),n=t.current,r=sa(),i=iu(n),a=Wl(r,i),a.callback=e??null,nu(n,a,i),t.current.lanes=i,U0(t,i,r),Aa(t,r),t}function pC(t,e,n,r){var i=e.current,a=sa(),o=iu(i);return n=M8(n),e.context===null?e.context=n:e.pendingContext=n,e=Wl(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nu(i,e,o),t!==null&&(ys(t,i,o,a),mw(t,i,o)),o}function lS(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $j(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ER(t,e){$j(t,e),(t=t.alternate)&&$j(t,e)}function Jae(){return null}var j8=typeof reportError=="function"?reportError:function(t){console.error(t)};function TR(t){this._internalRoot=t}mC.prototype.render=TR.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Oe(409));pC(t,e,null,null)};mC.prototype.unmount=TR.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kd(function(){pC(null,t,null,null)}),e[Yl]=null}};function mC(t){this._internalRoot=t}mC.prototype.unstable_scheduleHydration=function(t){if(t){var e=gH();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jc.length&&e!==0&&e<jc[n].priority;n++);jc.splice(n,0,t),n===0&&yH(t)}};function IR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cj(){}function eoe(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var c=lS(o);a.call(c)}}var o=L8(e,r,t,0,null,!1,!1,"",Cj);return t._reactRootContainer=o,t[Yl]=o.current,vy(t.nodeType===8?t.parentNode:t),Kd(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var c=lS(l);s.call(c)}}var l=CR(t,0,!1,null,null,!1,!1,"",Cj);return t._reactRootContainer=l,t[Yl]=l.current,vy(t.nodeType===8?t.parentNode:t),Kd(function(){pC(e,l,n,r)}),l}function vC(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=lS(o);s.call(l)}}pC(e,o,t,i)}else o=eoe(n,e,t,i,r);return lS(o)}pH=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Cv(e.pendingLanes);n!==0&&(GP(e,n|1),Aa(e,dr()),!(Ht&6)&&(dp=dr()+500,Nu()))}break;case 13:Kd(function(){var r=Zl(t,1);if(r!==null){var i=sa();ys(r,t,1,i)}}),ER(t,1)}};qP=function(t){if(t.tag===13){var e=Zl(t,134217728);if(e!==null){var n=sa();ys(e,t,134217728,n)}ER(t,134217728)}};mH=function(t){if(t.tag===13){var e=iu(t),n=Zl(t,e);if(n!==null){var r=sa();ys(n,t,e,r)}ER(t,e)}};gH=function(){return an};vH=function(t,e){var n=an;try{return an=t,e()}finally{an=n}};Sk=function(t,e,n){switch(e){case"input":if(mk(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=sC(r);if(!i)throw Error(Oe(90));KU(r),mk(r,i)}}}break;case"textarea":YU(t,n);break;case"select":e=n.value,e!=null&&Bh(t,!!n.multiple,e,!1)}};rH=xR;iH=Kd;var toe={usingClientEntryPoint:!1,Events:[G0,Ch,sC,tH,nH,xR]},Qg={findFiberByHostInstance:wd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},noe={bundleType:Qg.bundleType,version:Qg.version,rendererPackageName:Qg.rendererPackageName,rendererConfig:Qg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sH(t),t===null?null:t.stateNode},findFiberByHostInstance:Qg.findFiberByHostInstance||Jae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var x1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!x1.isDisabled&&x1.supportsFiber)try{rC=x1.inject(noe),tl=x1}catch{}}po.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=toe;po.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!IR(e))throw Error(Oe(200));return Qae(t,e,null,n)};po.createRoot=function(t,e){if(!IR(t))throw Error(Oe(299));var n=!1,r="",i=j8;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=CR(t,1,!1,null,null,n,!1,r,i),t[Yl]=e.current,vy(t.nodeType===8?t.parentNode:t),new TR(e)};po.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Oe(188)):(t=Object.keys(t).join(","),Error(Oe(268,t)));return t=sH(e),t=t===null?null:t.stateNode,t};po.flushSync=function(t){return Kd(t)};po.hydrate=function(t,e,n){if(!gC(e))throw Error(Oe(200));return vC(null,t,e,!0,n)};po.hydrateRoot=function(t,e,n){if(!IR(t))throw Error(Oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=j8;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=L8(e,null,t,1,n??null,i,!1,a,o),t[Yl]=e.current,vy(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new mC(e)};po.render=function(t,e,n){if(!gC(e))throw Error(Oe(200));return vC(null,t,e,!1,n)};po.unmountComponentAtNode=function(t){if(!gC(t))throw Error(Oe(40));return t._reactRootContainer?(Kd(function(){vC(null,null,t,!1,function(){t._reactRootContainer=null,t[Yl]=null})}),!0):!1};po.unstable_batchedUpdates=xR;po.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gC(n))throw Error(Oe(200));if(t==null||t._reactInternals===void 0)throw Error(Oe(38));return vC(t,e,n,!1,r)};po.version="18.3.1-next-f1338f8080-20240426";function z8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z8)}catch(t){console.error(t)}}z8(),zU.exports=po;var hu=zU.exports;const tO=Gt(hu),roe=_P({__proto__:null,default:tO},[hu]);var Ej=hu;lk.createRoot=Ej.createRoot,lk.hydrateRoot=Ej.hydrateRoot;function B8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=B8(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $t(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=B8(t))&&(r&&(r+=" "),r+=e);return r}var ioe=Array.isArray,Fa=ioe,aoe=typeof _o=="object"&&_o&&_o.Object===Object&&_o,V8=aoe,ooe=V8,soe=typeof self=="object"&&self&&self.Object===Object&&self,loe=ooe||soe||Function("return this")(),$l=loe,coe=$l,uoe=coe.Symbol,K0=uoe,Tj=K0,W8=Object.prototype,doe=W8.hasOwnProperty,foe=W8.toString,Jg=Tj?Tj.toStringTag:void 0;function hoe(t){var e=doe.call(t,Jg),n=t[Jg];try{t[Jg]=void 0;var r=!0}catch{}var i=foe.call(t);return r&&(e?t[Jg]=n:delete t[Jg]),i}var poe=hoe,moe=Object.prototype,goe=moe.toString;function voe(t){return goe.call(t)}var yoe=voe,Ij=K0,boe=poe,xoe=yoe,woe="[object Null]",Soe="[object Undefined]",Nj=Ij?Ij.toStringTag:void 0;function $oe(t){return t==null?t===void 0?Soe:woe:Nj&&Nj in Object(t)?boe(t):xoe(t)}var lc=$oe;function Coe(t){return t!=null&&typeof t=="object"}var cc=Coe,Eoe=lc,Toe=cc,Ioe="[object Symbol]";function Noe(t){return typeof t=="symbol"||Toe(t)&&Eoe(t)==Ioe}var um=Noe,koe=Fa,Ooe=um,Aoe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_oe=/^\w*$/;function Poe(t,e){if(koe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Ooe(t)?!0:_oe.test(t)||!Aoe.test(t)||e!=null&&t in Object(e)}var NR=Poe;function Roe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ku=Roe;const dm=Gt(ku);var Doe=lc,Foe=ku,Moe="[object AsyncFunction]",Loe="[object Function]",joe="[object GeneratorFunction]",zoe="[object Proxy]";function Boe(t){if(!Foe(t))return!1;var e=Doe(t);return e==Loe||e==joe||e==Moe||e==zoe}var kR=Boe;const gt=Gt(kR);var Voe=$l,Woe=Voe["__core-js_shared__"],Uoe=Woe,CI=Uoe,kj=function(){var t=/[^.]+$/.exec(CI&&CI.keys&&CI.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Hoe(t){return!!kj&&kj in t}var Goe=Hoe,qoe=Function.prototype,Koe=qoe.toString;function Xoe(t){if(t!=null){try{return Koe.call(t)}catch{}try{return t+""}catch{}}return""}var U8=Xoe,Yoe=kR,Zoe=Goe,Qoe=ku,Joe=U8,ese=/[\\^$.*+?()[\]{}|]/g,tse=/^\[object .+?Constructor\]$/,nse=Function.prototype,rse=Object.prototype,ise=nse.toString,ase=rse.hasOwnProperty,ose=RegExp("^"+ise.call(ase).replace(ese,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sse(t){if(!Qoe(t)||Zoe(t))return!1;var e=Yoe(t)?ose:tse;return e.test(Joe(t))}var lse=sse;function cse(t,e){return t==null?void 0:t[e]}var use=cse,dse=lse,fse=use;function hse(t,e){var n=fse(t,e);return dse(n)?n:void 0}var $f=hse,pse=$f,mse=pse(Object,"create"),yC=mse,Oj=yC;function gse(){this.__data__=Oj?Oj(null):{},this.size=0}var vse=gse;function yse(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var bse=yse,xse=yC,wse="__lodash_hash_undefined__",Sse=Object.prototype,$se=Sse.hasOwnProperty;function Cse(t){var e=this.__data__;if(xse){var n=e[t];return n===wse?void 0:n}return $se.call(e,t)?e[t]:void 0}var Ese=Cse,Tse=yC,Ise=Object.prototype,Nse=Ise.hasOwnProperty;function kse(t){var e=this.__data__;return Tse?e[t]!==void 0:Nse.call(e,t)}var Ose=kse,Ase=yC,_se="__lodash_hash_undefined__";function Pse(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ase&&e===void 0?_se:e,this}var Rse=Pse,Dse=vse,Fse=bse,Mse=Ese,Lse=Ose,jse=Rse;function fm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}fm.prototype.clear=Dse;fm.prototype.delete=Fse;fm.prototype.get=Mse;fm.prototype.has=Lse;fm.prototype.set=jse;var zse=fm;function Bse(){this.__data__=[],this.size=0}var Vse=Bse;function Wse(t,e){return t===e||t!==t&&e!==e}var OR=Wse,Use=OR;function Hse(t,e){for(var n=t.length;n--;)if(Use(t[n][0],e))return n;return-1}var bC=Hse,Gse=bC,qse=Array.prototype,Kse=qse.splice;function Xse(t){var e=this.__data__,n=Gse(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Kse.call(e,n,1),--this.size,!0}var Yse=Xse,Zse=bC;function Qse(t){var e=this.__data__,n=Zse(e,t);return n<0?void 0:e[n][1]}var Jse=Qse,ele=bC;function tle(t){return ele(this.__data__,t)>-1}var nle=tle,rle=bC;function ile(t,e){var n=this.__data__,r=rle(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var ale=ile,ole=Vse,sle=Yse,lle=Jse,cle=nle,ule=ale;function hm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}hm.prototype.clear=ole;hm.prototype.delete=sle;hm.prototype.get=lle;hm.prototype.has=cle;hm.prototype.set=ule;var xC=hm,dle=$f,fle=$l,hle=dle(fle,"Map"),AR=hle,Aj=zse,ple=xC,mle=AR;function gle(){this.size=0,this.__data__={hash:new Aj,map:new(mle||ple),string:new Aj}}var vle=gle;function yle(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var ble=yle,xle=ble;function wle(t,e){var n=t.__data__;return xle(e)?n[typeof e=="string"?"string":"hash"]:n.map}var wC=wle,Sle=wC;function $le(t){var e=Sle(this,t).delete(t);return this.size-=e?1:0,e}var Cle=$le,Ele=wC;function Tle(t){return Ele(this,t).get(t)}var Ile=Tle,Nle=wC;function kle(t){return Nle(this,t).has(t)}var Ole=kle,Ale=wC;function _le(t,e){var n=Ale(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Ple=_le,Rle=vle,Dle=Cle,Fle=Ile,Mle=Ole,Lle=Ple;function pm(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}pm.prototype.clear=Rle;pm.prototype.delete=Dle;pm.prototype.get=Fle;pm.prototype.has=Mle;pm.prototype.set=Lle;var _R=pm,H8=_R,jle="Expected a function";function PR(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(jle);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(PR.Cache||H8),n}PR.Cache=H8;var G8=PR;const zle=Gt(G8);var Ble=G8,Vle=500;function Wle(t){var e=Ble(t,function(r){return n.size===Vle&&n.clear(),r}),n=e.cache;return e}var Ule=Wle,Hle=Ule,Gle=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qle=/\\(\\)?/g,Kle=Hle(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Gle,function(n,r,i,a){e.push(i?a.replace(qle,"$1"):r||n)}),e}),Xle=Kle;function Yle(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var RR=Yle,_j=K0,Zle=RR,Qle=Fa,Jle=um,Pj=_j?_j.prototype:void 0,Rj=Pj?Pj.toString:void 0;function q8(t){if(typeof t=="string")return t;if(Qle(t))return Zle(t,q8)+"";if(Jle(t))return Rj?Rj.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var ece=q8,tce=ece;function nce(t){return t==null?"":tce(t)}var K8=nce,rce=Fa,ice=NR,ace=Xle,oce=K8;function sce(t,e){return rce(t)?t:ice(t,e)?[t]:ace(oce(t))}var X8=sce,lce=um;function cce(t){if(typeof t=="string"||lce(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var SC=cce,uce=X8,dce=SC;function fce(t,e){e=uce(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[dce(e[n++])];return n&&n==r?t:void 0}var DR=fce,hce=DR;function pce(t,e,n){var r=t==null?void 0:hce(t,e);return r===void 0?n:r}var Y8=pce;const oo=Gt(Y8);function mce(t){return t==null}var gce=mce;const xt=Gt(gce);var vce=lc,yce=Fa,bce=cc,xce="[object String]";function wce(t){return typeof t=="string"||!yce(t)&&bce(t)&&vce(t)==xce}var Sce=wce;const Xd=Gt(Sce);var Z8={exports:{}},sn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FR=Symbol.for("react.element"),MR=Symbol.for("react.portal"),$C=Symbol.for("react.fragment"),CC=Symbol.for("react.strict_mode"),EC=Symbol.for("react.profiler"),TC=Symbol.for("react.provider"),IC=Symbol.for("react.context"),$ce=Symbol.for("react.server_context"),NC=Symbol.for("react.forward_ref"),kC=Symbol.for("react.suspense"),OC=Symbol.for("react.suspense_list"),AC=Symbol.for("react.memo"),_C=Symbol.for("react.lazy"),Cce=Symbol.for("react.offscreen"),Q8;Q8=Symbol.for("react.module.reference");function Ko(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case FR:switch(t=t.type,t){case $C:case EC:case CC:case kC:case OC:return t;default:switch(t=t&&t.$$typeof,t){case $ce:case IC:case NC:case _C:case AC:case TC:return t;default:return e}}case MR:return e}}}sn.ContextConsumer=IC;sn.ContextProvider=TC;sn.Element=FR;sn.ForwardRef=NC;sn.Fragment=$C;sn.Lazy=_C;sn.Memo=AC;sn.Portal=MR;sn.Profiler=EC;sn.StrictMode=CC;sn.Suspense=kC;sn.SuspenseList=OC;sn.isAsyncMode=function(){return!1};sn.isConcurrentMode=function(){return!1};sn.isContextConsumer=function(t){return Ko(t)===IC};sn.isContextProvider=function(t){return Ko(t)===TC};sn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===FR};sn.isForwardRef=function(t){return Ko(t)===NC};sn.isFragment=function(t){return Ko(t)===$C};sn.isLazy=function(t){return Ko(t)===_C};sn.isMemo=function(t){return Ko(t)===AC};sn.isPortal=function(t){return Ko(t)===MR};sn.isProfiler=function(t){return Ko(t)===EC};sn.isStrictMode=function(t){return Ko(t)===CC};sn.isSuspense=function(t){return Ko(t)===kC};sn.isSuspenseList=function(t){return Ko(t)===OC};sn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===$C||t===EC||t===CC||t===kC||t===OC||t===Cce||typeof t=="object"&&t!==null&&(t.$$typeof===_C||t.$$typeof===AC||t.$$typeof===TC||t.$$typeof===IC||t.$$typeof===NC||t.$$typeof===Q8||t.getModuleId!==void 0)};sn.typeOf=Ko;Z8.exports=sn;var Sw=Z8.exports,Ece=lc,Tce=cc,Ice="[object Number]";function Nce(t){return typeof t=="number"||Tce(t)&&Ece(t)==Ice}var J8=Nce;const kce=Gt(J8);var Oce=J8;function Ace(t){return Oce(t)&&t!=+t}var _ce=Ace;const mm=Gt(_ce);var ra=function(e){return e===0?0:e>0?1:-1},Cd=function(e){return Xd(e)&&e.indexOf("%")===e.length-1},Ae=function(e){return kce(e)&&!mm(e)},zr=function(e){return Ae(e)||Xd(e)},Pce=0,Cf=function(e){var n=++Pce;return"".concat(e||"").concat(n)},ia=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ae(e)&&!Xd(e))return r;var a;if(Cd(e)){var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return mm(a)&&(a=r),i&&a>n&&(a=n),a},Bc=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Rce=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Fr=function(e,n){return Ae(e)&&Ae(n)?function(r){return e+r*(n-e)}:function(){return n}};function cS(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):oo(r,e))===n})}var Dce=function(e,n){return Ae(e)&&Ae(n)?e-n:Xd(e)&&Xd(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function qh(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function nO(t){"@babel/helpers - typeof";return nO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nO(t)}var Fce=["viewBox","children"],Mce=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Dj=["points","pathLength"],EI={svg:Fce,polygon:Dj,polyline:Dj},LR=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],uS=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(S.isValidElement(e)&&(r=e.props),!dm(r))return null;var i={};return Object.keys(r).forEach(function(a){LR.includes(a)&&(i[a]=n||function(o){return r[a](r,o)})}),i},Lce=function(e,n,r){return function(i){return e(n,r,i),null}},Yd=function(e,n,r){if(!dm(e)||nO(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];LR.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=Lce(o,n,r))}),i},jce=["children"],zce=["children"];function Fj(t,e){if(t==null)return{};var n=Bce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function rO(t){"@babel/helpers - typeof";return rO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rO(t)}var Mj={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ul=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},Lj=null,TI=null,jR=function t(e){if(e===Lj&&Array.isArray(TI))return TI;var n=[];return S.Children.forEach(e,function(r){xt(r)||(Sw.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),TI=n,Lj=e,n};function so(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Ul(i)}):r=[Ul(e)],jR(t).forEach(function(i){var a=oo(i,"type.displayName")||oo(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function Ya(t,e){var n=so(t,e);return n&&n[0]}var jj=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Ae(r)||r<=0||!Ae(i)||i<=0)},Vce=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Wce=function(e){return e&&e.type&&Xd(e.type)&&Vce.indexOf(e.type)>=0},eG=function(e){return e&&rO(e)==="object"&&"clipDot"in e},Uce=function(e,n,r,i){var a,o=(a=EI==null?void 0:EI[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!gt(e)&&(i&&o.includes(n)||Mce.includes(n))||r&&LR.includes(n)},lt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(S.isValidElement(e)&&(i=e.props),!dm(i))return null;var a={};return Object.keys(i).forEach(function(o){var s;Uce((s=i)===null||s===void 0?void 0:s[o],o,n,r)&&(a[o]=i[o])}),a},iO=function t(e,n){if(e===n)return!0;var r=S.Children.count(e);if(r!==S.Children.count(n))return!1;if(r===0)return!0;if(r===1)return zj(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!zj(a,o))return!1}return!0},zj=function(e,n){if(xt(e)&&xt(n))return!0;if(!xt(e)&&!xt(n)){var r=e.props||{},i=r.children,a=Fj(r,jce),o=n.props||{},s=o.children,l=Fj(o,zce);return i&&s?qh(a,l)&&iO(i,s):!i&&!s?qh(a,l):!1}return!1},Bj=function(e,n){var r=[],i={};return jR(e).forEach(function(a,o){if(Wce(a))r.push(a);else if(a){var s=Ul(a.type),l=n[s]||{},c=l.handler,u=l.once;if(c&&(!u||!i[s])){var d=c(a,s,o);r.push(d),i[s]=!0}}}),r},Hce=function(e){var n=e&&e.type;return n&&Mj[n]?Mj[n]:null},Gce=function(e,n){return jR(n).indexOf(e)},qce=["children","width","height","viewBox","className","style","title","desc"];function aO(){return aO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aO.apply(this,arguments)}function Kce(t,e){if(t==null)return{};var n=Xce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oO(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,o=t.style,s=t.title,l=t.desc,c=Kce(t,qce),u=i||{width:n,height:r,x:0,y:0},d=$t("recharts-surface",a);return B.createElement("svg",aO({},lt(c,!0,"svg"),{className:d,width:n,height:r,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),B.createElement("title",null,s),B.createElement("desc",null,l),e)}var Yce=["children","className"];function sO(){return sO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sO.apply(this,arguments)}function Zce(t,e){if(t==null)return{};var n=Qce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Qce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var _t=B.forwardRef(function(t,e){var n=t.children,r=t.className,i=Zce(t,Yce),a=$t("recharts-layer",r);return B.createElement("g",sO({className:a},lt(i,!0),{ref:e}),n)}),bs=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function Jce(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}var eue=Jce,tue=eue;function nue(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:tue(t,e,n)}var rue=nue,iue="\\ud800-\\udfff",aue="\\u0300-\\u036f",oue="\\ufe20-\\ufe2f",sue="\\u20d0-\\u20ff",lue=aue+oue+sue,cue="\\ufe0e\\ufe0f",uue="\\u200d",due=RegExp("["+uue+iue+lue+cue+"]");function fue(t){return due.test(t)}var tG=fue;function hue(t){return t.split("")}var pue=hue,nG="\\ud800-\\udfff",mue="\\u0300-\\u036f",gue="\\ufe20-\\ufe2f",vue="\\u20d0-\\u20ff",yue=mue+gue+vue,bue="\\ufe0e\\ufe0f",xue="["+nG+"]",lO="["+yue+"]",cO="\\ud83c[\\udffb-\\udfff]",wue="(?:"+lO+"|"+cO+")",rG="[^"+nG+"]",iG="(?:\\ud83c[\\udde6-\\uddff]){2}",aG="[\\ud800-\\udbff][\\udc00-\\udfff]",Sue="\\u200d",oG=wue+"?",sG="["+bue+"]?",$ue="(?:"+Sue+"(?:"+[rG,iG,aG].join("|")+")"+sG+oG+")*",Cue=sG+oG+$ue,Eue="(?:"+[rG+lO+"?",lO,iG,aG,xue].join("|")+")",Tue=RegExp(cO+"(?="+cO+")|"+Eue+Cue,"g");function Iue(t){return t.match(Tue)||[]}var Nue=Iue,kue=pue,Oue=tG,Aue=Nue;function _ue(t){return Oue(t)?Aue(t):kue(t)}var Pue=_ue,Rue=rue,Due=tG,Fue=Pue,Mue=K8;function Lue(t){return function(e){e=Mue(e);var n=Due(e)?Fue(e):void 0,r=n?n[0]:e.charAt(0),i=n?Rue(n,1).join(""):e.slice(1);return r[t]()+i}}var jue=Lue,zue=jue,Bue=zue("toUpperCase"),Vue=Bue;const PC=Gt(Vue);function Sn(t){return function(){return t}}const lG=Math.cos,dS=Math.sin,Ps=Math.sqrt,fS=Math.PI,RC=2*fS,uO=Math.PI,dO=2*uO,cd=1e-6,Wue=dO-cd;function cG(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Uue(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return cG;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Hue{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?cG:Uue(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,c=i-n,u=o-e,d=s-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>cd)if(!(Math.abs(d*l-c*u)>cd)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-o,p=i-s,g=l*l+c*c,m=h*h+p*p,v=Math.sqrt(g),y=Math.sqrt(f),b=a*Math.tan((uO-Math.acos((g+f-m)/(2*v*y)))/2),w=b/y,x=b/v;Math.abs(w-1)>cd&&this._append`L${e+w*u},${n+w*d}`,this._append`A${a},${a},0,0,${+(d*h>u*p)},${this._x1=e+x*l},${this._y1=n+x*c}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=e+s,u=n+l,d=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>cd||Math.abs(this._y1-u)>cd)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%dO+dO),f>Wue?this._append`A${r},${r},0,1,${d},${e-s},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:f>cd&&this._append`A${r},${r},0,${+(f>=uO)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function zR(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Hue(e)}function BR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function uG(t){this._context=t}uG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function DC(t){return new uG(t)}function dG(t){return t[0]}function fG(t){return t[1]}function hG(t,e){var n=Sn(!0),r=null,i=DC,a=null,o=zR(s);t=typeof t=="function"?t:t===void 0?dG:Sn(t),e=typeof e=="function"?e:e===void 0?fG:Sn(e);function s(l){var c,u=(l=BR(l)).length,d,f=!1,h;for(r==null&&(a=i(h=o())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(d,c,l),+e(d,c,l));if(h)return a=null,h+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:Sn(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:Sn(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Sn(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function w1(t,e,n){var r=null,i=Sn(!0),a=null,o=DC,s=null,l=zR(c);t=typeof t=="function"?t:t===void 0?dG:Sn(+t),e=typeof e=="function"?e:Sn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?fG:Sn(+n);function c(d){var f,h,p,g=(d=BR(d)).length,m,v=!1,y,b=new Array(g),w=new Array(g);for(a==null&&(s=o(y=l())),f=0;f<=g;++f){if(!(f<g&&i(m=d[f],f,d))===v)if(v=!v)h=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=f-1;p>=h;--p)s.point(b[p],w[p]);s.lineEnd(),s.areaEnd()}v&&(b[f]=+t(m,f,d),w[f]=+e(m,f,d),s.point(r?+r(m,f,d):b[f],n?+n(m,f,d):w[f]))}if(y)return s=null,y+""||null}function u(){return hG().defined(i).curve(o).context(a)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Sn(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:Sn(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Sn(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Sn(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:Sn(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Sn(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Sn(!!d),c):i},c.curve=function(d){return arguments.length?(o=d,a!=null&&(s=o(a)),c):o},c.context=function(d){return arguments.length?(d==null?a=s=null:s=o(a=d),c):a},c}class pG{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Gue(t){return new pG(t,!0)}function que(t){return new pG(t,!1)}const VR={draw(t,e){const n=Ps(e/fS);t.moveTo(n,0),t.arc(0,0,n,0,RC)}},Kue={draw(t,e){const n=Ps(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},mG=Ps(1/3),Xue=mG*2,Yue={draw(t,e){const n=Ps(e/Xue),r=n*mG;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Zue={draw(t,e){const n=Ps(e),r=-n/2;t.rect(r,r,n,n)}},Que=.8908130915292852,gG=dS(fS/10)/dS(7*fS/10),Jue=dS(RC/10)*gG,ede=-lG(RC/10)*gG,tde={draw(t,e){const n=Ps(e*Que),r=Jue*n,i=ede*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const o=RC*a/5,s=lG(o),l=dS(o);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},II=Ps(3),nde={draw(t,e){const n=-Ps(e/(II*3));t.moveTo(0,n*2),t.lineTo(-II*n,-n),t.lineTo(II*n,-n),t.closePath()}},xo=-.5,wo=Ps(3)/2,fO=1/Ps(12),rde=(fO/2+1)*3,ide={draw(t,e){const n=Ps(e/rde),r=n/2,i=n*fO,a=r,o=n*fO+n,s=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(xo*r-wo*i,wo*r+xo*i),t.lineTo(xo*a-wo*o,wo*a+xo*o),t.lineTo(xo*s-wo*l,wo*s+xo*l),t.lineTo(xo*r+wo*i,xo*i-wo*r),t.lineTo(xo*a+wo*o,xo*o-wo*a),t.lineTo(xo*s+wo*l,xo*l-wo*s),t.closePath()}};function ade(t,e){let n=null,r=zR(i);t=typeof t=="function"?t:Sn(t||VR),e=typeof e=="function"?e:Sn(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Sn(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Sn(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function hS(){}function pS(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function vG(t){this._context=t}vG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ode(t){return new vG(t)}function yG(t){this._context=t}yG.prototype={areaStart:hS,areaEnd:hS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:pS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function sde(t){return new yG(t)}function bG(t){this._context=t}bG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:pS(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function lde(t){return new bG(t)}function xG(t){this._context=t}xG.prototype={areaStart:hS,areaEnd:hS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function cde(t){return new xG(t)}function Vj(t){return t<0?-1:1}function Wj(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Vj(a)+Vj(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Uj(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function NI(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function mS(t){this._context=t}mS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:NI(this,this._t0,Uj(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,NI(this,Uj(this,n=Wj(this,t,e)),n);break;default:NI(this,this._t0,n=Wj(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function wG(t){this._context=new SG(t)}(wG.prototype=Object.create(mS.prototype)).point=function(t,e){mS.prototype.point.call(this,e,t)};function SG(t){this._context=t}SG.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function ude(t){return new mS(t)}function dde(t){return new wG(t)}function $G(t){this._context=t}$G.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Hj(t),i=Hj(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Hj(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function fde(t){return new $G(t)}function FC(t,e){this._context=t,this._t=e}FC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function hde(t){return new FC(t,.5)}function pde(t){return new FC(t,0)}function mde(t){return new FC(t,1)}function fp(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,s=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function hO(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function gde(t,e){return t[e]}function vde(t){const e=[];return e.key=t,e}function yde(){var t=Sn([]),e=hO,n=fp,r=gde;function i(a){var o=Array.from(t.apply(this,arguments),vde),s,l=o.length,c=-1,u;for(const d of a)for(s=0,++c;s<l;++s)(o[s][c]=[0,+r(d,o[s].key,c,a)]).data=d;for(s=0,u=BR(e(o));s<l;++s)o[u[s]].index=s;return n(o,u),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Sn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Sn(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?hO:typeof a=="function"?a:Sn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??fp,i):n},i}function bde(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}fp(t,e)}}function xde(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,s=0;o<i;++o)s+=t[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}fp(t,e)}}function wde(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,c=0;s<o;++s){for(var u=t[e[s]],d=u[r][1]||0,f=u[r-1][1]||0,h=(d-f)/2,p=0;p<s;++p){var g=t[e[p]],m=g[r][1]||0,v=g[r-1][1]||0;h+=m-v}l+=d,c+=h*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,fp(t,e)}}function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}var Sde=["type","size","sizeType"];function pO(){return pO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pO.apply(this,arguments)}function Gj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gj(Object(n),!0).forEach(function(r){$de(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $de(t,e,n){return e=Cde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cde(t){var e=Ede(t,"string");return Ty(e)=="symbol"?e:e+""}function Ede(t,e){if(Ty(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ty(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tde(t,e){if(t==null)return{};var n=Ide(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ide(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var CG={symbolCircle:VR,symbolCross:Kue,symbolDiamond:Yue,symbolSquare:Zue,symbolStar:tde,symbolTriangle:nde,symbolWye:ide},Nde=Math.PI/180,kde=function(e){var n="symbol".concat(PC(e));return CG[n]||VR},Ode=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Nde;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Ade=function(e,n){CG["symbol".concat(PC(e))]=n},WR=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,o=e.sizeType,s=o===void 0?"area":o,l=Tde(e,Sde),c=qj(qj({},l),{},{type:r,size:a,sizeType:s}),u=function(){var m=kde(r),v=ade().type(m).size(Ode(a,s,r));return v()},d=c.className,f=c.cx,h=c.cy,p=lt(c,!0);return f===+f&&h===+h&&a===+a?B.createElement("path",pO({},p,{className:$t("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(h,")"),d:u()})):null};WR.registerSymbol=Ade;function hp(t){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(t)}function mO(){return mO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mO.apply(this,arguments)}function Kj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _de(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kj(Object(n),!0).forEach(function(r){Iy(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TG(r.key),r)}}function Dde(t,e,n){return e&&Rde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fde(t,e,n){return e=gS(e),Mde(t,EG()?Reflect.construct(e,n||[],gS(t).constructor):e.apply(t,n))}function Mde(t,e){if(e&&(hp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lde(t)}function Lde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EG=function(){return!!t})()}function gS(t){return gS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gS(t)}function jde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gO(t,e)}function gO(t,e){return gO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gO(t,e)}function Iy(t,e,n){return e=TG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TG(t){var e=zde(t,"string");return hp(e)=="symbol"?e:e+""}function zde(t,e){if(hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ts=32,UR=function(t){function e(){return Pde(this,e),Fde(this,e,arguments)}return jde(e,t),Dde(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=ts/2,o=ts/6,s=ts/3,l=r.inactive?i:r.color;if(r.type==="plainline")return B.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:ts,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return B.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(a,`
            H`).concat(ts,"M").concat(2*s,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return B.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ts/8,"h").concat(ts,"v").concat(ts*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(B.isValidElement(r.legendIcon)){var c=_de({},r);return delete c.legendIcon,B.cloneElement(r.legendIcon,c)}return B.createElement(WR,{fill:l,cx:a,cy:a,size:ts,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,o=i.iconSize,s=i.layout,l=i.formatter,c=i.inactiveColor,u={x:0,y:0,width:ts,height:ts},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(h,p){var g=h.formatter||l,m=$t(Iy(Iy({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",h.inactive));if(h.type==="none")return null;var v=gt(h.value)?null:h.value;bs(!gt(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=h.inactive?c:h.color;return B.createElement("li",mO({className:m,style:d,key:"legend-item-".concat(p)},Yd(r.props,h,p)),B.createElement(oO,{width:o,height:o,viewBox:u,style:f},r.renderIcon(h)),B.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},g?g(v,h,p):v))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,o=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return B.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(S.PureComponent);Iy(UR,"displayName","Legend");Iy(UR,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Bde=xC;function Vde(){this.__data__=new Bde,this.size=0}var Wde=Vde;function Ude(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var Hde=Ude;function Gde(t){return this.__data__.get(t)}var qde=Gde;function Kde(t){return this.__data__.has(t)}var Xde=Kde,Yde=xC,Zde=AR,Qde=_R,Jde=200;function efe(t,e){var n=this.__data__;if(n instanceof Yde){var r=n.__data__;if(!Zde||r.length<Jde-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Qde(r)}return n.set(t,e),this.size=n.size,this}var tfe=efe,nfe=xC,rfe=Wde,ife=Hde,afe=qde,ofe=Xde,sfe=tfe;function gm(t){var e=this.__data__=new nfe(t);this.size=e.size}gm.prototype.clear=rfe;gm.prototype.delete=ife;gm.prototype.get=afe;gm.prototype.has=ofe;gm.prototype.set=sfe;var IG=gm,lfe="__lodash_hash_undefined__";function cfe(t){return this.__data__.set(t,lfe),this}var ufe=cfe;function dfe(t){return this.__data__.has(t)}var ffe=dfe,hfe=_R,pfe=ufe,mfe=ffe;function vS(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new hfe;++e<n;)this.add(t[e])}vS.prototype.add=vS.prototype.push=pfe;vS.prototype.has=mfe;var NG=vS;function gfe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var kG=gfe;function vfe(t,e){return t.has(e)}var OG=vfe,yfe=NG,bfe=kG,xfe=OG,wfe=1,Sfe=2;function $fe(t,e,n,r,i,a){var o=n&wfe,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var c=a.get(t),u=a.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,h=n&Sfe?new yfe:void 0;for(a.set(t,e),a.set(e,t);++d<s;){var p=t[d],g=e[d];if(r)var m=o?r(g,p,d,e,t,a):r(p,g,d,t,e,a);if(m!==void 0){if(m)continue;f=!1;break}if(h){if(!bfe(e,function(v,y){if(!xfe(h,y)&&(p===v||i(p,v,n,r,a)))return h.push(y)})){f=!1;break}}else if(!(p===g||i(p,g,n,r,a))){f=!1;break}}return a.delete(t),a.delete(e),f}var AG=$fe,Cfe=$l,Efe=Cfe.Uint8Array,Tfe=Efe;function Ife(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Nfe=Ife;function kfe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var HR=kfe,Xj=K0,Yj=Tfe,Ofe=OR,Afe=AG,_fe=Nfe,Pfe=HR,Rfe=1,Dfe=2,Ffe="[object Boolean]",Mfe="[object Date]",Lfe="[object Error]",jfe="[object Map]",zfe="[object Number]",Bfe="[object RegExp]",Vfe="[object Set]",Wfe="[object String]",Ufe="[object Symbol]",Hfe="[object ArrayBuffer]",Gfe="[object DataView]",Zj=Xj?Xj.prototype:void 0,kI=Zj?Zj.valueOf:void 0;function qfe(t,e,n,r,i,a,o){switch(n){case Gfe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Hfe:return!(t.byteLength!=e.byteLength||!a(new Yj(t),new Yj(e)));case Ffe:case Mfe:case zfe:return Ofe(+t,+e);case Lfe:return t.name==e.name&&t.message==e.message;case Bfe:case Wfe:return t==e+"";case jfe:var s=_fe;case Vfe:var l=r&Rfe;if(s||(s=Pfe),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=Dfe,o.set(t,e);var u=Afe(s(t),s(e),r,i,a,o);return o.delete(t),u;case Ufe:if(kI)return kI.call(t)==kI.call(e)}return!1}var Kfe=qfe;function Xfe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var _G=Xfe,Yfe=_G,Zfe=Fa;function Qfe(t,e,n){var r=e(t);return Zfe(t)?r:Yfe(r,n(t))}var Jfe=Qfe;function ehe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}var the=ehe;function nhe(){return[]}var rhe=nhe,ihe=the,ahe=rhe,ohe=Object.prototype,she=ohe.propertyIsEnumerable,Qj=Object.getOwnPropertySymbols,lhe=Qj?function(t){return t==null?[]:(t=Object(t),ihe(Qj(t),function(e){return she.call(t,e)}))}:ahe,che=lhe;function uhe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var dhe=uhe,fhe=lc,hhe=cc,phe="[object Arguments]";function mhe(t){return hhe(t)&&fhe(t)==phe}var ghe=mhe,Jj=ghe,vhe=cc,PG=Object.prototype,yhe=PG.hasOwnProperty,bhe=PG.propertyIsEnumerable,xhe=Jj(function(){return arguments}())?Jj:function(t){return vhe(t)&&yhe.call(t,"callee")&&!bhe.call(t,"callee")},GR=xhe,yS={exports:{}};function whe(){return!1}var She=whe;yS.exports;(function(t,e){var n=$l,r=She,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?n.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;t.exports=c})(yS,yS.exports);var RG=yS.exports,$he=9007199254740991,Che=/^(?:0|[1-9]\d*)$/;function Ehe(t,e){var n=typeof t;return e=e??$he,!!e&&(n=="number"||n!="symbol"&&Che.test(t))&&t>-1&&t%1==0&&t<e}var qR=Ehe,The=9007199254740991;function Ihe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=The}var KR=Ihe,Nhe=lc,khe=KR,Ohe=cc,Ahe="[object Arguments]",_he="[object Array]",Phe="[object Boolean]",Rhe="[object Date]",Dhe="[object Error]",Fhe="[object Function]",Mhe="[object Map]",Lhe="[object Number]",jhe="[object Object]",zhe="[object RegExp]",Bhe="[object Set]",Vhe="[object String]",Whe="[object WeakMap]",Uhe="[object ArrayBuffer]",Hhe="[object DataView]",Ghe="[object Float32Array]",qhe="[object Float64Array]",Khe="[object Int8Array]",Xhe="[object Int16Array]",Yhe="[object Int32Array]",Zhe="[object Uint8Array]",Qhe="[object Uint8ClampedArray]",Jhe="[object Uint16Array]",epe="[object Uint32Array]",kn={};kn[Ghe]=kn[qhe]=kn[Khe]=kn[Xhe]=kn[Yhe]=kn[Zhe]=kn[Qhe]=kn[Jhe]=kn[epe]=!0;kn[Ahe]=kn[_he]=kn[Uhe]=kn[Phe]=kn[Hhe]=kn[Rhe]=kn[Dhe]=kn[Fhe]=kn[Mhe]=kn[Lhe]=kn[jhe]=kn[zhe]=kn[Bhe]=kn[Vhe]=kn[Whe]=!1;function tpe(t){return Ohe(t)&&khe(t.length)&&!!kn[Nhe(t)]}var npe=tpe;function rpe(t){return function(e){return t(e)}}var DG=rpe,bS={exports:{}};bS.exports;(function(t,e){var n=V8,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s})(bS,bS.exports);var ipe=bS.exports,ape=npe,ope=DG,ez=ipe,tz=ez&&ez.isTypedArray,spe=tz?ope(tz):ape,FG=spe,lpe=dhe,cpe=GR,upe=Fa,dpe=RG,fpe=qR,hpe=FG,ppe=Object.prototype,mpe=ppe.hasOwnProperty;function gpe(t,e){var n=upe(t),r=!n&&cpe(t),i=!n&&!r&&dpe(t),a=!n&&!r&&!i&&hpe(t),o=n||r||i||a,s=o?lpe(t.length,String):[],l=s.length;for(var c in t)(e||mpe.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||fpe(c,l)))&&s.push(c);return s}var vpe=gpe,ype=Object.prototype;function bpe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||ype;return t===n}var xpe=bpe;function wpe(t,e){return function(n){return t(e(n))}}var MG=wpe,Spe=MG,$pe=Spe(Object.keys,Object),Cpe=$pe,Epe=xpe,Tpe=Cpe,Ipe=Object.prototype,Npe=Ipe.hasOwnProperty;function kpe(t){if(!Epe(t))return Tpe(t);var e=[];for(var n in Object(t))Npe.call(t,n)&&n!="constructor"&&e.push(n);return e}var Ope=kpe,Ape=kR,_pe=KR;function Ppe(t){return t!=null&&_pe(t.length)&&!Ape(t)}var X0=Ppe,Rpe=vpe,Dpe=Ope,Fpe=X0;function Mpe(t){return Fpe(t)?Rpe(t):Dpe(t)}var MC=Mpe,Lpe=Jfe,jpe=che,zpe=MC;function Bpe(t){return Lpe(t,zpe,jpe)}var Vpe=Bpe,nz=Vpe,Wpe=1,Upe=Object.prototype,Hpe=Upe.hasOwnProperty;function Gpe(t,e,n,r,i,a){var o=n&Wpe,s=nz(t),l=s.length,c=nz(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var f=s[d];if(!(o?f in e:Hpe.call(e,f)))return!1}var h=a.get(t),p=a.get(e);if(h&&p)return h==e&&p==t;var g=!0;a.set(t,e),a.set(e,t);for(var m=o;++d<l;){f=s[d];var v=t[f],y=e[f];if(r)var b=o?r(y,v,f,e,t,a):r(v,y,f,t,e,a);if(!(b===void 0?v===y||i(v,y,n,r,a):b)){g=!1;break}m||(m=f=="constructor")}if(g&&!m){var w=t.constructor,x=e.constructor;w!=x&&"constructor"in t&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof x=="function"&&x instanceof x)&&(g=!1)}return a.delete(t),a.delete(e),g}var qpe=Gpe,Kpe=$f,Xpe=$l,Ype=Kpe(Xpe,"DataView"),Zpe=Ype,Qpe=$f,Jpe=$l,eme=Qpe(Jpe,"Promise"),tme=eme,nme=$f,rme=$l,ime=nme(rme,"Set"),LG=ime,ame=$f,ome=$l,sme=ame(ome,"WeakMap"),lme=sme,vO=Zpe,yO=AR,bO=tme,xO=LG,wO=lme,jG=lc,vm=U8,rz="[object Map]",cme="[object Object]",iz="[object Promise]",az="[object Set]",oz="[object WeakMap]",sz="[object DataView]",ume=vm(vO),dme=vm(yO),fme=vm(bO),hme=vm(xO),pme=vm(wO),ud=jG;(vO&&ud(new vO(new ArrayBuffer(1)))!=sz||yO&&ud(new yO)!=rz||bO&&ud(bO.resolve())!=iz||xO&&ud(new xO)!=az||wO&&ud(new wO)!=oz)&&(ud=function(t){var e=jG(t),n=e==cme?t.constructor:void 0,r=n?vm(n):"";if(r)switch(r){case ume:return sz;case dme:return rz;case fme:return iz;case hme:return az;case pme:return oz}return e});var mme=ud,OI=IG,gme=AG,vme=Kfe,yme=qpe,lz=mme,cz=Fa,uz=RG,bme=FG,xme=1,dz="[object Arguments]",fz="[object Array]",S1="[object Object]",wme=Object.prototype,hz=wme.hasOwnProperty;function Sme(t,e,n,r,i,a){var o=cz(t),s=cz(e),l=o?fz:lz(t),c=s?fz:lz(e);l=l==dz?S1:l,c=c==dz?S1:c;var u=l==S1,d=c==S1,f=l==c;if(f&&uz(t)){if(!uz(e))return!1;o=!0,u=!1}if(f&&!u)return a||(a=new OI),o||bme(t)?gme(t,e,n,r,i,a):vme(t,e,l,n,r,i,a);if(!(n&xme)){var h=u&&hz.call(t,"__wrapped__"),p=d&&hz.call(e,"__wrapped__");if(h||p){var g=h?t.value():t,m=p?e.value():e;return a||(a=new OI),i(g,m,n,r,a)}}return f?(a||(a=new OI),yme(t,e,n,r,i,a)):!1}var $me=Sme,Cme=$me,pz=cc;function zG(t,e,n,r,i){return t===e?!0:t==null||e==null||!pz(t)&&!pz(e)?t!==t&&e!==e:Cme(t,e,n,r,zG,i)}var XR=zG,Eme=IG,Tme=XR,Ime=1,Nme=2;function kme(t,e,n,r){var i=n.length,a=i,o=!r;if(t==null)return!a;for(t=Object(t);i--;){var s=n[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=n[i];var l=s[0],c=t[l],u=s[1];if(o&&s[2]){if(c===void 0&&!(l in t))return!1}else{var d=new Eme;if(r)var f=r(c,u,l,t,e,d);if(!(f===void 0?Tme(u,c,Ime|Nme,r,d):f))return!1}}return!0}var Ome=kme,Ame=ku;function _me(t){return t===t&&!Ame(t)}var BG=_me,Pme=BG,Rme=MC;function Dme(t){for(var e=Rme(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Pme(i)]}return e}var Fme=Dme;function Mme(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var VG=Mme,Lme=Ome,jme=Fme,zme=VG;function Bme(t){var e=jme(t);return e.length==1&&e[0][2]?zme(e[0][0],e[0][1]):function(n){return n===t||Lme(n,t,e)}}var Vme=Bme;function Wme(t,e){return t!=null&&e in Object(t)}var Ume=Wme,Hme=X8,Gme=GR,qme=Fa,Kme=qR,Xme=KR,Yme=SC;function Zme(t,e,n){e=Hme(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var o=Yme(e[r]);if(!(a=t!=null&&n(t,o)))break;t=t[o]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&Xme(i)&&Kme(o,i)&&(qme(t)||Gme(t)))}var Qme=Zme,Jme=Ume,ege=Qme;function tge(t,e){return t!=null&&ege(t,e,Jme)}var nge=tge,rge=XR,ige=Y8,age=nge,oge=NR,sge=BG,lge=VG,cge=SC,uge=1,dge=2;function fge(t,e){return oge(t)&&sge(e)?lge(cge(t),e):function(n){var r=ige(n,t);return r===void 0&&r===e?age(n,t):rge(e,r,uge|dge)}}var hge=fge;function pge(t){return t}var ym=pge;function mge(t){return function(e){return e==null?void 0:e[t]}}var gge=mge,vge=DR;function yge(t){return function(e){return vge(e,t)}}var bge=yge,xge=gge,wge=bge,Sge=NR,$ge=SC;function Cge(t){return Sge(t)?xge($ge(t)):wge(t)}var Ege=Cge,Tge=Vme,Ige=hge,Nge=ym,kge=Fa,Oge=Ege;function Age(t){return typeof t=="function"?t:t==null?Nge:typeof t=="object"?kge(t)?Ige(t[0],t[1]):Tge(t):Oge(t)}var Cl=Age;function _ge(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var WG=_ge;function Pge(t){return t!==t}var Rge=Pge;function Dge(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var Fge=Dge,Mge=WG,Lge=Rge,jge=Fge;function zge(t,e,n){return e===e?jge(t,e,n):Mge(t,Lge,n)}var Bge=zge,Vge=Bge;function Wge(t,e){var n=t==null?0:t.length;return!!n&&Vge(t,e,0)>-1}var Uge=Wge;function Hge(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var Gge=Hge;function qge(){}var Kge=qge,AI=LG,Xge=Kge,Yge=HR,Zge=1/0,Qge=AI&&1/Yge(new AI([,-0]))[1]==Zge?function(t){return new AI(t)}:Xge,Jge=Qge,eve=NG,tve=Uge,nve=Gge,rve=OG,ive=Jge,ave=HR,ove=200;function sve(t,e,n){var r=-1,i=tve,a=t.length,o=!0,s=[],l=s;if(n)o=!1,i=nve;else if(a>=ove){var c=e?null:ive(t);if(c)return ave(c);o=!1,i=rve,l=new eve}else l=e?[]:s;e:for(;++r<a;){var u=t[r],d=e?e(u):u;if(u=n||u!==0?u:0,o&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),s.push(u)}else i(l,d,n)||(l!==s&&l.push(d),s.push(u))}return s}var lve=sve,cve=Cl,uve=lve;function dve(t,e){return t&&t.length?uve(t,cve(e)):[]}var fve=dve;const mz=Gt(fve);function UG(t,e,n){return e===!0?mz(t,n):gt(e)?mz(t,e):t}function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}var hve=["ref"];function gz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gz(Object(n),!0).forEach(function(r){LC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GG(r.key),r)}}function mve(t,e,n){return e&&vz(t.prototype,e),n&&vz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function gve(t,e,n){return e=xS(e),vve(t,HG()?Reflect.construct(e,n||[],xS(t).constructor):e.apply(t,n))}function vve(t,e){if(e&&(pp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yve(t)}function yve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HG=function(){return!!t})()}function xS(t){return xS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xS(t)}function bve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SO(t,e)}function SO(t,e){return SO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SO(t,e)}function LC(t,e,n){return e=GG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GG(t){var e=xve(t,"string");return pp(e)=="symbol"?e:e+""}function xve(t,e){if(pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function wve(t,e){if(t==null)return{};var n=Sve(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $ve(t){return t.value}function Cve(t,e){if(B.isValidElement(t))return B.cloneElement(t,e);if(typeof t=="function")return B.createElement(t,e);e.ref;var n=wve(e,hve);return B.createElement(UR,n)}var yz=1,xs=function(t){function e(){var n;pve(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=gve(this,e,[].concat(i)),LC(n,"lastBoundingBox",{width:-1,height:-1}),n}return bve(e,t),mve(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>yz||Math.abs(i.height-this.lastBoundingBox.height)>yz)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?kl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,o=i.align,s=i.verticalAlign,l=i.margin,c=i.chartWidth,u=i.chartHeight,d,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var h=this.getBBoxSnapshot();d={left:((c||0)-h.width)/2}}else d=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var p=this.getBBoxSnapshot();f={top:((u||0)-p.height)/2}}else f=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return kl(kl({},d),f)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,o=i.width,s=i.height,l=i.wrapperStyle,c=i.payloadUniqBy,u=i.payload,d=kl(kl({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return B.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(h){r.wrapperNode=h}},Cve(a,kl(kl({},this.props),{},{payload:UG(u,c,$ve)})))}}],[{key:"getWithHeight",value:function(r,i){var a=kl(kl({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&Ae(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(S.PureComponent);LC(xs,"displayName","Legend");LC(xs,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var bz=K0,Eve=GR,Tve=Fa,xz=bz?bz.isConcatSpreadable:void 0;function Ive(t){return Tve(t)||Eve(t)||!!(xz&&t&&t[xz])}var Nve=Ive,kve=_G,Ove=Nve;function qG(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=Ove),i||(i=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?qG(s,e-1,n,r,i):kve(i,s):r||(i[i.length]=s)}return i}var KG=qG;function Ave(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var l=o[t?s:++i];if(n(a[l],l,a)===!1)break}return e}}var _ve=Ave,Pve=_ve,Rve=Pve(),Dve=Rve,Fve=Dve,Mve=MC;function Lve(t,e){return t&&Fve(t,e,Mve)}var XG=Lve,jve=X0;function zve(t,e){return function(n,r){if(n==null)return n;if(!jve(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=Object(n);(e?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}var Bve=zve,Vve=XG,Wve=Bve,Uve=Wve(Vve),YR=Uve,Hve=YR,Gve=X0;function qve(t,e){var n=-1,r=Gve(t)?Array(t.length):[];return Hve(t,function(i,a,o){r[++n]=e(i,a,o)}),r}var YG=qve;function Kve(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Xve=Kve,wz=um;function Yve(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,a=wz(t),o=e!==void 0,s=e===null,l=e===e,c=wz(e);if(!s&&!c&&!a&&t>e||a&&o&&l&&!s&&!c||r&&o&&l||!n&&l||!i)return 1;if(!r&&!a&&!c&&t<e||c&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!l)return-1}return 0}var Zve=Yve,Qve=Zve;function Jve(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;++r<o;){var l=Qve(i[r],a[r]);if(l){if(r>=s)return l;var c=n[r];return l*(c=="desc"?-1:1)}}return t.index-e.index}var eye=Jve,_I=RR,tye=DR,nye=Cl,rye=YG,iye=Xve,aye=DG,oye=eye,sye=ym,lye=Fa;function cye(t,e,n){e.length?e=_I(e,function(a){return lye(a)?function(o){return tye(o,a.length===1?a[0]:a)}:a}):e=[sye];var r=-1;e=_I(e,aye(nye));var i=rye(t,function(a,o,s){var l=_I(e,function(c){return c(a)});return{criteria:l,index:++r,value:a}});return iye(i,function(a,o){return oye(a,o,n)})}var uye=cye;function dye(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var fye=dye,hye=fye,Sz=Math.max;function pye(t,e,n){return e=Sz(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=Sz(r.length-e,0),o=Array(a);++i<a;)o[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(o),hye(t,this,s)}}var mye=pye;function gye(t){return function(){return t}}var vye=gye,yye=$f,bye=function(){try{var t=yye(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ZG=bye,xye=vye,$z=ZG,wye=ym,Sye=$z?function(t,e){return $z(t,"toString",{configurable:!0,enumerable:!1,value:xye(e),writable:!0})}:wye,$ye=Sye,Cye=800,Eye=16,Tye=Date.now;function Iye(t){var e=0,n=0;return function(){var r=Tye(),i=Eye-(r-n);if(n=r,i>0){if(++e>=Cye)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Nye=Iye,kye=$ye,Oye=Nye,Aye=Oye(kye),_ye=Aye,Pye=ym,Rye=mye,Dye=_ye;function Fye(t,e){return Dye(Rye(t,e,Pye),t+"")}var Mye=Fye,Lye=OR,jye=X0,zye=qR,Bye=ku;function Vye(t,e,n){if(!Bye(n))return!1;var r=typeof e;return(r=="number"?jye(n)&&zye(e,n.length):r=="string"&&e in n)?Lye(n[e],t):!1}var jC=Vye,Wye=KG,Uye=uye,Hye=Mye,Cz=jC,Gye=Hye(function(t,e){if(t==null)return[];var n=e.length;return n>1&&Cz(t,e[0],e[1])?e=[]:n>2&&Cz(e[0],e[1],e[2])&&(e=[e[0]]),Uye(t,Wye(e,1),[])}),qye=Gye;const ZR=Gt(qye);function Ny(t){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(t)}function $O(){return $O=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$O.apply(this,arguments)}function Kye(t,e){return Qye(t)||Zye(t,e)||Yye(t,e)||Xye()}function Xye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yye(t,e){if(t){if(typeof t=="string")return Ez(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ez(t,e)}}function Ez(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Qye(t){if(Array.isArray(t))return t}function Tz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tz(Object(n),!0).forEach(function(r){Jye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jye(t,e,n){return e=e0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e0e(t){var e=t0e(t,"string");return Ny(e)=="symbol"?e:e+""}function t0e(t,e){if(Ny(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ny(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n0e(t){return Array.isArray(t)&&zr(t[0])&&zr(t[1])?t.join(" ~ "):t}var r0e=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,s=o===void 0?{}:o,l=e.labelStyle,c=l===void 0?{}:l,u=e.payload,d=e.formatter,f=e.itemSorter,h=e.wrapperClassName,p=e.labelClassName,g=e.label,m=e.labelFormatter,v=e.accessibilityLayer,y=v===void 0?!1:v,b=function(){if(u&&u.length){var k={padding:0,margin:0},O=(f?ZR(u,f):u).map(function(_,P){if(_.type==="none")return null;var D=PI({display:"block",paddingTop:4,paddingBottom:4,color:_.color||"#000"},s),L=_.formatter||d||n0e,R=_.value,F=_.name,V=R,H=F;if(L&&V!=null&&H!=null){var U=L(R,F,_,P,u);if(Array.isArray(U)){var W=Kye(U,2);V=W[0],H=W[1]}else V=U}return B.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:D},zr(H)?B.createElement("span",{className:"recharts-tooltip-item-name"},H):null,zr(H)?B.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,B.createElement("span",{className:"recharts-tooltip-item-value"},V),B.createElement("span",{className:"recharts-tooltip-item-unit"},_.unit||""))});return B.createElement("ul",{className:"recharts-tooltip-item-list",style:k},O)}return null},w=PI({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),x=PI({margin:0},c),$=!xt(g),C=$?g:"",E=$t("recharts-default-tooltip",h),I=$t("recharts-tooltip-label",p);$&&m&&u!==void 0&&u!==null&&(C=m(g,u));var T=y?{role:"status","aria-live":"assertive"}:{};return B.createElement("div",$O({className:E,style:w},T),B.createElement("p",{className:I,style:x},B.isValidElement(C)?C:"".concat(C)),b())};function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}function $1(t,e,n){return e=i0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i0e(t){var e=a0e(t,"string");return ky(e)=="symbol"?e:e+""}function a0e(t,e){if(ky(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ky(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ev="recharts-tooltip-wrapper",o0e={visibility:"hidden"};function s0e(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return $t(ev,$1($1($1($1({},"".concat(ev,"-right"),Ae(n)&&e&&Ae(e.x)&&n>=e.x),"".concat(ev,"-left"),Ae(n)&&e&&Ae(e.x)&&n<e.x),"".concat(ev,"-bottom"),Ae(r)&&e&&Ae(e.y)&&r>=e.y),"".concat(ev,"-top"),Ae(r)&&e&&Ae(e.y)&&r<e.y))}function Iz(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,o=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,c=t.viewBoxDimension;if(a&&Ae(a[r]))return a[r];var u=n[r]-s-i,d=n[r]+i;if(e[r])return o[r]?u:d;if(o[r]){var f=u,h=l[r];return f<h?Math.max(d,l[r]):Math.max(u,l[r])}var p=d+s,g=l[r]+c;return p>g?Math.max(u,l[r]):Math.max(d,l[r])}function l0e(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function c0e(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,o=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,c,u,d;return o.height>0&&o.width>0&&n?(u=Iz({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),d=Iz({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),c=l0e({translateX:u,translateY:d,useTranslate3d:s})):c=o0e,{cssProperties:c,cssClasses:s0e({translateX:u,translateY:d,coordinate:n})}}function mp(t){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mp(t)}function Nz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nz(Object(n),!0).forEach(function(r){EO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JG(r.key),r)}}function f0e(t,e,n){return e&&d0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function h0e(t,e,n){return e=wS(e),p0e(t,QG()?Reflect.construct(e,n||[],wS(t).constructor):e.apply(t,n))}function p0e(t,e){if(e&&(mp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m0e(t)}function m0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QG=function(){return!!t})()}function wS(t){return wS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wS(t)}function g0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CO(t,e)}function CO(t,e){return CO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CO(t,e)}function EO(t,e,n){return e=JG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JG(t){var e=v0e(t,"string");return mp(e)=="symbol"?e:e+""}function v0e(t,e){if(mp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Oz=1,y0e=function(t){function e(){var n;u0e(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=h0e(this,e,[].concat(i)),EO(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),EO(n,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,c,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(c=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:0}})}}),n}return g0e(e,t),f0e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>Oz||Math.abs(r.height-this.state.lastBoundingBox.height)>Oz)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.children,u=i.coordinate,d=i.hasPayload,f=i.isAnimationActive,h=i.offset,p=i.position,g=i.reverseDirection,m=i.useTranslate3d,v=i.viewBox,y=i.wrapperStyle,b=c0e({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:h,position:p,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:v}),w=b.cssClasses,x=b.cssProperties,$=kz(kz({transition:f&&a?"transform ".concat(s,"ms ").concat(l):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0},y);return B.createElement("div",{tabIndex:-1,className:w,style:$,ref:function(E){r.wrapperNode=E}},c)}}])}(S.PureComponent),b0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ou={isSsr:b0e()};function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}function Az(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _z(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Az(Object(n),!0).forEach(function(r){QR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Az(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t7(r.key),r)}}function S0e(t,e,n){return e&&w0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $0e(t,e,n){return e=SS(e),C0e(t,e7()?Reflect.construct(e,n||[],SS(t).constructor):e.apply(t,n))}function C0e(t,e){if(e&&(gp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E0e(t)}function E0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e7=function(){return!!t})()}function SS(t){return SS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SS(t)}function T0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TO(t,e)}function TO(t,e){return TO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},TO(t,e)}function QR(t,e,n){return e=t7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t7(t){var e=I0e(t,"string");return gp(e)=="symbol"?e:e+""}function I0e(t,e){if(gp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function N0e(t){return t.dataKey}function k0e(t,e){return B.isValidElement(t)?B.cloneElement(t,e):typeof t=="function"?B.createElement(t,e):B.createElement(r0e,e)}var $a=function(t){function e(){return x0e(this,e),$0e(this,e,arguments)}return T0e(e,t),S0e(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,c=i.content,u=i.coordinate,d=i.filterNull,f=i.isAnimationActive,h=i.offset,p=i.payload,g=i.payloadUniqBy,m=i.position,v=i.reverseDirection,y=i.useTranslate3d,b=i.viewBox,w=i.wrapperStyle,x=p??[];d&&x.length&&(x=UG(p.filter(function(C){return C.value!=null&&(C.hide!==!0||r.props.includeHidden)}),g,N0e));var $=x.length>0;return B.createElement(y0e,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:f,active:a,coordinate:u,hasPayload:$,offset:h,position:m,reverseDirection:v,useTranslate3d:y,viewBox:b,wrapperStyle:w},k0e(c,_z(_z({},this.props),{},{payload:x})))}}])}(S.PureComponent);QR($a,"displayName","Tooltip");QR($a,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ou.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var O0e=$l,A0e=function(){return O0e.Date.now()},_0e=A0e,P0e=/\s/;function R0e(t){for(var e=t.length;e--&&P0e.test(t.charAt(e)););return e}var D0e=R0e,F0e=D0e,M0e=/^\s+/;function L0e(t){return t&&t.slice(0,F0e(t)+1).replace(M0e,"")}var j0e=L0e,z0e=j0e,Pz=ku,B0e=um,Rz=NaN,V0e=/^[-+]0x[0-9a-f]+$/i,W0e=/^0b[01]+$/i,U0e=/^0o[0-7]+$/i,H0e=parseInt;function G0e(t){if(typeof t=="number")return t;if(B0e(t))return Rz;if(Pz(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Pz(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=z0e(t);var n=W0e.test(t);return n||U0e.test(t)?H0e(t.slice(2),n?2:8):V0e.test(t)?Rz:+t}var n7=G0e,q0e=ku,RI=_0e,Dz=n7,K0e="Expected a function",X0e=Math.max,Y0e=Math.min;function Z0e(t,e,n){var r,i,a,o,s,l,c=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(K0e);e=Dz(e)||0,q0e(n)&&(u=!!n.leading,d="maxWait"in n,a=d?X0e(Dz(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f);function h($){var C=r,E=i;return r=i=void 0,c=$,o=t.apply(E,C),o}function p($){return c=$,s=setTimeout(v,e),u?h($):o}function g($){var C=$-l,E=$-c,I=e-C;return d?Y0e(I,a-E):I}function m($){var C=$-l,E=$-c;return l===void 0||C>=e||C<0||d&&E>=a}function v(){var $=RI();if(m($))return y($);s=setTimeout(v,g($))}function y($){return s=void 0,f&&r?h($):(r=i=void 0,o)}function b(){s!==void 0&&clearTimeout(s),c=0,r=l=i=s=void 0}function w(){return s===void 0?o:y(RI())}function x(){var $=RI(),C=m($);if(r=arguments,i=this,l=$,C){if(s===void 0)return p(l);if(d)return clearTimeout(s),s=setTimeout(v,e),h(l)}return s===void 0&&(s=setTimeout(v,e)),o}return x.cancel=b,x.flush=w,x}var Q0e=Z0e,J0e=Q0e,ebe=ku,tbe="Expected a function";function nbe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(tbe);return ebe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),J0e(t,e,{leading:r,maxWait:e,trailing:i})}var rbe=nbe;const r7=Gt(rbe);function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function Fz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fz(Object(n),!0).forEach(function(r){ibe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ibe(t,e,n){return e=abe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function abe(t){var e=obe(t,"string");return Oy(e)=="symbol"?e:e+""}function obe(t,e){if(Oy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Oy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sbe(t,e){return dbe(t)||ube(t,e)||cbe(t,e)||lbe()}function lbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cbe(t,e){if(t){if(typeof t=="string")return Mz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mz(t,e)}}function Mz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ube(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function dbe(t){if(Array.isArray(t))return t}var zC=S.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,o=a===void 0?"100%":a,s=t.height,l=s===void 0?"100%":s,c=t.minWidth,u=c===void 0?0:c,d=t.minHeight,f=t.maxHeight,h=t.children,p=t.debounce,g=p===void 0?0:p,m=t.id,v=t.className,y=t.onResize,b=t.style,w=b===void 0?{}:b,x=S.useRef(null),$=S.useRef();$.current=y,S.useImperativeHandle(e,function(){return Object.defineProperty(x.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),x.current},configurable:!0})});var C=S.useState({containerWidth:i.width,containerHeight:i.height}),E=sbe(C,2),I=E[0],T=E[1],N=S.useCallback(function(O,_){T(function(P){var D=Math.round(O),L=Math.round(_);return P.containerWidth===D&&P.containerHeight===L?P:{containerWidth:D,containerHeight:L}})},[]);S.useEffect(function(){var O=function(F){var V,H=F[0].contentRect,U=H.width,W=H.height;N(U,W),(V=$.current)===null||V===void 0||V.call($,U,W)};g>0&&(O=r7(O,g,{trailing:!0,leading:!1}));var _=new ResizeObserver(O),P=x.current.getBoundingClientRect(),D=P.width,L=P.height;return N(D,L),_.observe(x.current),function(){_.disconnect()}},[N,g]);var k=S.useMemo(function(){var O=I.containerWidth,_=I.containerHeight;if(O<0||_<0)return null;bs(Cd(o)||Cd(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),bs(!n||n>0,"The aspect(%s) must be greater than zero.",n);var P=Cd(o)?O:o,D=Cd(l)?_:l;n&&n>0&&(P?D=P/n:D&&(P=D*n),f&&D>f&&(D=f)),bs(P>0||D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,D,o,l,u,d,n);var L=!Array.isArray(h)&&Ul(h.type).endsWith("Chart");return B.Children.map(h,function(R){return B.isValidElement(R)?S.cloneElement(R,C1({width:P,height:D},L?{style:C1({height:"100%",width:"100%",maxHeight:D,maxWidth:P},R.props.style)}:{})):R})},[n,h,l,f,d,u,I,o]);return B.createElement("div",{id:m?"".concat(m):void 0,className:$t("recharts-responsive-container",v),style:C1(C1({},w),{},{width:o,height:l,minWidth:u,minHeight:d,maxHeight:f}),ref:x},k)}),BC=function(e){return null};BC.displayName="Cell";function Ay(t){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(t)}function Lz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lz(Object(n),!0).forEach(function(r){fbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fbe(t,e,n){return e=hbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hbe(t){var e=pbe(t,"string");return Ay(e)=="symbol"?e:e+""}function pbe(t,e){if(Ay(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ay(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qf={widthCache:{},cacheCount:0},mbe=2e3,gbe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},jz="recharts_measurement_span";function vbe(t){var e=IO({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Yv=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ou.isSsr)return{width:0,height:0};var r=vbe(n),i=JSON.stringify({text:e,copyStyle:r});if(Qf.widthCache[i])return Qf.widthCache[i];try{var a=document.getElementById(jz);a||(a=document.createElement("span"),a.setAttribute("id",jz),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=IO(IO({},gbe),r);Object.assign(a.style,o),a.textContent="".concat(e);var s=a.getBoundingClientRect(),l={width:s.width,height:s.height};return Qf.widthCache[i]=l,++Qf.cacheCount>mbe&&(Qf.cacheCount=0,Qf.widthCache={}),l}catch{return{width:0,height:0}}},ybe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function _y(t){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(t)}function $S(t,e){return Sbe(t)||wbe(t,e)||xbe(t,e)||bbe()}function bbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xbe(t,e){if(t){if(typeof t=="string")return zz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zz(t,e)}}function zz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Sbe(t){if(Array.isArray(t))return t}function $be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ebe(r.key),r)}}function Cbe(t,e,n){return e&&Bz(t.prototype,e),n&&Bz(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ebe(t){var e=Tbe(t,"string");return _y(e)=="symbol"?e:e+""}function Tbe(t,e){if(_y(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_y(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Wz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ibe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Nbe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,i7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},kbe=Object.keys(i7),Ah="NaN";function Obe(t,e){return t*i7[e]}var E1=function(){function t(e,n){$be(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Ibe.test(n)&&(this.num=NaN,this.unit=""),kbe.includes(n)&&(this.num=Obe(e,n),this.unit="px")}return Cbe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Nbe.exec(n))!==null&&r!==void 0?r:[],a=$S(i,3),o=a[1],s=a[2];return new t(parseFloat(o),s??"")}}])}();function a7(t){if(t.includes(Ah))return Ah;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=Vz.exec(e))!==null&&n!==void 0?n:[],i=$S(r,4),a=i[1],o=i[2],s=i[3],l=E1.parse(a??""),c=E1.parse(s??""),u=o==="*"?l.multiply(c):l.divide(c);if(u.isNaN())return Ah;e=e.replace(Vz,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,f=(d=Wz.exec(e))!==null&&d!==void 0?d:[],h=$S(f,4),p=h[1],g=h[2],m=h[3],v=E1.parse(p??""),y=E1.parse(m??""),b=g==="+"?v.add(y):v.subtract(y);if(b.isNaN())return Ah;e=e.replace(Wz,b.toString())}return e}var Uz=/\(([^()]*)\)/;function Abe(t){for(var e=t;e.includes("(");){var n=Uz.exec(e),r=$S(n,2),i=r[1];e=e.replace(Uz,a7(i))}return e}function _be(t){var e=t.replace(/\s+/g,"");return e=Abe(e),e=a7(e),e}function Pbe(t){try{return _be(t)}catch{return Ah}}function DI(t){var e=Pbe(t.slice(5,-1));return e===Ah?"":e}var Rbe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Dbe=["dx","dy","angle","className","breakAll"];function NO(){return NO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NO.apply(this,arguments)}function Hz(t,e){if(t==null)return{};var n=Fbe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Gz(t,e){return zbe(t)||jbe(t,e)||Lbe(t,e)||Mbe()}function Mbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lbe(t,e){if(t){if(typeof t=="string")return qz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qz(t,e)}}function qz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function zbe(t){if(Array.isArray(t))return t}var o7=/[ \f\n\r\t\v\u2028\u2029]+/,s7=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];xt(n)||(r?a=n.toString().split(""):a=n.toString().split(o7));var o=a.map(function(l){return{word:l,width:Yv(l,i).width}}),s=r?0:Yv(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},Bbe=function(e,n,r,i,a){var o=e.maxLines,s=e.children,l=e.style,c=e.breakAll,u=Ae(o),d=s,f=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce(function(D,L){var R=L.word,F=L.width,V=D[D.length-1];if(V&&(i==null||a||V.width+F+r<Number(i)))V.words.push(R),V.width+=F+r;else{var H={words:[R],width:F};D.push(H)}return D},[])},h=f(n),p=function(P){return P.reduce(function(D,L){return D.width>L.width?D:L})};if(!u)return h;for(var g="…",m=function(P){var D=d.slice(0,P),L=s7({breakAll:c,style:l,children:D+g}).wordsWithComputedWidth,R=f(L),F=R.length>o||p(R).width>Number(i);return[F,R]},v=0,y=d.length-1,b=0,w;v<=y&&b<=d.length-1;){var x=Math.floor((v+y)/2),$=x-1,C=m($),E=Gz(C,2),I=E[0],T=E[1],N=m(x),k=Gz(N,1),O=k[0];if(!I&&!O&&(v=x+1),I&&O&&(y=x-1),!I&&O){w=T;break}b++}return w||h},Kz=function(e){var n=xt(e)?[]:e.toString().split(o7);return[{words:n}]},Vbe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,s=e.maxLines;if((n||r)&&!Ou.isSsr){var l,c,u=s7({breakAll:o,children:i,style:a});if(u){var d=u.wordsWithComputedWidth,f=u.spaceWidth;l=d,c=f}else return Kz(i);return Bbe({breakAll:o,children:i,maxLines:s,style:a},l,c,n,r)}return Kz(i)},Xz="#808080",Zd=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.lineHeight,s=o===void 0?"1em":o,l=e.capHeight,c=l===void 0?"0.71em":l,u=e.scaleToFit,d=u===void 0?!1:u,f=e.textAnchor,h=f===void 0?"start":f,p=e.verticalAnchor,g=p===void 0?"end":p,m=e.fill,v=m===void 0?Xz:m,y=Hz(e,Rbe),b=S.useMemo(function(){return Vbe({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:d,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,d,y.style,y.width]),w=y.dx,x=y.dy,$=y.angle,C=y.className,E=y.breakAll,I=Hz(y,Dbe);if(!zr(r)||!zr(a))return null;var T=r+(Ae(w)?w:0),N=a+(Ae(x)?x:0),k;switch(g){case"start":k=DI("calc(".concat(c,")"));break;case"middle":k=DI("calc(".concat((b.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:k=DI("calc(".concat(b.length-1," * -").concat(s,")"));break}var O=[];if(d){var _=b[0].width,P=y.width;O.push("scale(".concat((Ae(P)?P/_:1)/_,")"))}return $&&O.push("rotate(".concat($,", ").concat(T,", ").concat(N,")")),O.length&&(I.transform=O.join(" ")),B.createElement("text",NO({},lt(I,!0),{x:T,y:N,className:$t("recharts-text",C),textAnchor:h,fill:v.includes("url")?Xz:v}),b.map(function(D,L){var R=D.words.join(E?"":" ");return B.createElement("tspan",{x:T,dy:L===0?k:s,key:"".concat(R,"-").concat(L)},R)}))};function ou(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wbe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function JR(t){let e,n,r;t.length!==2?(e=ou,n=(s,l)=>ou(t(s),l),r=(s,l)=>t(s)-l):(e=t===ou||t===Wbe?t:Ube,n=t,r=t);function i(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(s[d],l)<0?c=d+1:u=d}while(c<u)}return c}function a(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(s[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(s,l,c=0,u=s.length){const d=i(s,l,c,u-1);return d>c&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:o,right:a}}function Ube(){return 0}function l7(t){return t===null?NaN:+t}function*Hbe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Gbe=JR(ou),Y0=Gbe.right;JR(l7).center;class Yz extends Map{constructor(e,n=Xbe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Zz(this,e))}has(e){return super.has(Zz(this,e))}set(e,n){return super.set(qbe(this,e),n)}delete(e){return super.delete(Kbe(this,e))}}function Zz({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function qbe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Kbe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Xbe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ybe(t=ou){if(t===ou)return c7;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function c7(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Zbe=Math.sqrt(50),Qbe=Math.sqrt(10),Jbe=Math.sqrt(2);function CS(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Zbe?10:a>=Qbe?5:a>=Jbe?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?CS(t,e,n*2):[s,l,c]}function kO(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?CS(e,t,n):CS(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function OO(t,e,n){return e=+e,t=+t,n=+n,CS(t,e,n)[2]}function AO(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?OO(e,t,n):OO(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Qz(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Jz(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function u7(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?c7:Ybe(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),h=Math.max(n,Math.floor(e-c*d/l+f)),p=Math.min(r,Math.floor(e+(l-c)*d/l+f));u7(t,e,h,p,i)}const a=t[e];let o=n,s=r;for(tv(t,n,e),i(t[r],a)>0&&tv(t,n,r);o<s;){for(tv(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[n],a)===0?tv(t,n,s):(++s,tv(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function tv(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function exe(t,e,n){if(t=Float64Array.from(Hbe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Jz(t);if(e>=1)return Qz(t);var r,i=(r-1)*e,a=Math.floor(i),o=Qz(u7(t,a).subarray(0,a+1)),s=Jz(t.subarray(a+1));return o+(s-o)*(i-a)}}function txe(t,e,n=l7){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function nxe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Xo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function uc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const _O=Symbol("implicit");function eD(){var t=new Yz,e=[],n=[],r=_O;function i(a){let o=t.get(a);if(o===void 0){if(r!==_O)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Yz;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return eD(e,n).unknown(r)},Xo.apply(i,arguments),i}function Py(){var t=eD().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var f=e().length,h=i<r,p=h?i:r,g=h?r:i;a=(g-p)/Math.max(1,f-l+c*2),s&&(a=Math.floor(a)),p+=(g-p-a*(f-l))*u,o=a*(1-l),s&&(p=Math.round(p),o=Math.round(o));var m=nxe(f).map(function(v){return p+a*v});return n(h?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,s=!0,d()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(f){return arguments.length?(s=!!f,d()):s},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.copy=function(){return Py(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(u)},Xo.apply(d(),arguments)}function d7(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return d7(e())},t}function Zv(){return d7(Py.apply(null,arguments).paddingInner(1))}function tD(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function f7(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Z0(){}var Ry=.7,ES=1/Ry,Kh="\\s*([+-]?\\d+)\\s*",Dy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rxe=/^#([0-9a-f]{3,8})$/,ixe=new RegExp(`^rgb\\(${Kh},${Kh},${Kh}\\)$`),axe=new RegExp(`^rgb\\(${rl},${rl},${rl}\\)$`),oxe=new RegExp(`^rgba\\(${Kh},${Kh},${Kh},${Dy}\\)$`),sxe=new RegExp(`^rgba\\(${rl},${rl},${rl},${Dy}\\)$`),lxe=new RegExp(`^hsl\\(${Dy},${rl},${rl}\\)$`),cxe=new RegExp(`^hsla\\(${Dy},${rl},${rl},${Dy}\\)$`),e4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tD(Z0,Fy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:t4,formatHex:t4,formatHex8:uxe,formatHsl:dxe,formatRgb:n4,toString:n4});function t4(){return this.rgb().formatHex()}function uxe(){return this.rgb().formatHex8()}function dxe(){return h7(this).formatHsl()}function n4(){return this.rgb().formatRgb()}function Fy(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=rxe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?r4(e):n===3?new Ia(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?T1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?T1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ixe.exec(t))?new Ia(e[1],e[2],e[3],1):(e=axe.exec(t))?new Ia(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=oxe.exec(t))?T1(e[1],e[2],e[3],e[4]):(e=sxe.exec(t))?T1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=lxe.exec(t))?o4(e[1],e[2]/100,e[3]/100,1):(e=cxe.exec(t))?o4(e[1],e[2]/100,e[3]/100,e[4]):e4.hasOwnProperty(t)?r4(e4[t]):t==="transparent"?new Ia(NaN,NaN,NaN,0):null}function r4(t){return new Ia(t>>16&255,t>>8&255,t&255,1)}function T1(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ia(t,e,n,r)}function fxe(t){return t instanceof Z0||(t=Fy(t)),t?(t=t.rgb(),new Ia(t.r,t.g,t.b,t.opacity)):new Ia}function PO(t,e,n,r){return arguments.length===1?fxe(t):new Ia(t,e,n,r??1)}function Ia(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}tD(Ia,PO,f7(Z0,{brighter(t){return t=t==null?ES:Math.pow(ES,t),new Ia(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ry:Math.pow(Ry,t),new Ia(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ia(Dd(this.r),Dd(this.g),Dd(this.b),TS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i4,formatHex:i4,formatHex8:hxe,formatRgb:a4,toString:a4}));function i4(){return`#${Ed(this.r)}${Ed(this.g)}${Ed(this.b)}`}function hxe(){return`#${Ed(this.r)}${Ed(this.g)}${Ed(this.b)}${Ed((isNaN(this.opacity)?1:this.opacity)*255)}`}function a4(){const t=TS(this.opacity);return`${t===1?"rgb(":"rgba("}${Dd(this.r)}, ${Dd(this.g)}, ${Dd(this.b)}${t===1?")":`, ${t})`}`}function TS(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Dd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ed(t){return t=Dd(t),(t<16?"0":"")+t.toString(16)}function o4(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ms(t,e,n,r)}function h7(t){if(t instanceof ms)return new ms(t.h,t.s,t.l,t.opacity);if(t instanceof Z0||(t=Fy(t)),!t)return new ms;if(t instanceof ms)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new ms(o,s,l,t.opacity)}function pxe(t,e,n,r){return arguments.length===1?h7(t):new ms(t,e,n,r??1)}function ms(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}tD(ms,pxe,f7(Z0,{brighter(t){return t=t==null?ES:Math.pow(ES,t),new ms(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ry:Math.pow(Ry,t),new ms(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ia(FI(t>=240?t-240:t+120,i,r),FI(t,i,r),FI(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ms(s4(this.h),I1(this.s),I1(this.l),TS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=TS(this.opacity);return`${t===1?"hsl(":"hsla("}${s4(this.h)}, ${I1(this.s)*100}%, ${I1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function s4(t){return t=(t||0)%360,t<0?t+360:t}function I1(t){return Math.max(0,Math.min(1,t||0))}function FI(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const nD=t=>()=>t;function mxe(t,e){return function(n){return t+n*e}}function gxe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function vxe(t){return(t=+t)==1?p7:function(e,n){return n-e?gxe(e,n,t):nD(isNaN(e)?n:e)}}function p7(t,e){var n=e-t;return n?mxe(t,n):nD(isNaN(t)?e:t)}const l4=function t(e){var n=vxe(e);function r(i,a){var o=n((i=PO(i)).r,(a=PO(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),c=p7(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function yxe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function bxe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function xxe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=bm(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function wxe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function IS(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Sxe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=bm(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var RO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,MI=new RegExp(RO.source,"g");function $xe(t){return function(){return t}}function Cxe(t){return function(e){return t(e)+""}}function Exe(t,e){var n=RO.lastIndex=MI.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=RO.exec(t))&&(i=MI.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:IS(r,i)})),n=MI.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Cxe(l[0].x):$xe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)s[(d=l[u]).i]=d.x(c);return s.join("")})}function bm(t,e){var n=typeof e,r;return e==null||n==="boolean"?nD(e):(n==="number"?IS:n==="string"?(r=Fy(e))?(e=r,l4):Exe:e instanceof Fy?l4:e instanceof Date?wxe:bxe(e)?yxe:Array.isArray(e)?xxe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Sxe:IS)(t,e)}function rD(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Txe(t,e){e===void 0&&(e=t,t=bm);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function Ixe(t){return function(){return t}}function NS(t){return+t}var c4=[0,1];function aa(t){return t}function DO(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ixe(isNaN(e)?NaN:.5)}function Nxe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function kxe(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=DO(i,r),a=n(o,a)):(r=DO(r,i),a=n(a,o)),function(s){return a(r(s))}}function Oxe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=DO(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=Y0(t,s,1,r)-1;return a[l](i[l](s))}}function Q0(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function VC(){var t=c4,e=c4,n=bm,r,i,a,o=aa,s,l,c;function u(){var f=Math.min(t.length,e.length);return o!==aa&&(o=Nxe(t[0],t[f-1])),s=f>2?Oxe:kxe,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?a:(l||(l=s(t.map(r),e,n)))(r(o(f)))}return d.invert=function(f){return o(i((c||(c=s(e,t.map(r),IS)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,NS),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=rD,u()},d.clamp=function(f){return arguments.length?(o=f?!0:aa,u()):o!==aa},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(a=f,d):a},function(f,h){return r=f,i=h,u()}}function iD(){return VC()(aa,aa)}function Axe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function kS(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function vp(t){return t=kS(Math.abs(t)),t?t[1]:NaN}function _xe(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Pxe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Rxe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function My(t){if(!(e=Rxe.exec(t)))throw new Error("invalid format: "+t);var e;return new aD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}My.prototype=aD.prototype;function aD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}aD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dxe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var m7;function Fxe(t,e){var n=kS(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(m7=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+kS(t,Math.max(0,e+a-1))[0]}function u4(t,e){var n=kS(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const d4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Axe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>u4(t*100,e),r:u4,s:Fxe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function f4(t){return t}var h4=Array.prototype.map,p4=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Mxe(t){var e=t.grouping===void 0||t.thousands===void 0?f4:_xe(h4.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?f4:Pxe(h4.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=My(d);var f=d.fill,h=d.align,p=d.sign,g=d.symbol,m=d.zero,v=d.width,y=d.comma,b=d.precision,w=d.trim,x=d.type;x==="n"?(y=!0,x="g"):d4[x]||(b===void 0&&(b=12),w=!0,x="g"),(m||f==="0"&&h==="=")&&(m=!0,f="0",h="=");var $=g==="$"?n:g==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",C=g==="$"?r:/[%p]/.test(x)?o:"",E=d4[x],I=/[defgprs%]/.test(x);b=b===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function T(N){var k=$,O=C,_,P,D;if(x==="c")O=E(N)+O,N="";else{N=+N;var L=N<0||1/N<0;if(N=isNaN(N)?l:E(Math.abs(N),b),w&&(N=Dxe(N)),L&&+N==0&&p!=="+"&&(L=!1),k=(L?p==="("?p:s:p==="-"||p==="("?"":p)+k,O=(x==="s"?p4[8+m7/3]:"")+O+(L&&p==="("?")":""),I){for(_=-1,P=N.length;++_<P;)if(D=N.charCodeAt(_),48>D||D>57){O=(D===46?i+N.slice(_+1):N.slice(_))+O,N=N.slice(0,_);break}}}y&&!m&&(N=e(N,1/0));var R=k.length+N.length+O.length,F=R<v?new Array(v-R+1).join(f):"";switch(y&&m&&(N=e(F+N,F.length?v-O.length:1/0),F=""),h){case"<":N=k+N+O+F;break;case"=":N=k+F+N+O;break;case"^":N=F.slice(0,R=F.length>>1)+k+N+O+F.slice(R);break;default:N=F+k+N+O;break}return a(N)}return T.toString=function(){return d+""},T}function u(d,f){var h=c((d=My(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(vp(f)/3)))*3,g=Math.pow(10,-p),m=p4[8+p/3];return function(v){return h(g*v)+m}}return{format:c,formatPrefix:u}}var N1,oD,g7;Lxe({thousands:",",grouping:[3],currency:["$",""]});function Lxe(t){return N1=Mxe(t),oD=N1.format,g7=N1.formatPrefix,N1}function jxe(t){return Math.max(0,-vp(Math.abs(t)))}function zxe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vp(e)/3)))*3-vp(Math.abs(t)))}function Bxe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,vp(e)-vp(t))+1}function v7(t,e,n,r){var i=AO(t,e,n),a;switch(r=My(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=zxe(i,o))&&(r.precision=a),g7(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Bxe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=jxe(i))&&(r.precision=a-(r.type==="%")*2);break}}return oD(r)}function Au(t){var e=t.domain;return t.ticks=function(n){var r=e();return kO(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return v7(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,c,u=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);u-- >0;){if(c=OO(o,s,n),c===l)return r[i]=o,r[a]=s,e(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return t},t}function OS(){var t=iD();return t.copy=function(){return Q0(t,OS())},Xo.apply(t,arguments),Au(t)}function y7(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,NS),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return y7(t).unknown(e)},t=arguments.length?Array.from(t,NS):[0,1],Au(n)}function b7(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function m4(t){return Math.log(t)}function g4(t){return Math.exp(t)}function Vxe(t){return-Math.log(-t)}function Wxe(t){return-Math.exp(-t)}function Uxe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Hxe(t){return t===10?Uxe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Gxe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function v4(t){return(e,n)=>-t(-e,n)}function sD(t){const e=t(m4,g4),n=e.domain;let r=10,i,a;function o(){return i=Gxe(r),a=Hxe(r),n()[0]<0?(i=v4(i),a=v4(a),t(Vxe,Wxe)):t(m4,g4),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(n(s),o()):n()},e.ticks=s=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let f=i(c),h=i(u),p,g;const m=s==null?10:+s;let v=[];if(!(r%1)&&h-f<m){if(f=Math.floor(f),h=Math.ceil(h),c>0){for(;f<=h;++f)for(p=1;p<r;++p)if(g=f<0?p/a(-f):p*a(f),!(g<c)){if(g>u)break;v.push(g)}}else for(;f<=h;++f)for(p=r-1;p>=1;--p)if(g=f>0?p/a(-f):p*a(f),!(g<c)){if(g>u)break;v.push(g)}v.length*2<m&&(v=kO(c,u,m))}else v=kO(f,h,Math.min(h-f,m)).map(a);return d?v.reverse():v},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=My(l)).precision==null&&(l.trim=!0),l=oD(l)),s===1/0)return l;const c=Math.max(1,r*s/e.ticks().length);return u=>{let d=u/a(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>n(b7(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function x7(){const t=sD(VC()).domain([1,10]);return t.copy=()=>Q0(t,x7()).base(t.base()),Xo.apply(t,arguments),t}function y4(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function b4(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function lD(t){var e=1,n=t(y4(e),b4(e));return n.constant=function(r){return arguments.length?t(y4(e=+r),b4(e)):e},Au(n)}function w7(){var t=lD(VC());return t.copy=function(){return Q0(t,w7()).constant(t.constant())},Xo.apply(t,arguments)}function x4(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function qxe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Kxe(t){return t<0?-t*t:t*t}function cD(t){var e=t(aa,aa),n=1;function r(){return n===1?t(aa,aa):n===.5?t(qxe,Kxe):t(x4(n),x4(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Au(e)}function uD(){var t=cD(VC());return t.copy=function(){return Q0(t,uD()).exponent(t.exponent())},Xo.apply(t,arguments),t}function Xxe(){return uD.apply(null,arguments).exponent(.5)}function w4(t){return Math.sign(t)*t*t}function Yxe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function S7(){var t=iD(),e=[0,1],n=!1,r;function i(a){var o=Yxe(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(w4(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,NS)).map(w4)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return S7(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Xo.apply(i,arguments),Au(i)}function $7(){var t=[],e=[],n=[],r;function i(){var o=0,s=Math.max(1,e.length);for(n=new Array(s-1);++o<s;)n[o-1]=txe(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:e[Y0(n,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(ou),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return $7().domain(t).range(e).unknown(r)},Xo.apply(a,arguments)}function C7(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[Y0(r,l,0,n)]:a}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return C7().domain([t,e]).range(i).unknown(a)},Xo.apply(Au(o),arguments)}function E7(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Y0(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return E7().domain(t).range(e).unknown(n)},Xo.apply(i,arguments)}const LI=new Date,jI=new Date;function Hr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let c;do l.push(c=new Date(+a)),e(a,s),t(a);while(c<a&&a<o);return l},i.filter=a=>Hr(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(LI.setTime(+a),jI.setTime(+o),t(LI),t(jI),Math.floor(n(LI,jI))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const AS=Hr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);AS.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Hr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):AS);AS.range;const zl=1e3,Ro=zl*60,Bl=Ro*60,Jl=Bl*24,dD=Jl*7,S4=Jl*30,zI=Jl*365,Td=Hr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*zl)},(t,e)=>(e-t)/zl,t=>t.getUTCSeconds());Td.range;const fD=Hr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*zl)},(t,e)=>{t.setTime(+t+e*Ro)},(t,e)=>(e-t)/Ro,t=>t.getMinutes());fD.range;const hD=Hr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ro)},(t,e)=>(e-t)/Ro,t=>t.getUTCMinutes());hD.range;const pD=Hr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*zl-t.getMinutes()*Ro)},(t,e)=>{t.setTime(+t+e*Bl)},(t,e)=>(e-t)/Bl,t=>t.getHours());pD.range;const mD=Hr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Bl)},(t,e)=>(e-t)/Bl,t=>t.getUTCHours());mD.range;const J0=Hr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ro)/Jl,t=>t.getDate()-1);J0.range;const WC=Hr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Jl,t=>t.getUTCDate()-1);WC.range;const T7=Hr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Jl,t=>Math.floor(t/Jl));T7.range;function Ef(t){return Hr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ro)/dD)}const UC=Ef(0),_S=Ef(1),Zxe=Ef(2),Qxe=Ef(3),yp=Ef(4),Jxe=Ef(5),e1e=Ef(6);UC.range;_S.range;Zxe.range;Qxe.range;yp.range;Jxe.range;e1e.range;function Tf(t){return Hr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/dD)}const HC=Tf(0),PS=Tf(1),t1e=Tf(2),n1e=Tf(3),bp=Tf(4),r1e=Tf(5),i1e=Tf(6);HC.range;PS.range;t1e.range;n1e.range;bp.range;r1e.range;i1e.range;const gD=Hr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());gD.range;const vD=Hr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());vD.range;const ec=Hr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ec.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ec.range;const tc=Hr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());tc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Hr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});tc.range;function I7(t,e,n,r,i,a){const o=[[Td,1,zl],[Td,5,5*zl],[Td,15,15*zl],[Td,30,30*zl],[a,1,Ro],[a,5,5*Ro],[a,15,15*Ro],[a,30,30*Ro],[i,1,Bl],[i,3,3*Bl],[i,6,6*Bl],[i,12,12*Bl],[r,1,Jl],[r,2,2*Jl],[n,1,dD],[e,1,S4],[e,3,3*S4],[t,1,zI]];function s(c,u,d){const f=u<c;f&&([c,u]=[u,c]);const h=d&&typeof d.range=="function"?d:l(c,u,d),p=h?h.range(c,+u+1):[];return f?p.reverse():p}function l(c,u,d){const f=Math.abs(u-c)/d,h=JR(([,,m])=>m).right(o,f);if(h===o.length)return t.every(AO(c/zI,u/zI,d));if(h===0)return AS.every(Math.max(AO(c,u,d),1));const[p,g]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return p.every(g)}return[s,l]}const[a1e,o1e]=I7(tc,vD,HC,T7,mD,hD),[s1e,l1e]=I7(ec,gD,UC,J0,pD,fD);function BI(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function VI(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function nv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function c1e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=rv(i),u=iv(i),d=rv(a),f=iv(a),h=rv(o),p=iv(o),g=rv(s),m=iv(s),v=rv(l),y=iv(l),b={a:L,A:R,b:F,B:V,c:null,d:N4,e:N4,f:_1e,g:V1e,G:U1e,H:k1e,I:O1e,j:A1e,L:N7,m:P1e,M:R1e,p:H,q:U,Q:A4,s:_4,S:D1e,u:F1e,U:M1e,V:L1e,w:j1e,W:z1e,x:null,X:null,y:B1e,Y:W1e,Z:H1e,"%":O4},w={a:W,A:G,b:q,B:X,c:null,d:k4,e:k4,f:X1e,g:awe,G:swe,H:G1e,I:q1e,j:K1e,L:O7,m:Y1e,M:Z1e,p:re,q:ce,Q:A4,s:_4,S:Q1e,u:J1e,U:ewe,V:twe,w:nwe,W:rwe,x:null,X:null,y:iwe,Y:owe,Z:lwe,"%":O4},x={a:T,A:N,b:k,B:O,c:_,d:T4,e:T4,f:E1e,g:E4,G:C4,H:I4,I:I4,j:w1e,L:C1e,m:x1e,M:S1e,p:I,q:b1e,Q:I1e,s:N1e,S:$1e,u:p1e,U:m1e,V:g1e,w:h1e,W:v1e,x:P,X:D,y:E4,Y:C4,Z:y1e,"%":T1e};b.x=$(n,b),b.X=$(r,b),b.c=$(e,b),w.x=$(n,w),w.X=$(r,w),w.c=$(e,w);function $(ee,se){return function(ue){var Q=[],ye=-1,le=0,xe=ee.length,be,$e,Ne;for(ue instanceof Date||(ue=new Date(+ue));++ye<xe;)ee.charCodeAt(ye)===37&&(Q.push(ee.slice(le,ye)),($e=$4[be=ee.charAt(++ye)])!=null?be=ee.charAt(++ye):$e=be==="e"?" ":"0",(Ne=se[be])&&(be=Ne(ue,$e)),Q.push(be),le=ye+1);return Q.push(ee.slice(le,ye)),Q.join("")}}function C(ee,se){return function(ue){var Q=nv(1900,void 0,1),ye=E(Q,ee,ue+="",0),le,xe;if(ye!=ue.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(se&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(le=VI(nv(Q.y,0,1)),xe=le.getUTCDay(),le=xe>4||xe===0?PS.ceil(le):PS(le),le=WC.offset(le,(Q.V-1)*7),Q.y=le.getUTCFullYear(),Q.m=le.getUTCMonth(),Q.d=le.getUTCDate()+(Q.w+6)%7):(le=BI(nv(Q.y,0,1)),xe=le.getDay(),le=xe>4||xe===0?_S.ceil(le):_S(le),le=J0.offset(le,(Q.V-1)*7),Q.y=le.getFullYear(),Q.m=le.getMonth(),Q.d=le.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),xe="Z"in Q?VI(nv(Q.y,0,1)).getUTCDay():BI(nv(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(xe+5)%7:Q.w+Q.U*7-(xe+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,VI(Q)):BI(Q)}}function E(ee,se,ue,Q){for(var ye=0,le=se.length,xe=ue.length,be,$e;ye<le;){if(Q>=xe)return-1;if(be=se.charCodeAt(ye++),be===37){if(be=se.charAt(ye++),$e=x[be in $4?se.charAt(ye++):be],!$e||(Q=$e(ee,ue,Q))<0)return-1}else if(be!=ue.charCodeAt(Q++))return-1}return Q}function I(ee,se,ue){var Q=c.exec(se.slice(ue));return Q?(ee.p=u.get(Q[0].toLowerCase()),ue+Q[0].length):-1}function T(ee,se,ue){var Q=h.exec(se.slice(ue));return Q?(ee.w=p.get(Q[0].toLowerCase()),ue+Q[0].length):-1}function N(ee,se,ue){var Q=d.exec(se.slice(ue));return Q?(ee.w=f.get(Q[0].toLowerCase()),ue+Q[0].length):-1}function k(ee,se,ue){var Q=v.exec(se.slice(ue));return Q?(ee.m=y.get(Q[0].toLowerCase()),ue+Q[0].length):-1}function O(ee,se,ue){var Q=g.exec(se.slice(ue));return Q?(ee.m=m.get(Q[0].toLowerCase()),ue+Q[0].length):-1}function _(ee,se,ue){return E(ee,e,se,ue)}function P(ee,se,ue){return E(ee,n,se,ue)}function D(ee,se,ue){return E(ee,r,se,ue)}function L(ee){return o[ee.getDay()]}function R(ee){return a[ee.getDay()]}function F(ee){return l[ee.getMonth()]}function V(ee){return s[ee.getMonth()]}function H(ee){return i[+(ee.getHours()>=12)]}function U(ee){return 1+~~(ee.getMonth()/3)}function W(ee){return o[ee.getUTCDay()]}function G(ee){return a[ee.getUTCDay()]}function q(ee){return l[ee.getUTCMonth()]}function X(ee){return s[ee.getUTCMonth()]}function re(ee){return i[+(ee.getUTCHours()>=12)]}function ce(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var se=$(ee+="",b);return se.toString=function(){return ee},se},parse:function(ee){var se=C(ee+="",!1);return se.toString=function(){return ee},se},utcFormat:function(ee){var se=$(ee+="",w);return se.toString=function(){return ee},se},utcParse:function(ee){var se=C(ee+="",!0);return se.toString=function(){return ee},se}}}var $4={"-":"",_:" ",0:"0"},di=/^\s*\d+/,u1e=/^%/,d1e=/[\\^$*+?|[\]().{}]/g;function Yt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function f1e(t){return t.replace(d1e,"\\$&")}function rv(t){return new RegExp("^(?:"+t.map(f1e).join("|")+")","i")}function iv(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function h1e(t,e,n){var r=di.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function p1e(t,e,n){var r=di.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function m1e(t,e,n){var r=di.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function g1e(t,e,n){var r=di.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function v1e(t,e,n){var r=di.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function C4(t,e,n){var r=di.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function E4(t,e,n){var r=di.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function y1e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function b1e(t,e,n){var r=di.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function x1e(t,e,n){var r=di.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function T4(t,e,n){var r=di.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function w1e(t,e,n){var r=di.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function I4(t,e,n){var r=di.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function S1e(t,e,n){var r=di.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function $1e(t,e,n){var r=di.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function C1e(t,e,n){var r=di.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function E1e(t,e,n){var r=di.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function T1e(t,e,n){var r=u1e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function I1e(t,e,n){var r=di.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function N1e(t,e,n){var r=di.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function N4(t,e){return Yt(t.getDate(),e,2)}function k1e(t,e){return Yt(t.getHours(),e,2)}function O1e(t,e){return Yt(t.getHours()%12||12,e,2)}function A1e(t,e){return Yt(1+J0.count(ec(t),t),e,3)}function N7(t,e){return Yt(t.getMilliseconds(),e,3)}function _1e(t,e){return N7(t,e)+"000"}function P1e(t,e){return Yt(t.getMonth()+1,e,2)}function R1e(t,e){return Yt(t.getMinutes(),e,2)}function D1e(t,e){return Yt(t.getSeconds(),e,2)}function F1e(t){var e=t.getDay();return e===0?7:e}function M1e(t,e){return Yt(UC.count(ec(t)-1,t),e,2)}function k7(t){var e=t.getDay();return e>=4||e===0?yp(t):yp.ceil(t)}function L1e(t,e){return t=k7(t),Yt(yp.count(ec(t),t)+(ec(t).getDay()===4),e,2)}function j1e(t){return t.getDay()}function z1e(t,e){return Yt(_S.count(ec(t)-1,t),e,2)}function B1e(t,e){return Yt(t.getFullYear()%100,e,2)}function V1e(t,e){return t=k7(t),Yt(t.getFullYear()%100,e,2)}function W1e(t,e){return Yt(t.getFullYear()%1e4,e,4)}function U1e(t,e){var n=t.getDay();return t=n>=4||n===0?yp(t):yp.ceil(t),Yt(t.getFullYear()%1e4,e,4)}function H1e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Yt(e/60|0,"0",2)+Yt(e%60,"0",2)}function k4(t,e){return Yt(t.getUTCDate(),e,2)}function G1e(t,e){return Yt(t.getUTCHours(),e,2)}function q1e(t,e){return Yt(t.getUTCHours()%12||12,e,2)}function K1e(t,e){return Yt(1+WC.count(tc(t),t),e,3)}function O7(t,e){return Yt(t.getUTCMilliseconds(),e,3)}function X1e(t,e){return O7(t,e)+"000"}function Y1e(t,e){return Yt(t.getUTCMonth()+1,e,2)}function Z1e(t,e){return Yt(t.getUTCMinutes(),e,2)}function Q1e(t,e){return Yt(t.getUTCSeconds(),e,2)}function J1e(t){var e=t.getUTCDay();return e===0?7:e}function ewe(t,e){return Yt(HC.count(tc(t)-1,t),e,2)}function A7(t){var e=t.getUTCDay();return e>=4||e===0?bp(t):bp.ceil(t)}function twe(t,e){return t=A7(t),Yt(bp.count(tc(t),t)+(tc(t).getUTCDay()===4),e,2)}function nwe(t){return t.getUTCDay()}function rwe(t,e){return Yt(PS.count(tc(t)-1,t),e,2)}function iwe(t,e){return Yt(t.getUTCFullYear()%100,e,2)}function awe(t,e){return t=A7(t),Yt(t.getUTCFullYear()%100,e,2)}function owe(t,e){return Yt(t.getUTCFullYear()%1e4,e,4)}function swe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?bp(t):bp.ceil(t),Yt(t.getUTCFullYear()%1e4,e,4)}function lwe(){return"+0000"}function O4(){return"%"}function A4(t){return+t}function _4(t){return Math.floor(+t/1e3)}var Jf,_7,P7;cwe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cwe(t){return Jf=c1e(t),_7=Jf.format,Jf.parse,P7=Jf.utcFormat,Jf.utcParse,Jf}function uwe(t){return new Date(t)}function dwe(t){return t instanceof Date?+t:+new Date(+t)}function yD(t,e,n,r,i,a,o,s,l,c){var u=iD(),d=u.invert,f=u.domain,h=c(".%L"),p=c(":%S"),g=c("%I:%M"),m=c("%I %p"),v=c("%a %d"),y=c("%b %d"),b=c("%B"),w=c("%Y");function x($){return(l($)<$?h:s($)<$?p:o($)<$?g:a($)<$?m:r($)<$?i($)<$?v:y:n($)<$?b:w)($)}return u.invert=function($){return new Date(d($))},u.domain=function($){return arguments.length?f(Array.from($,dwe)):f().map(uwe)},u.ticks=function($){var C=f();return t(C[0],C[C.length-1],$??10)},u.tickFormat=function($,C){return C==null?x:c(C)},u.nice=function($){var C=f();return(!$||typeof $.range!="function")&&($=e(C[0],C[C.length-1],$??10)),$?f(b7(C,$)):u},u.copy=function(){return Q0(u,yD(t,e,n,r,i,a,o,s,l,c))},u}function fwe(){return Xo.apply(yD(s1e,l1e,ec,gD,UC,J0,pD,fD,Td,_7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hwe(){return Xo.apply(yD(a1e,o1e,tc,vD,HC,WC,mD,hD,Td,P7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function GC(){var t=0,e=1,n,r,i,a,o=aa,s=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(a(d)-n)*i,s?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(s=!!d,c):s},c.interpolator=function(d){return arguments.length?(o=d,c):o};function u(d){return function(f){var h,p;return arguments.length?([h,p]=f,o=d(h,p),c):[o(0),o(1)]}}return c.range=u(bm),c.rangeRound=u(rD),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return a=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function _u(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function R7(){var t=Au(GC()(aa));return t.copy=function(){return _u(t,R7())},uc.apply(t,arguments)}function D7(){var t=sD(GC()).domain([1,10]);return t.copy=function(){return _u(t,D7()).base(t.base())},uc.apply(t,arguments)}function F7(){var t=lD(GC());return t.copy=function(){return _u(t,F7()).constant(t.constant())},uc.apply(t,arguments)}function bD(){var t=cD(GC());return t.copy=function(){return _u(t,bD()).exponent(t.exponent())},uc.apply(t,arguments)}function pwe(){return bD.apply(null,arguments).exponent(.5)}function M7(){var t=[],e=aa;function n(r){if(r!=null&&!isNaN(r=+r))return e((Y0(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ou),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>exe(t,a/r))},n.copy=function(){return M7(e).domain(t)},uc.apply(n,arguments)}function qC(){var t=0,e=.5,n=1,r=1,i,a,o,s,l,c=aa,u,d=!1,f;function h(g){return isNaN(g=+g)?f:(g=.5+((g=+u(g))-a)*(r*g<r*a?s:l),c(d?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,e,n]=g,i=u(t=+t),a=u(e=+e),o=u(n=+n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,h):[t,e,n]},h.clamp=function(g){return arguments.length?(d=!!g,h):d},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(m){var v,y,b;return arguments.length?([v,y,b]=m,c=Txe(g,[v,y,b]),h):[c(0),c(.5),c(1)]}}return h.range=p(bm),h.rangeRound=p(rD),h.unknown=function(g){return arguments.length?(f=g,h):f},function(g){return u=g,i=g(t),a=g(e),o=g(n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,h}}function L7(){var t=Au(qC()(aa));return t.copy=function(){return _u(t,L7())},uc.apply(t,arguments)}function j7(){var t=sD(qC()).domain([.1,1,10]);return t.copy=function(){return _u(t,j7()).base(t.base())},uc.apply(t,arguments)}function z7(){var t=lD(qC());return t.copy=function(){return _u(t,z7()).constant(t.constant())},uc.apply(t,arguments)}function xD(){var t=cD(qC());return t.copy=function(){return _u(t,xD()).exponent(t.exponent())},uc.apply(t,arguments)}function mwe(){return xD.apply(null,arguments).exponent(.5)}const P4=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Py,scaleDiverging:L7,scaleDivergingLog:j7,scaleDivergingPow:xD,scaleDivergingSqrt:mwe,scaleDivergingSymlog:z7,scaleIdentity:y7,scaleImplicit:_O,scaleLinear:OS,scaleLog:x7,scaleOrdinal:eD,scalePoint:Zv,scalePow:uD,scaleQuantile:$7,scaleQuantize:C7,scaleRadial:S7,scaleSequential:R7,scaleSequentialLog:D7,scaleSequentialPow:bD,scaleSequentialQuantile:M7,scaleSequentialSqrt:pwe,scaleSequentialSymlog:F7,scaleSqrt:Xxe,scaleSymlog:w7,scaleThreshold:E7,scaleTime:fwe,scaleUtc:hwe,tickFormat:v7},Symbol.toStringTag,{value:"Module"}));var gwe=um;function vwe(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],o=e(a);if(o!=null&&(s===void 0?o===o&&!gwe(o):n(o,s)))var s=o,l=a}return l}var KC=vwe;function ywe(t,e){return t>e}var B7=ywe,bwe=KC,xwe=B7,wwe=ym;function Swe(t){return t&&t.length?bwe(t,wwe,xwe):void 0}var $we=Swe;const Uc=Gt($we);function Cwe(t,e){return t<e}var V7=Cwe,Ewe=KC,Twe=V7,Iwe=ym;function Nwe(t){return t&&t.length?Ewe(t,Iwe,Twe):void 0}var kwe=Nwe;const XC=Gt(kwe);var Owe=RR,Awe=Cl,_we=YG,Pwe=Fa;function Rwe(t,e){var n=Pwe(t)?Owe:_we;return n(t,Awe(e))}var Dwe=Rwe,Fwe=KG,Mwe=Dwe;function Lwe(t,e){return Fwe(Mwe(t,e),1)}var jwe=Lwe;const zwe=Gt(jwe);var Bwe=XR;function Vwe(t,e){return Bwe(t,e)}var Wwe=Vwe;const Qd=Gt(Wwe);var xm=1e9,Uwe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},SD,Bn=!0,Ho="[DecimalError] ",Fd=Ho+"Invalid argument: ",wD=Ho+"Exponent out of range: ",wm=Math.floor,dd=Math.pow,Hwe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Za,ni=1e7,On=7,W7=9007199254740991,RS=wm(W7/On),Ke={};Ke.absoluteValue=Ke.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ke.comparedTo=Ke.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ke.decimalPlaces=Ke.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*On;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ke.dividedBy=Ke.div=function(t){return Hl(this,new this.constructor(t))};Ke.dividedToIntegerBy=Ke.idiv=function(t){var e=this,n=e.constructor;return yn(Hl(e,new n(t),0,1),n.precision)};Ke.equals=Ke.eq=function(t){return!this.cmp(t)};Ke.exponent=function(){return Nr(this)};Ke.greaterThan=Ke.gt=function(t){return this.cmp(t)>0};Ke.greaterThanOrEqualTo=Ke.gte=function(t){return this.cmp(t)>=0};Ke.isInteger=Ke.isint=function(){return this.e>this.d.length-2};Ke.isNegative=Ke.isneg=function(){return this.s<0};Ke.isPositive=Ke.ispos=function(){return this.s>0};Ke.isZero=function(){return this.s===0};Ke.lessThan=Ke.lt=function(t){return this.cmp(t)<0};Ke.lessThanOrEqualTo=Ke.lte=function(t){return this.cmp(t)<1};Ke.logarithm=Ke.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Za))throw Error(Ho+"NaN");if(n.s<1)throw Error(Ho+(n.s?"NaN":"-Infinity"));return n.eq(Za)?new r(0):(Bn=!1,e=Hl(Ly(n,a),Ly(t,a),a),Bn=!0,yn(e,i))};Ke.minus=Ke.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?G7(e,t):U7(e,(t.s=-t.s,t))};Ke.modulo=Ke.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ho+"NaN");return n.s?(Bn=!1,e=Hl(n,t,0,1).times(t),Bn=!0,n.minus(e)):yn(new r(n),i)};Ke.naturalExponential=Ke.exp=function(){return H7(this)};Ke.naturalLogarithm=Ke.ln=function(){return Ly(this)};Ke.negated=Ke.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ke.plus=Ke.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?U7(e,t):G7(e,(t.s=-t.s,t))};Ke.precision=Ke.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Fd+t);if(e=Nr(i)+1,r=i.d.length-1,n=r*On+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ke.squareRoot=Ke.sqrt=function(){var t,e,n,r,i,a,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Ho+"NaN")}for(t=Nr(s),Bn=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=Ys(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=wm((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(a=r,r=a.plus(Hl(s,a,o+2)).times(.5),Ys(a.d).slice(0,o)===(e=Ys(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(yn(a,n+1,0),a.times(a).eq(s)){r=a;break}}else if(e!="9999")break;o+=4}return Bn=!0,yn(r,n)};Ke.times=Ke.mul=function(t){var e,n,r,i,a,o,s,l,c,u=this,d=u.constructor,f=u.d,h=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,n=u.e+t.e,l=f.length,c=h.length,l<c&&(a=f,f=h,h=a,o=l,l=c,c=o),a=[],o=l+c,r=o;r--;)a.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)s=a[i]+h[r]*f[i-r-1]+e,a[i--]=s%ni|0,e=s/ni|0;a[i]=(a[i]+e)%ni|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Bn?yn(t,d.precision):t};Ke.toDecimalPlaces=Ke.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(pl(t,0,xm),e===void 0?e=r.rounding:pl(e,0,8),yn(n,t+Nr(n)+1,e))};Ke.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Jd(r,!0):(pl(t,0,xm),e===void 0?e=i.rounding:pl(e,0,8),r=yn(new i(r),t+1,e),n=Jd(r,!0,t+1)),n};Ke.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Jd(i):(pl(t,0,xm),e===void 0?e=a.rounding:pl(e,0,8),r=yn(new a(i),t+Nr(i)+1,e),n=Jd(r.abs(),!1,t+Nr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ke.toInteger=Ke.toint=function(){var t=this,e=t.constructor;return yn(new e(t),Nr(t)+1,e.rounding)};Ke.toNumber=function(){return+this};Ke.toPower=Ke.pow=function(t){var e,n,r,i,a,o,s=this,l=s.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(Za);if(s=new l(s),!s.s){if(t.s<1)throw Error(Ho+"Infinity");return s}if(s.eq(Za))return s;if(r=l.precision,t.eq(Za))return yn(s,r);if(e=t.e,n=t.d.length-1,o=e>=n,a=s.s,o){if((n=u<0?-u:u)<=W7){for(i=new l(Za),e=Math.ceil(r/On+4),Bn=!1;n%2&&(i=i.times(s),D4(i.d,e)),n=wm(n/2),n!==0;)s=s.times(s),D4(s.d,e);return Bn=!0,t.s<0?new l(Za).div(i):yn(i,r)}}else if(a<0)throw Error(Ho+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,Bn=!1,i=t.times(Ly(s,r+c)),Bn=!0,i=H7(i),i.s=a,i};Ke.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Nr(i),r=Jd(i,n<=a.toExpNeg||n>=a.toExpPos)):(pl(t,1,xm),e===void 0?e=a.rounding:pl(e,0,8),i=yn(new a(i),t,e),n=Nr(i),r=Jd(i,t<=n||n<=a.toExpNeg,t)),r};Ke.toSignificantDigits=Ke.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(pl(t,1,xm),e===void 0?e=r.rounding:pl(e,0,8)),yn(new r(n),t,e)};Ke.toString=Ke.valueOf=Ke.val=Ke.toJSON=Ke[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Nr(t),n=t.constructor;return Jd(t,e<=n.toExpNeg||e>=n.toExpPos)};function U7(t,e){var n,r,i,a,o,s,l,c,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Bn?yn(e,d):e;if(l=t.d,c=e.d,o=t.e,i=e.e,l=l.slice(),a=o-i,a){for(a<0?(r=l,a=-a,s=c.length):(r=c,i=o,s=l.length),o=Math.ceil(d/On),s=o>s?o+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=l.length,a=c.length,s-a<0&&(a=s,r=c,c=l,l=r),n=0;a;)n=(l[--a]=l[a]+c[a]+n)/ni|0,l[a]%=ni;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,Bn?yn(e,d):e}function pl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Fd+t)}function Ys(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=On-r.length,n&&(a+=Mc(n)),a+=r;o=t[e],r=o+"",n=On-r.length,n&&(a+=Mc(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Hl=function(){function t(r,i){var a,o=0,s=r.length;for(r=r.slice();s--;)a=r[s]*i+o,r[s]=a%ni|0,o=a/ni|0;return o&&r.unshift(o),r}function e(r,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*ni+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var s,l,c,u,d,f,h,p,g,m,v,y,b,w,x,$,C,E,I=r.constructor,T=r.s==i.s?1:-1,N=r.d,k=i.d;if(!r.s)return new I(r);if(!i.s)throw Error(Ho+"Division by zero");for(l=r.e-i.e,C=k.length,x=N.length,h=new I(T),p=h.d=[],c=0;k[c]==(N[c]||0);)++c;if(k[c]>(N[c]||0)&&--l,a==null?y=a=I.precision:o?y=a+(Nr(r)-Nr(i))+1:y=a,y<0)return new I(0);if(y=y/On+2|0,c=0,C==1)for(u=0,k=k[0],y++;(c<x||u)&&y--;c++)b=u*ni+(N[c]||0),p[c]=b/k|0,u=b%k|0;else{for(u=ni/(k[0]+1)|0,u>1&&(k=t(k,u),N=t(N,u),C=k.length,x=N.length),w=C,g=N.slice(0,C),m=g.length;m<C;)g[m++]=0;E=k.slice(),E.unshift(0),$=k[0],k[1]>=ni/2&&++$;do u=0,s=e(k,g,C,m),s<0?(v=g[0],C!=m&&(v=v*ni+(g[1]||0)),u=v/$|0,u>1?(u>=ni&&(u=ni-1),d=t(k,u),f=d.length,m=g.length,s=e(d,g,f,m),s==1&&(u--,n(d,C<f?E:k,f))):(u==0&&(s=u=1),d=k.slice()),f=d.length,f<m&&d.unshift(0),n(g,d,m),s==-1&&(m=g.length,s=e(k,g,C,m),s<1&&(u++,n(g,C<m?E:k,m))),m=g.length):s===0&&(u++,g=[0]),p[c++]=u,s&&g[0]?g[m++]=N[w]||0:(g=[N[w]],m=1);while((w++<x||g[0]!==void 0)&&y--)}return p[0]||p.shift(),h.e=l,yn(h,o?a+Nr(h)+1:a)}}();function H7(t,e){var n,r,i,a,o,s,l=0,c=0,u=t.constructor,d=u.precision;if(Nr(t)>16)throw Error(wD+Nr(t));if(!t.s)return new u(Za);for(Bn=!1,s=d,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),c+=5;for(r=Math.log(dd(2,c))/Math.LN10*2+5|0,s+=r,n=i=a=new u(Za),u.precision=s;;){if(i=yn(i.times(t),s),n=n.times(++l),o=a.plus(Hl(i,n,s)),Ys(o.d).slice(0,s)===Ys(a.d).slice(0,s)){for(;c--;)a=yn(a.times(a),s);return u.precision=d,e==null?(Bn=!0,yn(a,d)):a}a=o}}function Nr(t){for(var e=t.e*On,n=t.d[0];n>=10;n/=10)e++;return e}function WI(t,e,n){if(e>t.LN10.sd())throw Bn=!0,n&&(t.precision=n),Error(Ho+"LN10 precision limit exceeded");return yn(new t(t.LN10),e)}function Mc(t){for(var e="";t--;)e+="0";return e}function Ly(t,e){var n,r,i,a,o,s,l,c,u,d=1,f=10,h=t,p=h.d,g=h.constructor,m=g.precision;if(h.s<1)throw Error(Ho+(h.s?"NaN":"-Infinity"));if(h.eq(Za))return new g(0);if(e==null?(Bn=!1,c=m):c=e,h.eq(10))return e==null&&(Bn=!0),WI(g,c);if(c+=f,g.precision=c,n=Ys(p),r=n.charAt(0),a=Nr(h),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)h=h.times(t),n=Ys(h.d),r=n.charAt(0),d++;a=Nr(h),r>1?(h=new g("0."+n),a++):h=new g(r+"."+n.slice(1))}else return l=WI(g,c+2,m).times(a+""),h=Ly(new g(r+"."+n.slice(1)),c-f).plus(l),g.precision=m,e==null?(Bn=!0,yn(h,m)):h;for(s=o=h=Hl(h.minus(Za),h.plus(Za),c),u=yn(h.times(h),c),i=3;;){if(o=yn(o.times(u),c),l=s.plus(Hl(o,new g(i),c)),Ys(l.d).slice(0,c)===Ys(s.d).slice(0,c))return s=s.times(2),a!==0&&(s=s.plus(WI(g,c+2,m).times(a+""))),s=Hl(s,new g(d),c),g.precision=m,e==null?(Bn=!0,yn(s,m)):s;s=l,i+=2}}function R4(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=wm(n/On),t.d=[],r=(n+1)%On,n<0&&(r+=On),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=On;r<i;)t.d.push(+e.slice(r,r+=On));e=e.slice(r),r=On-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Bn&&(t.e>RS||t.e<-RS))throw Error(wD+n)}else t.s=0,t.e=0,t.d=[0];return t}function yn(t,e,n){var r,i,a,o,s,l,c,u,d=t.d;for(o=1,a=d[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=On,i=e,c=d[u=0];else{if(u=Math.ceil((r+1)/On),a=d.length,u>=a)return t;for(c=a=d[u],o=1;a>=10;a/=10)o++;r%=On,i=r-On+o}if(n!==void 0&&(a=dd(10,o-i-1),s=c/a%10|0,l=e<0||d[u+1]!==void 0||c%a,l=n<4?(s||l)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?c/dd(10,o-i):0:d[u-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(a=Nr(t),d.length=1,e=e-a-1,d[0]=dd(10,(On-e%On)%On),t.e=wm(-e/On)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=u,a=1,u--):(d.length=u+1,a=dd(10,On-r),d[u]=i>0?(c/dd(10,o-i)%dd(10,i)|0)*a:0),l)for(;;)if(u==0){(d[0]+=a)==ni&&(d[0]=1,++t.e);break}else{if(d[u]+=a,d[u]!=ni)break;d[u--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(Bn&&(t.e>RS||t.e<-RS))throw Error(wD+Nr(t));return t}function G7(t,e){var n,r,i,a,o,s,l,c,u,d,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Bn?yn(e,h):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),o=c-r,o){for(u=o<0,u?(n=l,o=-o,s=d.length):(n=d,r=c,s=l.length),i=Math.max(Math.ceil(h/On),s)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=d.length,u=i<s,u&&(s=i),i=0;i<s;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}o=0}for(u&&(n=l,l=d,d=n,e.s=-e.s),s=l.length,i=d.length-s;i>0;--i)l[s++]=0;for(i=d.length;i>o;){if(l[--i]<d[i]){for(a=i;a&&l[--a]===0;)l[a]=ni-1;--l[a],l[i]+=ni}l[i]-=d[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Bn?yn(e,h):e):new f(0)}function Jd(t,e,n){var r,i=Nr(t),a=Ys(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Mc(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Mc(-i-1)+a,n&&(r=n-o)>0&&(a+=Mc(r))):i>=o?(a+=Mc(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+Mc(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=Mc(r))),t.s<0?"-"+a:a}function D4(t,e){if(t.length>e)return t.length=e,!0}function q7(t){var e,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Fd+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return R4(o,a.toString())}else if(typeof a!="string")throw Error(Fd+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,Hwe.test(a))R4(o,a);else throw Error(Fd+a)}if(i.prototype=Ke,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=q7,i.config=i.set=Gwe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Gwe(t){if(!t||typeof t!="object")throw Error(Ho+"Object expected");var e,n,r,i=["precision",1,xm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(wm(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Fd+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Fd+n+": "+r);return this}var SD=q7(Uwe);Za=new SD(1);const dn=SD;function qwe(t){return Zwe(t)||Ywe(t)||Xwe(t)||Kwe()}function Kwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xwe(t,e){if(t){if(typeof t=="string")return FO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FO(t,e)}}function Ywe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Zwe(t){if(Array.isArray(t))return FO(t)}function FO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Qwe=function(e){return e},K7={},X7=function(e){return e===K7},F4=function(e){return function n(){return arguments.length===0||arguments.length===1&&X7(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Jwe=function t(e,n){return e===1?n:F4(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(s){return s!==K7}).length;return o>=e?n.apply(void 0,i):t(e-o,F4(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=i.map(function(d){return X7(d)?l.shift():d});return n.apply(void 0,qwe(u).concat(l))}))})},YC=function(e){return Jwe(e.length,e)},MO=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},eSe=YC(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),tSe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Qwe;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(s,l){return l(s)},a.apply(void 0,arguments))}},LO=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Y7=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(s,l){return s===n[l]})||(n=a,r=e.apply(void 0,a)),r}};function nSe(t){var e;return t===0?e=1:e=Math.floor(new dn(t).abs().log(10).toNumber())+1,e}function rSe(t,e,n){for(var r=new dn(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var iSe=YC(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),aSe=YC(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),oSe=YC(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const ZC={rangeStep:rSe,getDigitCount:nSe,interpolateNumber:iSe,uninterpolateNumber:aSe,uninterpolateTruncation:oSe};function jO(t){return cSe(t)||lSe(t)||Z7(t)||sSe()}function sSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lSe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function cSe(t){if(Array.isArray(t))return zO(t)}function jy(t,e){return fSe(t)||dSe(t,e)||Z7(t,e)||uSe()}function uSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z7(t,e){if(t){if(typeof t=="string")return zO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zO(t,e)}}function zO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dSe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function fSe(t){if(Array.isArray(t))return t}function Q7(t){var e=jy(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function J7(t,e,n){if(t.lte(0))return new dn(0);var r=ZC.getDigitCount(t.toNumber()),i=new dn(10).pow(r),a=t.div(i),o=r!==1?.05:.1,s=new dn(Math.ceil(a.div(o).toNumber())).add(n).mul(o),l=s.mul(i);return e?l:new dn(Math.ceil(l))}function hSe(t,e,n){var r=1,i=new dn(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new dn(10).pow(ZC.getDigitCount(t)-1),i=new dn(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new dn(Math.floor(t)))}else t===0?i=new dn(Math.floor((e-1)/2)):n||(i=new dn(Math.floor(t)));var o=Math.floor((e-1)/2),s=tSe(eSe(function(l){return i.add(new dn(l-o).mul(r)).toNumber()}),MO);return s(0,e)}function e9(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new dn(0),tickMin:new dn(0),tickMax:new dn(0)};var a=J7(new dn(e).sub(t).div(n-1),r,i),o;t<=0&&e>=0?o=new dn(0):(o=new dn(t).add(e).div(2),o=o.sub(new dn(o).mod(a)));var s=Math.ceil(o.sub(t).div(a).toNumber()),l=Math.ceil(new dn(e).sub(o).div(a).toNumber()),c=s+l+1;return c>n?e9(t,e,n,r,i+1):(c<n&&(l=e>0?l+(n-c):l,s=e>0?s:s+(n-c)),{step:a,tickMin:o.sub(new dn(s).mul(a)),tickMax:o.add(new dn(l).mul(a))})}function pSe(t){var e=jy(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),s=Q7([n,r]),l=jy(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0){var d=u===1/0?[c].concat(jO(MO(0,i-1).map(function(){return 1/0}))):[].concat(jO(MO(0,i-1).map(function(){return-1/0})),[u]);return n>r?LO(d):d}if(c===u)return hSe(c,i,a);var f=e9(c,u,o,a),h=f.step,p=f.tickMin,g=f.tickMax,m=ZC.rangeStep(p,g.add(new dn(.1).mul(h)),h);return n>r?LO(m):m}function mSe(t,e){var n=jy(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Q7([r,i]),s=jy(o,2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[r,i];if(l===c)return[l];var u=Math.max(e,2),d=J7(new dn(c).sub(l).div(u-1),a,0),f=[].concat(jO(ZC.rangeStep(new dn(l),new dn(c).sub(new dn(.99).mul(d)),d)),[c]);return r>i?LO(f):f}var gSe=Y7(pSe),vSe=Y7(mSe),ySe="Invariant failed";function ef(t,e){throw new Error(ySe)}var bSe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function xp(t){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}function DS(){return DS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DS.apply(this,arguments)}function xSe(t,e){return CSe(t)||$Se(t,e)||SSe(t,e)||wSe()}function wSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SSe(t,e){if(t){if(typeof t=="string")return M4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M4(t,e)}}function M4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $Se(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function CSe(t){if(Array.isArray(t))return t}function ESe(t,e){if(t==null)return{};var n=TSe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ISe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r9(r.key),r)}}function kSe(t,e,n){return e&&NSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OSe(t,e,n){return e=FS(e),ASe(t,t9()?Reflect.construct(e,n||[],FS(t).constructor):e.apply(t,n))}function ASe(t,e){if(e&&(xp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Se(t)}function _Se(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t9=function(){return!!t})()}function FS(t){return FS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},FS(t)}function PSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BO(t,e)}function BO(t,e){return BO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},BO(t,e)}function n9(t,e,n){return e=r9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r9(t){var e=RSe(t,"string");return xp(e)=="symbol"?e:e+""}function RSe(t,e){if(xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var eb=function(t){function e(){return ISe(this,e),OSe(this,e,arguments)}return PSe(e,t),kSe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,o=r.width,s=r.dataKey,l=r.data,c=r.dataPointFormatter,u=r.xAxis,d=r.yAxis,f=ESe(r,bSe),h=lt(f,!1);this.props.direction==="x"&&u.type!=="number"&&ef();var p=l.map(function(g){var m=c(g,s),v=m.x,y=m.y,b=m.value,w=m.errorVal;if(!w)return null;var x=[],$,C;if(Array.isArray(w)){var E=xSe(w,2);$=E[0],C=E[1]}else $=C=w;if(a==="vertical"){var I=u.scale,T=y+i,N=T+o,k=T-o,O=I(b-$),_=I(b+C);x.push({x1:_,y1:N,x2:_,y2:k}),x.push({x1:O,y1:T,x2:_,y2:T}),x.push({x1:O,y1:N,x2:O,y2:k})}else if(a==="horizontal"){var P=d.scale,D=v+i,L=D-o,R=D+o,F=P(b-$),V=P(b+C);x.push({x1:L,y1:V,x2:R,y2:V}),x.push({x1:D,y1:F,x2:D,y2:V}),x.push({x1:L,y1:F,x2:R,y2:F})}return B.createElement(_t,DS({className:"recharts-errorBar",key:"bar-".concat(x.map(function(H){return"".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))},h),x.map(function(H){return B.createElement("line",DS({},H,{key:"line-".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))}))});return B.createElement(_t,{className:"recharts-errorBars"},p)}}])}(B.Component);n9(eb,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});n9(eb,"displayName","ErrorBar");function zy(t){"@babel/helpers - typeof";return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zy(t)}function L4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L4(Object(n),!0).forEach(function(r){DSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DSe(t,e,n){return e=FSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FSe(t){var e=MSe(t,"string");return zy(e)=="symbol"?e:e+""}function MSe(t,e){if(zy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var i9=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=Ya(n,xs);if(!o)return null;var s=xs.defaultProps,l=s!==void 0?Qu(Qu({},s),o.props):{},c;return o.props&&o.props.payload?c=o.props&&o.props.payload:a==="children"?c=(r||[]).reduce(function(u,d){var f=d.item,h=d.props,p=h.sectors||h.data||[];return u.concat(p.map(function(g){return{type:o.props.iconType||f.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):c=(r||[]).map(function(u){var d=u.item,f=d.type.defaultProps,h=f!==void 0?Qu(Qu({},f),d.props):{},p=h.dataKey,g=h.name,m=h.legendType,v=h.hide;return{inactive:v,dataKey:p,type:l.iconType||m||"square",color:$D(d),value:g||p,payload:h}}),Qu(Qu(Qu({},l),xs.getWithHeight(o,i)),{},{payload:c,item:o})};function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}function j4(t){return BSe(t)||zSe(t)||jSe(t)||LSe()}function LSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jSe(t,e){if(t){if(typeof t=="string")return VO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VO(t,e)}}function zSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BSe(t){if(Array.isArray(t))return VO(t)}function VO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function z4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z4(Object(n),!0).forEach(function(r){Xh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xh(t,e,n){return e=VSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VSe(t){var e=WSe(t,"string");return By(e)=="symbol"?e:e+""}function WSe(t,e){if(By(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(By(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fr(t,e,n){return xt(t)||xt(e)?n:zr(e)?oo(t,e,n):gt(e)?e(t):n}function Qv(t,e,n,r){var i=zwe(t,function(s){return fr(s,e)});if(n==="number"){var a=i.filter(function(s){return Ae(s)||parseFloat(s)});return a.length?[XC(a),Uc(a)]:[1/0,-1/0]}var o=r?i.filter(function(s){return!xt(s)}):i;return o.map(function(s){return zr(s)||s instanceof Date?s:""})}var USe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,c=0;c<s;c++){var u=c>0?i[c-1].coordinate:i[s-1].coordinate,d=i[c].coordinate,f=c>=s-1?i[0].coordinate:i[c+1].coordinate,h=void 0;if(ra(d-u)!==ra(f-d)){var p=[];if(ra(f-d)===ra(l[1]-l[0])){h=f;var g=d+l[1]-l[0];p[0]=Math.min(g,(g+u)/2),p[1]=Math.max(g,(g+u)/2)}else{h=u;var m=f+l[1]-l[0];p[0]=Math.min(d,(m+d)/2),p[1]=Math.max(d,(m+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=p[0]&&e<=p[1]){o=i[c].index;break}}else{var y=Math.min(u,f),b=Math.max(u,f);if(e>(y+d)/2&&e<=(b+d)/2){o=i[c].index;break}}}else for(var w=0;w<s;w++)if(w===0&&e<=(r[w].coordinate+r[w+1].coordinate)/2||w>0&&w<s-1&&e>(r[w].coordinate+r[w-1].coordinate)/2&&e<=(r[w].coordinate+r[w+1].coordinate)/2||w===s-1&&e>(r[w].coordinate+r[w-1].coordinate)/2){o=r[w].index;break}return o},$D=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?er(er({},e.type.defaultProps),e.props):e.props,o=a.stroke,s=a.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},HSe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},s=Object.keys(a),l=0,c=s.length;l<c;l++)for(var u=a[s[l]].stackGroups,d=Object.keys(u),f=0,h=d.length;f<h;f++){var p=u[d[f]],g=p.items,m=p.cateAxisId,v=g.filter(function(C){return Ul(C.type).indexOf("Bar")>=0});if(v&&v.length){var y=v[0].type.defaultProps,b=y!==void 0?er(er({},y),v[0].props):v[0].props,w=b.barSize,x=b[m];o[x]||(o[x]=[]);var $=xt(w)?n:w;o[x].push({item:v[0],stackList:v.slice(1),barSize:xt($)?void 0:ia($,r,0)})}}return o},GSe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,s=e.maxBarSize,l=o.length;if(l<1)return null;var c=ia(n,i,0,!0),u,d=[];if(o[0].barSize===+o[0].barSize){var f=!1,h=i/l,p=o.reduce(function(w,x){return w+x.barSize||0},0);p+=(l-1)*c,p>=i&&(p-=(l-1)*c,c=0),p>=i&&h>0&&(f=!0,h*=.9,p=l*h);var g=(i-p)/2>>0,m={offset:g-c,size:0};u=o.reduce(function(w,x){var $={item:x.item,position:{offset:m.offset+m.size+c,size:f?h:x.barSize}},C=[].concat(j4(w),[$]);return m=C[C.length-1].position,x.stackList&&x.stackList.length&&x.stackList.forEach(function(E){C.push({item:E,position:m})}),C},d)}else{var v=ia(r,i,0,!0);i-2*v-(l-1)*c<=0&&(c=0);var y=(i-2*v-(l-1)*c)/l;y>1&&(y>>=0);var b=s===+s?Math.min(y,s):y;u=o.reduce(function(w,x,$){var C=[].concat(j4(w),[{item:x.item,position:{offset:v+(y+c)*$+(y-b)/2,size:b}}]);return x.stackList&&x.stackList.length&&x.stackList.forEach(function(E){C.push({item:E,position:C[C.length-1].position})}),C},d)}return u},qSe=function(e,n,r,i){var a=r.children,o=r.width,s=r.margin,l=o-(s.left||0)-(s.right||0),c=i9({children:a,legendWidth:l});if(c){var u=i||{},d=u.width,f=u.height,h=c.align,p=c.verticalAlign,g=c.layout;if((g==="vertical"||g==="horizontal"&&p==="middle")&&h!=="center"&&Ae(e[h]))return er(er({},e),{},Xh({},h,e[h]+(d||0)));if((g==="horizontal"||g==="vertical"&&h==="center")&&p!=="middle"&&Ae(e[p]))return er(er({},e),{},Xh({},p,e[p]+(f||0)))}return e},KSe=function(e,n,r){return xt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},a9=function(e,n,r,i,a){var o=n.props.children,s=so(o,eb).filter(function(c){return KSe(i,a,c.props.direction)});if(s&&s.length){var l=s.map(function(c){return c.props.dataKey});return e.reduce(function(c,u){var d=fr(u,r);if(xt(d))return c;var f=Array.isArray(d)?[XC(d),Uc(d)]:[d,d],h=l.reduce(function(p,g){var m=fr(u,g,0),v=f[0]-Math.abs(Array.isArray(m)?m[0]:m),y=f[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(v,p[0]),Math.max(y,p[1])]},[1/0,-1/0]);return[Math.min(h[0],c[0]),Math.max(h[1],c[1])]},[1/0,-1/0])}return null},XSe=function(e,n,r,i,a){var o=n.map(function(s){return a9(e,s,r,a,i)}).filter(function(s){return!xt(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},o9=function(e,n,r,i,a){var o=n.map(function(l){var c=l.props.dataKey;return r==="number"&&c&&a9(e,l,c,i)||Qv(e,c,r,a)});if(r==="number")return o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,c){for(var u=0,d=c.length;u<d;u++)s[c[u]]||(s[c[u]]=!0,l.push(c[u]));return l},[])},s9=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},l9=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var a,o,s=e.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(o=!0),l.coordinate});return a||s.push(n),o||s.push(r),s},Vl=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(c=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?ra(s[0]-s[1])*2*c:c,n&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(d){var f=a?a.indexOf(d):d;return{coordinate:i(f)+c,value:d,offset:c}});return u.filter(function(d){return!mm(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,f){return{coordinate:i(d)+c,value:d,index:f,offset:c}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+c,value:d,offset:c}}):i.domain().map(function(d,f){return{coordinate:i(d)+c,value:a?a[d]:d,index:f,offset:c}})},UI=new WeakMap,k1=function(e,n){if(typeof n!="function")return e;UI.has(e)||UI.set(e,new WeakMap);var r=UI.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},c9=function(e,n,r){var i=e.scale,a=e.type,o=e.layout,s=e.axisType;if(i==="auto")return o==="radial"&&s==="radiusAxis"?{scale:Py(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:OS(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Zv(),realScaleType:"point"}:a==="category"?{scale:Py(),realScaleType:"band"}:{scale:OS(),realScaleType:"linear"};if(Xd(i)){var l="scale".concat(PC(i));return{scale:(P4[l]||Zv)(),realScaleType:P4[l]?l:"point"}}return gt(i)?{scale:i}:{scale:Zv(),realScaleType:"point"}},B4=1e-4,u9=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-B4,o=Math.max(i[0],i[1])+B4,s=e(n[0]),l=e(n[r-1]);(s<a||s>o||l<a||l>o)&&e.domain([n[0],n[r-1]])}},YSe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},ZSe=function(e,n){if(!n||n.length!==2||!Ae(n[0])||!Ae(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!Ae(e[0])||e[0]<r)&&(a[0]=r),(!Ae(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},QSe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0,s=0;s<n;++s){var l=mm(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1]):(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1])}},JSe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0;o<n;++o){var s=mm(e[o][r][1])?e[o][r][0]:e[o][r][1];s>=0?(e[o][r][0]=a,e[o][r][1]=a+s,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},e$e={sign:QSe,expand:bde,none:fp,silhouette:xde,wiggle:wde,positive:JSe},t$e=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),a=e$e[r],o=yde().keys(i).value(function(s,l){return+fr(s,l,0)}).order(hO).offset(a);return o(e)},n$e=function(e,n,r,i,a,o){if(!e)return null;var s=o?n.reverse():n,l={},c=s.reduce(function(d,f){var h,p=(h=f.type)!==null&&h!==void 0&&h.defaultProps?er(er({},f.type.defaultProps),f.props):f.props,g=p.stackId,m=p.hide;if(m)return d;var v=p[r],y=d[v]||{hasStack:!1,stackGroups:{}};if(zr(g)){var b=y.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};b.items.push(f),y.hasStack=!0,y.stackGroups[g]=b}else y.stackGroups[Cf("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[f]};return er(er({},d),{},Xh({},v,y))},l),u={};return Object.keys(c).reduce(function(d,f){var h=c[f];if(h.hasStack){var p={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(g,m){var v=h.stackGroups[m];return er(er({},g),{},Xh({},m,{numericAxisId:r,cateAxisId:i,items:v.items,stackedData:t$e(e,v.items,a)}))},p)}return er(er({},d),{},Xh({},f,h))},u)},d9=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var c=e.domain();if(!c.length)return null;var u=gSe(c,a,s);return e.domain([XC(u),Uc(u)]),{niceTicks:u}}if(a&&i==="number"){var d=e.domain(),f=vSe(d,a,s);return{niceTicks:f}}return null};function MS(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!xt(i[e.dataKey])){var s=cS(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=fr(i,xt(o)?e.dataKey:o);return xt(l)?null:e.scale(l)}var V4=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var l=fr(o,n.dataKey,n.domain[s]);return xt(l)?null:n.scale(l)-a/2+i},r$e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},i$e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?er(er({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(zr(a)){var o=n[a];if(o){var s=o.items.indexOf(e);return s>=0?o.stackedData[s]:null}}return null},a$e=function(e){return e.reduce(function(n,r){return[XC(r.concat([n[0]]).filter(Ae)),Uc(r.concat([n[1]]).filter(Ae))]},[1/0,-1/0])},f9=function(e,n,r){return Object.keys(e).reduce(function(i,a){var o=e[a],s=o.stackedData,l=s.reduce(function(c,u){var d=a$e(u.slice(n,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},W4=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,U4=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,WO=function(e,n,r){if(gt(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Ae(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(W4.test(e[0])){var a=+W4.exec(e[0])[1];i[0]=n[0]-a}else gt(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Ae(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(U4.test(e[1])){var o=+U4.exec(e[1])[1];i[1]=n[1]+o}else gt(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},LS=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=ZR(n,function(d){return d.coordinate}),o=1/0,s=1,l=a.length;s<l;s++){var c=a[s],u=a[s-1];o=Math.min((c.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},H4=function(e,n,r){return!e||!e.length||Qd(e,oo(r,"type.defaultProps.domain"))?n:e},h9=function(e,n){var r=e.type.defaultProps?er(er({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,o=r.unit,s=r.formatter,l=r.tooltipType,c=r.chartType,u=r.hide;return er(er({},lt(e,!1)),{},{dataKey:i,unit:o,formatter:s,name:a||i,color:$D(e),value:fr(n,i),type:l,payload:n,chartType:c,hide:u})};function Vy(t){"@babel/helpers - typeof";return Vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vy(t)}function G4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Al(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G4(Object(n),!0).forEach(function(r){p9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p9(t,e,n){return e=o$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o$e(t){var e=s$e(t,"string");return Vy(e)=="symbol"?e:e+""}function s$e(t,e){if(Vy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function l$e(t,e){return f$e(t)||d$e(t,e)||u$e(t,e)||c$e()}function c$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u$e(t,e){if(t){if(typeof t=="string")return q4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q4(t,e)}}function q4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d$e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function f$e(t){if(Array.isArray(t))return t}var jS=Math.PI/180,h$e=function(e){return e*180/Math.PI},Cn=function(e,n,r,i){return{x:e+Math.cos(-jS*i)*r,y:n+Math.sin(-jS*i)*r}},m9=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},p$e=function(e,n,r,i,a){var o=e.width,s=e.height,l=e.startAngle,c=e.endAngle,u=ia(e.cx,o,o/2),d=ia(e.cy,s,s/2),f=m9(o,s,r),h=ia(e.innerRadius,f,0),p=ia(e.outerRadius,f,f*.8),g=Object.keys(n);return g.reduce(function(m,v){var y=n[v],b=y.domain,w=y.reversed,x;if(xt(y.range))i==="angleAxis"?x=[l,c]:i==="radiusAxis"&&(x=[h,p]),w&&(x=[x[1],x[0]]);else{x=y.range;var $=x,C=l$e($,2);l=C[0],c=C[1]}var E=c9(y,a),I=E.realScaleType,T=E.scale;T.domain(b).range(x),u9(T);var N=d9(T,Al(Al({},y),{},{realScaleType:I})),k=Al(Al(Al({},y),N),{},{range:x,radius:p,realScaleType:I,scale:T,cx:u,cy:d,innerRadius:h,outerRadius:p,startAngle:l,endAngle:c});return Al(Al({},m),{},p9({},v,k))},{})},m$e=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))},g$e=function(e,n){var r=e.x,i=e.y,a=n.cx,o=n.cy,s=m$e({x:r,y:i},{x:a,y:o});if(s<=0)return{radius:s};var l=(r-a)/s,c=Math.acos(l);return i>o&&(c=2*Math.PI-c),{radius:s,angle:h$e(c),angleInRadian:c}},v$e=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:r-o*360}},y$e=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),o=Math.floor(i/360),s=Math.min(a,o);return e+s*360},K4=function(e,n){var r=e.x,i=e.y,a=g$e({x:r,y:i},n),o=a.radius,s=a.angle,l=n.innerRadius,c=n.outerRadius;if(o<l||o>c)return!1;if(o===0)return!0;var u=v$e(n),d=u.startAngle,f=u.endAngle,h=s,p;if(d<=f){for(;h>f;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=f}else{for(;h>d;)h-=360;for(;h<f;)h+=360;p=h>=f&&h<=d}return p?Al(Al({},n),{},{radius:o,angle:y$e(h,n)}):null},g9=function(e){return!S.isValidElement(e)&&!gt(e)&&typeof e!="boolean"?e.className:""};function Wy(t){"@babel/helpers - typeof";return Wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wy(t)}var b$e=["offset"];function x$e(t){return C$e(t)||$$e(t)||S$e(t)||w$e()}function w$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S$e(t,e){if(t){if(typeof t=="string")return UO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UO(t,e)}}function $$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function C$e(t){if(Array.isArray(t))return UO(t)}function UO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E$e(t,e){if(t==null)return{};var n=T$e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function T$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function X4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X4(Object(n),!0).forEach(function(r){I$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I$e(t,e,n){return e=N$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N$e(t){var e=k$e(t,"string");return Wy(e)=="symbol"?e:e+""}function k$e(t,e){if(Wy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uy(){return Uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uy.apply(this,arguments)}var O$e=function(e){var n=e.value,r=e.formatter,i=xt(e.children)?n:e.children;return gt(r)?r(i):i},A$e=function(e,n){var r=ra(n-e),i=Math.min(Math.abs(n-e),360);return r*i},_$e=function(e,n,r){var i=e.position,a=e.viewBox,o=e.offset,s=e.className,l=a,c=l.cx,u=l.cy,d=l.innerRadius,f=l.outerRadius,h=l.startAngle,p=l.endAngle,g=l.clockWise,m=(d+f)/2,v=A$e(h,p),y=v>=0?1:-1,b,w;i==="insideStart"?(b=h+y*o,w=g):i==="insideEnd"?(b=p-y*o,w=!g):i==="end"&&(b=p+y*o,w=g),w=v<=0?w:!w;var x=Cn(c,u,m,b),$=Cn(c,u,m,b+(w?1:-1)*359),C="M".concat(x.x,",").concat(x.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(w?0:1,`,
    `).concat($.x,",").concat($.y),E=xt(e.id)?Cf("recharts-radial-line-"):e.id;return B.createElement("text",Uy({},r,{dominantBaseline:"central",className:$t("recharts-radial-bar-label",s)}),B.createElement("defs",null,B.createElement("path",{id:E,d:C})),B.createElement("textPath",{xlinkHref:"#".concat(E)},n))},P$e=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,o=a.cx,s=a.cy,l=a.innerRadius,c=a.outerRadius,u=a.startAngle,d=a.endAngle,f=(u+d)/2;if(i==="outside"){var h=Cn(o,s,c+r,f),p=h.x,g=h.y;return{x:p,y:g,textAnchor:p>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var m=(l+c)/2,v=Cn(o,s,m,f),y=v.x,b=v.y;return{x:y,y:b,textAnchor:"middle",verticalAnchor:"middle"}},R$e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,o=n,s=o.x,l=o.y,c=o.width,u=o.height,d=u>=0?1:-1,f=d*i,h=d>0?"end":"start",p=d>0?"start":"end",g=c>=0?1:-1,m=g*i,v=g>0?"end":"start",y=g>0?"start":"end";if(a==="top"){var b={x:s+c/2,y:l-d*i,textAnchor:"middle",verticalAnchor:h};return Rr(Rr({},b),r?{height:Math.max(l-r.y,0),width:c}:{})}if(a==="bottom"){var w={x:s+c/2,y:l+u+f,textAnchor:"middle",verticalAnchor:p};return Rr(Rr({},w),r?{height:Math.max(r.y+r.height-(l+u),0),width:c}:{})}if(a==="left"){var x={x:s-m,y:l+u/2,textAnchor:v,verticalAnchor:"middle"};return Rr(Rr({},x),r?{width:Math.max(x.x-r.x,0),height:u}:{})}if(a==="right"){var $={x:s+c+m,y:l+u/2,textAnchor:y,verticalAnchor:"middle"};return Rr(Rr({},$),r?{width:Math.max(r.x+r.width-$.x,0),height:u}:{})}var C=r?{width:c,height:u}:{};return a==="insideLeft"?Rr({x:s+m,y:l+u/2,textAnchor:y,verticalAnchor:"middle"},C):a==="insideRight"?Rr({x:s+c-m,y:l+u/2,textAnchor:v,verticalAnchor:"middle"},C):a==="insideTop"?Rr({x:s+c/2,y:l+f,textAnchor:"middle",verticalAnchor:p},C):a==="insideBottom"?Rr({x:s+c/2,y:l+u-f,textAnchor:"middle",verticalAnchor:h},C):a==="insideTopLeft"?Rr({x:s+m,y:l+f,textAnchor:y,verticalAnchor:p},C):a==="insideTopRight"?Rr({x:s+c-m,y:l+f,textAnchor:v,verticalAnchor:p},C):a==="insideBottomLeft"?Rr({x:s+m,y:l+u-f,textAnchor:y,verticalAnchor:h},C):a==="insideBottomRight"?Rr({x:s+c-m,y:l+u-f,textAnchor:v,verticalAnchor:h},C):dm(a)&&(Ae(a.x)||Cd(a.x))&&(Ae(a.y)||Cd(a.y))?Rr({x:s+ia(a.x,c),y:l+ia(a.y,u),textAnchor:"end",verticalAnchor:"end"},C):Rr({x:s+c/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},C)},D$e=function(e){return"cx"in e&&Ae(e.cx)};function ii(t){var e=t.offset,n=e===void 0?5:e,r=E$e(t,b$e),i=Rr({offset:n},r),a=i.viewBox,o=i.position,s=i.value,l=i.children,c=i.content,u=i.className,d=u===void 0?"":u,f=i.textBreakAll;if(!a||xt(s)&&xt(l)&&!S.isValidElement(c)&&!gt(c))return null;if(S.isValidElement(c))return S.cloneElement(c,i);var h;if(gt(c)){if(h=S.createElement(c,i),S.isValidElement(h))return h}else h=O$e(i);var p=D$e(a),g=lt(i,!0);if(p&&(o==="insideStart"||o==="insideEnd"||o==="end"))return _$e(i,h,g);var m=p?P$e(i):R$e(i);return B.createElement(Zd,Uy({className:$t("recharts-label",d)},g,m,{breakAll:f}),h)}ii.displayName="Label";var v9=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,s=e.r,l=e.radius,c=e.innerRadius,u=e.outerRadius,d=e.x,f=e.y,h=e.top,p=e.left,g=e.width,m=e.height,v=e.clockWise,y=e.labelViewBox;if(y)return y;if(Ae(g)&&Ae(m)){if(Ae(d)&&Ae(f))return{x:d,y:f,width:g,height:m};if(Ae(h)&&Ae(p))return{x:h,y:p,width:g,height:m}}return Ae(d)&&Ae(f)?{x:d,y:f,width:0,height:0}:Ae(n)&&Ae(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:o||i||0,innerRadius:c||0,outerRadius:u||l||s||0,clockWise:v}:e.viewBox?e.viewBox:{}},F$e=function(e,n){return e?e===!0?B.createElement(ii,{key:"label-implicit",viewBox:n}):zr(e)?B.createElement(ii,{key:"label-implicit",viewBox:n,value:e}):S.isValidElement(e)?e.type===ii?S.cloneElement(e,{key:"label-implicit",viewBox:n}):B.createElement(ii,{key:"label-implicit",content:e,viewBox:n}):gt(e)?B.createElement(ii,{key:"label-implicit",content:e,viewBox:n}):dm(e)?B.createElement(ii,Uy({viewBox:n},e,{key:"label-implicit"})):null:null},M$e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=v9(e),o=so(i,ii).map(function(l,c){return S.cloneElement(l,{viewBox:n||a,key:"label-".concat(c)})});if(!r)return o;var s=F$e(e.label,n||a);return[s].concat(x$e(o))};ii.parseViewBox=v9;ii.renderCallByParent=M$e;function L$e(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var j$e=L$e;const z$e=Gt(j$e);function Hy(t){"@babel/helpers - typeof";return Hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hy(t)}var B$e=["valueAccessor"],V$e=["data","dataKey","clockWise","id","textBreakAll"];function W$e(t){return q$e(t)||G$e(t)||H$e(t)||U$e()}function U$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H$e(t,e){if(t){if(typeof t=="string")return HO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HO(t,e)}}function G$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function q$e(t){if(Array.isArray(t))return HO(t)}function HO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zS(){return zS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zS.apply(this,arguments)}function Y4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y4(Object(n),!0).forEach(function(r){K$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K$e(t,e,n){return e=X$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X$e(t){var e=Y$e(t,"string");return Hy(e)=="symbol"?e:e+""}function Y$e(t,e){if(Hy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q4(t,e){if(t==null)return{};var n=Z$e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Z$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Q$e=function(e){return Array.isArray(e.value)?z$e(e.value):e.value};function il(t){var e=t.valueAccessor,n=e===void 0?Q$e:e,r=Q4(t,B$e),i=r.data,a=r.dataKey,o=r.clockWise,s=r.id,l=r.textBreakAll,c=Q4(r,V$e);return!i||!i.length?null:B.createElement(_t,{className:"recharts-label-list"},i.map(function(u,d){var f=xt(a)?n(u,d):fr(u&&u.payload,a),h=xt(s)?{}:{id:"".concat(s,"-").concat(d)};return B.createElement(ii,zS({},lt(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:ii.parseViewBox(xt(o)?u:Z4(Z4({},u),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}il.displayName="LabelList";function J$e(t,e){return t?t===!0?B.createElement(il,{key:"labelList-implicit",data:e}):B.isValidElement(t)||gt(t)?B.createElement(il,{key:"labelList-implicit",data:e,content:t}):dm(t)?B.createElement(il,zS({data:e},t,{key:"labelList-implicit"})):null:null}function eCe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=so(r,il).map(function(o,s){return S.cloneElement(o,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var a=J$e(t.label,e);return[a].concat(W$e(i))}il.renderCallByParent=eCe;function Gy(t){"@babel/helpers - typeof";return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gy(t)}function GO(){return GO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GO.apply(this,arguments)}function J4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J4(Object(n),!0).forEach(function(r){tCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tCe(t,e,n){return e=nCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nCe(t){var e=rCe(t,"string");return Gy(e)=="symbol"?e:e+""}function rCe(t,e){if(Gy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iCe=function(e,n){var r=ra(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},O1=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,o=e.sign,s=e.isExternal,l=e.cornerRadius,c=e.cornerIsExternal,u=l*(s?1:-1)+i,d=Math.asin(l/u)/jS,f=c?a:a+o*d,h=Cn(n,r,u,f),p=Cn(n,r,i,f),g=c?a-o*d:a,m=Cn(n,r,u*Math.cos(d*jS),g);return{center:h,circleTangency:p,lineTangency:m,theta:d}},y9=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,s=e.endAngle,l=iCe(o,s),c=o+l,u=Cn(n,r,a,o),d=Cn(n,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var h=Cn(n,r,i,o),p=Cn(n,r,i,c);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},aCe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,c=e.startAngle,u=e.endAngle,d=ra(u-c),f=O1({cx:n,cy:r,radius:a,angle:c,sign:d,cornerRadius:o,cornerIsExternal:l}),h=f.circleTangency,p=f.lineTangency,g=f.theta,m=O1({cx:n,cy:r,radius:a,angle:u,sign:-d,cornerRadius:o,cornerIsExternal:l}),v=m.circleTangency,y=m.lineTangency,b=m.theta,w=l?Math.abs(c-u):Math.abs(c-u)-g-b;if(w<0)return s?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):y9({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:c,endAngle:u});var x="M ".concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(w>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(i>0){var $=O1({cx:n,cy:r,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),C=$.circleTangency,E=$.lineTangency,I=$.theta,T=O1({cx:n,cy:r,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),N=T.circleTangency,k=T.lineTangency,O=T.theta,_=l?Math.abs(c-u):Math.abs(c-u)-I-O;if(_<0&&o===0)return"".concat(x,"L").concat(n,",").concat(r,"Z");x+="L".concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(d>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,"Z")}else x+="L".concat(n,",").concat(r,"Z");return x},oCe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},b9=function(e){var n=eB(eB({},oCe),e),r=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,d=n.endAngle,f=n.className;if(o<a||u===d)return null;var h=$t("recharts-sector",f),p=o-a,g=ia(s,p,0,!0),m;return g>0&&Math.abs(u-d)<360?m=aCe({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(g,p/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):m=y9({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:u,endAngle:d}),B.createElement("path",GO({},lt(n,!0),{className:h,d:m,role:"img"}))};function qy(t){"@babel/helpers - typeof";return qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qy(t)}function qO(){return qO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qO.apply(this,arguments)}function tB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tB(Object(n),!0).forEach(function(r){sCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sCe(t,e,n){return e=lCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lCe(t){var e=cCe(t,"string");return qy(e)=="symbol"?e:e+""}function cCe(t,e){if(qy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rB={curveBasisClosed:sde,curveBasisOpen:lde,curveBasis:ode,curveBumpX:Gue,curveBumpY:que,curveLinearClosed:cde,curveLinear:DC,curveMonotoneX:ude,curveMonotoneY:dde,curveNatural:fde,curveStep:hde,curveStepAfter:mde,curveStepBefore:pde},A1=function(e){return e.x===+e.x&&e.y===+e.y},av=function(e){return e.x},ov=function(e){return e.y},uCe=function(e,n){if(gt(e))return e;var r="curve".concat(PC(e));return(r==="curveMonotone"||r==="curveBump")&&n?rB["".concat(r).concat(n==="vertical"?"Y":"X")]:rB[r]||DC},dCe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,o=e.baseLine,s=e.layout,l=e.connectNulls,c=l===void 0?!1:l,u=uCe(r,s),d=c?a.filter(function(g){return A1(g)}):a,f;if(Array.isArray(o)){var h=c?o.filter(function(g){return A1(g)}):o,p=d.map(function(g,m){return nB(nB({},g),{},{base:h[m]})});return s==="vertical"?f=w1().y(ov).x1(av).x0(function(g){return g.base.x}):f=w1().x(av).y1(ov).y0(function(g){return g.base.y}),f.defined(A1).curve(u),f(p)}return s==="vertical"&&Ae(o)?f=w1().y(ov).x1(av).x0(o):Ae(o)?f=w1().x(av).y1(ov).y0(o):f=hG().x(av).y(ov),f.defined(A1).curve(u),f(d)},Md=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?dCe(e):i;return B.createElement("path",qO({},lt(e,!1),uS(e),{className:$t("recharts-curve",n),d:o,ref:a}))},x9={exports:{}},fCe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hCe=fCe,pCe=hCe;function w9(){}function S9(){}S9.resetWarningCache=w9;var mCe=function(){function t(r,i,a,o,s,l){if(l!==pCe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:S9,resetWarningCache:w9};return n.PropTypes=n,n};x9.exports=mCe();var gCe=x9.exports;const en=Gt(gCe);var vCe=Object.getOwnPropertyNames,yCe=Object.getOwnPropertySymbols,bCe=Object.prototype.hasOwnProperty;function iB(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function _1(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,o=a.get(n),s=a.get(r);if(o&&s)return o===r&&s===n;a.set(n,r),a.set(r,n);var l=t(n,r,i);return a.delete(n),a.delete(r),l}}function aB(t){return vCe(t).concat(yCe(t))}var xCe=Object.hasOwn||function(t,e){return bCe.call(t,e)};function If(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var wCe="__v",SCe="__o",$Ce="_owner",oB=Object.getOwnPropertyDescriptor,sB=Object.keys;function CCe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function ECe(t,e){return If(t.getTime(),e.getTime())}function TCe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function ICe(t,e){return t===e}function lB(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),o,s,l=0;(o=a.next())&&!o.done;){for(var c=e.entries(),u=!1,d=0;(s=c.next())&&!s.done;){if(i[d]){d++;continue}var f=o.value,h=s.value;if(n.equals(f[0],h[0],l,d,t,e,n)&&n.equals(f[1],h[1],f[0],h[0],t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1;l++}return!0}var NCe=If;function kCe(t,e,n){var r=sB(t),i=r.length;if(sB(e).length!==i)return!1;for(;i-- >0;)if(!$9(t,e,n,r[i]))return!1;return!0}function sv(t,e,n){var r=aB(t),i=r.length;if(aB(e).length!==i)return!1;for(var a,o,s;i-- >0;)if(a=r[i],!$9(t,e,n,a)||(o=oB(t,a),s=oB(e,a),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function OCe(t,e){return If(t.valueOf(),e.valueOf())}function ACe(t,e){return t.source===e.source&&t.flags===e.flags}function cB(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),o,s;(o=a.next())&&!o.done;){for(var l=e.values(),c=!1,u=0;(s=l.next())&&!s.done;){if(!i[u]&&n.equals(o.value,s.value,o.value,s.value,t,e,n)){c=i[u]=!0;break}u++}if(!c)return!1}return!0}function _Ce(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function PCe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function $9(t,e,n,r){return(r===$Ce||r===SCe||r===wCe)&&(t.$$typeof||e.$$typeof)?!0:xCe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var RCe="[object Arguments]",DCe="[object Boolean]",FCe="[object Date]",MCe="[object Error]",LCe="[object Map]",jCe="[object Number]",zCe="[object Object]",BCe="[object RegExp]",VCe="[object Set]",WCe="[object String]",UCe="[object URL]",HCe=Array.isArray,uB=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,dB=Object.assign,GCe=Object.prototype.toString.call.bind(Object.prototype.toString);function qCe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,o=t.areNumbersEqual,s=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,u=t.areSetsEqual,d=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(p,g,m){if(p===g)return!0;if(p==null||g==null)return!1;var v=typeof p;if(v!==typeof g)return!1;if(v!=="object")return v==="number"?o(p,g,m):v==="function"?i(p,g,m):!1;var y=p.constructor;if(y!==g.constructor)return!1;if(y===Object)return s(p,g,m);if(HCe(p))return e(p,g,m);if(uB!=null&&uB(p))return d(p,g,m);if(y===Date)return n(p,g,m);if(y===RegExp)return c(p,g,m);if(y===Map)return a(p,g,m);if(y===Set)return u(p,g,m);var b=GCe(p);return b===FCe?n(p,g,m):b===BCe?c(p,g,m):b===LCe?a(p,g,m):b===VCe?u(p,g,m):b===zCe?typeof p.then!="function"&&typeof g.then!="function"&&s(p,g,m):b===UCe?f(p,g,m):b===MCe?r(p,g,m):b===RCe?s(p,g,m):b===DCe||b===jCe||b===WCe?l(p,g,m):!1}}function KCe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?sv:CCe,areDatesEqual:ECe,areErrorsEqual:TCe,areFunctionsEqual:ICe,areMapsEqual:r?iB(lB,sv):lB,areNumbersEqual:NCe,areObjectsEqual:r?sv:kCe,arePrimitiveWrappersEqual:OCe,areRegExpsEqual:ACe,areSetsEqual:r?iB(cB,sv):cB,areTypedArraysEqual:r?sv:_Ce,areUrlsEqual:PCe};if(n&&(i=dB({},i,n(i))),e){var a=_1(i.areArraysEqual),o=_1(i.areMapsEqual),s=_1(i.areObjectsEqual),l=_1(i.areSetsEqual);i=dB({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return i}function XCe(t){return function(e,n,r,i,a,o,s){return t(e,n,s)}}function YCe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(l,c){var u=r(),d=u.cache,f=d===void 0?e?new WeakMap:void 0:d,h=u.meta;return n(l,c,{cache:f,equals:i,meta:h,strict:a})};if(e)return function(l,c){return n(l,c,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,c){return n(l,c,o)}}var ZCe=Pu();Pu({strict:!0});Pu({circular:!0});Pu({circular:!0,strict:!0});Pu({createInternalComparator:function(){return If}});Pu({strict:!0,createInternalComparator:function(){return If}});Pu({circular:!0,createInternalComparator:function(){return If}});Pu({circular:!0,createInternalComparator:function(){return If},strict:!0});function Pu(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,o=a===void 0?!1:a,s=KCe(t),l=qCe(s),c=r?r(l):XCe(l);return YCe({circular:n,comparator:l,createState:i,equals:c,strict:o})}function QCe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function fB(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):QCe(i)};requestAnimationFrame(r)}function KO(t){"@babel/helpers - typeof";return KO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KO(t)}function JCe(t){return r2e(t)||n2e(t)||t2e(t)||e2e()}function e2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t2e(t,e){if(t){if(typeof t=="string")return hB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hB(t,e)}}function hB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function r2e(t){if(Array.isArray(t))return t}function i2e(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,s=JCe(o),l=s[0],c=s.slice(1);if(typeof l=="number"){fB(i.bind(null,c),l);return}i(l),fB(i.bind(null,c));return}KO(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Ky(t){"@babel/helpers - typeof";return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ky(t)}function pB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pB(Object(n),!0).forEach(function(r){C9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C9(t,e,n){return e=a2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a2e(t){var e=o2e(t,"string");return Ky(e)==="symbol"?e:String(e)}function o2e(t,e){if(Ky(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ky(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s2e=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},l2e=function(e){return e},c2e=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Jv=function(e,n){return Object.keys(n).reduce(function(r,i){return mB(mB({},r),{},C9({},i,e(i,n[i])))},{})},gB=function(e,n,r){return e.map(function(i){return"".concat(c2e(i)," ").concat(n,"ms ").concat(r)}).join(",")};function u2e(t,e){return h2e(t)||f2e(t,e)||E9(t,e)||d2e()}function d2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function h2e(t){if(Array.isArray(t))return t}function p2e(t){return v2e(t)||g2e(t)||E9(t)||m2e()}function m2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E9(t,e){if(t){if(typeof t=="string")return XO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XO(t,e)}}function g2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function v2e(t){if(Array.isArray(t))return XO(t)}function XO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var BS=1e-4,T9=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},I9=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},vB=function(e,n){return function(r){var i=T9(e,n);return I9(i,r)}},y2e=function(e,n){return function(r){var i=T9(e,n),a=[].concat(p2e(i.map(function(o,s){return o*s}).slice(1)),[0]);return I9(a,r)}},yB=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,s=1;break;case"ease":i=.25,a=.1,o=.25,s=1;break;case"ease-in":i=.42,a=0,o=1,s=1;break;case"ease-out":i=.42,a=0,o=.58,s=1;break;case"ease-in-out":i=0,a=0,o=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var c=l[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),u=u2e(c,4);i=u[0],a=u[1],o=u[2],s=u[3]}}}var d=vB(i,o),f=vB(a,s),h=y2e(i,o),p=function(v){return v>1?1:v<0?0:v},g=function(v){for(var y=v>1?1:v,b=y,w=0;w<8;++w){var x=d(b)-y,$=h(b);if(Math.abs(x-y)<BS||$<BS)return f(b);b=p(b-x/$)}return f(b)};return g.isStepper=!1,g},b2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,o=e.dt,s=o===void 0?17:o,l=function(u,d,f){var h=-(u-d)*r,p=f*a,g=f+(h-p)*s/1e3,m=f*s/1e3+u;return Math.abs(m-d)<BS&&Math.abs(g)<BS?[d,0]:[m,g]};return l.isStepper=!0,l.dt=s,l},x2e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return yB(i);case"spring":return b2e();default:if(i.split("(")[0]==="cubic-bezier")return yB(i)}return typeof i=="function"?i:null};function Xy(t){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xy(t)}function bB(t){return $2e(t)||S2e(t)||N9(t)||w2e()}function w2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $2e(t){if(Array.isArray(t))return ZO(t)}function xB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xB(Object(n),!0).forEach(function(r){YO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YO(t,e,n){return e=C2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C2e(t){var e=E2e(t,"string");return Xy(e)==="symbol"?e:String(e)}function E2e(t,e){if(Xy(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xy(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T2e(t,e){return k2e(t)||N2e(t,e)||N9(t,e)||I2e()}function I2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N9(t,e){if(t){if(typeof t=="string")return ZO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZO(t,e)}}function ZO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function k2e(t){if(Array.isArray(t))return t}var VS=function(e,n,r){return e+(n-e)*r},QO=function(e){var n=e.from,r=e.to;return n!==r},O2e=function t(e,n,r){var i=Jv(function(a,o){if(QO(o)){var s=e(o.from,o.to,o.velocity),l=T2e(s,2),c=l[0],u=l[1];return xi(xi({},o),{},{from:c,velocity:u})}return o},n);return r<1?Jv(function(a,o){return QO(o)?xi(xi({},o),{},{velocity:VS(o.velocity,i[a].velocity,r),from:VS(o.from,i[a].from,r)}):o},n):t(e,i,r-1)};const A2e=function(t,e,n,r,i){var a=s2e(t,e),o=a.reduce(function(m,v){return xi(xi({},m),{},YO({},v,[t[v],e[v]]))},{}),s=a.reduce(function(m,v){return xi(xi({},m),{},YO({},v,{from:t[v],velocity:0,to:e[v]}))},{}),l=-1,c,u,d=function(){return null},f=function(){return Jv(function(v,y){return y.from},s)},h=function(){return!Object.values(s).filter(QO).length},p=function(v){c||(c=v);var y=v-c,b=y/n.dt;s=O2e(n,s,b),i(xi(xi(xi({},t),e),f())),c=v,h()||(l=requestAnimationFrame(d))},g=function(v){u||(u=v);var y=(v-u)/r,b=Jv(function(x,$){return VS.apply(void 0,bB($).concat([n(y)]))},o);if(i(xi(xi(xi({},t),e),b)),y<1)l=requestAnimationFrame(d);else{var w=Jv(function(x,$){return VS.apply(void 0,bB($).concat([n(1)]))},o);i(xi(xi(xi({},t),e),w))}};return d=n.isStepper?p:g,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}var _2e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function P2e(t,e){if(t==null)return{};var n=R2e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function R2e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function HI(t){return L2e(t)||M2e(t)||F2e(t)||D2e()}function D2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F2e(t,e){if(t){if(typeof t=="string")return JO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JO(t,e)}}function M2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function L2e(t){if(Array.isArray(t))return JO(t)}function JO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ns(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wB(Object(n),!0).forEach(function(r){Tv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tv(t,e,n){return e=k9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z2e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k9(r.key),r)}}function B2e(t,e,n){return e&&z2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function k9(t){var e=V2e(t,"string");return wp(e)==="symbol"?e:String(e)}function V2e(t,e){if(wp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eA(t,e)}function eA(t,e){return eA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},eA(t,e)}function U2e(t){var e=H2e();return function(){var r=WS(t),i;if(e){var a=WS(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return tA(this,i)}}function tA(t,e){if(e&&(wp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nA(t)}function nA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function WS(t){return WS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},WS(t)}var Is=function(t){W2e(n,t);var e=U2e(n);function n(r,i){var a;j2e(this,n),a=e.call(this,r,i);var o=a.props,s=o.isActive,l=o.attributeName,c=o.from,u=o.to,d=o.steps,f=o.children,h=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(nA(a)),a.changeStyle=a.changeStyle.bind(nA(a)),!s||h<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:u}),tA(a);if(d&&d.length)a.state={style:d[0].style};else if(c){if(typeof f=="function")return a.state={style:c},tA(a);a.state={style:l?Tv({},l,c):c}}else a.state={style:{}};return a}return B2e(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,s=a.canBegin,l=a.attributeName,c=a.shouldReAnimate,u=a.to,d=a.from,f=this.state.style;if(s){if(!o){var h={style:l?Tv({},l,u):u};this.state&&f&&(l&&f[l]!==u||!l&&f!==u)&&this.setState(h);return}if(!(ZCe(i.to,u)&&i.canBegin&&i.isActive)){var p=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=p||c?d:i.to;if(this.state&&f){var m={style:l?Tv({},l,g):g};(l&&f[l]!==g||!l&&f!==g)&&this.setState(m)}this.runAnimation(ns(ns({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,s=i.to,l=i.duration,c=i.easing,u=i.begin,d=i.onAnimationEnd,f=i.onAnimationStart,h=A2e(o,s,x2e(c),l,this.changeStyle),p=function(){a.stopJSAnimation=h()};this.manager.start([f,u,p,l,d])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,s=i.begin,l=i.onAnimationStart,c=o[0],u=c.style,d=c.duration,f=d===void 0?0:d,h=function(g,m,v){if(v===0)return g;var y=m.duration,b=m.easing,w=b===void 0?"ease":b,x=m.style,$=m.properties,C=m.onAnimationEnd,E=v>0?o[v-1]:m,I=$||Object.keys(x);if(typeof w=="function"||w==="spring")return[].concat(HI(g),[a.runJSAnimation.bind(a,{from:E.style,to:x,duration:y,easing:w}),y]);var T=gB(I,y,w),N=ns(ns(ns({},E.style),x),{},{transition:T});return[].concat(HI(g),[N,y,C]).filter(l2e)};return this.manager.start([l].concat(HI(o.reduce(h,[u,Math.max(f,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=i2e());var a=i.begin,o=i.duration,s=i.attributeName,l=i.to,c=i.easing,u=i.onAnimationStart,d=i.onAnimationEnd,f=i.steps,h=i.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof c=="function"||typeof h=="function"||c==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var g=s?Tv({},s,l):l,m=gB(Object.keys(g),o,c);p.start([u,a,ns(ns({},g),{},{transition:m}),o,d])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=P2e(i,_2e),c=S.Children.count(a),u=this.state.style;if(typeof a=="function")return a(u);if(!s||c===0||o<=0)return a;var d=function(h){var p=h.props,g=p.style,m=g===void 0?{}:g,v=p.className,y=S.cloneElement(h,ns(ns({},l),{},{style:ns(ns({},m),u),className:v}));return y};return c===1?d(S.Children.only(a)):B.createElement("div",null,S.Children.map(a,function(f){return d(f)}))}}]),n}(S.PureComponent);Is.displayName="Animate";Is.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Is.propTypes={from:en.oneOfType([en.object,en.string]),to:en.oneOfType([en.object,en.string]),attributeName:en.string,duration:en.number,begin:en.number,easing:en.oneOfType([en.string,en.func]),steps:en.arrayOf(en.shape({duration:en.number.isRequired,style:en.object.isRequired,easing:en.oneOfType([en.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),en.func]),properties:en.arrayOf("string"),onAnimationEnd:en.func})),children:en.oneOfType([en.node,en.func]),isActive:en.bool,canBegin:en.bool,onAnimationEnd:en.func,shouldReAnimate:en.bool,onAnimationStart:en.func,onAnimationReStart:en.func};function Qe(){return Qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qe.apply(null,arguments)}function G2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Yy(t,e){return Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Yy(t,e)}function ht(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zy(t){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zy(t)}function US(){return US=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},US.apply(this,arguments)}function q2e(t,e){return Z2e(t)||Y2e(t,e)||X2e(t,e)||K2e()}function K2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X2e(t,e){if(t){if(typeof t=="string")return SB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SB(t,e)}}function SB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Y2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Z2e(t){if(Array.isArray(t))return t}function $B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$B(Object(n),!0).forEach(function(r){Q2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$B(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q2e(t,e,n){return e=J2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J2e(t){var e=eEe(t,"string");return Zy(e)=="symbol"?e:e+""}function eEe(t,e){if(Zy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EB=function(e,n,r,i,a){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,c=i>=0&&r>=0||i<0&&r<0?1:0,u;if(o>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>o?o:a[f];u="M".concat(e,",").concat(n+s*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(n)),u+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(n+s*d[1])),u+="L ".concat(e+r,",").concat(n+i-s*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),u+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(n+i-s*d[3])),u+="Z"}else if(o>0&&a===+a&&a>0){var p=Math.min(o,a);u="M ".concat(e,",").concat(n+s*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+l*p,",").concat(n,`
            L `).concat(e+r-l*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(n+s*p,`
            L `).concat(e+r,",").concat(n+i-s*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-l*p,",").concat(n+i,`
            L `).concat(e+l*p,",").concat(n+i,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(n+i-s*p," Z")}else u="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return u},tEe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,o=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var c=Math.min(a,a+s),u=Math.max(a,a+s),d=Math.min(o,o+l),f=Math.max(o,o+l);return r>=c&&r<=u&&i>=d&&i<=f}return!1},nEe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CD=function(e){var n=CB(CB({},nEe),e),r=S.useRef(),i=S.useState(-1),a=q2e(i,2),o=a[0],s=a[1];S.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&s(w)}catch{}},[]);var l=n.x,c=n.y,u=n.width,d=n.height,f=n.radius,h=n.className,p=n.animationEasing,g=n.animationDuration,m=n.animationBegin,v=n.isAnimationActive,y=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var b=$t("recharts-rectangle",h);return y?B.createElement(Is,{canBegin:o>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:g,animationEasing:p,isActive:y},function(w){var x=w.width,$=w.height,C=w.x,E=w.y;return B.createElement(Is,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:g,isActive:v,easing:p},B.createElement("path",US({},lt(n,!0),{className:b,d:EB(C,E,x,$,f),ref:r})))}):B.createElement("path",US({},lt(n,!0),{className:b,d:EB(l,c,u,d,f)}))},rEe=["points","className","baseLinePoints","connectNulls"];function _h(){return _h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_h.apply(this,arguments)}function iEe(t,e){if(t==null)return{};var n=aEe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function TB(t){return cEe(t)||lEe(t)||sEe(t)||oEe()}function oEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sEe(t,e){if(t){if(typeof t=="string")return rA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rA(t,e)}}function lEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cEe(t){if(Array.isArray(t))return rA(t)}function rA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var IB=function(e){return e&&e.x===+e.x&&e.y===+e.y},uEe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){IB(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),IB(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},ey=function(e,n){var r=uEe(e);n&&(r=[r.reduce(function(a,o){return[].concat(TB(a),TB(o))},[])]);var i=r.map(function(a){return a.reduce(function(o,s,l){return"".concat(o).concat(l===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},dEe=function(e,n,r){var i=ey(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(ey(n.reverse(),r).slice(1))},fEe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,o=iEe(e,rEe);if(!n||!n.length)return null;var s=$t("recharts-polygon",r);if(i&&i.length){var l=o.stroke&&o.stroke!=="none",c=dEe(n,i,a);return B.createElement("g",{className:s},B.createElement("path",_h({},lt(o,!0),{fill:c.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:c})),l?B.createElement("path",_h({},lt(o,!0),{fill:"none",d:ey(n,a)})):null,l?B.createElement("path",_h({},lt(o,!0),{fill:"none",d:ey(i,a)})):null)}var u=ey(n,a);return B.createElement("path",_h({},lt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:s,d:u}))};function iA(){return iA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iA.apply(this,arguments)}var tb=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,o=$t("recharts-dot",a);return n===+n&&r===+r&&i===+i?B.createElement("circle",iA({},lt(e,!1),uS(e),{className:o,cx:n,cy:r,r:i})):null};function Qy(t){"@babel/helpers - typeof";return Qy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qy(t)}var hEe=["x","y","top","left","width","height","className"];function aA(){return aA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aA.apply(this,arguments)}function NB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pEe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NB(Object(n),!0).forEach(function(r){mEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mEe(t,e,n){return e=gEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gEe(t){var e=vEe(t,"string");return Qy(e)=="symbol"?e:e+""}function vEe(t,e){if(Qy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yEe(t,e){if(t==null)return{};var n=bEe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var xEe=function(e,n,r,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},wEe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.top,s=o===void 0?0:o,l=e.left,c=l===void 0?0:l,u=e.width,d=u===void 0?0:u,f=e.height,h=f===void 0?0:f,p=e.className,g=yEe(e,hEe),m=pEe({x:r,y:a,top:s,left:c,width:d,height:h},g);return!Ae(r)||!Ae(a)||!Ae(d)||!Ae(h)||!Ae(s)||!Ae(c)?null:B.createElement("path",aA({},lt(m,!0),{className:$t("recharts-cross",p),d:xEe(r,a,d,h,s,c)}))},SEe=KC,$Ee=B7,CEe=Cl;function EEe(t,e){return t&&t.length?SEe(t,CEe(e),$Ee):void 0}var TEe=EEe;const IEe=Gt(TEe);var NEe=KC,kEe=Cl,OEe=V7;function AEe(t,e){return t&&t.length?NEe(t,kEe(e),OEe):void 0}var _Ee=AEe;const PEe=Gt(_Ee);var REe=["cx","cy","angle","ticks","axisLine"],DEe=["ticks","tick","angle","tickFormatter","stroke"];function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function ty(){return ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ty.apply(this,arguments)}function kB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ju(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kB(Object(n),!0).forEach(function(r){QC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OB(t,e){if(t==null)return{};var n=FEe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function MEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A9(r.key),r)}}function LEe(t,e,n){return e&&AB(t.prototype,e),n&&AB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jEe(t,e,n){return e=HS(e),zEe(t,O9()?Reflect.construct(e,n||[],HS(t).constructor):e.apply(t,n))}function zEe(t,e){if(e&&(Sp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BEe(t)}function BEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O9=function(){return!!t})()}function HS(t){return HS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},HS(t)}function VEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oA(t,e)}function oA(t,e){return oA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oA(t,e)}function QC(t,e,n){return e=A9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A9(t){var e=WEe(t,"string");return Sp(e)=="symbol"?e:e+""}function WEe(t,e){if(Sp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var JC=function(t){function e(){return MEe(this,e),jEe(this,e,arguments)}return VEe(e,t),LEe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,o=a.angle,s=a.cx,l=a.cy;return Cn(s,l,i,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.angle,s=r.ticks,l=IEe(s,function(u){return u.coordinate||0}),c=PEe(s,function(u){return u.coordinate||0});return{cx:i,cy:a,startAngle:o,endAngle:o,innerRadius:c.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.angle,s=r.ticks,l=r.axisLine,c=OB(r,REe),u=s.reduce(function(p,g){return[Math.min(p[0],g.coordinate),Math.max(p[1],g.coordinate)]},[1/0,-1/0]),d=Cn(i,a,u[0],o),f=Cn(i,a,u[1],o),h=Ju(Ju(Ju({},lt(c,!1)),{},{fill:"none"},lt(l,!1)),{},{x1:d.x,y1:d.y,x2:f.x,y2:f.y});return B.createElement("line",ty({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,o=i.tick,s=i.angle,l=i.tickFormatter,c=i.stroke,u=OB(i,DEe),d=this.getTickTextAnchor(),f=lt(u,!1),h=lt(o,!1),p=a.map(function(g,m){var v=r.getTickValueCoord(g),y=Ju(Ju(Ju(Ju({textAnchor:d,transform:"rotate(".concat(90-s,", ").concat(v.x,", ").concat(v.y,")")},f),{},{stroke:"none",fill:c},h),{},{index:m},v),{},{payload:g});return B.createElement(_t,ty({className:$t("recharts-polar-radius-axis-tick",g9(o)),key:"tick-".concat(g.coordinate)},Yd(r.props,g,m)),e.renderTickItem(o,y,l?l(g.value,m):g.value))});return B.createElement(_t,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,o=r.tick;return!i||!i.length?null:B.createElement(_t,{className:$t("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),ii.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return B.isValidElement(r)?o=B.cloneElement(r,i):gt(r)?o=r(i):o=B.createElement(Zd,ty({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(S.PureComponent);QC(JC,"displayName","PolarRadiusAxis");QC(JC,"axisType","radiusAxis");QC(JC,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function $p(t){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(t)}function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pd.apply(this,arguments)}function _B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ed(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_B(Object(n),!0).forEach(function(r){e2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_B(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P9(r.key),r)}}function HEe(t,e,n){return e&&PB(t.prototype,e),n&&PB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function GEe(t,e,n){return e=GS(e),qEe(t,_9()?Reflect.construct(e,n||[],GS(t).constructor):e.apply(t,n))}function qEe(t,e){if(e&&($p(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KEe(t)}function KEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_9=function(){return!!t})()}function GS(t){return GS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},GS(t)}function XEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sA(t,e)}function sA(t,e){return sA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sA(t,e)}function e2(t,e,n){return e=P9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P9(t){var e=YEe(t,"string");return $p(e)=="symbol"?e:e+""}function YEe(t,e){if($p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ZEe=Math.PI/180,QEe=1e-5,t2=function(t){function e(){return UEe(this,e),GEe(this,e,arguments)}return XEe(e,t),HEe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,o=i.cy,s=i.radius,l=i.orientation,c=i.tickSize,u=c||8,d=Cn(a,o,s,r.coordinate),f=Cn(a,o,s+(l==="inner"?-1:1)*u,r.coordinate);return{x1:d.x,y1:d.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*ZEe),o;return a>QEe?o=i==="outer"?"start":"end":a<-1e-5?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,o=r.radius,s=r.axisLine,l=r.axisLineType,c=ed(ed({},lt(this.props,!1)),{},{fill:"none"},lt(s,!1));if(l==="circle")return B.createElement(tb,pd({className:"recharts-polar-angle-axis-line"},c,{cx:i,cy:a,r:o}));var u=this.props.ticks,d=u.map(function(f){return Cn(i,a,o,f.coordinate)});return B.createElement(fEe,pd({className:"recharts-polar-angle-axis-line"},c,{points:d}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,o=i.tick,s=i.tickLine,l=i.tickFormatter,c=i.stroke,u=lt(this.props,!1),d=lt(o,!1),f=ed(ed({},u),{},{fill:"none"},lt(s,!1)),h=a.map(function(p,g){var m=r.getTickLineCoord(p),v=r.getTickTextAnchor(p),y=ed(ed(ed({textAnchor:v},u),{},{stroke:"none",fill:c},d),{},{index:g,payload:p,x:m.x2,y:m.y2});return B.createElement(_t,pd({className:$t("recharts-polar-angle-axis-tick",g9(o)),key:"tick-".concat(p.coordinate)},Yd(r.props,p,g)),s&&B.createElement("line",pd({className:"recharts-polar-angle-axis-tick-line"},f,m)),o&&e.renderTickItem(o,y,l?l(p.value,g):p.value))});return B.createElement(_t,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,o=r.axisLine;return a<=0||!i||!i.length?null:B.createElement(_t,{className:$t("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var o;return B.isValidElement(r)?o=B.cloneElement(r,i):gt(r)?o=r(i):o=B.createElement(Zd,pd({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(S.PureComponent);e2(t2,"displayName","PolarAngleAxis");e2(t2,"axisType","angleAxis");e2(t2,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var JEe=MG,eTe=JEe(Object.getPrototypeOf,Object),tTe=eTe,nTe=lc,rTe=tTe,iTe=cc,aTe="[object Object]",oTe=Function.prototype,sTe=Object.prototype,R9=oTe.toString,lTe=sTe.hasOwnProperty,cTe=R9.call(Object);function uTe(t){if(!iTe(t)||nTe(t)!=aTe)return!1;var e=rTe(t);if(e===null)return!0;var n=lTe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&R9.call(n)==cTe}var dTe=uTe;const fTe=Gt(dTe);var hTe=lc,pTe=cc,mTe="[object Boolean]";function gTe(t){return t===!0||t===!1||pTe(t)&&hTe(t)==mTe}var vTe=gTe;const yTe=Gt(vTe);function Jy(t){"@babel/helpers - typeof";return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jy(t)}function qS(){return qS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qS.apply(this,arguments)}function bTe(t,e){return $Te(t)||STe(t,e)||wTe(t,e)||xTe()}function xTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wTe(t,e){if(t){if(typeof t=="string")return RB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RB(t,e)}}function RB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function STe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function $Te(t){if(Array.isArray(t))return t}function DB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DB(Object(n),!0).forEach(function(r){CTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CTe(t,e,n){return e=ETe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ETe(t){var e=TTe(t,"string");return Jy(e)=="symbol"?e:e+""}function TTe(t,e){if(Jy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MB=function(e,n,r,i,a){var o=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-o/2,",").concat(n+a),s+="L ".concat(e+r-o/2-i,",").concat(n+a),s+="L ".concat(e,",").concat(n," Z"),s},ITe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},NTe=function(e){var n=FB(FB({},ITe),e),r=S.useRef(),i=S.useState(-1),a=bTe(i,2),o=a[0],s=a[1];S.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&s(b)}catch{}},[]);var l=n.x,c=n.y,u=n.upperWidth,d=n.lowerWidth,f=n.height,h=n.className,p=n.animationEasing,g=n.animationDuration,m=n.animationBegin,v=n.isUpdateAnimationActive;if(l!==+l||c!==+c||u!==+u||d!==+d||f!==+f||u===0&&d===0||f===0)return null;var y=$t("recharts-trapezoid",h);return v?B.createElement(Is,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:l,y:c},to:{upperWidth:u,lowerWidth:d,height:f,x:l,y:c},duration:g,animationEasing:p,isActive:v},function(b){var w=b.upperWidth,x=b.lowerWidth,$=b.height,C=b.x,E=b.y;return B.createElement(Is,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:g,easing:p},B.createElement("path",qS({},lt(n,!0),{className:y,d:MB(C,E,w,x,$),ref:r})))}):B.createElement("g",null,B.createElement("path",qS({},lt(n,!0),{className:y,d:MB(l,c,u,d,f)})))},kTe=["option","shapeType","propTransformer","activeClassName","isActive"];function e0(t){"@babel/helpers - typeof";return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e0(t)}function OTe(t,e){if(t==null)return{};var n=ATe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ATe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function LB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LB(Object(n),!0).forEach(function(r){_Te(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Te(t,e,n){return e=PTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PTe(t){var e=RTe(t,"string");return e0(e)=="symbol"?e:e+""}function RTe(t,e){if(e0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(e0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DTe(t,e){return KS(KS({},e),t)}function FTe(t,e){return t==="symbols"}function jB(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return B.createElement(CD,n);case"trapezoid":return B.createElement(NTe,n);case"sector":return B.createElement(b9,n);case"symbols":if(FTe(e))return B.createElement(WR,n);break;default:return null}}function MTe(t){return S.isValidElement(t)?t.props:t}function D9(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?DTe:r,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,s=t.isActive,l=OTe(t,kTe),c;if(S.isValidElement(e))c=S.cloneElement(e,KS(KS({},l),MTe(e)));else if(gt(e))c=e(l);else if(fTe(e)&&!yTe(e)){var u=i(e,l);c=B.createElement(jB,{shapeType:n,elementProps:u})}else{var d=l;c=B.createElement(jB,{shapeType:n,elementProps:d})}return s?B.createElement(_t,{className:o},c):c}function n2(t,e){return e!=null&&"trapezoids"in t.props}function r2(t,e){return e!=null&&"sectors"in t.props}function t0(t,e){return e!=null&&"points"in t.props}function LTe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function jTe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function zTe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function BTe(t,e){var n;return n2(t,e)?n=LTe:r2(t,e)?n=jTe:t0(t,e)&&(n=zTe),n}function VTe(t,e){var n;return n2(t,e)?n="trapezoids":r2(t,e)?n="sectors":t0(t,e)&&(n="points"),n}function WTe(t,e){if(n2(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(r2(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return t0(t,e)?e.payload:{}}function UTe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=VTe(n,e),a=WTe(n,e),o=r.filter(function(l,c){var u=Qd(a,l),d=n.props[i].filter(function(p){var g=BTe(n,e);return g(p,e)}),f=n.props[i].indexOf(d[d.length-1]),h=c===f;return u&&h}),s=r.indexOf(o[o.length-1]);return s}var $w;function Cp(t){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(t)}function Ph(){return Ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ph.apply(this,arguments)}function zB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zB(Object(n),!0).forEach(function(r){Ao(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M9(r.key),r)}}function GTe(t,e,n){return e&&BB(t.prototype,e),n&&BB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qTe(t,e,n){return e=XS(e),KTe(t,F9()?Reflect.construct(e,n||[],XS(t).constructor):e.apply(t,n))}function KTe(t,e){if(e&&(Cp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XTe(t)}function XTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F9=function(){return!!t})()}function XS(t){return XS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},XS(t)}function YTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lA(t,e)}function lA(t,e){return lA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},lA(t,e)}function Ao(t,e,n){return e=M9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M9(t){var e=ZTe(t,"string");return Cp(e)=="symbol"?e:e+""}function ZTe(t,e){if(Cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dc=function(t){function e(n){var r;return HTe(this,e),r=qTe(this,e,[n]),Ao(r,"pieRef",null),Ao(r,"sectorRefs",[]),Ao(r,"id",Cf("recharts-pie-")),Ao(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),gt(i)&&i()}),Ao(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),gt(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return YTe(e,t),GTe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,s=a.labelLine,l=a.dataKey,c=a.valueKey,u=lt(this.props,!1),d=lt(o,!1),f=lt(s,!1),h=o&&o.offsetRadius||20,p=r.map(function(g,m){var v=(g.startAngle+g.endAngle)/2,y=Cn(g.cx,g.cy,g.outerRadius+h,v),b=wn(wn(wn(wn({},u),g),{},{stroke:"none"},d),{},{index:m,textAnchor:e.getTextAnchor(y.x,g.cx)},y),w=wn(wn(wn(wn({},u),g),{},{fill:"none",stroke:g.fill},f),{},{index:m,points:[Cn(g.cx,g.cy,g.outerRadius,v),y]}),x=l;return xt(l)&&xt(c)?x="value":xt(l)&&(x=c),B.createElement(_t,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(m)},s&&e.renderLabelLineItem(s,w,"line"),e.renderLabelItem(o,b,fr(g,x)))});return B.createElement(_t,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,o=a.activeShape,s=a.blendStroke,l=a.inactiveShape;return r.map(function(c,u){if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&r.length!==1)return null;var d=i.isActiveIndex(u),f=l&&i.hasActiveIndex()?l:null,h=d?o:f,p=wn(wn({},c),{},{stroke:s?c.fill:c.stroke,tabIndex:-1});return B.createElement(_t,Ph({ref:function(m){m&&!i.sectorRefs.includes(m)&&i.sectorRefs.push(m)},tabIndex:-1,className:"recharts-pie-sector"},Yd(i.props,c,u),{key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(u)}),B.createElement(D9,Ph({option:h,isActive:d,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,o=i.isAnimationActive,s=i.animationBegin,l=i.animationDuration,c=i.animationEasing,u=i.animationId,d=this.state,f=d.prevSectors,h=d.prevIsAnimationActive;return B.createElement(Is,{begin:s,duration:l,isActive:o,easing:c,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var g=p.t,m=[],v=a&&a[0],y=v.startAngle;return a.forEach(function(b,w){var x=f&&f[w],$=w>0?oo(b,"paddingAngle",0):0;if(x){var C=Fr(x.endAngle-x.startAngle,b.endAngle-b.startAngle),E=wn(wn({},b),{},{startAngle:y+$,endAngle:y+C(g)+$});m.push(E),y=E.endAngle}else{var I=b.endAngle,T=b.startAngle,N=Fr(0,I-T),k=N(g),O=wn(wn({},b),{},{startAngle:y+$,endAngle:y+k+$});m.push(O),y=O.endAngle}}),B.createElement(_t,null,r.renderSectorsStatically(m))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var s=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,o=this.state.prevSectors;return a&&i&&i.length&&(!o||!Qd(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,o=i.sectors,s=i.className,l=i.label,c=i.cx,u=i.cy,d=i.innerRadius,f=i.outerRadius,h=i.isAnimationActive,p=this.state.isAnimationFinished;if(a||!o||!o.length||!Ae(c)||!Ae(u)||!Ae(d)||!Ae(f))return null;var g=$t("recharts-pie",s);return B.createElement(_t,{tabIndex:this.props.rootTabIndex,className:g,ref:function(v){r.pieRef=v}},this.renderSectors(),l&&this.renderLabels(o),ii.renderCallByParent(this.props,null,!1),(!h||p)&&il.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(B.isValidElement(r))return B.cloneElement(r,i);if(gt(r))return r(i);var o=$t("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return B.createElement(Md,Ph({},i,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,i,a){if(B.isValidElement(r))return B.cloneElement(r,i);var o=a;if(gt(r)&&(o=r(i),B.isValidElement(o)))return o;var s=$t("recharts-pie-label-text",typeof r!="boolean"&&!gt(r)?r.className:"");return B.createElement(Zd,Ph({},i,{alignmentBaseline:"middle",className:s}),o)}}])}(S.PureComponent);$w=dc;Ao(dc,"displayName","Pie");Ao(dc,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ou.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ao(dc,"parseDeltaAngle",function(t,e){var n=ra(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Ao(dc,"getRealPieData",function(t){var e=t.data,n=t.children,r=lt(t,!1),i=so(n,BC);return e&&e.length?e.map(function(a,o){return wn(wn(wn({payload:a},r),a),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(a){return wn(wn({},r),a.props)}):[]});Ao(dc,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,o=m9(i,a),s=r+ia(t.cx,i,i/2),l=n+ia(t.cy,a,a/2),c=ia(t.innerRadius,o,0),u=ia(t.outerRadius,o,o*.8),d=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:s,cy:l,innerRadius:c,outerRadius:u,maxRadius:d}});Ao(dc,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?wn(wn({},e.type.defaultProps),e.props):e.props,i=$w.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,o=r.startAngle,s=r.endAngle,l=r.paddingAngle,c=r.dataKey,u=r.nameKey,d=r.valueKey,f=r.tooltipType,h=Math.abs(r.minAngle),p=$w.parseCoordinateOfPie(r,n),g=$w.parseDeltaAngle(o,s),m=Math.abs(g),v=c;xt(c)&&xt(d)?(bs(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):xt(c)&&(bs(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=d);var y=i.filter(function(E){return fr(E,v,0)!==0}).length,b=(m>=360?y:y-1)*l,w=m-y*h-b,x=i.reduce(function(E,I){var T=fr(I,v,0);return E+(Ae(T)?T:0)},0),$;if(x>0){var C;$=i.map(function(E,I){var T=fr(E,v,0),N=fr(E,u,I),k=(Ae(T)?T:0)/x,O;I?O=C.endAngle+ra(g)*l*(T!==0?1:0):O=o;var _=O+ra(g)*((T!==0?h:0)+k*w),P=(O+_)/2,D=(p.innerRadius+p.outerRadius)/2,L=[{name:N,value:T,payload:E,dataKey:v,type:f}],R=Cn(p.cx,p.cy,D,P);return C=wn(wn(wn({percent:k,cornerRadius:a,name:N,tooltipPayload:L,midAngle:P,middleRadius:D,tooltipPosition:R},E),p),{},{value:fr(E,v),startAngle:O,endAngle:_,payload:E,paddingAngle:ra(g)*l}),C})}return wn(wn({},p),{},{sectors:$,data:i})});var QTe=Math.ceil,JTe=Math.max;function eIe(t,e,n,r){for(var i=-1,a=JTe(QTe((e-t)/(n||1)),0),o=Array(a);a--;)o[r?a:++i]=t,t+=n;return o}var tIe=eIe,nIe=n7,rIe=1/0,iIe=17976931348623157e292;function aIe(t){if(!t)return t===0?t:0;if(t=nIe(t),t===rIe||t===-1/0){var e=t<0?-1:1;return e*iIe}return t===t?t:0}var L9=aIe,oIe=tIe,sIe=jC,GI=L9;function lIe(t){return function(e,n,r){return r&&typeof r!="number"&&sIe(e,n,r)&&(n=r=void 0),e=GI(e),n===void 0?(n=e,e=0):n=GI(n),r=r===void 0?e<n?1:-1:GI(r),oIe(e,n,r,t)}}var cIe=lIe,uIe=cIe,dIe=uIe(),fIe=dIe;const YS=Gt(fIe);function n0(t){"@babel/helpers - typeof";return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n0(t)}function VB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VB(Object(n),!0).forEach(function(r){j9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j9(t,e,n){return e=hIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hIe(t){var e=pIe(t,"string");return n0(e)=="symbol"?e:e+""}function pIe(t,e){if(n0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(n0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mIe=["Webkit","Moz","O","ms"],gIe=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=mIe.reduce(function(a,o){return WB(WB({},a),{},j9({},o+r,n))},{});return i[e]=n,i};function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function ZS(){return ZS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZS.apply(this,arguments)}function UB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UB(Object(n),!0).forEach(function(r){Ga(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B9(r.key),r)}}function yIe(t,e,n){return e&&HB(t.prototype,e),n&&HB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bIe(t,e,n){return e=QS(e),xIe(t,z9()?Reflect.construct(e,n||[],QS(t).constructor):e.apply(t,n))}function xIe(t,e){if(e&&(Ep(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wIe(t)}function wIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z9=function(){return!!t})()}function QS(t){return QS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},QS(t)}function SIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cA(t,e)}function cA(t,e){return cA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cA(t,e)}function Ga(t,e,n){return e=B9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B9(t){var e=$Ie(t,"string");return Ep(e)=="symbol"?e:e+""}function $Ie(t,e){if(Ep(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ep(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var CIe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,o=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,c=Zv().domain(YS(0,l)).range([a,a+o-s]),u=c.domain().map(function(d){return c(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(r),endX:c(i),scale:c,scaleValues:u}},GB=function(e){return e.changedTouches&&!!e.changedTouches.length},Tp=function(t){function e(n){var r;return vIe(this,e),r=bIe(this,e,[n]),Ga(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Ga(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Ga(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,o=i.onDragEnd,s=i.startIndex;o==null||o({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),Ga(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ga(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ga(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ga(r,"handleSlideDragStart",function(i){var a=GB(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return SIe(e,t),yIe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,o=this.state.scaleValues,s=this.props,l=s.gap,c=s.data,u=c.length-1,d=Math.min(i,a),f=Math.max(i,a),h=e.getIndexInRange(o,d),p=e.getIndexInRange(o,f);return{startIndex:h-h%l,endIndex:p===u?u:p-p%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,o=i.tickFormatter,s=i.dataKey,l=fr(a[r],s,r);return gt(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,o=i.startX,s=i.endX,l=this.props,c=l.x,u=l.width,d=l.travellerWidth,f=l.startIndex,h=l.endIndex,p=l.onChange,g=r.pageX-a;g>0?g=Math.min(g,c+u-d-s,c+u-d-o):g<0&&(g=Math.max(g,c-o,c-s));var m=this.getIndex({startX:o+g,endX:s+g});(m.startIndex!==f||m.endIndex!==h)&&p&&p(m),this.setState({startX:o+g,endX:s+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=GB(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,s=i.endX,l=i.startX,c=this.state[o],u=this.props,d=u.x,f=u.width,h=u.travellerWidth,p=u.onChange,g=u.gap,m=u.data,v={startX:this.state.startX,endX:this.state.endX},y=r.pageX-a;y>0?y=Math.min(y,d+f-h-c):y<0&&(y=Math.max(y,d-c)),v[o]=c+y;var b=this.getIndex(v),w=b.startIndex,x=b.endIndex,$=function(){var E=m.length-1;return o==="startX"&&(s>l?w%g===0:x%g===0)||s<l&&x===E||o==="endX"&&(s>l?x%g===0:w%g===0)||s>l&&x===E};this.setState(Ga(Ga({},o,c+y),"brushMoveStartX",r.pageX),function(){p&&$()&&p(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,o=this.state,s=o.scaleValues,l=o.startX,c=o.endX,u=this.state[i],d=s.indexOf(u);if(d!==-1){var f=d+r;if(!(f===-1||f>=s.length)){var h=s[f];i==="startX"&&h>=c||i==="endX"&&h<=l||this.setState(Ga({},i,h),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.fill,c=r.stroke;return B.createElement("rect",{stroke:c,fill:l,x:i,y:a,width:o,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.data,c=r.children,u=r.padding,d=S.Children.only(c);return d?B.cloneElement(d,{x:i,y:a,width:o,height:s,margin:u,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,o,s=this,l=this.props,c=l.y,u=l.travellerWidth,d=l.height,f=l.traveller,h=l.ariaLabel,p=l.data,g=l.startIndex,m=l.endIndex,v=Math.max(r,this.props.x),y=qI(qI({},lt(this.props,!1)),{},{x:v,y:c,width:u,height:d}),b=h||"Min value: ".concat((a=p[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=p[m])===null||o===void 0?void 0:o.name);return B.createElement(_t,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(x){["ArrowLeft","ArrowRight"].includes(x.key)&&(x.preventDefault(),x.stopPropagation(),s.handleTravellerMoveKeyboard(x.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,y))}},{key:"renderSlide",value:function(r,i){var a=this.props,o=a.y,s=a.height,l=a.stroke,c=a.travellerWidth,u=Math.min(r,i)+c,d=Math.max(Math.abs(i-r)-c,0);return B.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:u,y:o,width:d,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,o=r.y,s=r.height,l=r.travellerWidth,c=r.stroke,u=this.state,d=u.startX,f=u.endX,h=5,p={pointerEvents:"none",fill:c};return B.createElement(_t,{className:"recharts-brush-texts"},B.createElement(Zd,ZS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-h,y:o+s/2},p),this.getTextOfTick(i)),B.createElement(Zd,ZS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+l+h,y:o+s/2},p),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,o=r.children,s=r.x,l=r.y,c=r.width,u=r.height,d=r.alwaysShowText,f=this.state,h=f.startX,p=f.endX,g=f.isTextActive,m=f.isSlideMoving,v=f.isTravellerMoving,y=f.isTravellerFocused;if(!i||!i.length||!Ae(s)||!Ae(l)||!Ae(c)||!Ae(u)||c<=0||u<=0)return null;var b=$t("recharts-brush",a),w=B.Children.count(o)===1,x=gIe("userSelect","none");return B.createElement(_t,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:x},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(h,p),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(p,"endX"),(g||m||v||y||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,o=r.width,s=r.height,l=r.stroke,c=Math.floor(a+s/2)-1;return B.createElement(B.Fragment,null,B.createElement("rect",{x:i,y:a,width:o,height:s,fill:l,stroke:"none"}),B.createElement("line",{x1:i+1,y1:c,x2:i+o-1,y2:c,fill:"none",stroke:"#fff"}),B.createElement("line",{x1:i+1,y1:c+2,x2:i+o-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return B.isValidElement(r)?a=B.cloneElement(r,i):gt(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,o=r.width,s=r.x,l=r.travellerWidth,c=r.updateId,u=r.startIndex,d=r.endIndex;if(a!==i.prevData||c!==i.prevUpdateId)return qI({prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o},a&&a.length?CIe({data:a,width:o,x:s,travellerWidth:l,startIndex:u,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+o-l]);var f=i.scale.domain().map(function(h){return i.scale(h)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:c,prevX:s,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,o=0,s=a-1;s-o>1;){var l=Math.floor((o+s)/2);r[l]>i?s=l:o=l}return i>=r[s]?s:o}}])}(S.PureComponent);Ga(Tp,"displayName","Brush");Ga(Tp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var EIe=YR;function TIe(t,e){var n;return EIe(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}var IIe=TIe,NIe=kG,kIe=Cl,OIe=IIe,AIe=Fa,_Ie=jC;function PIe(t,e,n){var r=AIe(t)?NIe:OIe;return n&&_Ie(t,e,n)&&(e=void 0),r(t,kIe(e))}var RIe=PIe;const DIe=Gt(RIe);var al=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},qB=ZG;function FIe(t,e,n){e=="__proto__"&&qB?qB(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var MIe=FIe,LIe=MIe,jIe=XG,zIe=Cl;function BIe(t,e){var n={};return e=zIe(e),jIe(t,function(r,i,a){LIe(n,i,e(r,i,a))}),n}var VIe=BIe;const WIe=Gt(VIe);function UIe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var HIe=UIe,GIe=YR;function qIe(t,e){var n=!0;return GIe(t,function(r,i,a){return n=!!e(r,i,a),n}),n}var KIe=qIe,XIe=HIe,YIe=KIe,ZIe=Cl,QIe=Fa,JIe=jC;function eNe(t,e,n){var r=QIe(t)?XIe:YIe;return n&&JIe(t,e,n)&&(e=void 0),r(t,ZIe(e))}var tNe=eNe;const V9=Gt(tNe);var nNe=["x","y"];function r0(t){"@babel/helpers - typeof";return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r0(t)}function uA(){return uA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uA.apply(this,arguments)}function KB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KB(Object(n),!0).forEach(function(r){rNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rNe(t,e,n){return e=iNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iNe(t){var e=aNe(t,"string");return r0(e)=="symbol"?e:e+""}function aNe(t,e){if(r0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(r0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oNe(t,e){if(t==null)return{};var n=sNe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function lNe(t,e){var n=t.x,r=t.y,i=oNe(t,nNe),a="".concat(n),o=parseInt(a,10),s="".concat(r),l=parseInt(s,10),c="".concat(e.height||i.height),u=parseInt(c,10),d="".concat(e.width||i.width),f=parseInt(d,10);return lv(lv(lv(lv(lv({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:u,width:f,name:e.name,radius:e.radius})}function XB(t){return B.createElement(D9,uA({shapeType:"rectangle",propTransformer:lNe,activeClassName:"recharts-active-bar"},t))}var cNe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=typeof r=="number";return a?e(r,i):(a||ef(),n)}},uNe=["value","background"],W9;function Ip(t){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(t)}function dNe(t,e){if(t==null)return{};var n=fNe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function JS(){return JS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JS.apply(this,arguments)}function YB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YB(Object(n),!0).forEach(function(r){Hc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H9(r.key),r)}}function pNe(t,e,n){return e&&ZB(t.prototype,e),n&&ZB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mNe(t,e,n){return e=e$(e),gNe(t,U9()?Reflect.construct(e,n||[],e$(t).constructor):e.apply(t,n))}function gNe(t,e){if(e&&(Ip(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vNe(t)}function vNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U9=function(){return!!t})()}function e$(t){return e$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e$(t)}function yNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dA(t,e)}function dA(t,e){return dA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dA(t,e)}function Hc(t,e,n){return e=H9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H9(t){var e=bNe(t,"string");return Ip(e)=="symbol"?e:e+""}function bNe(t,e){if(Ip(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ip(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nb=function(t){function e(){var n;hNe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=mNe(this,e,[].concat(i)),Hc(n,"state",{isAnimationFinished:!1}),Hc(n,"id",Cf("recharts-bar-")),Hc(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Hc(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return yNe(e,t),pNe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,o=a.shape,s=a.dataKey,l=a.activeIndex,c=a.activeBar,u=lt(this.props,!1);return r&&r.map(function(d,f){var h=f===l,p=h?c:o,g=wr(wr(wr({},u),d),{},{isActive:h,option:p,index:f,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return B.createElement(_t,JS({className:"recharts-bar-rectangle"},Yd(i.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(f)}),B.createElement(XB,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,o=i.layout,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state.prevData;return B.createElement(Is,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,g=a.map(function(m,v){var y=f&&f[v];if(y){var b=Fr(y.x,m.x),w=Fr(y.y,m.y),x=Fr(y.width,m.width),$=Fr(y.height,m.height);return wr(wr({},m),{},{x:b(p),y:w(p),width:x(p),height:$(p)})}if(o==="horizontal"){var C=Fr(0,m.height),E=C(p);return wr(wr({},m),{},{y:m.y+m.height-E,height:E})}var I=Fr(0,m.width),T=I(p);return wr(wr({},m),{},{width:T})});return B.createElement(_t,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!Qd(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,o=i.dataKey,s=i.activeIndex,l=lt(this.props.background,!1);return a.map(function(c,u){c.value;var d=c.background,f=dNe(c,uNe);if(!d)return null;var h=wr(wr(wr(wr(wr({},f),{},{fill:"#eee"},d),l),Yd(r.props,c,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return B.createElement(XB,JS({key:"background-bar-".concat(u),option:r.props.background,isActive:u===s},h))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,s=a.xAxis,l=a.yAxis,c=a.layout,u=a.children,d=so(u,eb);if(!d)return null;var f=c==="vertical"?o[0].height/2:o[0].width/2,h=function(m,v){var y=Array.isArray(m.value)?m.value[1]:m.value;return{x:m.x,y:m.y,value:y,errorVal:fr(m,v)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return B.createElement(_t,p,d.map(function(g){return B.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:o,xAxis:s,yAxis:l,layout:c,offset:f,dataPointFormatter:h})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,o=r.className,s=r.xAxis,l=r.yAxis,c=r.left,u=r.top,d=r.width,f=r.height,h=r.isAnimationActive,p=r.background,g=r.id;if(i||!a||!a.length)return null;var m=this.state.isAnimationFinished,v=$t("recharts-bar",o),y=s&&s.allowDataOverflow,b=l&&l.allowDataOverflow,w=y||b,x=xt(g)?this.id:g;return B.createElement(_t,{className:v},y||b?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat(x)},B.createElement("rect",{x:y?c:c-d/2,y:b?u:u-f/2,width:y?d:d*2,height:b?f:f*2}))):null,B.createElement(_t,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(x,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,x),(!h||m)&&il.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(S.PureComponent);W9=nb;Hc(nb,"displayName","Bar");Hc(nb,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ou.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Hc(nb,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,o=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,f=t.offset,h=YSe(r,n);if(!h)return null;var p=e.layout,g=n.type.defaultProps,m=g!==void 0?wr(wr({},g),n.props):n.props,v=m.dataKey,y=m.children,b=m.minPointSize,w=p==="horizontal"?o:a,x=c?w.scale.domain():null,$=r$e({numericAxis:w}),C=so(y,BC),E=d.map(function(I,T){var N,k,O,_,P,D;c?N=ZSe(c[u+T],x):(N=fr(I,v),Array.isArray(N)||(N=[$,N]));var L=cNe(b,W9.defaultProps.minPointSize)(N[1],T);if(p==="horizontal"){var R,F=[o.scale(N[0]),o.scale(N[1])],V=F[0],H=F[1];k=V4({axis:a,ticks:s,bandSize:i,offset:h.offset,entry:I,index:T}),O=(R=H??V)!==null&&R!==void 0?R:void 0,_=h.size;var U=V-H;if(P=Number.isNaN(U)?0:U,D={x:k,y:o.y,width:_,height:o.height},Math.abs(L)>0&&Math.abs(P)<Math.abs(L)){var W=ra(P||L)*(Math.abs(L)-Math.abs(P));O-=W,P+=W}}else{var G=[a.scale(N[0]),a.scale(N[1])],q=G[0],X=G[1];if(k=q,O=V4({axis:o,ticks:l,bandSize:i,offset:h.offset,entry:I,index:T}),_=X-q,P=h.size,D={x:a.x,y:O,width:a.width,height:P},Math.abs(L)>0&&Math.abs(_)<Math.abs(L)){var re=ra(_||L)*(Math.abs(L)-Math.abs(_));_+=re}}return wr(wr(wr({},I),{},{x:k,y:O,width:_,height:P,value:c?N:N[1],payload:I,background:D},C&&C[T]&&C[T].props),{},{tooltipPayload:[h9(n,I)],tooltipPosition:{x:k+_/2,y:O+P/2}})});return wr({data:E,layout:p},f)});function i0(t){"@babel/helpers - typeof";return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i0(t)}function xNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G9(r.key),r)}}function wNe(t,e,n){return e&&QB(t.prototype,e),n&&QB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function JB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ls(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(n),!0).forEach(function(r){i2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function i2(t,e,n){return e=G9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G9(t){var e=SNe(t,"string");return i0(e)=="symbol"?e:e+""}function SNe(t,e){if(i0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(i0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q9=function(e,n,r,i,a){var o=e.width,s=e.height,l=e.layout,c=e.children,u=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},f=!!Ya(c,nb);return u.reduce(function(h,p){var g=n[p],m=g.orientation,v=g.domain,y=g.padding,b=y===void 0?{}:y,w=g.mirror,x=g.reversed,$="".concat(m).concat(w?"Mirror":""),C,E,I,T,N;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var k=v[1]-v[0],O=1/0,_=g.categoricalDomain.sort(Dce);if(_.forEach(function(G,q){q>0&&(O=Math.min((G||0)-(_[q-1]||0),O))}),Number.isFinite(O)){var P=O/k,D=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(C=P*D/2),g.padding==="no-gap"){var L=ia(e.barCategoryGap,P*D),R=P*D/2;C=R-L-(R-L)/D*L}}}i==="xAxis"?E=[r.left+(b.left||0)+(C||0),r.left+r.width-(b.right||0)-(C||0)]:i==="yAxis"?E=l==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(C||0),r.top+r.height-(b.bottom||0)-(C||0)]:E=g.range,x&&(E=[E[1],E[0]]);var F=c9(g,a,f),V=F.scale,H=F.realScaleType;V.domain(v).range(E),u9(V);var U=d9(V,ls(ls({},g),{},{realScaleType:H}));i==="xAxis"?(N=m==="top"&&!w||m==="bottom"&&w,I=r.left,T=d[$]-N*g.height):i==="yAxis"&&(N=m==="left"&&!w||m==="right"&&w,I=d[$]-N*g.width,T=r.top);var W=ls(ls(ls({},g),U),{},{realScaleType:H,x:I,y:T,scale:V,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return W.bandSize=LS(W,U),!g.hide&&i==="xAxis"?d[$]+=(N?-1:1)*W.height:g.hide||(d[$]+=(N?-1:1)*W.width),ls(ls({},h),{},i2({},p,W))},{})},K9=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return{x:Math.min(r,a),y:Math.min(i,o),width:Math.abs(a-r),height:Math.abs(o-i)}},$Ne=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return K9({x:n,y:r},{x:i,y:a})},X9=function(){function t(e){xNe(this,t),this.scale=e}return wNe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();i2(X9,"EPS",1e-4);var ED=function(e){var n=Object.keys(e).reduce(function(r,i){return ls(ls({},r),{},i2({},i,X9.create(e[i])))},{});return ls(ls({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,s=a.position;return WIe(i,function(l,c){return n[c].apply(l,{bandAware:o,position:s})})},isInRange:function(i){return V9(i,function(a,o){return n[o].isInRange(a)})}})};function CNe(t){return(t%180+180)%180}var ENe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=CNe(i),o=a*Math.PI/180,s=Math.atan(r/n),l=o>s&&o<Math.PI-s?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},TNe=Cl,INe=X0,NNe=MC;function kNe(t){return function(e,n,r){var i=Object(e);if(!INe(e)){var a=TNe(n);e=NNe(e),n=function(s){return a(i[s],s,i)}}var o=t(e,n,r);return o>-1?i[a?e[o]:o]:void 0}}var ONe=kNe,ANe=L9;function _Ne(t){var e=ANe(t),n=e%1;return e===e?n?e-n:e:0}var PNe=_Ne,RNe=WG,DNe=Cl,FNe=PNe,MNe=Math.max;function LNe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:FNe(n);return i<0&&(i=MNe(r+i,0)),RNe(t,DNe(e),i)}var jNe=LNe,zNe=ONe,BNe=jNe,VNe=zNe(BNe),WNe=VNe;const UNe=Gt(WNe);var HNe=zle(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),TD=S.createContext(void 0),ID=S.createContext(void 0),Y9=S.createContext(void 0),Z9=S.createContext({}),Q9=S.createContext(void 0),J9=S.createContext(0),eq=S.createContext(0),e5=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=e.clipPathId,s=e.children,l=e.width,c=e.height,u=HNe(a);return B.createElement(TD.Provider,{value:r},B.createElement(ID.Provider,{value:i},B.createElement(Z9.Provider,{value:a},B.createElement(Y9.Provider,{value:u},B.createElement(Q9.Provider,{value:o},B.createElement(J9.Provider,{value:c},B.createElement(eq.Provider,{value:l},s)))))))},GNe=function(){return S.useContext(Q9)},tq=function(e){var n=S.useContext(TD);n==null&&ef();var r=n[e];return r==null&&ef(),r},qNe=function(){var e=S.useContext(TD);return Bc(e)},KNe=function(){var e=S.useContext(ID),n=UNe(e,function(r){return V9(r.domain,Number.isFinite)});return n||Bc(e)},nq=function(e){var n=S.useContext(ID);n==null&&ef();var r=n[e];return r==null&&ef(),r},XNe=function(){var e=S.useContext(Y9);return e},YNe=function(){return S.useContext(Z9)},ND=function(){return S.useContext(eq)},kD=function(){return S.useContext(J9)};function Np(t){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(t)}function ZNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iq(r.key),r)}}function JNe(t,e,n){return e&&QNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eke(t,e,n){return e=t$(e),tke(t,rq()?Reflect.construct(e,n||[],t$(t).constructor):e.apply(t,n))}function tke(t,e){if(e&&(Np(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nke(t)}function nke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rq=function(){return!!t})()}function t$(t){return t$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},t$(t)}function rke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fA(t,e)}function fA(t,e){return fA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fA(t,e)}function t5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function n5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t5(Object(n),!0).forEach(function(r){OD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OD(t,e,n){return e=iq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iq(t){var e=ike(t,"string");return Np(e)=="symbol"?e:e+""}function ike(t,e){if(Np(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Np(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ake(t,e){return cke(t)||lke(t,e)||ske(t,e)||oke()}function oke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ske(t,e){if(t){if(typeof t=="string")return r5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r5(t,e)}}function r5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function cke(t){if(Array.isArray(t))return t}function hA(){return hA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hA.apply(this,arguments)}var uke=function(e,n){var r;return B.isValidElement(e)?r=B.cloneElement(e,n):gt(e)?r=e(n):r=B.createElement("line",hA({},n,{className:"recharts-reference-line-line"})),r},dke=function(e,n,r,i,a,o,s,l,c){var u=a.x,d=a.y,f=a.width,h=a.height;if(r){var p=c.y,g=e.y.apply(p,{position:o});if(al(c,"discard")&&!e.y.isInRange(g))return null;var m=[{x:u+f,y:g},{x:u,y:g}];return l==="left"?m.reverse():m}if(n){var v=c.x,y=e.x.apply(v,{position:o});if(al(c,"discard")&&!e.x.isInRange(y))return null;var b=[{x:y,y:d+h},{x:y,y:d}];return s==="top"?b.reverse():b}if(i){var w=c.segment,x=w.map(function($){return e.apply($,{position:o})});return al(c,"discard")&&DIe(x,function($){return!e.isInRange($)})?null:x}return null};function fke(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,o=t.shape,s=t.className,l=t.alwaysShow,c=GNe(),u=tq(i),d=nq(a),f=XNe();if(!c||!f)return null;bs(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=ED({x:u.scale,y:d.scale}),p=zr(e),g=zr(n),m=r&&r.length===2,v=dke(h,p,g,m,f,t.position,u.orientation,d.orientation,t);if(!v)return null;var y=ake(v,2),b=y[0],w=b.x,x=b.y,$=y[1],C=$.x,E=$.y,I=al(t,"hidden")?"url(#".concat(c,")"):void 0,T=n5(n5({clipPath:I},lt(t,!0)),{},{x1:w,y1:x,x2:C,y2:E});return B.createElement(_t,{className:$t("recharts-reference-line",s)},uke(o,T),ii.renderCallByParent(t,$Ne({x1:w,y1:x,x2:C,y2:E})))}var AD=function(t){function e(){return ZNe(this,e),eke(this,e,arguments)}return rke(e,t),JNe(e,[{key:"render",value:function(){return B.createElement(fke,this.props)}}])}(B.Component);OD(AD,"displayName","ReferenceLine");OD(AD,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function pA(){return pA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pA.apply(this,arguments)}function kp(t){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(t)}function i5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function a5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i5(Object(n),!0).forEach(function(r){a2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oq(r.key),r)}}function mke(t,e,n){return e&&pke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gke(t,e,n){return e=n$(e),vke(t,aq()?Reflect.construct(e,n||[],n$(t).constructor):e.apply(t,n))}function vke(t,e){if(e&&(kp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yke(t)}function yke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aq=function(){return!!t})()}function n$(t){return n$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},n$(t)}function bke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mA(t,e)}function mA(t,e){return mA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mA(t,e)}function a2(t,e,n){return e=oq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oq(t){var e=xke(t,"string");return kp(e)=="symbol"?e:e+""}function xke(t,e){if(kp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wke=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,o=ED({x:i.scale,y:a.scale}),s=o.apply({x:n,y:r},{bandAware:!0});return al(e,"discard")&&!o.isInRange(s)?null:s},o2=function(t){function e(){return hke(this,e),gke(this,e,arguments)}return bke(e,t),mke(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,o=r.r,s=r.alwaysShow,l=r.clipPathId,c=zr(i),u=zr(a);if(bs(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!u)return null;var d=wke(this.props);if(!d)return null;var f=d.x,h=d.y,p=this.props,g=p.shape,m=p.className,v=al(this.props,"hidden")?"url(#".concat(l,")"):void 0,y=a5(a5({clipPath:v},lt(this.props,!0)),{},{cx:f,cy:h});return B.createElement(_t,{className:$t("recharts-reference-dot",m)},e.renderDot(g,y),ii.renderCallByParent(this.props,{x:f-o,y:h-o,width:2*o,height:2*o}))}}])}(B.Component);a2(o2,"displayName","ReferenceDot");a2(o2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});a2(o2,"renderDot",function(t,e){var n;return B.isValidElement(t)?n=B.cloneElement(t,e):gt(t)?n=t(e):n=B.createElement(tb,pA({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function gA(){return gA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gA.apply(this,arguments)}function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function o5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o5(Object(n),!0).forEach(function(r){s2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ske(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lq(r.key),r)}}function Cke(t,e,n){return e&&$ke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Eke(t,e,n){return e=r$(e),Tke(t,sq()?Reflect.construct(e,n||[],r$(t).constructor):e.apply(t,n))}function Tke(t,e){if(e&&(Op(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ike(t)}function Ike(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sq=function(){return!!t})()}function r$(t){return r$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r$(t)}function Nke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vA(t,e)}function vA(t,e){return vA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vA(t,e)}function s2(t,e,n){return e=lq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lq(t){var e=kke(t,"string");return Op(e)=="symbol"?e:e+""}function kke(t,e){if(Op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Oke=function(e,n,r,i,a){var o=a.x1,s=a.x2,l=a.y1,c=a.y2,u=a.xAxis,d=a.yAxis;if(!u||!d)return null;var f=ED({x:u.scale,y:d.scale}),h={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(l,{position:"start"}):f.y.rangeMin},p={x:n?f.x.apply(s,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(c,{position:"end"}):f.y.rangeMax};return al(a,"discard")&&(!f.isInRange(h)||!f.isInRange(p))?null:K9(h,p)},l2=function(t){function e(){return Ske(this,e),Eke(this,e,arguments)}return Nke(e,t),Cke(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,o=r.y1,s=r.y2,l=r.className,c=r.alwaysShow,u=r.clipPathId;bs(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=zr(i),f=zr(a),h=zr(o),p=zr(s),g=this.props.shape;if(!d&&!f&&!h&&!p&&!g)return null;var m=Oke(d,f,h,p,this.props);if(!m&&!g)return null;var v=al(this.props,"hidden")?"url(#".concat(u,")"):void 0;return B.createElement(_t,{className:$t("recharts-reference-area",l)},e.renderRect(g,s5(s5({clipPath:v},lt(this.props,!0)),m)),ii.renderCallByParent(this.props,m))}}])}(B.Component);s2(l2,"displayName","ReferenceArea");s2(l2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});s2(l2,"renderRect",function(t,e){var n;return B.isValidElement(t)?n=B.cloneElement(t,e):gt(t)?n=t(e):n=B.createElement(CD,gA({},e,{className:"recharts-reference-area-rect"})),n});function cq(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Ake(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return ENe(r,n)}function _ke(t,e,n){var r=n==="width",i=t.x,a=t.y,o=t.width,s=t.height;return e===1?{start:r?i:a,end:r?i+o:a+s}:{start:r?i+o:a+s,end:r?i:a}}function i$(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Pke(t,e){return cq(t,e+1)}function Rke(t,e,n,r,i){for(var a=(r||[]).slice(),o=e.start,s=e.end,l=0,c=1,u=o,d=function(){var p=r==null?void 0:r[l];if(p===void 0)return{v:cq(r,c)};var g=l,m,v=function(){return m===void 0&&(m=n(p,g)),m},y=p.coordinate,b=l===0||i$(t,y,v,u,s);b||(l=0,u=o,c+=1),b&&(u=y+t*(v()/2+i),l+=c)},f;c<=a.length;)if(f=d(),f)return f.v;return[]}function a0(t){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a0(t)}function l5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l5(Object(n),!0).forEach(function(r){Dke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dke(t,e,n){return e=Fke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fke(t){var e=Mke(t,"string");return a0(e)=="symbol"?e:e+""}function Mke(t,e){if(a0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(a0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lke(t,e,n,r,i){for(var a=(r||[]).slice(),o=a.length,s=e.start,l=e.end,c=function(f){var h=a[f],p,g=function(){return p===void 0&&(p=n(h,f)),p};if(f===o-1){var m=t*(h.coordinate+t*g()/2-l);a[f]=h=Pi(Pi({},h),{},{tickCoord:m>0?h.coordinate-m*t:h.coordinate})}else a[f]=h=Pi(Pi({},h),{},{tickCoord:h.coordinate});var v=i$(t,h.tickCoord,g,s,l);v&&(l=h.tickCoord-t*(g()/2+i),a[f]=Pi(Pi({},h),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return a}function jke(t,e,n,r,i,a){var o=(r||[]).slice(),s=o.length,l=e.start,c=e.end;if(a){var u=r[s-1],d=n(u,s-1),f=t*(u.coordinate+t*d/2-c);o[s-1]=u=Pi(Pi({},u),{},{tickCoord:f>0?u.coordinate-f*t:u.coordinate});var h=i$(t,u.tickCoord,function(){return d},l,c);h&&(c=u.tickCoord-t*(d/2+i),o[s-1]=Pi(Pi({},u),{},{isShow:!0}))}for(var p=a?s-1:s,g=function(y){var b=o[y],w,x=function(){return w===void 0&&(w=n(b,y)),w};if(y===0){var $=t*(b.coordinate-t*x()/2-l);o[y]=b=Pi(Pi({},b),{},{tickCoord:$<0?b.coordinate-$*t:b.coordinate})}else o[y]=b=Pi(Pi({},b),{},{tickCoord:b.coordinate});var C=i$(t,b.tickCoord,x,l,c);C&&(l=b.tickCoord+t*(x()/2+i),o[y]=Pi(Pi({},b),{},{isShow:!0}))},m=0;m<p;m++)g(m);return o}function _D(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,o=t.minTickGap,s=t.orientation,l=t.interval,c=t.tickFormatter,u=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(Ae(l)||Ou.isSsr)return Pke(i,typeof l=="number"&&Ae(l)?l:0);var f=[],h=s==="top"||s==="bottom"?"width":"height",p=u&&h==="width"?Yv(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(b,w){var x=gt(c)?c(b.value,w):b.value;return h==="width"?Ake(Yv(x,{fontSize:e,letterSpacing:n}),p,d):Yv(x,{fontSize:e,letterSpacing:n})[h]},m=i.length>=2?ra(i[1].coordinate-i[0].coordinate):1,v=_ke(a,m,h);return l==="equidistantPreserveStart"?Rke(m,v,g,i,o):(l==="preserveStart"||l==="preserveStartEnd"?f=jke(m,v,g,i,o,l==="preserveStartEnd"):f=Lke(m,v,g,i,o),f.filter(function(y){return y.isShow}))}var zke=["viewBox"],Bke=["viewBox"],Vke=["ticks"];function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(t)}function Rh(){return Rh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rh.apply(this,arguments)}function c5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ea(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c5(Object(n),!0).forEach(function(r){PD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KI(t,e){if(t==null)return{};var n=Wke(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wke(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Uke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dq(r.key),r)}}function Hke(t,e,n){return e&&u5(t.prototype,e),n&&u5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gke(t,e,n){return e=a$(e),qke(t,uq()?Reflect.construct(e,n||[],a$(t).constructor):e.apply(t,n))}function qke(t,e){if(e&&(Ap(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kke(t)}function Kke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uq=function(){return!!t})()}function a$(t){return a$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},a$(t)}function Xke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yA(t,e)}function yA(t,e){return yA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yA(t,e)}function PD(t,e,n){return e=dq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dq(t){var e=Yke(t,"string");return Ap(e)=="symbol"?e:e+""}function Yke(t,e){if(Ap(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Sm=function(t){function e(n){var r;return Uke(this,e),r=Gke(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Xke(e,t),Hke(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=KI(r,zke),s=this.props,l=s.viewBox,c=KI(s,Bke);return!qh(a,l)||!qh(o,c)||!qh(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,s=i.width,l=i.height,c=i.orientation,u=i.tickSize,d=i.mirror,f=i.tickMargin,h,p,g,m,v,y,b=d?-1:1,w=r.tickSize||u,x=Ae(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":h=p=r.coordinate,m=o+ +!d*l,g=m-b*w,y=g-b*f,v=x;break;case"left":g=m=r.coordinate,p=a+ +!d*s,h=p-b*w,v=h-b*f,y=x;break;case"right":g=m=r.coordinate,p=a+ +d*s,h=p+b*w,v=h+b*f,y=x;break;default:h=p=r.coordinate,m=o+ +d*l,g=m+b*w,y=g+b*f,v=x;break}return{line:{x1:h,y1:g,x2:p,y2:m},tick:{x:v,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.orientation,c=r.mirror,u=r.axisLine,d=ea(ea(ea({},lt(this.props,!1)),lt(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var f=+(l==="top"&&!c||l==="bottom"&&c);d=ea(ea({},d),{},{x1:i,y1:a+f*s,x2:i+o,y2:a+f*s})}else{var h=+(l==="left"&&!c||l==="right"&&c);d=ea(ea({},d),{},{x1:i+h*o,y1:a,x2:i+h*o,y2:a+s})}return B.createElement("line",Rh({},d,{className:$t("recharts-cartesian-axis-line",oo(u,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,s=this.props,l=s.tickLine,c=s.stroke,u=s.tick,d=s.tickFormatter,f=s.unit,h=_D(ea(ea({},this.props),{},{ticks:r}),i,a),p=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),m=lt(this.props,!1),v=lt(u,!1),y=ea(ea({},m),{},{fill:"none"},lt(l,!1)),b=h.map(function(w,x){var $=o.getTickLineCoord(w),C=$.line,E=$.tick,I=ea(ea(ea(ea({textAnchor:p,verticalAnchor:g},m),{},{stroke:"none",fill:c},v),E),{},{index:x,payload:w,visibleTicksCount:h.length,tickFormatter:d});return B.createElement(_t,Rh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},Yd(o.props,w,x)),l&&B.createElement("line",Rh({},y,C,{className:$t("recharts-cartesian-axis-tick-line",oo(l,"className"))})),u&&e.renderTickItem(u,I,"".concat(gt(d)?d(w.value,x):w.value).concat(f||"")))});return B.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,s=i.height,l=i.ticksGenerator,c=i.className,u=i.hide;if(u)return null;var d=this.props,f=d.ticks,h=KI(d,Vke),p=f;return gt(l)&&(p=f&&f.length>0?l(this.props):l(h)),o<=0||s<=0||!p||!p.length?null:B.createElement(_t,{className:$t("recharts-cartesian-axis",c),ref:function(m){r.layerReference=m}},a&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),ii.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o;return B.isValidElement(r)?o=B.cloneElement(r,i):gt(r)?o=r(i):o=B.createElement(Zd,Rh({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(S.Component);PD(Sm,"displayName","CartesianAxis");PD(Sm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Zke=["x1","y1","x2","y2","key"],Qke=["offset"];function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function d5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Li(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d5(Object(n),!0).forEach(function(r){Jke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jke(t,e,n){return e=eOe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eOe(t){var e=tOe(t,"string");return tf(e)=="symbol"?e:e+""}function tOe(t,e){if(tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Id(){return Id=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Id.apply(this,arguments)}function f5(t,e){if(t==null)return{};var n=nOe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var rOe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,o=e.width,s=e.height,l=e.ry;return B.createElement("rect",{x:i,y:a,ry:l,width:o,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function fq(t,e){var n;if(B.isValidElement(t))n=B.cloneElement(t,e);else if(gt(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.key,l=f5(e,Zke),c=lt(l,!1);c.offset;var u=f5(c,Qke);n=B.createElement("line",Id({},u,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:s}))}return n}function iOe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=Li(Li({},t),{},{x1:e,y1:s,x2:e+n,y2:s,key:"line-".concat(l),index:l});return fq(i,c)});return B.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function aOe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var c=Li(Li({},t),{},{x1:s,y1:e,x2:s,y2:e+n,key:"line-".concat(l),index:l});return fq(i,c)});return B.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function oOe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,o=t.height,s=t.horizontalPoints,l=t.horizontal,c=l===void 0?!0:l;if(!c||!e||!e.length)return null;var u=s.map(function(f){return Math.round(f+i-i)}).sort(function(f,h){return f-h});i!==u[0]&&u.unshift(0);var d=u.map(function(f,h){var p=!u[h+1],g=p?i+o-f:u[h+1]-f;if(g<=0)return null;var m=h%e.length;return B.createElement("rect",{key:"react-".concat(h),y:f,x:r,height:g,width:a,stroke:"none",fill:e[m],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function sOe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,o=t.y,s=t.width,l=t.height,c=t.verticalPoints;if(!n||!r||!r.length)return null;var u=c.map(function(f){return Math.round(f+a-a)}).sort(function(f,h){return f-h});a!==u[0]&&u.unshift(0);var d=u.map(function(f,h){var p=!u[h+1],g=p?a+s-f:u[h+1]-f;if(g<=0)return null;var m=h%r.length;return B.createElement("rect",{key:"react-".concat(h),x:f,y:o,width:g,height:l,stroke:"none",fill:r[m],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return B.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var lOe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,o=e.offset;return l9(_D(Li(Li(Li({},Sm.defaultProps),r),{},{ticks:Vl(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},cOe=function(e,n){var r=e.yAxis,i=e.width,a=e.height,o=e.offset;return l9(_D(Li(Li(Li({},Sm.defaultProps),r),{},{ticks:Vl(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},eh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function rb(t){var e,n,r,i,a,o,s=ND(),l=kD(),c=YNe(),u=Li(Li({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:eh.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:eh.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:eh.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:eh.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:eh.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:eh.verticalFill,x:Ae(t.x)?t.x:c.left,y:Ae(t.y)?t.y:c.top,width:Ae(t.width)?t.width:c.width,height:Ae(t.height)?t.height:c.height}),d=u.x,f=u.y,h=u.width,p=u.height,g=u.syncWithTicks,m=u.horizontalValues,v=u.verticalValues,y=qNe(),b=KNe();if(!Ae(h)||h<=0||!Ae(p)||p<=0||!Ae(d)||d!==+d||!Ae(f)||f!==+f)return null;var w=u.verticalCoordinatesGenerator||lOe,x=u.horizontalCoordinatesGenerator||cOe,$=u.horizontalPoints,C=u.verticalPoints;if((!$||!$.length)&&gt(x)){var E=m&&m.length,I=x({yAxis:b?Li(Li({},b),{},{ticks:E?m:b.ticks}):void 0,width:s,height:l,offset:c},E?!0:g);bs(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(tf(I),"]")),Array.isArray(I)&&($=I)}if((!C||!C.length)&&gt(w)){var T=v&&v.length,N=w({xAxis:y?Li(Li({},y),{},{ticks:T?v:y.ticks}):void 0,width:s,height:l,offset:c},T?!0:g);bs(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(tf(N),"]")),Array.isArray(N)&&(C=N)}return B.createElement("g",{className:"recharts-cartesian-grid"},B.createElement(rOe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),B.createElement(iOe,Id({},u,{offset:c,horizontalPoints:$,xAxis:y,yAxis:b})),B.createElement(aOe,Id({},u,{offset:c,verticalPoints:C,xAxis:y,yAxis:b})),B.createElement(oOe,Id({},u,{horizontalPoints:$})),B.createElement(sOe,Id({},u,{verticalPoints:C})))}rb.displayName="CartesianGrid";var uOe=["type","layout","connectNulls","ref"],dOe=["key"];function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function h5(t,e){if(t==null)return{};var n=fOe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ny(){return ny=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ny.apply(this,arguments)}function p5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ha(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p5(Object(n),!0).forEach(function(r){cs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function th(t){return gOe(t)||mOe(t)||pOe(t)||hOe()}function hOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pOe(t,e){if(t){if(typeof t=="string")return bA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bA(t,e)}}function mOe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gOe(t){if(Array.isArray(t))return bA(t)}function bA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pq(r.key),r)}}function yOe(t,e,n){return e&&m5(t.prototype,e),n&&m5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bOe(t,e,n){return e=o$(e),xOe(t,hq()?Reflect.construct(e,n||[],o$(t).constructor):e.apply(t,n))}function xOe(t,e){if(e&&(_p(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wOe(t)}function wOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hq=function(){return!!t})()}function o$(t){return o$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},o$(t)}function SOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xA(t,e)}function xA(t,e){return xA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xA(t,e)}function cs(t,e,n){return e=pq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pq(t){var e=$Oe(t,"string");return _p(e)=="symbol"?e:e+""}function $Oe(t,e){if(_p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_p(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ol=function(t){function e(){var n;vOe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=bOe(this,e,[].concat(i)),cs(n,"state",{isAnimationFinished:!0,totalLength:0}),cs(n,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),cs(n,"getStrokeDasharray",function(o,s,l){var c=l.reduce(function(v,y){return v+y});if(!c)return n.generateSimpleStrokeDasharray(s,o);for(var u=Math.floor(o/c),d=o%c,f=s-o,h=[],p=0,g=0;p<l.length;g+=l[p],++p)if(g+l[p]>d){h=[].concat(th(l.slice(0,p)),[d-g]);break}var m=h.length%2===0?[0,f]:[f];return[].concat(th(e.repeat(l,u)),th(h),m).map(function(v){return"".concat(v,"px")}).join(", ")}),cs(n,"id",Cf("recharts-line-")),cs(n,"pathRef",function(o){n.mainCurve=o}),cs(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),cs(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return SOe(e,t),yOe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,s=a.xAxis,l=a.yAxis,c=a.layout,u=a.children,d=so(u,eb);if(!d)return null;var f=function(g,m){return{x:g.x,y:g.y,value:g.value,errorVal:fr(g.payload,m)}},h={clipPath:r?"url(#clipPath-".concat(i,")"):null};return B.createElement(_t,h,d.map(function(p){return B.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:o,xAxis:s,yAxis:l,layout:c,dataPointFormatter:f})}))}},{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,c=s.points,u=s.dataKey,d=lt(this.props,!1),f=lt(l,!0),h=c.map(function(g,m){var v=Ha(Ha(Ha({key:"dot-".concat(m),r:3},d),f),{},{index:m,cx:g.x,cy:g.y,value:g.value,dataKey:u,payload:g.payload,points:c});return e.renderDotItem(l,v)}),p={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return B.createElement(_t,ny({className:"recharts-line-dots",key:"dots"},p),h)}},{key:"renderCurveStatically",value:function(r,i,a,o){var s=this.props,l=s.type,c=s.layout,u=s.connectNulls;s.ref;var d=h5(s,uOe),f=Ha(Ha(Ha({},lt(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},o),{},{type:l,layout:c,connectNulls:u});return B.createElement(Md,ny({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,o=this.props,s=o.points,l=o.strokeDasharray,c=o.isAnimationActive,u=o.animationBegin,d=o.animationDuration,f=o.animationEasing,h=o.animationId,p=o.animateNewValues,g=o.width,m=o.height,v=this.state,y=v.prevPoints,b=v.totalLength;return B.createElement(Is,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},key:"line-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var x=w.t;if(y){var $=y.length/s.length,C=s.map(function(k,O){var _=Math.floor(O*$);if(y[_]){var P=y[_],D=Fr(P.x,k.x),L=Fr(P.y,k.y);return Ha(Ha({},k),{},{x:D(x),y:L(x)})}if(p){var R=Fr(g*2,k.x),F=Fr(m/2,k.y);return Ha(Ha({},k),{},{x:R(x),y:F(x)})}return Ha(Ha({},k),{},{x:k.x,y:k.y})});return a.renderCurveStatically(C,r,i)}var E=Fr(0,b),I=E(x),T;if(l){var N="".concat(l).split(/[,\s]+/gim).map(function(k){return parseFloat(k)});T=a.getStrokeDasharray(I,b,N)}else T=a.generateSimpleStrokeDasharray(b,I);return a.renderCurveStatically(s,r,i,{strokeDasharray:T})})}},{key:"renderCurve",value:function(r,i){var a=this.props,o=a.points,s=a.isAnimationActive,l=this.state,c=l.prevPoints,u=l.totalLength;return s&&o&&o.length&&(!c&&u>0||!Qd(c,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,s=i.points,l=i.className,c=i.xAxis,u=i.yAxis,d=i.top,f=i.left,h=i.width,p=i.height,g=i.isAnimationActive,m=i.id;if(a||!s||!s.length)return null;var v=this.state.isAnimationFinished,y=s.length===1,b=$t("recharts-line",l),w=c&&c.allowDataOverflow,x=u&&u.allowDataOverflow,$=w||x,C=xt(m)?this.id:m,E=(r=lt(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},I=E.r,T=I===void 0?3:I,N=E.strokeWidth,k=N===void 0?2:N,O=eG(o)?o:{},_=O.clipDot,P=_===void 0?!0:_,D=T*2+k;return B.createElement(_t,{className:b},w||x?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat(C)},B.createElement("rect",{x:w?f:f-h/2,y:x?d:d-p/2,width:w?h:h*2,height:x?p:p*2})),!P&&B.createElement("clipPath",{id:"clipPath-dots-".concat(C)},B.createElement("rect",{x:f-D/2,y:d-D/2,width:h+D,height:p+D}))):null,!y&&this.renderCurve($,C),this.renderErrorBar($,C),(y||o)&&this.renderDots($,P,C),(!g||v)&&il.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(th(r),[0]):r,o=[],s=0;s<i;++s)o=[].concat(th(o),th(a));return o}},{key:"renderDotItem",value:function(r,i){var a;if(B.isValidElement(r))a=B.cloneElement(r,i);else if(gt(r))a=r(i);else{var o=i.key,s=h5(i,dOe),l=$t("recharts-line-dot",typeof r!="boolean"?r.className:"");a=B.createElement(tb,ny({key:o},s,{className:l}))}return a}}])}(S.PureComponent);cs(ol,"displayName","Line");cs(ol,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ou.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});cs(ol,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,o=t.dataKey,s=t.bandSize,l=t.displayedData,c=t.offset,u=e.layout,d=l.map(function(f,h){var p=fr(f,o);return u==="horizontal"?{x:MS({axis:n,ticks:i,bandSize:s,entry:f,index:h}),y:xt(p)?null:r.scale(p),value:p,payload:f}:{x:xt(p)?null:n.scale(p),y:MS({axis:r,ticks:a,bandSize:s,entry:f,index:h}),value:p,payload:f}});return Ha({points:d,layout:u},c)});var COe=["layout","type","stroke","connectNulls","isRange","ref"],EOe=["key"],mq;function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}function gq(t,e){if(t==null)return{};var n=TOe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nd.apply(this,arguments)}function g5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g5(Object(n),!0).forEach(function(r){Zs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yq(r.key),r)}}function NOe(t,e,n){return e&&v5(t.prototype,e),n&&v5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kOe(t,e,n){return e=s$(e),OOe(t,vq()?Reflect.construct(e,n||[],s$(t).constructor):e.apply(t,n))}function OOe(t,e){if(e&&(Pp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AOe(t)}function AOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vq=function(){return!!t})()}function s$(t){return s$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},s$(t)}function _Oe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wA(t,e)}function wA(t,e){return wA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wA(t,e)}function Zs(t,e,n){return e=yq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yq(t){var e=POe(t,"string");return Pp(e)=="symbol"?e:e+""}function POe(t,e){if(Pp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var sl=function(t){function e(){var n;IOe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=kOe(this,e,[].concat(i)),Zs(n,"state",{isAnimationFinished:!0}),Zs(n,"id",Cf("recharts-area-")),Zs(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),gt(o)&&o()}),Zs(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),gt(o)&&o()}),n}return _Oe(e,t),NOe(e,[{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=lt(this.props,!1),h=lt(c,!0),p=u.map(function(m,v){var y=Pc(Pc(Pc({key:"dot-".concat(v),r:3},f),h),{},{index:v,cx:m.x,cy:m.y,dataKey:d,value:m.value,payload:m.payload,points:u});return e.renderDotItem(c,y)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return B.createElement(_t,Nd({className:"recharts-area-dots"},g),p)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,s=i.strokeWidth,l=o[0].x,c=o[o.length-1].x,u=r*Math.abs(l-c),d=Uc(o.map(function(f){return f.y||0}));return Ae(a)&&typeof a=="number"?d=Math.max(a,d):a&&Array.isArray(a)&&a.length&&(d=Math.max(Uc(a.map(function(f){return f.y||0})),d)),Ae(d)?B.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,s=i.strokeWidth,l=o[0].y,c=o[o.length-1].y,u=r*Math.abs(l-c),d=Uc(o.map(function(f){return f.x||0}));return Ae(a)&&typeof a=="number"?d=Math.max(a,d):a&&Array.isArray(a)&&a.length&&(d=Math.max(Uc(a.map(function(f){return f.x||0})),d)),Ae(d)?B.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,o){var s=this.props,l=s.layout,c=s.type,u=s.stroke,d=s.connectNulls,f=s.isRange;s.ref;var h=gq(s,COe);return B.createElement(_t,{clipPath:a?"url(#clipPath-".concat(o,")"):null},B.createElement(Md,Nd({},lt(h,!0),{points:r,connectNulls:d,type:c,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),u!=="none"&&B.createElement(Md,Nd({},lt(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:r})),u!=="none"&&f&&B.createElement(Md,Nd({},lt(this.props,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,o=this.props,s=o.points,l=o.baseLine,c=o.isAnimationActive,u=o.animationBegin,d=o.animationDuration,f=o.animationEasing,h=o.animationId,p=this.state,g=p.prevPoints,m=p.prevBaseLine;return B.createElement(Is,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var y=v.t;if(g){var b=g.length/s.length,w=s.map(function(E,I){var T=Math.floor(I*b);if(g[T]){var N=g[T],k=Fr(N.x,E.x),O=Fr(N.y,E.y);return Pc(Pc({},E),{},{x:k(y),y:O(y)})}return E}),x;if(Ae(l)&&typeof l=="number"){var $=Fr(m,l);x=$(y)}else if(xt(l)||mm(l)){var C=Fr(m,0);x=C(y)}else x=l.map(function(E,I){var T=Math.floor(I*b);if(m[T]){var N=m[T],k=Fr(N.x,E.x),O=Fr(N.y,E.y);return Pc(Pc({},E),{},{x:k(y),y:O(y)})}return E});return a.renderAreaStatically(w,x,r,i)}return B.createElement(_t,null,B.createElement("defs",null,B.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(y))),B.createElement(_t,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(s,l,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,o=a.points,s=a.baseLine,l=a.isAnimationActive,c=this.state,u=c.prevPoints,d=c.prevBaseLine,f=c.totalLength;return l&&o&&o.length&&(!u&&f>0||!Qd(u,o)||!Qd(d,s))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(o,s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,s=i.points,l=i.className,c=i.top,u=i.left,d=i.xAxis,f=i.yAxis,h=i.width,p=i.height,g=i.isAnimationActive,m=i.id;if(a||!s||!s.length)return null;var v=this.state.isAnimationFinished,y=s.length===1,b=$t("recharts-area",l),w=d&&d.allowDataOverflow,x=f&&f.allowDataOverflow,$=w||x,C=xt(m)?this.id:m,E=(r=lt(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},I=E.r,T=I===void 0?3:I,N=E.strokeWidth,k=N===void 0?2:N,O=eG(o)?o:{},_=O.clipDot,P=_===void 0?!0:_,D=T*2+k;return B.createElement(_t,{className:b},w||x?B.createElement("defs",null,B.createElement("clipPath",{id:"clipPath-".concat(C)},B.createElement("rect",{x:w?u:u-h/2,y:x?c:c-p/2,width:w?h:h*2,height:x?p:p*2})),!P&&B.createElement("clipPath",{id:"clipPath-dots-".concat(C)},B.createElement("rect",{x:u-D/2,y:c-D/2,width:h+D,height:p+D}))):null,y?null:this.renderArea($,C),(o||y)&&this.renderDots($,P,C),(!g||v)&&il.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(S.PureComponent);mq=sl;Zs(sl,"displayName","Area");Zs(sl,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ou.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Zs(sl,"getBaseValue",function(t,e,n,r){var i=t.layout,a=t.baseValue,o=e.props.baseValue,s=o??a;if(Ae(s)&&typeof s=="number")return s;var l=i==="horizontal"?r:n,c=l.scale.domain();if(l.type==="number"){var u=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return s==="dataMin"?d:s==="dataMax"||u<0?u:Math.max(Math.min(c[0],c[1]),0)}return s==="dataMin"?c[0]:s==="dataMax"?c[1]:c[0]});Zs(sl,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,s=t.bandSize,l=t.dataKey,c=t.stackedData,u=t.dataStartIndex,d=t.displayedData,f=t.offset,h=e.layout,p=c&&c.length,g=mq.getBaseValue(e,n,r,i),m=h==="horizontal",v=!1,y=d.map(function(w,x){var $;p?$=c[u+x]:($=fr(w,l),Array.isArray($)?v=!0:$=[g,$]);var C=$[1]==null||p&&fr(w,l)==null;return m?{x:MS({axis:r,ticks:a,bandSize:s,entry:w,index:x}),y:C?null:i.scale($[1]),value:$,payload:w}:{x:C?null:r.scale($[1]),y:MS({axis:i,ticks:o,bandSize:s,entry:w,index:x}),value:$,payload:w}}),b;return p||v?b=y.map(function(w){var x=Array.isArray(w.value)?w.value[0]:null;return m?{x:w.x,y:x!=null&&w.y!=null?i.scale(x):null}:{x:x!=null?r.scale(x):null,y:w.y}}):b=m?i.scale(g):r.scale(g),Pc({points:y,baseLine:b,layout:h,isRange:v},f)});Zs(sl,"renderDotItem",function(t,e){var n;if(B.isValidElement(t))n=B.cloneElement(t,e);else if(gt(t))n=t(e);else{var r=$t("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,a=gq(e,EOe);n=B.createElement(tb,Nd({},a,{key:i,className:r}))}return n});function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(t)}function ROe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DOe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wq(r.key),r)}}function FOe(t,e,n){return e&&DOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function MOe(t,e,n){return e=l$(e),LOe(t,bq()?Reflect.construct(e,n||[],l$(t).constructor):e.apply(t,n))}function LOe(t,e){if(e&&(Rp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jOe(t)}function jOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bq=function(){return!!t})()}function l$(t){return l$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},l$(t)}function zOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SA(t,e)}function SA(t,e){return SA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SA(t,e)}function xq(t,e,n){return e=wq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wq(t){var e=BOe(t,"string");return Rp(e)=="symbol"?e:e+""}function BOe(t,e){if(Rp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $A(){return $A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$A.apply(this,arguments)}function VOe(t){var e=t.xAxisId,n=ND(),r=kD(),i=tq(e);return i==null?null:B.createElement(Sm,$A({},i,{className:$t("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Vl(o,!0)}}))}var Ru=function(t){function e(){return ROe(this,e),MOe(this,e,arguments)}return zOe(e,t),FOe(e,[{key:"render",value:function(){return B.createElement(VOe,this.props)}}])}(B.Component);xq(Ru,"displayName","XAxis");xq(Ru,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Dp(t){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dp(t)}function WOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UOe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cq(r.key),r)}}function HOe(t,e,n){return e&&UOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function GOe(t,e,n){return e=c$(e),qOe(t,Sq()?Reflect.construct(e,n||[],c$(t).constructor):e.apply(t,n))}function qOe(t,e){if(e&&(Dp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KOe(t)}function KOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sq=function(){return!!t})()}function c$(t){return c$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},c$(t)}function XOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CA(t,e)}function CA(t,e){return CA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CA(t,e)}function $q(t,e,n){return e=Cq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cq(t){var e=YOe(t,"string");return Dp(e)=="symbol"?e:e+""}function YOe(t,e){if(Dp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function EA(){return EA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EA.apply(this,arguments)}var ZOe=function(e){var n=e.yAxisId,r=ND(),i=kD(),a=nq(n);return a==null?null:B.createElement(Sm,EA({},a,{className:$t("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return Vl(s,!0)}}))},Du=function(t){function e(){return WOe(this,e),GOe(this,e,arguments)}return XOe(e,t),HOe(e,[{key:"render",value:function(){return B.createElement(ZOe,this.props)}}])}(B.Component);$q(Du,"displayName","YAxis");$q(Du,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function y5(t){return tAe(t)||eAe(t)||JOe(t)||QOe()}function QOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JOe(t,e){if(t){if(typeof t=="string")return TA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TA(t,e)}}function eAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tAe(t){if(Array.isArray(t))return TA(t)}function TA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var IA=function(e,n,r,i,a){var o=so(e,AD),s=so(e,o2),l=[].concat(y5(o),y5(s)),c=so(e,l2),u="".concat(i,"Id"),d=i[0],f=n;if(l.length&&(f=l.reduce(function(g,m){if(m.props[u]===r&&al(m.props,"extendDomain")&&Ae(m.props[d])){var v=m.props[d];return[Math.min(g[0],v),Math.max(g[1],v)]}return g},f)),c.length){var h="".concat(d,"1"),p="".concat(d,"2");f=c.reduce(function(g,m){if(m.props[u]===r&&al(m.props,"extendDomain")&&Ae(m.props[h])&&Ae(m.props[p])){var v=m.props[h],y=m.props[p];return[Math.min(g[0],v,y),Math.max(g[1],v,y)]}return g},f)}return a&&a.length&&(f=a.reduce(function(g,m){return Ae(m)?[Math.min(g[0],m),Math.max(g[1],m)]:g},f)),f},Eq={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function a(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,d||l,f),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},s.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},s.prototype.emit=function(c,u,d,f,h,p){var g=n?n+c:c;if(!this._events[g])return!1;var m=this._events[g],v=arguments.length,y,b;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,f),!0;case 5:return m.fn.call(m.context,u,d,f,h),!0;case 6:return m.fn.call(m.context,u,d,f,h,p),!0}for(b=1,y=new Array(v-1);b<v;b++)y[b-1]=arguments[b];m.fn.apply(m.context,y)}else{var w=m.length,x;for(b=0;b<w;b++)switch(m[b].once&&this.removeListener(c,m[b].fn,void 0,!0),v){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,u);break;case 3:m[b].fn.call(m[b].context,u,d);break;case 4:m[b].fn.call(m[b].context,u,d,f);break;default:if(!y)for(x=1,y=new Array(v-1);x<v;x++)y[x-1]=arguments[x];m[b].fn.apply(m[b].context,y)}}return!0},s.prototype.on=function(c,u,d){return a(this,c,u,d,!1)},s.prototype.once=function(c,u,d){return a(this,c,u,d,!0)},s.prototype.removeListener=function(c,u,d,f){var h=n?n+c:c;if(!this._events[h])return this;if(!u)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===u&&(!f||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var g=0,m=[],v=p.length;g<v;g++)(p[g].fn!==u||f&&!p[g].once||d&&p[g].context!==d)&&m.push(p[g]);m.length?this._events[h]=m.length===1?m[0]:m:o(this,h)}return this},s.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(Eq);var nAe=Eq.exports;const rAe=Gt(nAe);var XI=new rAe,YI="recharts.syncMouseEvents";function o0(t){"@babel/helpers - typeof";return o0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o0(t)}function iAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tq(r.key),r)}}function oAe(t,e,n){return e&&aAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZI(t,e,n){return e=Tq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tq(t){var e=sAe(t,"string");return o0(e)=="symbol"?e:e+""}function sAe(t,e){if(o0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(o0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lAe=function(){function t(){iAe(this,t),ZI(this,"activeIndex",0),ZI(this,"coordinateList",[]),ZI(this,"layout","horizontal")}return oAe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,o=n.container,s=o===void 0?null:o,l=n.layout,c=l===void 0?null:l,u=n.offset,d=u===void 0?null:u,f=n.mouseHandlerCallback,h=f===void 0?null:f;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,c=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=a+l+c,f=o+this.offset.top+s/2+u;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function cAe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Ae(r)&&Ae(i))return!0}return!1}function uAe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function Iq(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,o=Cn(e,n,r,i),s=Cn(e,n,r,a);return{points:[o,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function dAe(t,e,n){var r,i,a,o;if(t==="horizontal")r=e.x,a=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,c=e.innerRadius,u=e.outerRadius,d=e.angle,f=Cn(s,l,c,d),h=Cn(s,l,u,d);r=f.x,i=f.y,a=h.x,o=h.y}else return Iq(e);return[{x:r,y:i},{x:a,y:o}]}function s0(t){"@babel/helpers - typeof";return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s0(t)}function b5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function P1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b5(Object(n),!0).forEach(function(r){fAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fAe(t,e,n){return e=hAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hAe(t){var e=pAe(t,"string");return s0(e)=="symbol"?e:e+""}function pAe(t,e){if(s0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(s0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mAe(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,s=t.activePayload,l=t.offset,c=t.activeTooltipIndex,u=t.tooltipAxisBandSize,d=t.layout,f=t.chartName,h=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!h||!a||!o||f!=="ScatterChart"&&i!=="axis")return null;var p,g=Md;if(f==="ScatterChart")p=o,g=wEe;else if(f==="BarChart")p=uAe(d,o,l,u),g=CD;else if(d==="radial"){var m=Iq(o),v=m.cx,y=m.cy,b=m.radius,w=m.startAngle,x=m.endAngle;p={cx:v,cy:y,startAngle:w,endAngle:x,innerRadius:b,outerRadius:b},g=b9}else p={points:dAe(d,o,l)},g=Md;var $=P1(P1(P1(P1({stroke:"#ccc",pointerEvents:"none"},l),p),lt(h,!1)),{},{payload:s,payloadIndex:c,className:$t("recharts-tooltip-cursor",h.className)});return S.isValidElement(h)?S.cloneElement(h,$):S.createElement(g,$)}var gAe=["item"],vAe=["children","className","width","height","style","compact","title","desc"];function Fp(t){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fp(t)}function Dh(){return Dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dh.apply(this,arguments)}function x5(t,e){return xAe(t)||bAe(t,e)||kq(t,e)||yAe()}function yAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function xAe(t){if(Array.isArray(t))return t}function w5(t,e){if(t==null)return{};var n=wAe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function SAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oq(r.key),r)}}function CAe(t,e,n){return e&&$Ae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function EAe(t,e,n){return e=u$(e),TAe(t,Nq()?Reflect.construct(e,n||[],u$(t).constructor):e.apply(t,n))}function TAe(t,e){if(e&&(Fp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IAe(t)}function IAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nq=function(){return!!t})()}function u$(t){return u$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},u$(t)}function NAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NA(t,e)}function NA(t,e){return NA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},NA(t,e)}function Mp(t){return AAe(t)||OAe(t)||kq(t)||kAe()}function kAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kq(t,e){if(t){if(typeof t=="string")return kA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kA(t,e)}}function OAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function AAe(t){if(Array.isArray(t))return kA(t)}function kA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function we(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S5(Object(n),!0).forEach(function(r){mt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mt(t,e,n){return e=Oq(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oq(t){var e=_Ae(t,"string");return Fp(e)=="symbol"?e:e+""}function _Ae(t,e){if(Fp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PAe={xAxis:["bottom","top"],yAxis:["left","right"]},RAe={width:"100%",height:"100%"},Aq={x:0,y:0};function R1(t){return t}var DAe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},FAe=function(e,n,r,i){var a=n.find(function(u){return u&&u.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,s=i.radius;return we(we(we({},i),Cn(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var l=a.coordinate,c=i.angle;return we(we(we({},i),Cn(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return Aq},c2=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(r??[]).reduce(function(s,l){var c=l.props.data;return c&&c.length?[].concat(Mp(s),Mp(c)):s},[]);return o.length>0?o:e&&e.length&&Ae(i)&&Ae(a)?e.slice(i,a+1):[]};function _q(t){return t==="number"?[0,"auto"]:void 0}var OA=function(e,n,r,i){var a=e.graphicalItems,o=e.tooltipAxis,s=c2(n,e);return r<0||!a||!a.length||r>=s.length?null:a.reduce(function(l,c){var u,d=(u=c.props.data)!==null&&u!==void 0?u:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var h=d===void 0?s:d;f=cS(h,o.dataKey,i)}else f=d&&d[r]||s[r];return f?[].concat(Mp(l),[h9(c,f)]):l},[])},$5=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},o=DAe(a,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,c=e.tooltipTicks,u=USe(o,s,c,l);if(u>=0&&c){var d=c[u]&&c[u].value,f=OA(e,n,u,d),h=FAe(r,s,u,a);return{activeTooltipIndex:u,activeLabel:d,activePayload:f,activeCoordinate:h}}return null},MAe=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,d=e.children,f=e.stackOffset,h=s9(u,a);return r.reduce(function(p,g){var m,v=g.type.defaultProps!==void 0?we(we({},g.type.defaultProps),g.props):g.props,y=v.type,b=v.dataKey,w=v.allowDataOverflow,x=v.allowDuplicatedCategory,$=v.scale,C=v.ticks,E=v.includeHidden,I=v[o];if(p[I])return p;var T=c2(e.data,{graphicalItems:i.filter(function(U){var W,G=o in U.props?U.props[o]:(W=U.type.defaultProps)===null||W===void 0?void 0:W[o];return G===I}),dataStartIndex:l,dataEndIndex:c}),N=T.length,k,O,_;cAe(v.domain,w,y)&&(k=WO(v.domain,null,w),h&&(y==="number"||$!=="auto")&&(_=Qv(T,b,"category")));var P=_q(y);if(!k||k.length===0){var D,L=(D=v.domain)!==null&&D!==void 0?D:P;if(b){if(k=Qv(T,b,y),y==="category"&&h){var R=Rce(k);x&&R?(O=k,k=YS(0,N)):x||(k=H4(L,k,g).reduce(function(U,W){return U.indexOf(W)>=0?U:[].concat(Mp(U),[W])},[]))}else if(y==="category")x?k=k.filter(function(U){return U!==""&&!xt(U)}):k=H4(L,k,g).reduce(function(U,W){return U.indexOf(W)>=0||W===""||xt(W)?U:[].concat(Mp(U),[W])},[]);else if(y==="number"){var F=XSe(T,i.filter(function(U){var W,G,q=o in U.props?U.props[o]:(W=U.type.defaultProps)===null||W===void 0?void 0:W[o],X="hide"in U.props?U.props.hide:(G=U.type.defaultProps)===null||G===void 0?void 0:G.hide;return q===I&&(E||!X)}),b,a,u);F&&(k=F)}h&&(y==="number"||$!=="auto")&&(_=Qv(T,b,"category"))}else h?k=YS(0,N):s&&s[I]&&s[I].hasStack&&y==="number"?k=f==="expand"?[0,1]:f9(s[I].stackGroups,l,c):k=o9(T,i.filter(function(U){var W=o in U.props?U.props[o]:U.type.defaultProps[o],G="hide"in U.props?U.props.hide:U.type.defaultProps.hide;return W===I&&(E||!G)}),y,u,!0);if(y==="number")k=IA(d,k,I,a,C),L&&(k=WO(L,k,w));else if(y==="category"&&L){var V=L,H=k.every(function(U){return V.indexOf(U)>=0});H&&(k=V)}}return we(we({},p),{},mt({},I,we(we({},v),{},{axisType:a,domain:k,categoricalDomain:_,duplicateDomain:O,originalDomain:(m=v.domain)!==null&&m!==void 0?m:P,isCategorical:h,layout:u})))},{})},LAe=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.layout,d=e.children,f=c2(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:c}),h=f.length,p=s9(u,a),g=-1;return r.reduce(function(m,v){var y=v.type.defaultProps!==void 0?we(we({},v.type.defaultProps),v.props):v.props,b=y[o],w=_q("number");if(!m[b]){g++;var x;return p?x=YS(0,h):s&&s[b]&&s[b].hasStack?(x=f9(s[b].stackGroups,l,c),x=IA(d,x,b,a)):(x=WO(w,o9(f,r.filter(function($){var C,E,I=o in $.props?$.props[o]:(C=$.type.defaultProps)===null||C===void 0?void 0:C[o],T="hide"in $.props?$.props.hide:(E=$.type.defaultProps)===null||E===void 0?void 0:E.hide;return I===b&&!T}),"number",u),i.defaultProps.allowDataOverflow),x=IA(d,x,b,a)),we(we({},m),{},mt({},b,we(we({axisType:a},i.defaultProps),{},{hide:!0,orientation:oo(PAe,"".concat(a,".").concat(g%2),null),domain:x,originalDomain:w,isCategorical:p,layout:u})))}return m},{})},jAe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,o=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,c=n.dataEndIndex,u=e.children,d="".concat(i,"Id"),f=so(u,a),h={};return f&&f.length?h=MAe(e,{axes:f,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:c}):o&&o.length&&(h=LAe(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:c})),h},zAe=function(e){var n=Bc(e),r=Vl(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:ZR(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:LS(n,r)}},C5=function(e){var n=e.children,r=e.defaultShowTooltip,i=Ya(n,Tp),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},BAe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Ul(n&&n.type);return r&&r.indexOf("Bar")>=0})},E5=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},VAe=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,s=e.yAxisMap,l=s===void 0?{}:s,c=r.width,u=r.height,d=r.children,f=r.margin||{},h=Ya(d,Tp),p=Ya(d,xs),g=Object.keys(l).reduce(function(x,$){var C=l[$],E=C.orientation;return!C.mirror&&!C.hide?we(we({},x),{},mt({},E,x[E]+C.width)):x},{left:f.left||0,right:f.right||0}),m=Object.keys(o).reduce(function(x,$){var C=o[$],E=C.orientation;return!C.mirror&&!C.hide?we(we({},x),{},mt({},E,oo(x,"".concat(E))+C.height)):x},{top:f.top||0,bottom:f.bottom||0}),v=we(we({},m),g),y=v.bottom;h&&(v.bottom+=h.props.height||Tp.defaultProps.height),p&&n&&(v=qSe(v,i,r,n));var b=c-v.left-v.right,w=u-v.top-v.bottom;return we(we({brushBottom:y},v),{},{width:Math.max(b,0),height:Math.max(w,0)})},WAe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},RD=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,f=function(v,y){var b=y.graphicalItems,w=y.stackGroups,x=y.offset,$=y.updateId,C=y.dataStartIndex,E=y.dataEndIndex,I=v.barSize,T=v.layout,N=v.barGap,k=v.barCategoryGap,O=v.maxBarSize,_=E5(T),P=_.numericAxisName,D=_.cateAxisName,L=BAe(b),R=[];return b.forEach(function(F,V){var H=c2(v.data,{graphicalItems:[F],dataStartIndex:C,dataEndIndex:E}),U=F.type.defaultProps!==void 0?we(we({},F.type.defaultProps),F.props):F.props,W=U.dataKey,G=U.maxBarSize,q=U["".concat(P,"Id")],X=U["".concat(D,"Id")],re={},ce=l.reduce(function(ke,fe){var pe=y["".concat(fe.axisType,"Map")],Me=U["".concat(fe.axisType,"Id")];pe&&pe[Me]||fe.axisType==="zAxis"||ef();var He=pe[Me];return we(we({},ke),{},mt(mt({},fe.axisType,He),"".concat(fe.axisType,"Ticks"),Vl(He)))},re),ee=ce[D],se=ce["".concat(D,"Ticks")],ue=w&&w[q]&&w[q].hasStack&&i$e(F,w[q].stackGroups),Q=Ul(F.type).indexOf("Bar")>=0,ye=LS(ee,se),le=[],xe=L&&HSe({barSize:I,stackGroups:w,totalSize:WAe(ce,D)});if(Q){var be,$e,Ne=xt(G)?O:G,Ve=(be=($e=LS(ee,se,!0))!==null&&$e!==void 0?$e:Ne)!==null&&be!==void 0?be:0;le=GSe({barGap:N,barCategoryGap:k,bandSize:Ve!==ye?Ve:ye,sizeList:xe[X],maxBarSize:Ne}),Ve!==ye&&(le=le.map(function(ke){return we(we({},ke),{},{position:we(we({},ke.position),{},{offset:ke.position.offset-Ve/2})})}))}var Pe=F&&F.type&&F.type.getComposedData;Pe&&R.push({props:we(we({},Pe(we(we({},ce),{},{displayedData:H,props:v,dataKey:W,item:F,bandSize:ye,barPosition:le,offset:x,stackedData:ue,layout:T,dataStartIndex:C,dataEndIndex:E}))),{},mt(mt(mt({key:F.key||"item-".concat(V)},P,ce[P]),D,ce[D]),"animationId",$)),childIndex:Gce(F,v.children),item:F})}),R},h=function(v,y){var b=v.props,w=v.dataStartIndex,x=v.dataEndIndex,$=v.updateId;if(!jj({props:b}))return null;var C=b.children,E=b.layout,I=b.stackOffset,T=b.data,N=b.reverseStackOrder,k=E5(E),O=k.numericAxisName,_=k.cateAxisName,P=so(C,r),D=n$e(T,P,"".concat(O,"Id"),"".concat(_,"Id"),I,N),L=l.reduce(function(U,W){var G="".concat(W.axisType,"Map");return we(we({},U),{},mt({},G,jAe(b,we(we({},W),{},{graphicalItems:P,stackGroups:W.axisType===O&&D,dataStartIndex:w,dataEndIndex:x}))))},{}),R=VAe(we(we({},L),{},{props:b,graphicalItems:P}),y==null?void 0:y.legendBBox);Object.keys(L).forEach(function(U){L[U]=u(b,L[U],R,U.replace("Map",""),n)});var F=L["".concat(_,"Map")],V=zAe(F),H=f(b,we(we({},L),{},{dataStartIndex:w,dataEndIndex:x,updateId:$,graphicalItems:P,stackGroups:D,offset:R}));return we(we({formattedGraphicalItems:H,graphicalItems:P,offset:R,stackGroups:D},V),L)},p=function(m){function v(y){var b,w,x;return SAe(this,v),x=EAe(this,v,[y]),mt(x,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),mt(x,"accessibilityManager",new lAe),mt(x,"handleLegendBBoxUpdate",function($){if($){var C=x.state,E=C.dataStartIndex,I=C.dataEndIndex,T=C.updateId;x.setState(we({legendBBox:$},h({props:x.props,dataStartIndex:E,dataEndIndex:I,updateId:T},we(we({},x.state),{},{legendBBox:$}))))}}),mt(x,"handleReceiveSyncEvent",function($,C,E){if(x.props.syncId===$){if(E===x.eventEmitterSymbol&&typeof x.props.syncMethod!="function")return;x.applySyncEvent(C)}}),mt(x,"handleBrushChange",function($){var C=$.startIndex,E=$.endIndex;if(C!==x.state.dataStartIndex||E!==x.state.dataEndIndex){var I=x.state.updateId;x.setState(function(){return we({dataStartIndex:C,dataEndIndex:E},h({props:x.props,dataStartIndex:C,dataEndIndex:E,updateId:I},x.state))}),x.triggerSyncEvent({dataStartIndex:C,dataEndIndex:E})}}),mt(x,"handleMouseEnter",function($){var C=x.getMouseInfo($);if(C){var E=we(we({},C),{},{isTooltipActive:!0});x.setState(E),x.triggerSyncEvent(E);var I=x.props.onMouseEnter;gt(I)&&I(E,$)}}),mt(x,"triggeredAfterMouseMove",function($){var C=x.getMouseInfo($),E=C?we(we({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};x.setState(E),x.triggerSyncEvent(E);var I=x.props.onMouseMove;gt(I)&&I(E,$)}),mt(x,"handleItemMouseEnter",function($){x.setState(function(){return{isTooltipActive:!0,activeItem:$,activePayload:$.tooltipPayload,activeCoordinate:$.tooltipPosition||{x:$.cx,y:$.cy}}})}),mt(x,"handleItemMouseLeave",function(){x.setState(function(){return{isTooltipActive:!1}})}),mt(x,"handleMouseMove",function($){$.persist(),x.throttleTriggeredAfterMouseMove($)}),mt(x,"handleMouseLeave",function($){x.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};x.setState(C),x.triggerSyncEvent(C);var E=x.props.onMouseLeave;gt(E)&&E(C,$)}),mt(x,"handleOuterEvent",function($){var C=Hce($),E=oo(x.props,"".concat(C));if(C&&gt(E)){var I,T;/.*touch.*/i.test(C)?T=x.getMouseInfo($.changedTouches[0]):T=x.getMouseInfo($),E((I=T)!==null&&I!==void 0?I:{},$)}}),mt(x,"handleClick",function($){var C=x.getMouseInfo($);if(C){var E=we(we({},C),{},{isTooltipActive:!0});x.setState(E),x.triggerSyncEvent(E);var I=x.props.onClick;gt(I)&&I(E,$)}}),mt(x,"handleMouseDown",function($){var C=x.props.onMouseDown;if(gt(C)){var E=x.getMouseInfo($);C(E,$)}}),mt(x,"handleMouseUp",function($){var C=x.props.onMouseUp;if(gt(C)){var E=x.getMouseInfo($);C(E,$)}}),mt(x,"handleTouchMove",function($){$.changedTouches!=null&&$.changedTouches.length>0&&x.throttleTriggeredAfterMouseMove($.changedTouches[0])}),mt(x,"handleTouchStart",function($){$.changedTouches!=null&&$.changedTouches.length>0&&x.handleMouseDown($.changedTouches[0])}),mt(x,"handleTouchEnd",function($){$.changedTouches!=null&&$.changedTouches.length>0&&x.handleMouseUp($.changedTouches[0])}),mt(x,"handleDoubleClick",function($){var C=x.props.onDoubleClick;if(gt(C)){var E=x.getMouseInfo($);C(E,$)}}),mt(x,"handleContextMenu",function($){var C=x.props.onContextMenu;if(gt(C)){var E=x.getMouseInfo($);C(E,$)}}),mt(x,"triggerSyncEvent",function($){x.props.syncId!==void 0&&XI.emit(YI,x.props.syncId,$,x.eventEmitterSymbol)}),mt(x,"applySyncEvent",function($){var C=x.props,E=C.layout,I=C.syncMethod,T=x.state.updateId,N=$.dataStartIndex,k=$.dataEndIndex;if($.dataStartIndex!==void 0||$.dataEndIndex!==void 0)x.setState(we({dataStartIndex:N,dataEndIndex:k},h({props:x.props,dataStartIndex:N,dataEndIndex:k,updateId:T},x.state)));else if($.activeTooltipIndex!==void 0){var O=$.chartX,_=$.chartY,P=$.activeTooltipIndex,D=x.state,L=D.offset,R=D.tooltipTicks;if(!L)return;if(typeof I=="function")P=I(R,$);else if(I==="value"){P=-1;for(var F=0;F<R.length;F++)if(R[F].value===$.activeLabel){P=F;break}}var V=we(we({},L),{},{x:L.left,y:L.top}),H=Math.min(O,V.x+V.width),U=Math.min(_,V.y+V.height),W=R[P]&&R[P].value,G=OA(x.state,x.props.data,P),q=R[P]?{x:E==="horizontal"?R[P].coordinate:H,y:E==="horizontal"?U:R[P].coordinate}:Aq;x.setState(we(we({},$),{},{activeLabel:W,activeCoordinate:q,activePayload:G,activeTooltipIndex:P}))}else x.setState($)}),mt(x,"renderCursor",function($){var C,E=x.state,I=E.isTooltipActive,T=E.activeCoordinate,N=E.activePayload,k=E.offset,O=E.activeTooltipIndex,_=E.tooltipAxisBandSize,P=x.getTooltipEventType(),D=(C=$.props.active)!==null&&C!==void 0?C:I,L=x.props.layout,R=$.key||"_recharts-cursor";return B.createElement(mAe,{key:R,activeCoordinate:T,activePayload:N,activeTooltipIndex:O,chartName:n,element:$,isActive:D,layout:L,offset:k,tooltipAxisBandSize:_,tooltipEventType:P})}),mt(x,"renderPolarAxis",function($,C,E){var I=oo($,"type.axisType"),T=oo(x.state,"".concat(I,"Map")),N=$.type.defaultProps,k=N!==void 0?we(we({},N),$.props):$.props,O=T&&T[k["".concat(I,"Id")]];return S.cloneElement($,we(we({},O),{},{className:$t(I,O.className),key:$.key||"".concat(C,"-").concat(E),ticks:Vl(O,!0)}))}),mt(x,"renderPolarGrid",function($){var C=$.props,E=C.radialLines,I=C.polarAngles,T=C.polarRadius,N=x.state,k=N.radiusAxisMap,O=N.angleAxisMap,_=Bc(k),P=Bc(O),D=P.cx,L=P.cy,R=P.innerRadius,F=P.outerRadius;return S.cloneElement($,{polarAngles:Array.isArray(I)?I:Vl(P,!0).map(function(V){return V.coordinate}),polarRadius:Array.isArray(T)?T:Vl(_,!0).map(function(V){return V.coordinate}),cx:D,cy:L,innerRadius:R,outerRadius:F,key:$.key||"polar-grid",radialLines:E})}),mt(x,"renderLegend",function(){var $=x.state.formattedGraphicalItems,C=x.props,E=C.children,I=C.width,T=C.height,N=x.props.margin||{},k=I-(N.left||0)-(N.right||0),O=i9({children:E,formattedGraphicalItems:$,legendWidth:k,legendContent:c});if(!O)return null;var _=O.item,P=w5(O,gAe);return S.cloneElement(_,we(we({},P),{},{chartWidth:I,chartHeight:T,margin:N,onBBoxUpdate:x.handleLegendBBoxUpdate}))}),mt(x,"renderTooltip",function(){var $,C=x.props,E=C.children,I=C.accessibilityLayer,T=Ya(E,$a);if(!T)return null;var N=x.state,k=N.isTooltipActive,O=N.activeCoordinate,_=N.activePayload,P=N.activeLabel,D=N.offset,L=($=T.props.active)!==null&&$!==void 0?$:k;return S.cloneElement(T,{viewBox:we(we({},D),{},{x:D.left,y:D.top}),active:L,label:P,payload:L?_:[],coordinate:O,accessibilityLayer:I})}),mt(x,"renderBrush",function($){var C=x.props,E=C.margin,I=C.data,T=x.state,N=T.offset,k=T.dataStartIndex,O=T.dataEndIndex,_=T.updateId;return S.cloneElement($,{key:$.key||"_recharts-brush",onChange:k1(x.handleBrushChange,$.props.onChange),data:I,x:Ae($.props.x)?$.props.x:N.left,y:Ae($.props.y)?$.props.y:N.top+N.height+N.brushBottom-(E.bottom||0),width:Ae($.props.width)?$.props.width:N.width,startIndex:k,endIndex:O,updateId:"brush-".concat(_)})}),mt(x,"renderReferenceElement",function($,C,E){if(!$)return null;var I=x,T=I.clipPathId,N=x.state,k=N.xAxisMap,O=N.yAxisMap,_=N.offset,P=$.type.defaultProps||{},D=$.props,L=D.xAxisId,R=L===void 0?P.xAxisId:L,F=D.yAxisId,V=F===void 0?P.yAxisId:F;return S.cloneElement($,{key:$.key||"".concat(C,"-").concat(E),xAxis:k[R],yAxis:O[V],viewBox:{x:_.left,y:_.top,width:_.width,height:_.height},clipPathId:T})}),mt(x,"renderActivePoints",function($){var C=$.item,E=$.activePoint,I=$.basePoint,T=$.childIndex,N=$.isRange,k=[],O=C.props.key,_=C.item.type.defaultProps!==void 0?we(we({},C.item.type.defaultProps),C.item.props):C.item.props,P=_.activeDot,D=_.dataKey,L=we(we({index:T,dataKey:D,cx:E.x,cy:E.y,r:4,fill:$D(C.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},lt(P,!1)),uS(P));return k.push(v.renderActiveDot(P,L,"".concat(O,"-activePoint-").concat(T))),I?k.push(v.renderActiveDot(P,we(we({},L),{},{cx:I.x,cy:I.y}),"".concat(O,"-basePoint-").concat(T))):N&&k.push(null),k}),mt(x,"renderGraphicChild",function($,C,E){var I=x.filterFormatItem($,C,E);if(!I)return null;var T=x.getTooltipEventType(),N=x.state,k=N.isTooltipActive,O=N.tooltipAxis,_=N.activeTooltipIndex,P=N.activeLabel,D=x.props.children,L=Ya(D,$a),R=I.props,F=R.points,V=R.isRange,H=R.baseLine,U=I.item.type.defaultProps!==void 0?we(we({},I.item.type.defaultProps),I.item.props):I.item.props,W=U.activeDot,G=U.hide,q=U.activeBar,X=U.activeShape,re=!!(!G&&k&&L&&(W||q||X)),ce={};T!=="axis"&&L&&L.props.trigger==="click"?ce={onClick:k1(x.handleItemMouseEnter,$.props.onClick)}:T!=="axis"&&(ce={onMouseLeave:k1(x.handleItemMouseLeave,$.props.onMouseLeave),onMouseEnter:k1(x.handleItemMouseEnter,$.props.onMouseEnter)});var ee=S.cloneElement($,we(we({},I.props),ce));function se(fe){return typeof O.dataKey=="function"?O.dataKey(fe.payload):null}if(re)if(_>=0){var ue,Q;if(O.dataKey&&!O.allowDuplicatedCategory){var ye=typeof O.dataKey=="function"?se:"payload.".concat(O.dataKey.toString());ue=cS(F,ye,P),Q=V&&H&&cS(H,ye,P)}else ue=F==null?void 0:F[_],Q=V&&H&&H[_];if(X||q){var le=$.props.activeIndex!==void 0?$.props.activeIndex:_;return[S.cloneElement($,we(we(we({},I.props),ce),{},{activeIndex:le})),null,null]}if(!xt(ue))return[ee].concat(Mp(x.renderActivePoints({item:I,activePoint:ue,basePoint:Q,childIndex:_,isRange:V})))}else{var xe,be=(xe=x.getItemByXY(x.state.activeCoordinate))!==null&&xe!==void 0?xe:{graphicalItem:ee},$e=be.graphicalItem,Ne=$e.item,Ve=Ne===void 0?$:Ne,Pe=$e.childIndex,ke=we(we(we({},I.props),ce),{},{activeIndex:Pe});return[S.cloneElement(Ve,ke),null,null]}return V?[ee,null,null]:[ee,null]}),mt(x,"renderCustomized",function($,C,E){return S.cloneElement($,we(we({key:"recharts-customized-".concat(E)},x.props),x.state))}),mt(x,"renderMap",{CartesianGrid:{handler:R1,once:!0},ReferenceArea:{handler:x.renderReferenceElement},ReferenceLine:{handler:R1},ReferenceDot:{handler:x.renderReferenceElement},XAxis:{handler:R1},YAxis:{handler:R1},Brush:{handler:x.renderBrush,once:!0},Bar:{handler:x.renderGraphicChild},Line:{handler:x.renderGraphicChild},Area:{handler:x.renderGraphicChild},Radar:{handler:x.renderGraphicChild},RadialBar:{handler:x.renderGraphicChild},Scatter:{handler:x.renderGraphicChild},Pie:{handler:x.renderGraphicChild},Funnel:{handler:x.renderGraphicChild},Tooltip:{handler:x.renderCursor,once:!0},PolarGrid:{handler:x.renderPolarGrid,once:!0},PolarAngleAxis:{handler:x.renderPolarAxis},PolarRadiusAxis:{handler:x.renderPolarAxis},Customized:{handler:x.renderCustomized}}),x.clipPathId="".concat((b=y.id)!==null&&b!==void 0?b:Cf("recharts"),"-clip"),x.throttleTriggeredAfterMouseMove=r7(x.triggeredAfterMouseMove,(w=y.throttleDelay)!==null&&w!==void 0?w:1e3/60),x.state={},x}return NAe(v,m),CAe(v,[{key:"componentDidMount",value:function(){var b,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,w=b.children,x=b.data,$=b.height,C=b.layout,E=Ya(w,$a);if(E){var I=E.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,N=OA(this.state,x,I,T),k=this.state.tooltipTicks[I].coordinate,O=(this.state.offset.top+$)/2,_=C==="horizontal",P=_?{x:k,y:O}:{y:k,x:O},D=this.state.formattedGraphicalItems.find(function(R){var F=R.item;return F.type.name==="Scatter"});D&&(P=we(we({},P),D.props.points[I].tooltipPosition),N=D.props.points[I].tooltipPayload);var L={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:T,activePayload:N,activeCoordinate:P};this.setState(L),this.renderCursor(E),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var x,$;this.accessibilityManager.setDetails({offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:($=this.props.margin.top)!==null&&$!==void 0?$:0}})}return null}},{key:"componentDidUpdate",value:function(b){iO([Ya(b.children,$a)],[Ya(this.props.children,$a)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Ya(this.props.children,$a);if(b&&typeof b.props.shared=="boolean"){var w=b.props.shared?"axis":"item";return s.indexOf(w)>=0?w:a}return a}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var w=this.container,x=w.getBoundingClientRect(),$=ybe(x),C={chartX:Math.round(b.pageX-$.left),chartY:Math.round(b.pageY-$.top)},E=x.width/w.offsetWidth||1,I=this.inRange(C.chartX,C.chartY,E);if(!I)return null;var T=this.state,N=T.xAxisMap,k=T.yAxisMap,O=this.getTooltipEventType(),_=$5(this.state,this.props.data,this.props.layout,I);if(O!=="axis"&&N&&k){var P=Bc(N).scale,D=Bc(k).scale,L=P&&P.invert?P.invert(C.chartX):null,R=D&&D.invert?D.invert(C.chartY):null;return we(we({},C),{},{xValue:L,yValue:R},_)}return _?we(we({},C),_):null}},{key:"inRange",value:function(b,w){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,$=this.props.layout,C=b/x,E=w/x;if($==="horizontal"||$==="vertical"){var I=this.state.offset,T=C>=I.left&&C<=I.left+I.width&&E>=I.top&&E<=I.top+I.height;return T?{x:C,y:E}:null}var N=this.state,k=N.angleAxisMap,O=N.radiusAxisMap;if(k&&O){var _=Bc(k);return K4({x:C,y:E},_)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,w=this.getTooltipEventType(),x=Ya(b,$a),$={};x&&w==="axis"&&(x.props.trigger==="click"?$={onClick:this.handleClick}:$={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=uS(this.props,this.handleOuterEvent);return we(we({},C),$)}},{key:"addListener",value:function(){XI.on(YI,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){XI.removeListener(YI,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,w,x){for(var $=this.state.formattedGraphicalItems,C=0,E=$.length;C<E;C++){var I=$[C];if(I.item===b||I.props.key===b.key||w===Ul(I.item.type)&&x===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,w=this.state.offset,x=w.left,$=w.top,C=w.height,E=w.width;return B.createElement("defs",null,B.createElement("clipPath",{id:b},B.createElement("rect",{x,y:$,height:C,width:E})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(w,x){var $=x5(x,2),C=$[0],E=$[1];return we(we({},w),{},mt({},C,E.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(w,x){var $=x5(x,2),C=$[0],E=$[1];return we(we({},w),{},mt({},C,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(b){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[b])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(b){var w=this.state,x=w.formattedGraphicalItems,$=w.activeItem;if(x&&x.length)for(var C=0,E=x.length;C<E;C++){var I=x[C],T=I.props,N=I.item,k=N.type.defaultProps!==void 0?we(we({},N.type.defaultProps),N.props):N.props,O=Ul(N.type);if(O==="Bar"){var _=(T.data||[]).find(function(R){return tEe(b,R)});if(_)return{graphicalItem:I,payload:_}}else if(O==="RadialBar"){var P=(T.data||[]).find(function(R){return K4(b,R)});if(P)return{graphicalItem:I,payload:P}}else if(n2(I,$)||r2(I,$)||t0(I,$)){var D=UTe({graphicalItem:I,activeTooltipItem:$,itemData:k.data}),L=k.activeIndex===void 0?D:k.activeIndex;return{graphicalItem:we(we({},I),{},{childIndex:L}),payload:t0(I,$)?k.data[D]:I.props.data[D]}}}return null}},{key:"render",value:function(){var b=this;if(!jj(this))return null;var w=this.props,x=w.children,$=w.className,C=w.width,E=w.height,I=w.style,T=w.compact,N=w.title,k=w.desc,O=w5(w,vAe),_=lt(O,!1);if(T)return B.createElement(e5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},B.createElement(oO,Dh({},_,{width:C,height:E,title:N,desc:k}),this.renderClipPath(),Bj(x,this.renderMap)));if(this.props.accessibilityLayer){var P,D;_.tabIndex=(P=this.props.tabIndex)!==null&&P!==void 0?P:0,_.role=(D=this.props.role)!==null&&D!==void 0?D:"application",_.onKeyDown=function(R){b.accessibilityManager.keyboardEvent(R)},_.onFocus=function(){b.accessibilityManager.focus()}}var L=this.parseEventsOfWrapper();return B.createElement(e5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},B.createElement("div",Dh({className:$t("recharts-wrapper",$),style:we({position:"relative",cursor:"default",width:C,height:E},I)},L,{ref:function(F){b.container=F}}),B.createElement(oO,Dh({},_,{width:C,height:E,title:N,desc:k,style:RAe}),this.renderClipPath(),Bj(x,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(S.Component);mt(p,"displayName",n),mt(p,"defaultProps",we({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),mt(p,"getDerivedStateFromProps",function(m,v){var y=m.dataKey,b=m.data,w=m.children,x=m.width,$=m.height,C=m.layout,E=m.stackOffset,I=m.margin,T=v.dataStartIndex,N=v.dataEndIndex;if(v.updateId===void 0){var k=C5(m);return we(we(we({},k),{},{updateId:0},h(we(we({props:m},k),{},{updateId:0}),v)),{},{prevDataKey:y,prevData:b,prevWidth:x,prevHeight:$,prevLayout:C,prevStackOffset:E,prevMargin:I,prevChildren:w})}if(y!==v.prevDataKey||b!==v.prevData||x!==v.prevWidth||$!==v.prevHeight||C!==v.prevLayout||E!==v.prevStackOffset||!qh(I,v.prevMargin)){var O=C5(m),_={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},P=we(we({},$5(v,b,C)),{},{updateId:v.updateId+1}),D=we(we(we({},O),_),P);return we(we(we({},D),h(we({props:m},D),v)),{},{prevDataKey:y,prevData:b,prevWidth:x,prevHeight:$,prevLayout:C,prevStackOffset:E,prevMargin:I,prevChildren:w})}if(!iO(w,v.prevChildren)){var L,R,F,V,H=Ya(w,Tp),U=H&&(L=(R=H.props)===null||R===void 0?void 0:R.startIndex)!==null&&L!==void 0?L:T,W=H&&(F=(V=H.props)===null||V===void 0?void 0:V.endIndex)!==null&&F!==void 0?F:N,G=U!==T||W!==N,q=!xt(b),X=q&&!G?v.updateId:v.updateId+1;return we(we({updateId:X},h(we(we({props:m},v),{},{updateId:X,dataStartIndex:U,dataEndIndex:W}),v)),{},{prevChildren:w,dataStartIndex:U,dataEndIndex:W})}return null}),mt(p,"renderActiveDot",function(m,v,y){var b;return S.isValidElement(m)?b=S.cloneElement(m,v):gt(m)?b=m(v):b=B.createElement(tb,v),B.createElement(_t,{className:"recharts-active-dot",key:y},b)});var g=S.forwardRef(function(v,y){return B.createElement(p,Dh({},v,{ref:y}))});return g.displayName=p.displayName,g},DD=RD({chartName:"LineChart",GraphicalChild:ol,axisComponents:[{axisType:"xAxis",AxisComp:Ru},{axisType:"yAxis",AxisComp:Du}],formatAxisMap:q9}),UAe=RD({chartName:"PieChart",GraphicalChild:dc,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:t2},{axisType:"radiusAxis",AxisComp:JC}],formatAxisMap:p$e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),HAe=RD({chartName:"AreaChart",GraphicalChild:sl,axisComponents:[{axisType:"xAxis",AxisComp:Ru},{axisType:"yAxis",AxisComp:Du}],formatAxisMap:q9}),qa=(t=>(t.Low="Low",t.Medium="Medium",t.High="High",t))(qa||{});const Ft={pieBlue1:"#3B82F6",pieTeal:"#14B8A6",pieOrange:"#F97316",pieRed:"#EF4444",pieBlue2:"#2563EB",barYellow:"#FACC15",vehicles:"#3B82F6",humans:"#AB47BC",animals:"#F59E0B"},u2=({title:t,children:e,height:n="h-80"})=>M.jsxs("div",{className:`bg-background-card p-4 rounded-lg shadow-elevation-medium border border-border-ui-default ${n} flex flex-col`,children:[M.jsxs("h3",{className:"text-lg font-semibold mb-3 text-content-display",children:[" ",t]}),M.jsx("div",{className:"flex-grow",children:e})]}),GAe=({data:t,title:e})=>{const n=t.map(r=>({time:r.relativeTime.toFixed(1),vehicles:r.vehicles.total,humans:r.humans.total,animals:r.animals.total}));return M.jsx(u2,{title:e,height:"h-96",children:n.length>0?M.jsx(zC,{width:"100%",height:"100%",children:M.jsxs(DD,{data:n,margin:{top:5,right:25,left:-15,bottom:25},children:[M.jsx(rb,{strokeDasharray:"3 3",stroke:"rgba(100, 116, 139, 0.2)"})," ",M.jsx(Ru,{dataKey:"time",stroke:"#94A3B8",tick:{fontSize:10,fill:"#94A3B8"},label:{value:"Time (s)",position:"insideBottom",offset:-18,fontSize:11,fill:"#94A3B8"}}),M.jsx(Du,{stroke:"#94A3B8",tick:{fontSize:10,fill:"#94A3B8"},label:{value:"Count",angle:-90,position:"insideLeft",offset:10,fontSize:11,fill:"#94A3B8"},allowDecimals:!1}),M.jsx($a,{contentStyle:{backgroundColor:"rgba(30, 41, 59, 0.95)",borderRadius:"8px",borderColor:"#334155",color:"#E2E8F0"},itemStyle:{color:"#E2E8F0"},labelStyle:{color:Ft.pieBlue1,fontWeight:"bold",marginBottom:"5px"}}),M.jsx(xs,{wrapperStyle:{fontSize:"12px",paddingTop:"10px"},formatter:r=>M.jsx("span",{style:{color:"#94A3B8"},children:r})}),M.jsx(ol,{type:"monotone",dataKey:"vehicles",stroke:Ft.vehicles,strokeWidth:2,dot:{r:2,fill:Ft.vehicles},activeDot:{r:5,stroke:Ft.pieTeal,fill:Ft.vehicles},name:"Vehicles"}),M.jsx(ol,{type:"monotone",dataKey:"humans",stroke:Ft.humans,strokeWidth:2,dot:{r:2,fill:Ft.humans},activeDot:{r:5,stroke:Ft.pieTeal,fill:Ft.humans},name:"Humans"}),M.jsx(ol,{type:"monotone",dataKey:"animals",stroke:Ft.animals,strokeWidth:2,dot:{r:2,fill:Ft.animals},activeDot:{r:5,stroke:Ft.pieTeal,fill:Ft.animals},name:"Animals"})]})}):M.jsx("div",{className:"flex items-center justify-center h-full text-content-muted",children:"NO DATA STREAM DETECTED"})})},QI=[Ft.pieBlue1,Ft.pieTeal,Ft.pieOrange,Ft.pieRed,Ft.pieBlue2,Ft.barYellow],T5=Math.PI/180,qAe=({cx:t,cy:e,midAngle:n,innerRadius:r,outerRadius:i,percent:a,index:o,name:s,value:l})=>{if(typeof t!="number"||typeof e!="number"||typeof r!="number"||typeof i!="number"||typeof n!="number"||typeof a!="number"||!s)return null;const c=r+(i-r)*.65,u=t+c*Math.cos(-n*T5),d=e+c*Math.sin(-n*T5);return a<.05&&i-r<50?null:M.jsx("text",{x:u,y:d,fill:"#FFFFFF",textAnchor:"middle",dominantBaseline:"central",fontSize:"10",fontWeight:"medium",className:"drop-shadow-[0_1px_1px_rgba(0,0,0,0.5)]",children:`${s.length>7?s.substring(0,6)+"…":s} (${(a*100).toFixed(0)}%)`})},I5=({data:t,title:e,colors:n})=>{const r=t.filter(a=>a.value>0),i=n||QI;return M.jsx(u2,{title:e,height:"h-80",children:r.length>0?M.jsx(zC,{width:"100%",height:"100%",children:M.jsxs(UAe,{margin:{top:0,right:0,bottom:20,left:0},children:[M.jsx(dc,{data:r,cx:"50%",cy:"45%",labelLine:!1,label:qAe,outerRadius:90,innerRadius:40,fill:"#8884d8",dataKey:"value",nameKey:"name",stroke:"#161A27",strokeWidth:2,children:r.map((a,o)=>{let s;if(Array.isArray(i))s=i[o%i.length];else{const l=a.name||a.name;s=i[l]||QI[o%QI.length]}return M.jsx(BC,{fill:s},`cell-${o}`)})}),M.jsx($a,{contentStyle:{backgroundColor:"rgba(30, 41, 59, 0.95)",borderRadius:"8px",borderColor:"#334155",color:"#E2E8F0"},itemStyle:{color:"#E2E8F0"},labelStyle:{color:Ft.pieBlue1,fontWeight:"bold"}}),M.jsx(xs,{wrapperStyle:{fontSize:"11px",paddingTop:"5px",lineHeight:"1.5"},iconSize:10,formatter:a=>M.jsx("span",{style:{color:"#94A3B8"},children:a})})]})}):M.jsx("div",{className:"flex items-center justify-center h-full text-content-muted",children:"NO DISTRIBUTION DATA"})})},KAe=({data:t,title:e})=>{const n=t.map(r=>({time:r.relativeTime.toFixed(1),vehicles:r.vehicles.total,humans:r.humans.total,animals:r.animals.total}));return M.jsx(u2,{title:e,height:"h-96",children:n.length>0?M.jsx(zC,{width:"100%",height:"100%",children:M.jsxs(HAe,{data:n,margin:{top:5,right:25,left:-15,bottom:25},children:[M.jsxs("defs",{children:[M.jsxs("linearGradient",{id:"colorVehiclesStackedImg",x1:"0",y1:"0",x2:"0",y2:"1",children:[M.jsx("stop",{offset:"5%",stopColor:Ft.vehicles,stopOpacity:.6}),M.jsx("stop",{offset:"95%",stopColor:Ft.vehicles,stopOpacity:.1})]}),M.jsxs("linearGradient",{id:"colorHumansStackedImg",x1:"0",y1:"0",x2:"0",y2:"1",children:[M.jsx("stop",{offset:"5%",stopColor:Ft.humans,stopOpacity:.6}),M.jsx("stop",{offset:"95%",stopColor:Ft.humans,stopOpacity:.1})]}),M.jsxs("linearGradient",{id:"colorAnimalsStackedImg",x1:"0",y1:"0",x2:"0",y2:"1",children:[M.jsx("stop",{offset:"5%",stopColor:Ft.animals,stopOpacity:.6}),M.jsx("stop",{offset:"95%",stopColor:Ft.animals,stopOpacity:.1})]})]}),M.jsx(rb,{strokeDasharray:"3 3",stroke:"rgba(100, 116, 139, 0.2)"}),M.jsx(Ru,{dataKey:"time",stroke:"#94A3B8",tick:{fontSize:10,fill:"#94A3B8"},label:{value:"Time (s)",position:"insideBottom",offset:-18,fontSize:11,fill:"#94A3B8"}}),M.jsx(Du,{stroke:"#94A3B8",tick:{fontSize:10,fill:"#94A3B8"},label:{value:"Total Count",angle:-90,position:"insideLeft",offset:10,fontSize:11,fill:"#94A3B8"},allowDecimals:!1}),M.jsx($a,{contentStyle:{backgroundColor:"rgba(30, 41, 59, 0.95)",borderRadius:"8px",borderColor:"#334155",color:"#E2E8F0"},itemStyle:{color:"#E2E8F0"},labelStyle:{color:Ft.pieBlue1,fontWeight:"bold",marginBottom:"5px"}}),M.jsx(xs,{wrapperStyle:{fontSize:"12px",paddingTop:"10px"},formatter:r=>M.jsx("span",{style:{color:"#94A3B8"},children:r})}),M.jsx(sl,{type:"monotone",dataKey:"vehicles",stackId:"1",stroke:Ft.vehicles,fillOpacity:1,fill:"url(#colorVehiclesStackedImg)",name:"Vehicles"}),M.jsx(sl,{type:"monotone",dataKey:"humans",stackId:"1",stroke:Ft.humans,fillOpacity:1,fill:"url(#colorHumansStackedImg)",name:"Humans"}),M.jsx(sl,{type:"monotone",dataKey:"animals",stackId:"1",stroke:Ft.animals,fillOpacity:1,fill:"url(#colorAnimalsStackedImg)",name:"Animals"})]})}):M.jsx("div",{className:"flex items-center justify-center h-full text-content-muted",children:"NO DATA STREAM DETECTED"})})},XAe=({data:t,title:e})=>{const n=t.map(r=>({time:r.relativeTime.toFixed(1),congestion:r.congestion===qa.High?3:r.congestion===qa.Medium?2:1,incident:r.incident?3.5:null}));return M.jsx(u2,{title:e,height:"h-96",children:n.length>0?M.jsx(zC,{width:"100%",height:"100%",children:M.jsxs(DD,{data:n,margin:{top:5,right:25,left:-10,bottom:25},children:[M.jsx(rb,{strokeDasharray:"3 3",stroke:"rgba(100, 116, 139, 0.2)"}),M.jsx(Ru,{dataKey:"time",stroke:"#94A3B8",tick:{fontSize:10,fill:"#94A3B8"},label:{value:"Time (s)",position:"insideBottom",offset:-18,fontSize:11,fill:"#94A3B8"}}),M.jsx(Du,{stroke:"#94A3B8",tick:{fontSize:10,fill:"#94A3B8"},label:{value:"Status Level",angle:-90,position:"insideLeft",offset:10,fontSize:11,fill:"#94A3B8"},domain:[0,4],ticks:[1,2,3],tickFormatter:r=>r===1?"Low":r===2?"Medium":r===3?"High":""}),M.jsx($a,{contentStyle:{backgroundColor:"rgba(30, 41, 59, 0.95)",borderRadius:"8px",borderColor:"#334155",color:"#E2E8F0"},labelStyle:{color:Ft.pieBlue1,fontWeight:"bold",marginBottom:"5px"},formatter:(r,i)=>{if(i==="Congestion"){if(r===1)return["Low",i];if(r===2)return["Medium",i];if(r===3)return["High",i]}return i==="Incident"&&r?["DETECTED",i]:null}}),M.jsx(xs,{wrapperStyle:{fontSize:"12px",paddingTop:"10px"},formatter:r=>M.jsx("span",{style:{color:"#94A3B8"},children:r})}),M.jsx(ol,{type:"stepAfter",dataKey:"congestion",stroke:Ft.pieBlue1,strokeWidth:2,name:"Congestion",dot:!1,activeDot:{r:4,fill:Ft.pieBlue1}}),M.jsx(ol,{type:"monotone",dataKey:"incident",strokeWidth:0,name:"Incident",dot:{r:5,fill:Ft.pieRed,strokeWidth:0},activeDot:{r:7,fill:Ft.pieRed,stroke:Ft.pieRed},connectNulls:!1})]})}):M.jsx("div",{className:"flex items-center justify-center h-full text-content-muted",children:"NO DATA STREAM DETECTED"})})},YAe=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})}),ZAe=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})}),QAe=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),JAe=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),e_e=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),t_e=({className:t="w-6 h-6"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),n_e=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5h12.75m0 0V11.25A2.25 2.25 0 0012.75 9H5.25A2.25 2.25 0 003 11.25v3.75m14.25 0H3.375"})}),N5=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.247-3.21a6 6 0 01.741-.479m1.064.09a6 6 0 012.227 4.227m1.554 0a9.094 9.094 0 01-.479 3.742m-5.573 2.535a3 3 0 01-4.682-2.72m-3.21.247a6 6 0 01-.479-.741m-.09-1.064a6 6 0 014.227-2.227m0 1.554a9.094 9.094 0 013.742.479M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 4.5a.75.75 0 000-1.5h.008a.75.75 0 000 1.5H12zm0-3.75a.75.75 0 000-1.5h.008a.75.75 0 000 1.5H12zm-3.75 0a.75.75 0 000-1.5h.008a.75.75 0 000 1.5H8.25z"})}),k5=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}),JI=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),r_e=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-2.25-1.313M21 7.5v7.5M21 7.5l-2.25 1.313M3 7.5l2.25-1.313M3 7.5v7.5M3 7.5l2.25 1.313M12 3v1.5m0 15V21m0-15c-1.482 0-2.867.385-4.125 1.064M12 4.5c1.482 0 2.867.385 4.125 1.064m-8.25 0a48.608 48.608 0 018.25 0m-8.25 0V7.5m8.25-1.936V7.5m0 7.5v1.936a48.608 48.608 0 01-8.25 0V15m8.25 0a48.608 48.608 0 00-8.25 0m8.25 0V7.5M3 15l2.25 1.313M3 15l2.25-1.313m15.75 0l-2.25 1.313M21 15l-2.25-1.313"})}),i_e=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"})}),a_e=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9A2.25 2.25 0 004.5 18.75z"})}),o_e=({className:t="w-4 h-4"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),s_e=({className:t="w-5 h-5 animate-spin"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),l_e=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"})}),c_e=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.355a7.5 7.5 0 01-3 0m3 0a7.5 7.5 0 00-3 0m.394-9.283c.408-.254.787-.562 1.109-.921m-1.109.921a4.478 4.478 0 00-1.109-.921m2.218 0a4.478 4.478 0 00-2.218 0M12 6.75V5.25m0 1.5V5.25m0 1.5v3.75m0-3.75S10.5 5.25 9 5.25M12 6.75S13.5 5.25 15 5.25m-3 0a2.999 2.999 0 00-2.684 4.375m2.684-4.375a2.999 2.999 0 012.684 4.375m0 0c-.004.012-.008.022-.012.033m0 0c-.06.18-.124.354-.19.522m0 0c-.342.86-.783 1.632-1.287 2.289M9.012 12.033c.004-.012.008-.022.012-.033m0 0c.06-.18.124-.354-.19-.522m0 0c.342-.86-.783-1.632-1.287-2.289m0 0V15m2.988-2.967c.004.012.008.022.012.033m0 0c.06.18.124.354-.19.522m0 0c.342.86.783 1.632 1.287 2.289M12 15V9.75M9.012 12.033c-.004-.012-.008-.022-.012-.033m0 0c-.06-.18-.124-.354-.19-.522m0 0c-.342-.86-.783-1.632-1.287-2.289M14.988 12.033c.004-.012.008-.022.012-.033m0 0c.06-.18.124-.354-.19-.522m0 0c.342-.86.783-1.632 1.287-2.289M12 15a12.03 12.03 0 004.012 4.012M12 15a12.03 12.03 0 01-4.012 4.012m0 0A12.03 12.03 0 0112 21.022m0 0A12.03 12.03 0 0016.012 19.012M12 21.022A12.03 12.03 0 017.988 19.012M7.988 19.012A12.03 12.03 0 0012 15.001m3.988 4.011A12.03 12.03 0 0112 15.001M12 3.75a1.125 1.125 0 011.125 1.125v1.5A1.125 1.125 0 0112 7.5m0-3.75A1.125 1.125 0 0010.875 4.875v1.5A1.125 1.125 0 0012 7.5m0-3.75h.008v.008H12V3.75zm0 3.75h.008v.008H12V7.5z"})}),u_e=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 8.25H7.5a2.25 2.25 0 00-2.25 2.25v9a2.25 2.25 0 002.25 2.25h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25H15m0-3l-3-3m0 0l-3 3m3-3v12"})}),d_e=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),f_e=({className:t="w-5 h-5"})=>M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"})}),h_e=({className:t="w-5 h-5"})=>M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:[M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 .75h1.5m15 0h1.5M8.25 21v-1.5M15.75 3v1.5m0 15v1.5M12 4.5v-1.5m0 18v-1.5"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6.375h1.875c.414 0 .75.336.75.75v9.75c0 .414-.336.75-.75.75H5.625c-.414 0-.75-.336-.75-.75V7.125c0 .414.336-.75.75-.75H7.5"}),M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9.75V7.125A2.625 2.625 0 0013.125 4.5H10.875A2.625 2.625 0 008.25 7.125v2.625m7.5 0v6.375A2.625 2.625 0 0113.125 21H10.875A2.625 2.625 0 018.25 18.375V9.75m7.5 0H8.25"})]}),Ka="text-accent-blue",O5="text-accent-teal",nh=({icon:t,title:e,color:n=Ka})=>M.jsxs("h3",{className:`text-xl font-semibold mb-3 mt-5 flex items-center ${n} tracking-wider border-b border-border-ui-default/50 pb-2`,children:[t&&M.jsx(t,{className:"w-6 h-6 mr-3"}),e]}),A5=({title:t,children:e,titleColor:n=Ka})=>M.jsxs("div",{className:"mb-4 p-3 bg-background-panel rounded-md border border-border-ui-default/70",children:[M.jsx("h4",{className:`text-md font-semibold mb-2 ${n}`,children:t}),M.jsx("div",{className:"text-sm text-content-secondary space-y-1",children:e})]}),rh=({children:t,strong:e})=>M.jsx("li",{className:`ml-4 list-disc list-outside ${e?"font-semibold text-content-primary":""}`,children:t}),Vs=({step:t,title:e,children:n,subSteps:r})=>M.jsx("li",{className:"mb-3",children:M.jsxs("div",{className:"flex items-start",children:[M.jsx("span",{className:`mr-3 ${Ka} font-bold text-lg leading-tight flex-shrink-0 w-8 text-center`,children:t}),M.jsxs("div",{className:"flex-grow",children:[M.jsx("strong",{className:`block ${Ka} text-md`,children:e}),M.jsx("div",{className:"text-sm text-content-secondary mt-0.5",children:n}),r&&r.length>0&&M.jsx("ul",{className:"list-disc list-inside ml-4 mt-1 text-xs text-content-muted space-y-0.5",children:r.map((i,a)=>M.jsx("li",{children:i},a))})]})]})}),p_e=({onClose:t})=>M.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4 transition-opacity duration-300 ease-in-out",onClick:t,children:M.jsxs("div",{className:`bg-background-card text-content-primary w-full max-w-3xl h-[90vh] rounded-lg shadow-elevation-high border ${Ka.replace("text-","border-")}/50 flex flex-col overflow-hidden transform transition-all duration-300 ease-in-out scale-95 opacity-0 animate-fadeInScaleUp`,onClick:e=>e.stopPropagation(),children:[M.jsxs("header",{className:"flex items-center justify-between p-5 border-b border-border-ui-default bg-background-panel rounded-t-lg",children:[M.jsxs("div",{className:"flex items-center space-x-3",children:[M.jsx(f_e,{className:`w-8 h-8 ${Ka}`}),M.jsx("h2",{className:`text-2xl font-semibold tracking-wider ${Ka}`,children:"SYSTEM DEBRIEFING"})]}),M.jsx("button",{onClick:t,className:"text-content-muted hover:text-accent-red transition-colors p-1 rounded-full hover:bg-accent-red/10 focus:outline-none focus:ring-2 focus:ring-accent-red","aria-label":"Close modal",children:M.jsx(t_e,{className:"w-7 h-7"})})]}),M.jsxs("div",{className:"p-6 space-y-3 overflow-y-auto scrollbar-thin scrollbar-thumb-border-ui-default scrollbar-track-background-panel flex-grow",children:[M.jsx(nh,{icon:o_e,title:"I. System Genesis & Purpose"}),M.jsx("p",{className:"text-sm text-content-secondary leading-relaxed",children:"This Traffic Intelligence Platform represents a client-side, real-time video analysis system. Leveraging browser-native technologies, it processes video feeds directly on the user's device to detect, classify, and quantify vehicular, pedestrian, and faunal activity. The dashboard provides dynamic telemetry, congestion assessment, anomaly flagging, and comprehensive post-analysis reporting, all without server-side processing for the core video analysis."}),M.jsx(nh,{icon:h_e,title:"II. Core Architectural Blueprint"}),M.jsx(A5,{title:"Technology Stack:",titleColor:O5,children:M.jsxs("ul",{className:"space-y-1",children:[M.jsx(rh,{strong:!0,children:"React (v19):"}),M.jsx("p",{className:"ml-4 text-xs",children:"A declarative JavaScript library for building dynamic and interactive user interfaces. Manages the application's component structure, state, and rendering pipeline."}),M.jsx(rh,{strong:!0,children:"TypeScript:"}),M.jsx("p",{className:"ml-4 text-xs",children:"A superset of JavaScript that adds static typing, enhancing code quality, maintainability, and developer productivity by catching errors during development."}),M.jsx(rh,{strong:!0,children:"TensorFlow.js (TF.js):"}),M.jsx("p",{className:"ml-4 text-xs",children:"An open-source hardware-accelerated JavaScript library for training and deploying machine learning models directly in the browser or in Node.js."}),M.jsx(rh,{strong:!0,children:"COCO-SSD Model (via TensorFlow.js Models):"}),M.jsx("p",{className:"ml-4 text-xs",children:"A pre-trained object detection model optimized for speed and efficiency, capable of identifying 80 common object classes from the COCO dataset."}),M.jsx(rh,{strong:!0,children:"Recharts:"}),M.jsx("p",{className:"ml-4 text-xs",children:"A composable charting library built on React components, used for visualizing analytical data through various chart types (line, pie, area)."}),M.jsx(rh,{strong:!0,children:"Tailwind CSS:"}),M.jsx("p",{className:"ml-4 text-xs",children:"A utility-first CSS framework for rapidly building custom user interfaces. Provides low-level utility classes to construct designs directly in the markup."})]})}),M.jsx(A5,{title:"Primary Libraries & Functions:",titleColor:O5,children:M.jsxs("ul",{className:"space-y-2",children:[M.jsxs("li",{children:[M.jsx("strong",{children:"@tensorflow/tfjs:"}),M.jsxs("ul",{className:"ml-4 text-xs list-disc list-inside space-y-0.5",children:[M.jsxs("li",{children:[M.jsx("code",{children:"tf.ready()"}),": Ensures the TensorFlow.js backend is initialized and ready for operations. Critical for GPU acceleration."]}),M.jsx("li",{children:"Core API: Provides low-level operations (tensors, mathematical functions) which, while not directly used extensively in this app's main logic (as COCO-SSD abstracts much of it), form the foundation of TF.js."})]})]}),M.jsxs("li",{children:[M.jsx("strong",{children:"@tensorflow-models/coco-ssd:"}),M.jsxs("ul",{className:"ml-4 text-xs list-disc list-inside space-y-0.5",children:[M.jsxs("li",{children:[M.jsx("code",{children:"cocoSsd.load()"}),": Asynchronously loads the pre-trained COCO-SSD model weights and graph definition, making it ready for inference."]}),M.jsxs("li",{children:[M.jsx("code",{children:"model.detect(videoElement)"}),": The core inference function. Takes an HTML video, image, or canvas element as input and returns an array of detected objects, each with a class name, confidence score, and bounding box coordinates."]})]})]}),M.jsxs("li",{children:[M.jsx("strong",{children:"React (react, react-dom):"}),M.jsxs("ul",{className:"ml-4 text-xs list-disc list-inside space-y-0.5",children:[M.jsxs("li",{children:[M.jsx("code",{children:"useState"}),", ",M.jsx("code",{children:"useEffect"}),", ",M.jsx("code",{children:"useCallback"}),", ",M.jsx("code",{children:"useRef"}),": Fundamental React Hooks for managing component state, side effects, memoizing functions, and referencing DOM elements/persistent values respectively."]}),M.jsxs("li",{children:["JSX: Syntactic sugar for ",M.jsx("code",{children:"React.createElement"}),", allowing HTML-like syntax within JavaScript for defining UI structure."]}),M.jsx("li",{children:"Component Model: Enables modular UI development by breaking down the interface into reusable pieces (e.g., `Sidebar`, `TrafficCharts`)."})]})]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Recharts:"}),M.jsxs("ul",{className:"ml-4 text-xs list-disc list-inside space-y-0.5",children:[M.jsxs("li",{children:[M.jsx("code",{children:"ResponsiveContainer"}),": Allows charts to adapt to the size of their parent container."]}),M.jsxs("li",{children:["Specific chart components (",M.jsx("code",{children:"LineChart"}),", ",M.jsx("code",{children:"PieChart"}),", ",M.jsx("code",{children:"AreaChart"}),") and their sub-components (",M.jsx("code",{children:"Line"}),", ",M.jsx("code",{children:"Pie"}),", ",M.jsx("code",{children:"Area"}),", ",M.jsx("code",{children:"XAxis"}),", ",M.jsx("code",{children:"YAxis"}),", ",M.jsx("code",{children:"Tooltip"}),", ",M.jsx("code",{children:"Legend"}),", ",M.jsx("code",{children:"Cell"}),"): Used declaratively to construct various data visualizations based on the processed log data."]})]})]})]})}),M.jsx(nh,{icon:u_e,title:"III. Operational Dataflow Matrix (System Flowchart)"}),M.jsxs("ol",{className:"space-y-1",children:[M.jsx(Vs,{step:"1",title:"Initiation: Video Upload & Model Priming",children:"User uploads a video file (MP4, AVI, MOV, WebM) via the sidebar interface. Simultaneously, on application load, the COCO-SSD model is fetched and initialized by TensorFlow.js, preparing the AI core for inference."}),M.jsx(Vs,{step:"2",title:"Configuration & Engagement",children:'User adjusts detection parameters: Confidence Threshold (minimum score for a detection to be valid) and Frame Skip interval (process every Nth frame for performance tuning). User clicks "Engage Analysis" to start processing.'}),M.jsxs(Vs,{step:"3",title:"Video Playback & Frame Loop",children:["The uploaded video begins playing in a hidden HTML5 ",M.jsx("code",{children:"<video>"})," element. A ",M.jsx("code",{children:"requestAnimationFrame"})," loop is initiated, synchronizing processing with the browser's rendering cycle."]}),M.jsxs(Vs,{step:"4",title:"Frame Capture & Preprocessing (Conditional)",children:["Inside the loop, if not paused and video is active: The current frame from the ",M.jsx("code",{children:"<video>"})," element is captured. If the current frame number modulo ",M.jsx("code",{children:"frameSkip"})," is zero, it's selected for full processing. Otherwise, it's only drawn to the canvas."]}),M.jsxs(Vs,{step:"5",title:"AI Inference & Detection",children:["For frames selected for processing: The frame is passed to ",M.jsx("code",{children:"model.detect(videoFrame)"}),". COCO-SSD performs inference, returning an array of ",M.jsx("code",{children:"DetectedObject"})," (class, score, bbox)."]}),M.jsxs(Vs,{step:"6",title:"Filtering & Augmentation",children:["Detections are filtered:",M.jsxs("ul",{className:"list-[circle] list-inside ml-4 text-xs",children:[M.jsx("li",{children:"By score against the user-set Confidence Threshold."}),M.jsxs("li",{children:["By class name against predefined lists (",M.jsx("code",{children:"VEHICLE_CLASS_NAMES"}),", etc.)."]})]}),"Valid detections' bounding boxes and labels (class, score) are drawn onto a visible ",M.jsx("code",{children:"<canvas>"})," element, which mirrors the video frame."]}),M.jsxs(Vs,{step:"7",title:"Telemetry & Statistical Synthesis",children:["Counts for each category (Vehicles, Humans, Animals) are tallied. Congestion level is derived from vehicle counts using ",M.jsx("code",{children:"SIMULATION_CONFIG"})," thresholds. Incidents are flagged if vehicle counts deviate significantly from a rolling average (",M.jsx("code",{children:"INCIDENT_WINDOW_SIZE"}),", ",M.jsx("code",{children:"INCIDENT_DEVIATION_THRESHOLD"}),"). A new ",M.jsx("code",{children:"LogEntry"})," is created (frame info, timestamp, object counts, congestion, incident status, relative video time)."]}),M.jsxs(Vs,{step:"8",title:"State Update & Interface Synchronization",children:["The new ",M.jsx("code",{children:"LogEntry"})," is added to the ",M.jsx("code",{children:"logData"})," state array.",M.jsx("code",{children:"currentFrameStats"})," state is updated for the live telemetry display. Dashboard charts (Line, Pie, etc.) consuming ",M.jsx("code",{children:"logData"})," are re-rendered by Recharts."]}),M.jsxs(Vs,{step:"9",title:"Loop Continuation / Termination",children:["The ",M.jsx("code",{children:"requestAnimationFrame"})," loop continues to the next frame. If the video ends or processing is stopped, ",M.jsx("code",{children:"calculateFinalStats"})," is triggered:",M.jsxs("ul",{className:"list-[circle] list-inside ml-4 text-xs",children:[M.jsxs("li",{children:["Averages, totals, and final distributions are calculated from ",M.jsx("code",{children:"logData"}),"."]}),M.jsxs("li",{children:[M.jsx("code",{children:"summaryStats"})," and distribution states are updated."]}),M.jsx("li",{children:'"Detailed Reporting" section becomes fully populated.'})]})]}),M.jsxs(Vs,{step:"10",title:"Data Archival (User Action)",children:['User can click "Download Log" to save the complete ',M.jsx("code",{children:"logData"})," array as a JSON file."]})]}),M.jsx(nh,{icon:c_e,title:"IV. Project Singularity (Novelty)"}),M.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-content-secondary",children:[M.jsxs("li",{children:[M.jsx("strong",{className:Ka,children:"On-Device Real-Time Processing:"})," Core video analysis occurs entirely within the user's browser using TensorFlow.js, ensuring data privacy and eliminating server-side processing costs/latency for inference."]}),M.jsxs("li",{children:[M.jsx("strong",{className:Ka,children:"Multi-Categorical Analysis:"})," Simultaneously detects and quantifies vehicles, humans, and animals, offering a broader environmental understanding."]}),M.jsxs("li",{children:[M.jsx("strong",{className:Ka,children:"Interactive Parameterization & Feedback:"})," Users can dynamically adjust detection parameters (confidence, frame skip) and observe immediate impacts on the analysis."]}),M.jsxs("li",{children:[M.jsx("strong",{className:Ka,children:"Client-Side Efficiency & Accessibility:"})," Demonstrates the power of modern web technologies to perform complex AI tasks directly on client hardware, making sophisticated analysis more accessible."]}),M.jsxs("li",{children:[M.jsx("strong",{className:Ka,children:"Educational & Demonstrative Value:"})," Serves as a practical example of implementing an end-to-end AI application using cutting-edge JavaScript libraries and pre-trained models, highlighting possibilities for web-based AI."]})]}),M.jsx(nh,{icon:l_e,title:"V. Genesis Protocol (Source Code Access)"}),M.jsx("p",{className:"text-sm text-content-secondary",children:"The foundational logic and a Python-based precursor to this project, which inspired aspects of the processing pipeline, can be explored via the following neural link:"}),M.jsx("a",{href:"https://colab.research.google.com/drive/1kP7daFJR9kir6ABn6OcRrjJ2JiWtY-wy#scrollTo=0zTRYsAptADb&line=499&uniqifier=1",target:"_blank",rel:"noopener noreferrer",className:`block mt-2 text-accent-link hover:text-teal-400 underline truncate break-all p-2 bg-background-panel rounded-md border border-border-ui-default hover:border-${Ka.replace("text-","")} transition-colors text-xs`,children:"https://colab.research.google.com/drive/1kP7daFJR9kir6ABn6OcRrjJ2JiWtY-wy#scrollTo=0zTRYsAptADb&line=499&uniqifier=1"}),M.jsx("p",{className:"text-xs text-content-muted mt-1",children:"Note: The linked Colab notebook is Python-based and illustrates server-side processing concepts. This web application adapts similar analytical goals for client-side execution with TensorFlow.js."}),M.jsx(nh,{icon:d_e,title:"VI. Strategic Debrief (Overall Summary)"}),M.jsx("p",{className:"text-sm text-content-secondary leading-relaxed",children:"This dashboard effectively demonstrates a full-cycle, on-device AI workflow: from data ingestion (video upload) and model-driven inference (object detection) to real-time statistical analysis, dynamic visualization, and data archival. It showcases the capabilities of modern web platforms to handle computationally intensive tasks traditionally reserved for dedicated backend systems. The focus on client-side processing ensures user data privacy, reduces infrastructure dependency, and provides an interactive, responsive analytical experience."})]}),M.jsx("footer",{className:"p-4 border-t border-border-ui-default bg-background-panel rounded-b-lg text-right",children:M.jsx("button",{onClick:t,className:"py-2 px-5 bg-accent-blue hover:bg-blue-500 text-white font-semibold rounded-md transition-all duration-150 shadow-md hover:shadow-elevation-medium active:translate-y-px text-sm",children:"DISMISS BRIEFING"})})]})}),FD=["person","bicycle","car","motorcycle","airplane","bus","train","truck","boat","traffic light","fire hydrant","stop sign","parking meter","bench","bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe","backpack","umbrella","handbag","tie","suitcase","frisbee","skis","snowboard","sports ball","kite","baseball bat","baseball glove","skateboard","surfboard","tennis racket","bottle","wine glass","cup","fork","knife","spoon","bowl","banana","apple","sandwich","orange","broccoli","carrot","hot dog","pizza","donut","cake","chair","couch","potted plant","bed","dining table","toilet","tv","laptop","mouse","remote","keyboard","cell phone","microwave","oven","toaster","sink","refrigerator","book","clock","vase","scissors","teddy bear","hair drier","toothbrush"],Iv=["bicycle","car","motorcycle","bus","truck","train","boat","airplane"],Nv=["person"],kv=["bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe"];Iv.map(t=>FD.indexOf(t)).filter(t=>t!==-1);Nv.map(t=>FD.indexOf(t)).filter(t=>t!==-1);kv.map(t=>FD.indexOf(t)).filter(t=>t!==-1);const Ba={CONGESTION_THRESHOLD_HIGH:10,CONGESTION_THRESHOLD_MEDIUM:6,INCIDENT_WINDOW_SIZE:5,INCIDENT_DEVIATION_THRESHOLD:4,LOG_PREVIEW_COUNT:5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m_e=1e-7,g_e=1e-4;class MD{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class d2{refCount(e){return xa("refCount")}incRef(e){return xa("incRef")}timerAvailable(){return!0}time(e){return xa("time")}read(e){return xa("read")}readSync(e){return xa("readSync")}readToGPU(e,n){return xa("readToGPU")}numDataIds(){return xa("numDataIds")}disposeData(e,n){return xa("disposeData")}write(e,n,r){return xa("write")}move(e,n,r,i,a){return xa("move")}createTensorFromGPUData(e,n,r){return xa("createTensorFromGPUData")}memory(){return xa("memory")}floatPrecision(){return xa("floatPrecision")}epsilon(){return this.floatPrecision()===32?m_e:g_e}dispose(){return xa("dispose")}}function xa(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LD(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Fl(t,e,n)}function v_e(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,Fl(t,n,r),Fl(e,n,r)}function pu(t,e,n){return Math.max(t,Math.min(e,n))}function f2(t){return t%2===0?t:t+1}function Fl(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Pq(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function y_e(t,e){const n=Math.random();return e*n+(1-n)*t}function b_e(t,e){let n=0;for(let r=0;r<t.length;r++){const i=Number(t[r])-Number(e[r]);n+=i*i}return n}function j(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function fi(t,e,n=""){j(Nt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Nf(t){j(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function de(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function x_e(t){return t.length===0}function Rq(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function Nt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function nf(t){return t%1===0}function w_e(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function d$(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function S_e(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return LD(e),e}function Ld(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function AA(t,e=i=>0,n,r){return new Promise((i,a)=>{let o=0;const s=()=>{if(t()){i();return}o++;const l=e(o);if(n!=null&&o>=n){a();return}r!=null?r(s,l):setTimeout(s,l)};s()})}function jD(t,e){let n=1,r=-1;for(let a=0;a<t.length;++a)if(t[a]>=0)n*=t[a];else if(t[a]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(t[a]<0)throw Error(`Shapes can not be < 0. Found ${t[a]} at dim ${a}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function Tt(t,e){const n=e.length;return t=t==null?e.map((r,i)=>i):[].concat(t),j(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),j(t.every(r=>nf(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function fc(t,e){const n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||i?null:Tt(e,t).sort();let o=0;for(let s=0;s<t.length;++s){if(a!=null){if(a[o]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(a[o]==null||a[o]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),a[o]<=s&&o++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function Vr(t,e){return qn(t,e)}function qn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function Dq(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function Fq(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function zD(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function l0(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function Mq(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Qs(t){return typeof t=="string"||t instanceof String}function Lq(t){return typeof t=="boolean"}function f$(t){return typeof t=="number"}function kf(t){return Array.isArray(t)?kf(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":f$(t)?"float32":Qs(t)?"string":Lq(t)?"bool":"float32"}function mu(t){return!!(t&&t.constructor&&t.call&&t.apply)}function h$(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function ot(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function jq(t,e,n,r=!1){const i=new Array;if(e.length===1){const a=e[0]*(r?2:1);for(let o=0;o<a;o++)i[o]=n[t+o]}else{const a=e[0],o=e.slice(1),s=o.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<a;l++)i[l]=jq(t+l*s,o,n,r)}return i}function lo(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((i,a)=>i*a)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return jq(0,t,e,n)}function zq(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function h2(t,e){const n=ui(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function ui(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function BD(t,e){const n=t.reduce((r,i)=>r*i,1);if(e==null||e==="float32")return lo(t,new Float32Array(n));if(e==="int32")return lo(t,new Int32Array(n));if(e==="bool")return lo(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function Ma(t){t.forEach(e=>{j(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function ws(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function Of(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}function gu(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _5="tfjsflags";class Bq{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=$_e,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const i=this.urlFlags[e];oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${i}.`),this.set(e,i)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(gu(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);_5 in e&&e[_5].split(",").forEach(r=>{const[i,a]=r.split(":");this.urlFlags[i]=E_e(i,a)})}}function $_e(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(C_e(e,r[0],r[1]),r.join("="))),e}function C_e(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function E_e(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function oe(){return VD}let VD=null;function T_e(t){VD=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eN;function Vq(){if(eN==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");eN=t}return eN}function I_e(){const t=Vq();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function WD(t,e){const n=I_e();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const ib="Abs",$m="Acos",Cm="Acosh",Af="Add",ab="AddN",p2="All",m2="Any",ob="ArgMax",sb="ArgMin",Em="Asin",Tm="Asinh",Im="Atan",Nm="Atanh",km="Atan2",lb="AvgPool",g2="AvgPoolGrad",cb="AvgPool3D",v2="AvgPool3DGrad",ub="BatchMatMul",db="BatchToSpaceND",y2="Bincount",fb="BitwiseAnd",Wq="BroadcastTo",b2="BroadcastArgs",Om="Cast",Am="Ceil",_m="ClipByValue",x2="Complex",hb="ComplexAbs",pb="Concat",mb="Conv2D",w2="Conv2DBackpropFilter",gb="Conv2DBackpropInput",vb="Conv3D",S2="Conv3DBackpropFilterV2",$2="Conv3DBackpropInputV2",Pm="Cos",Rm="Cosh",C2="Cumprod",yb="Cumsum",E2="CropAndResize",T2="DenseBincount",I2="DepthToSpace",bb="DepthwiseConv2dNative",N2="DepthwiseConv2dNativeBackpropFilter",k2="DepthwiseConv2dNativeBackpropInput",O2="Diag",xb="Dilation2D",p$="Dilation2DBackpropInput",m$="Dilation2DBackpropFilter",A2="Draw",Dm="RealDiv",_2="Einsum",Fm="Elu",P2="EluGrad",Mm="Erf",wb="Equal",Lm="Exp",Sb="ExpandDims",jm="Expm1",R2="FFT",D2="Fill",F2="FlipLeftRight",zm="Floor",Bm="FloorDiv",$b="FusedBatchNorm",Cb="GatherV2",M2="GatherNd",Eb="Greater",Vm="GreaterEqual",Wm="Identity",L2="IFFT",j2="Imag",Um="IsFinite",Hm="IsInf",Gm="IsNan",Tb="LeakyRelu",Ib="Less",Nb="LessEqual",z2="LinSpace",qm="Log",Km="Log1p",kb="LogicalAnd",Ob="LogicalNot",Ab="LogicalOr",N_e="LogicalXor",Uq="LogSoftmax",k_e="LowerBound",_b="LRN",B2="LRNGrad",O_e="MatrixBandPart",Pb="Max",Xm="Maximum",Rb="MaxPool",V2="MaxPoolGrad",Db="MaxPool3D",W2="MaxPool3DGrad",U2="MaxPoolWithArgmax",Fb="Mean",Mb="Min",Ym="Minimum",Lb="MirrorPad",Zm="Mod",H2="Multinomial",Qm="Multiply",jb="Neg",zb="NotEqual",G2="NonMaxSuppressionV3",q2="NonMaxSuppressionV4",K2="NonMaxSuppressionV5",Bb="OnesLike",Vb="OneHot",Wb="Pack",Ub="PadV2",A_e="Pool",Jm="Pow",Hb="Prelu",Gb="Prod",X2="RaggedGather",Y2="RaggedRange",Z2="RaggedTensorToTensor",Q2="Range",J2="Real",eg="Reciprocal",tg="Relu",qb="Reshape",Kb="ResizeNearestNeighbor",eE="ResizeNearestNeighborGrad",Xb="ResizeBilinear",tE="ResizeBilinearGrad",ng="Relu6",Yb="Reverse",rg="Round",ig="Rsqrt",nE="ScatterNd",rE="TensorScatterUpdate",iE="SearchSorted",Zb="Select",ag="Selu",Qb="Slice",og="Sin",sg="Sinh",lg="Sign",cg="Sigmoid",ug="Softplus",dg="Sqrt",Jb="Sum",ex="SpaceToBatchND",tx="SplitV",nx="Softmax",aE="SparseFillEmptyRows",oE="SparseReshape",sE="SparseSegmentMean",lE="SparseSegmentSum",cE="SparseToDense",fg="SquaredDifference",uE="Square",rx="StaticRegexReplace",dE="StridedSlice",fE="StringNGrams",hE="StringSplit",pE="StringToHashBucketFast",hg="Sub",pg="Tan",mg="Tanh",gg="Tile",mE="TopK",gE="Transform",jd="Transpose",vE="Unique",ix="Unpack",ax="UnsortedSegmentSum",__e="UpperBound",ox="ZerosLike",vg="Step",g$="FromPixels",yE="RotateWithOffset",c0="_FusedMatMul",u0="FusedConv2D",d0="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qa(...t){oe().getBool("IS_TEST")||oe().getBool("PROD")||console.warn(...t)}function P_e(...t){oe().getBool("IS_TEST")||oe().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lp=WD("kernelRegistry",()=>new Map),f0=WD("gradRegistry",()=>new Map);function h0(t,e){const n=UD(t,e);return Lp.get(n)}function _A(t){return f0.get(t)}function v$(t){const e=Lp.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[a,o]=i,[s]=a.split("_");s===t&&n.push(o)}return n}function bE(t){const{kernelName:e,backendName:n}=t,r=UD(e,n);Lp.has(r)&&Qa(`The kernel '${e}' for backend '${n}' is already registered`),Lp.set(r,t)}function Hq(t){const{kernelName:e}=t;f0.has(e)&&oe().getBool("DEBUG")&&Qa(`Overriding the gradient for '${e}'`),f0.set(e,t)}function R_e(t,e){const n=UD(t,e);if(!Lp.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);Lp.delete(n)}function D_e(t){if(!f0.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);f0.delete(t)}function F_e(t,e){v$(t).forEach(r=>{const i=Object.assign({},r,{backendName:e});bE(i)})}function UD(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gq(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var qq=En,Do=null;try{Do=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function En(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}En.prototype.__isLong__;Object.defineProperty(En.prototype,"__isLong__",{value:!0});function La(t){return(t&&t.__isLong__)===!0}En.isLong=La;var P5={},R5={};function _f(t,e){var n,r,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(r=R5[t],r)?r:(n=Tn(t,(t|0)<0?-1:0,!0),i&&(R5[t]=n),n)):(t|=0,(i=-128<=t&&t<128)&&(r=P5[t],r)?r:(n=Tn(t,t<0?-1:0,!1),i&&(P5[t]=n),n))}En.fromInt=_f;function Fo(t,e){if(isNaN(t))return e?kd:Mo;if(e){if(t<0)return kd;if(t>=Kq)return Zq}else{if(t<=-9223372036854776e3)return Na;if(t+1>=L_e)return Yq}return t<0?Fo(-t,e).neg():Tn(t%jp|0,t/jp|0,e)}En.fromNumber=Fo;function Tn(t,e,n){return new En(t,e,n)}En.fromBits=Tn;var y$=Math.pow;function HD(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Mo;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return HD(t.substring(1),e,n).neg();for(var i=Fo(y$(n,8)),a=Mo,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+s),n);if(s<8){var c=Fo(y$(n,s));a=a.mul(c).add(Fo(l))}else a=a.mul(i),a=a.add(Fo(l))}return a.unsigned=e,a}En.fromString=HD;function Rs(t,e){return typeof t=="number"?Fo(t,e):typeof t=="string"?HD(t,e):Tn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}En.fromValue=Rs;var D5=65536,M_e=1<<24,jp=D5*D5,Kq=jp*jp,L_e=Kq/2,F5=_f(M_e),Mo=_f(0);En.ZERO=Mo;var kd=_f(0,!0);En.UZERO=kd;var Fh=_f(1);En.ONE=Fh;var Xq=_f(1,!0);En.UONE=Xq;var PA=_f(-1);En.NEG_ONE=PA;var Yq=Tn(-1,2147483647,!1);En.MAX_VALUE=Yq;var Zq=Tn(-1,-1,!0);En.MAX_UNSIGNED_VALUE=Zq;var Na=Tn(0,-2147483648,!1);En.MIN_VALUE=Na;var De=En.prototype;De.toInt=function(){return this.unsigned?this.low>>>0:this.low};De.toNumber=function(){return this.unsigned?(this.high>>>0)*jp+(this.low>>>0):this.high*jp+(this.low>>>0)};De.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Na)){var n=Fo(e),r=this.div(n),i=r.mul(n).sub(this);return r.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var a=Fo(y$(e,6),this.unsigned),o=this,s="";;){var l=o.div(a),c=o.sub(l.mul(a)).toInt()>>>0,u=c.toString(e);if(o=l,o.isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}};De.getHighBits=function(){return this.high};De.getHighBitsUnsigned=function(){return this.high>>>0};De.getLowBits=function(){return this.low};De.getLowBitsUnsigned=function(){return this.low>>>0};De.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Na)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};De.isZero=function(){return this.high===0&&this.low===0};De.eqz=De.isZero;De.isNegative=function(){return!this.unsigned&&this.high<0};De.isPositive=function(){return this.unsigned||this.high>=0};De.isOdd=function(){return(this.low&1)===1};De.isEven=function(){return(this.low&1)===0};De.equals=function(e){return La(e)||(e=Rs(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};De.eq=De.equals;De.notEquals=function(e){return!this.eq(e)};De.neq=De.notEquals;De.ne=De.notEquals;De.lessThan=function(e){return this.comp(e)<0};De.lt=De.lessThan;De.lessThanOrEqual=function(e){return this.comp(e)<=0};De.lte=De.lessThanOrEqual;De.le=De.lessThanOrEqual;De.greaterThan=function(e){return this.comp(e)>0};De.gt=De.greaterThan;De.greaterThanOrEqual=function(e){return this.comp(e)>=0};De.gte=De.greaterThanOrEqual;De.ge=De.greaterThanOrEqual;De.compare=function(e){if(La(e)||(e=Rs(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};De.comp=De.compare;De.negate=function(){return!this.unsigned&&this.eq(Na)?Na:this.not().add(Fh)};De.neg=De.negate;De.add=function(e){La(e)||(e=Rs(e));var n=this.high>>>16,r=this.high&65535,i=this.low>>>16,a=this.low&65535,o=e.high>>>16,s=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,f=0,h=0;return h+=a+c,f+=h>>>16,h&=65535,f+=i+l,d+=f>>>16,f&=65535,d+=r+s,u+=d>>>16,d&=65535,u+=n+o,u&=65535,Tn(f<<16|h,u<<16|d,this.unsigned)};De.subtract=function(e){return La(e)||(e=Rs(e)),this.add(e.neg())};De.sub=De.subtract;De.multiply=function(e){if(this.isZero())return Mo;if(La(e)||(e=Rs(e)),Do){var n=Do.mul(this.low,this.high,e.low,e.high);return Tn(n,Do.get_high(),this.unsigned)}if(e.isZero())return Mo;if(this.eq(Na))return e.isOdd()?Na:Mo;if(e.eq(Na))return this.isOdd()?Na:Mo;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(F5)&&e.lt(F5))return Fo(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,i=this.high&65535,a=this.low>>>16,o=this.low&65535,s=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,f=0,h=0,p=0;return p+=o*u,h+=p>>>16,p&=65535,h+=a*u,f+=h>>>16,h&=65535,h+=o*c,f+=h>>>16,h&=65535,f+=i*u,d+=f>>>16,f&=65535,f+=a*c,d+=f>>>16,f&=65535,f+=o*l,d+=f>>>16,f&=65535,d+=r*u+i*c+a*l+o*s,d&=65535,Tn(h<<16|p,d<<16|f,this.unsigned)};De.mul=De.multiply;De.divide=function(e){if(La(e)||(e=Rs(e)),e.isZero())throw Error("division by zero");if(Do){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?Do.div_u:Do.div_s)(this.low,this.high,e.low,e.high);return Tn(n,Do.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?kd:Mo;var r,i,a;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return kd;if(e.gt(this.shru(1)))return Xq;a=kd}else{if(this.eq(Na)){if(e.eq(Fh)||e.eq(PA))return Na;if(e.eq(Na))return Fh;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Mo)?e.isNegative()?Fh:PA:(i=this.sub(e.mul(r)),a=r.add(i.div(e)),a)}else if(e.eq(Na))return this.unsigned?kd:Mo;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();a=Mo}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),l=s<=48?1:y$(2,s-48),c=Fo(r),u=c.mul(e);u.isNegative()||u.gt(i);)r-=l,c=Fo(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Fh),a=a.add(c),i=i.sub(u)}return a};De.div=De.divide;De.modulo=function(e){if(La(e)||(e=Rs(e)),Do){var n=(this.unsigned?Do.rem_u:Do.rem_s)(this.low,this.high,e.low,e.high);return Tn(n,Do.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};De.mod=De.modulo;De.rem=De.modulo;De.not=function(){return Tn(~this.low,~this.high,this.unsigned)};De.and=function(e){return La(e)||(e=Rs(e)),Tn(this.low&e.low,this.high&e.high,this.unsigned)};De.or=function(e){return La(e)||(e=Rs(e)),Tn(this.low|e.low,this.high|e.high,this.unsigned)};De.xor=function(e){return La(e)||(e=Rs(e)),Tn(this.low^e.low,this.high^e.high,this.unsigned)};De.shiftLeft=function(e){return La(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Tn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Tn(0,this.low<<e-32,this.unsigned)};De.shl=De.shiftLeft;De.shiftRight=function(e){return La(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Tn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Tn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};De.shr=De.shiftRight;De.shiftRightUnsigned=function(e){if(La(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Tn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Tn(n,0,this.unsigned):Tn(n>>>e-32,0,this.unsigned)};De.shru=De.shiftRightUnsigned;De.shr_u=De.shiftRightUnsigned;De.toSigned=function(){return this.unsigned?Tn(this.low,this.high,!1):this};De.toUnsigned=function(){return this.unsigned?this:Tn(this.low,this.high,!0)};De.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};De.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};De.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};En.fromBytes=function(e,n,r){return r?En.fromBytesLE(e,n):En.fromBytesBE(e,n)};En.fromBytesLE=function(e,n){return new En(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};En.fromBytesBE=function(e,n){return new En(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const Qq=Gt(qq),j_e=_P({__proto__:null,default:Qq},[qq]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const md=Qq||j_e;function sx(t){return md.fromString(t,!0,16)}const Jq=sx("c3a5c85c97cb3127"),fd=sx("b492b66fbe98f273"),ji=sx("9ae16a3b2f90404f");function RA(t){return t.xor(t.shru(47))}function eK(t,e,n){const r=t.slice(e,e+n);return md.fromBytes(Array.from(r),!0,!0)}function gn(t,e){return eK(t,e,8)}function M5(t,e){return eK(t,e,4)}function Mr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function su(t,e,n=sx("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let i=e.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function z_e(t,e,n,r,i,a){i=i.add(t),a=Mr(a.add(i).add(r),21);const o=i;return i=i.add(e),i=i.add(n),a=a.add(Mr(i,44)),[i.add(r),a.add(o)]}function D1(t,e,n,r){return z_e(gn(t,e),gn(t,e+8),gn(t,e+16),gn(t,e+24),n,r)}function B_e(t,e=t.length){if(e>=8){const n=ji.add(e*2),r=gn(t,0).add(ji),i=gn(t,e-8),a=Mr(i,37).mul(n).add(r),o=Mr(r,25).add(i).mul(n);return su(a,o,n)}if(e>=4){const n=ji.add(e*2),r=M5(t,0);return su(r.shl(3).add(e),M5(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],i=t[e-1],a=n+(r<<8),o=e+(i<<2);return RA(ji.mul(a).xor(Jq.mul(o))).mul(ji)}return ji}function V_e(t,e=t.length){const n=ji.add(e*2),r=gn(t,0).mul(fd),i=gn(t,8),a=gn(t,e-8).mul(n),o=gn(t,e-16).mul(ji);return su(Mr(r.add(i),43).add(Mr(a,30)).add(o),r.add(Mr(i.add(ji),18)).add(a),n)}function W_e(t,e=t.length){const n=ji.add(e*2),r=gn(t,0).mul(ji),i=gn(t,8),a=gn(t,e-8).mul(n),o=gn(t,e-16).mul(ji),s=Mr(r.add(i),43).add(Mr(a,30)).add(o),l=su(s,r.add(Mr(i.add(ji),18)).add(a),n),c=gn(t,16).mul(n),u=gn(t,24),d=s.add(gn(t,e-32)).mul(n),f=l.add(gn(t,e-24)).mul(n);return su(Mr(c.add(u),43).add(Mr(d,30)).add(f),c.add(Mr(u.add(r),18)).add(d),n)}function tK(t,e=t.length){const n=md.fromNumber(81,!0);if(e<=32)return e<=16?B_e(t,e):V_e(t,e);if(e<=64)return W_e(t,e);let r=n,i=n.mul(fd).add(113),a=RA(i.mul(ji).add(113)).mul(ji),o=[md.UZERO,md.UZERO],s=[md.UZERO,md.UZERO];r=r.mul(ji).add(gn(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=Mr(r.add(i).add(o[0]).add(gn(t,l+8)),37).mul(fd),i=Mr(i.add(o[1]).add(gn(t,l+48)),42).mul(fd),r=r.xor(s[1]),i=i.add(o[0]).add(gn(t,l+40)),a=Mr(a.add(s[0]),33).mul(fd),o=D1(t,l,o[1].mul(fd),r.add(s[0])),s=D1(t,l+32,a.add(s[1]),i.add(gn(t,l+16))),[a,r]=[r,a],l+=64;while(l!==c);const d=fd.add(a.and(255).shl(1));return l=u,s[0]=s[0].add(e-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=Mr(r.add(i).add(o[0]).add(gn(t,l+8)),37).mul(d),i=Mr(i.add(o[1]).add(gn(t,l+48)),42).mul(d),r=r.xor(s[1].mul(9)),i=i.add(o[0].mul(9).add(gn(t,l+40))),a=Mr(a.add(s[0]),33).mul(d),o=D1(t,l,o[1].mul(d),r.add(s[0])),s=D1(t,l+32,a.add(s[1]),i.add(gn(t,l+16))),[a,r]=[r,a],su(su(o[0],s[0],d).add(RA(i).mul(Jq)).add(a),su(o[1],s[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hc(t,e){return e==="string"?ll(t):Fu([t],e)}function U_e(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Fu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ml(t)),oe().getBool("DEBUG")&&Dq(t,e),U_e(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function Di(){return oe().platform.now()}function H_e(t,e){return oe().platform.fetch(t,e)}function ll(t,e="utf-8"){return e=e||"utf-8",oe().platform.encode(t,e)}function nc(t,e="utf-8"){return e=e||"utf-8",oe().platform.decode(t,e)}function Lr(t){return oe().platform.isTypedArray!=null?oe().platform.isTypedArray(t):Gq(t)}function ml(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||gu(t)||t==null||Lr(t)&&n)e.push(t);else if(Array.isArray(t)||Lr(t))for(let r=0;r<t.length;++r)ml(t[r],e,n);else{let r=-1;for(const i of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(i)&&(r=Math.max(r,Number(i)));for(let i=0;i<=r;i++)ml(t[i],e,n)}return e}const G_e=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:Nt,arraysEqualWithNull:Rq,assert:j,assertNonNegativeIntegerDimensions:Ma,assertNonNull:Nf,assertShapesMatch:fi,bytesFromStringArray:Mq,bytesPerElement:l0,checkConversionForErrors:Dq,clamp:pu,computeStrides:ot,convertBackendValuesAndArrayBuffer:zq,createScalarValue:hc,createShuffledIndices:S_e,decodeString:nc,distSquared:b_e,encodeString:ll,fetch:H_e,fingerPrint64:tK,flatten:ml,getArrayFromDType:qn,getTypedArrayFromDType:Vr,hasEncodingLoss:zD,hexToLong:sx,indexToLoc:Of,inferDtype:kf,inferFromImplicitShape:jD,isBoolean:Lq,isFunction:mu,isInt:nf,isNumber:f$,isPromise:gu,isScalarShape:x_e,isString:Qs,isTypedArray:Lr,isValidDtype:Fq,locToIndex:ws,makeOnesTypedArray:h2,makeZerosNestedTypedArray:BD,makeZerosTypedArray:ui,nearestDivisor:h$,nearestLargerEven:f2,now:Di,parseAxisParam:Tt,randUniform:y_e,repeatedTry:AA,rightPad:Ld,shuffle:LD,shuffleCombo:v_e,sizeFromShape:de,sizeToSquarishShape:d$,squeezeShape:fc,sum:Pq,swap:Fl,tanh:w_e,toNestedArray:lo,toTypedArray:Fu},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q_e{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new X_e)}profileKernel(e,n,r){let i;const a=()=>{i=r()};let o;const s=Di();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(a);else{a();for(const c of i)c.dataSync();o=Promise.resolve({kernelMs:Di()-s})}if(oe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<i.length;c++){const u=i[c];u.data().then(d=>{K_e(d,u.dtype,e)})}return{kernelName:e,outputs:i,inputs:n,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:i,inputs:a,extraInfo:o}=e;r.forEach(s=>{Promise.all([s.data(),i,o]).then(l=>{this.logger.logKernelProfile(n,s,l[0],l[1],a,l[2])})})}}function K_e(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const i=t[r];if(isNaN(i)||!isFinite(i))return console.warn(`Found ${i} in the result of '${n}'`),!0}return!1}class X_e{logKernelProfile(e,n,r,i,a,o){const s=typeof i=="number"?Ld(`${i}ms`,9):i.error,l=Ld(e,25),c=n.rank,u=n.size,d=Ld(n.shape.toString(),14);let f="";for(const h in a){const p=a[h];if(p!=null){const g=p.shape||n.shape,m=g.length;f+=`${h}: ${m}D ${m>0?g:""} `}}console.log(`%c${l}	%c${s}	%c${c}D ${d}	%c${u}	%c${f}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y_e(t,e,n){const r={},i={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const f=u[d];let h=!1;for(let p=0;p<e.length;p++)if(r[f.id]){c.outputs.forEach(g=>r[g.id]=!0),h=!0,i[c.id]=!0;break}if(h)break}}const a={};a[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(a[c.outputs[d].id]){for(const f in u)a[u[f].id]=!0,o[c.id]=!0;break}}const s=[];for(let l=0;l<t.length;l++){const c=t[l];if(i[c.id]&&o[c.id]){const u={};for(const f in c.inputs){const h=c.inputs[f];r[h.id]&&(u[f]=h)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,s.push(d)}}return s}function Z_e(t,e,n,r){for(let i=e.length-1;i>=0;i--){const a=e[i],o=[];if(a.outputs.forEach(l=>{const c=t[l.id];c!=null?o.push(c):o.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const s=a.gradient(o);for(const l in a.inputs){if(!(l in s))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(s)}.`);const c=n(()=>s[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=a.inputs[l];if(!Nt(c.shape,u.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L5=20,cv=3,tN=7;function Q_e(t,e,n,r){const i=ot(e),a=J_e(t,e,n,i),o=e.length,s=Cw(t,e,n,i,a),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(s.map(c=>"    "+c).join(`
`)),l.join(`
`)}function J_e(t,e,n,r){const i=de(e),a=r[r.length-1],o=new Array(a).fill(0),s=e.length,l=n==="complex64"?Av(t):t;if(s>1)for(let c=0;c<i/a;c++){const u=c*a;for(let d=0;d<a;d++)o[d]=Math.max(o[d],Ov(l[u+d],0,n).length)}return o}function Ov(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(tN))} + ${parseFloat(t[1].toFixed(tN))}j`:Qs(t)?r=`'${t}'`:n==="bool"?r=nK(t):r=parseFloat(t.toFixed(tN)).toString(),Ld(r,e)}function nK(t){return t===0?"false":"true"}function Cw(t,e,n,r,i,a=!0){const o=n==="complex64"?2:1,s=e[0],l=e.length;if(l===0){if(n==="complex64"){const g=Av(t);return[Ov(g[0],0,n)]}return n==="bool"?[nK(t[0])]:[t[0].toString()]}if(l===1){if(s>L5){const m=cv*o;let v=Array.from(t.slice(0,m)),y=Array.from(t.slice((s-cv)*o,s*o));return n==="complex64"&&(v=Av(v),y=Av(y)),["["+v.map((b,w)=>Ov(b,i[w],n)).join(", ")+", ..., "+y.map((b,w)=>Ov(b,i[s-cv+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?Av(t):Array.from(t)).map((m,v)=>Ov(m,i[v],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*o,f=[];if(s>L5){for(let g=0;g<cv;g++){const m=g*d,v=m+d;f.push(...Cw(t.slice(m,v),c,n,u,i,!1))}f.push("...");for(let g=s-cv;g<s;g++){const m=g*d,v=m+d;f.push(...Cw(t.slice(m,v),c,n,u,i,g===s-1))}}else for(let g=0;g<s;g++){const m=g*d,v=m+d;f.push(...Cw(t.slice(m,v),c,n,u,i,g===s-1))}const h=l===2?",":"";f[0]="["+(s>0?f[0]+h:"");for(let g=1;g<f.length-1;g++)f[g]=" "+f[g]+h;let p=`,
`;for(let g=2;g<l;g++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(a?"":p),f}function Av(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=de(e),r!=null){const i=r.length;j(i===this.size,()=>`Length of values '${i}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||qn(n,this.size),this.strides=ot(e)}set(e,...n){n.length===0&&(n=[0]),j(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const i of e){if(i<0||i>=this.shape[n]){const a=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(a)}n++}let r=e[e.length-1];for(let i=0;i<e.length-1;++i)r+=this.strides[i]*e[i];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return hs().makeTensor(this.values,this.shape,this.dtype)}}let hs=null,vh=null;function ePe(t){hs=t}function tPe(t){vh=t}class Zt{constructor(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=de(e),this.strides=ot(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return vh.buffer(this.shape,this.dtype,e)}bufferSync(){return vh.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return lo(this.shape,e,this.dtype==="complex64")}arraySync(){return lo(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=hs().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>nc(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),hs().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=hs().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>nc(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await hs().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),hs().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return vh.print(this,e)}clone(){return this.throwIfDisposed(),vh.clone(this)}toString(e=!1){const n=this.dataSync();return Q_e(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),vh.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),hs().makeVariable(this,e,n,r)}}Object.defineProperty(Zt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function he(){return WD("Tensor",()=>Zt)}he();class p0 extends Zt{constructor(e,n,r,i){super(e.shape,e.dtype,e.dataId,i),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Nt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);hs().disposeTensor(this),this.dataId=e.dataId,hs().incRef(this,null)}dispose(){hs().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(p0,Symbol.hasInstance,{value:t=>t instanceof Zt&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var DA;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(DA||(DA={}));var FA;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(FA||(FA={}));var MA;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(MA||(MA={}));var LA;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(LA||(LA={}));var jA;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(jA||(jA={}));const nPe={float32:LA,int32:FA,bool:MA,complex64:jA};function ca(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return nPe[t][e]}function xE(t){return ca(t,"int32")}function rK(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function iK(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wn(t,e){if(t.dtype===e.dtype)return[t,e];const n=ca(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function aK(t,e){j(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function rPe(t,e){return e.some(n=>n.id===t.id)}function GD(t){const e=[];return oK(t,e,new Set),e}function oK(t,e,n){if(t==null)return;if(t instanceof Zt){e.push(t);return}if(!iPe(t))return;const r=t;for(const i in r){const a=r[i];n.has(a)||(n.add(a),oK(a,e,n))}}function iPe(t){return Array.isArray(t)||typeof t=="object"}const aPe=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:aK,getTensorsInContainer:GD,isTensorInList:rPe,makeTypesMatch:Wn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nN(t){return t.kernelName!=null}class j5{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class zp{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new j5}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Qa(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new q_e(this.backendInstance),!0}setupRegisteredKernels(){v$(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){v$(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof d2)&&typeof r.then=="function"){const i=++this.pendingBackendInitId,a=r.then(o=>i<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(i<this.pendingBackendInitId||(this.pendingBackendInit=null,Qa(`Initialization of backend ${e} failed`),Qa(o.stack||o.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Qa(`Initialization of backend ${e} failed`),Qa(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:i,asyncInit:a}=this.initializeBackend(r);if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),i=r.backend,a=this.readSync(n),o=i.refCount(n);i.disposeData(n,!0),r.backend=e,e.move(n,a,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let i;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(i),()=>(i=n(),i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i))}scopedRun(e,n,r){e();try{const i=r();return n(),i}catch(i){throw n(),i}}nextTensorId(){return zp.nextTensorId++}nextVariableId(){return zp.nextVariableId++}clone(e){const n=K.runKernel(Wm,{x:e}),r={x:e},i=o=>({x:()=>{const s="float32",l={x:o},c={dtype:s};return K.runKernel(Om,l,c)}}),a=[];return this.addTapeNode(this.state.activeScope.name,r,[n],i,a,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(h0(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const i=this.backend.numDataIds();let a=0;r.forEach(l=>{a+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-n-a-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const i=this.isTapeOn(),a=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let s;this.backendName==null&&this.backend;let l;const c=nN(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(nN(e)){const{kernelName:p,inputs:g,attrs:m}=e;this.backendName==null&&this.backend;const v=h0(p,this.backendName);j(v!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),s=()=>{const y=this.backend.numDataIds();l=v.kernelFunc({inputs:g,attrs:m,backend:this.backend});const b=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,y,b);const w=b.map(x=>x.rank!=null?x:this.makeTensorFromTensorInfo(x));if(i){const x=this.getTensorsForGradient(p,g,w);r=this.saveTensorsForBackwardMode(x)}return w}}else{const{forwardFunc:p}=e,g=m=>{i&&(r=m.map(v=>this.keep(this.clone(v))))};s=()=>{const m=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,g));const v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,m,v),v}}const{inputs:u,attrs:d}=e,f=nN(e)?null:e.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=s():(h=this.profiler.profileKernel(c,u,()=>s()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),i&&this.addTapeNode(c,u,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(p=>u[p]!=null?u[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const i=_A(e);if(i!=null){const a=i.inputsToSave||[],o=i.outputsToSave||[];let s;i.saveAllInputs?(j(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(n).map(c=>n[c])):s=a.map(c=>n[c]);const l=r.filter((c,u)=>o[u]);return s.concat(l)}return[]}makeTensor(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;let a=e;r==="string"&&Qs(e[0])&&(a=e.map(l=>ll(l)));const o=i.write(a,n,r),s=new Zt(n,r,o,this.nextTensorId());if(this.trackTensor(s,i),r==="string"){const l=this.state.tensorInfo.get(o),c=Mq(a);this.state.numBytes+=c-l.bytes,l.bytes=c}return s}makeTensorFromDataId(e,n,r,i){r=r||"float32";const a={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(a,i)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:i,dtype:a}=e,o=new Zt(i,a,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,i){r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.cast(i));const a=new p0(e,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*l0(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof p0||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*l0(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(i=>i.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const i of this.state.activeProfile.kernels)i.kernelTimeMs=await i.kernelTimeMs,i.extraInfo=await i.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,i,a,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:a},l=_A(e);l!=null&&(i=l.gradFunc),i!=null&&(s.gradient=c=>(c=c.map((u,d)=>{if(u==null){const f=r[d],h=ui(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return u}),i(c.length>1?c:c[0],a,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=GD(e),r=new Set(n.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const o=this.state.activeScope.track[a];!o.kept&&!r.has(o.id)&&o.dispose()}const i=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(a=>{!a.kept&&a.scopeId===i.id&&this.track(a)})}gradients(e,n,r,i=!1){if(j(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));j(a instanceof Zt,()=>"The result y returned by f() must be a tensor.");const o=Y_e(this.state.activeTape,n,a);if(!i&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const s={};s[a.id]=r??oPe(a.shape),Z_e(s,o,c=>this.tidy(c),sPe);const l=n.map(c=>s[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:a,grads:l}})}customGrad(e){return j(mu(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{j(n.every(s=>s instanceof Zt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const i={};n.forEach((s,l)=>{i[l]=s});const a=(s,l)=>(r=e(...n,l),j(r.value instanceof Zt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),j(mu(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(s,l)=>{const c=r.gradFunc(s,l),u=Array.isArray(c)?c:[c];j(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),j(u.every(f=>f instanceof Zt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:a,backwardsFunc:o,inputs:i})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=Di(),r=await this.backend.time(e);return r.wallMs=Di()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new j5;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}zp.nextTensorId=0;zp.nextVariableId=0;function oPe(t){const e=h2(de(t),"float32");return K.makeTensor(e,t,"float32")}function sK(){const t=Vq();if(t._tfengine==null){const e=new Bq(t);t._tfengine=new zp(e)}return T_e(t._tfengine.ENV),ePe(()=>t._tfengine),t._tfengine}const K=sK();function sPe(t,e){const n={a:t,b:e};return K.runKernel(Af,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lPe(){return typeof navigator<"u"&&navigator!=null}let zA;function cPe(t){zA=t}function qD(t){if(zA!==void 0)return zA;if(t||lPe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function KD(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const uPe=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:KD,isMobile:qD,mockIsMobile:cPe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ua=oe();ua.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ua.registerFlag("IS_BROWSER",()=>KD());ua.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");ua.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ua.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ua.registerFlag("PROD",()=>!1);ua.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ua.getBool("DEBUG"));ua.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ua.registerFlag("IS_TEST",()=>!1);ua.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ua.getBool("DEBUG"));ua.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ua.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ua.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gl(t,e){let n=t;if(Lr(t))return e==="string"?[]:[t.length];if(rK(t)){const i=t.channels||"RGBA";return[t.height,t.width*i.length]}else if(iK(t))return[t.buffer.size/(e==null?4:l0(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Lr(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&oe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&lK(t,r,[]),r}function lK(t,e,n){if(n=n||[],!Array.isArray(t)&&!Lr(t)){j(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}j(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),j(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let i=0;i<t.length;++i)lK(t[i],r,n.concat(i))}function z5(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function z(t,e,n,r="numeric"){if(t instanceof he())return z5(r,t.dtype,e,n),t;let i=kf(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),z5(r,i,e,n),t==null||!Lr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const a=gl(t,i);!Lr(t)&&!Array.isArray(t)&&(t=[t]);const s=i!=="string"?Fu(t,i):ml(t,[],!0);return K.makeTensor(s,a,i)}function m0(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((a,o)=>z(a,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XD="__op";function Z(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+XD;const i=(...a)=>{K.startScope(n);try{const o=r(...a);return gu(o)&&console.error("Cannot return a Promise inside of tidy."),K.endScope(o),o}catch(o){throw K.endScope(null),o}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(t,e){const n=z(t,"real","complex"),r=z(e,"imag","complex");fi(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return K.runKernel(x2,i)}const rc=Z({complex_:dPe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mu(t,e,n,r){if(r==null)r=kf(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(iK(t)||rK(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return K.backend.createTensorFromGPUData(t,e||n,r)}if(!Lr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){Ma(e);const i=de(e),a=de(n);j(i===a,()=>`Based on the provided shape, [${e}], the tensor should have ${i} values but has ${a}`);for(let o=0;o<n.length;++o){const s=n[o],l=o===n.length-1?s!==de(e.slice(o)):!0;j(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Lr(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Fu(t,r):ml(t,[],!0),K.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bo(t,e,n){const r=gl(t,n);return Mu(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rf={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Ds{static join(e){return new Ds(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Lr(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const i=e[r];r!==e.length-1&&i.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=n+i.byteLength;this.shards.push({buffer:i,start:n,end:a}),n=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const i=n-e,a=new ArrayBuffer(i),o=new Uint8Array(a);let s=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+s-c.start,f=s,p=Math.min(n,c.end)-c.start,g=new Uint8Array(c.buffer,d,p-d);if(o.set(g,f),s+=g.length,n<c.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(i){return e<i.start?-1:e>=i.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=fPe(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function fPe(t,e){let n=0,r=t.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,a=e(t[i]);if(a===0)return i;a<0?r=i:n=i+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hPe(){oe().set("PROD",!0)}function pPe(){oe().set("DEBUG",!0)}function mPe(){oe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function gPe(t){oe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function vPe(){K.disposeVariables()}function os(){return K}function BA(){return K.memory()}function yPe(t){return K.profile(t)}function ae(t,e){return K.tidy(t,e)}function Et(t){GD(t).forEach(n=>n.dispose())}function Cr(t){return K.keep(t)}function bPe(t){return K.time(t)}function xPe(t){return K.setBackend(t)}function cK(){return K.ready()}function uK(){return K.backendName}function wPe(t){K.removeBackend(t)}function SPe(t){return K.findBackend(t)}function $Pe(t){return K.findBackendFactory(t)}function YD(t,e,n=1){return K.registerBackend(t,e,n)}function ZD(){return K.backend}function CPe(t,e){oe().setPlatform(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vu=4;async function VA(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<i.length;++o){const s=i[o],l=Array.isArray(t)?t[o].tensor:t[s];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${s}': ${l.dtype}`);const c={name:s,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const f=await l.bytes(),h=f.reduce((m,v)=>m+v.length,0)+vu*f.length,p=new Uint8Array(h);let g=0;for(let m=0;m<f.length;m++){const v=f[m],y=new Uint8Array(new Uint32Array([v.length]).buffer);p.set(y,g),g+=vu,p.set(v,g),g+=v.length}d(p)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const a=await Promise.all(r);return{data:IPe(a),specs:n}}function dK(t,e){const n=new Ds(t),r={};let i=0;for(const a of e){const o=EPe(a,(s,l)=>n.slice(i+s,i+l));r[a.name]=fK(a,n.slice(i,i+o)),i+=o}return r}function EPe(t,e){const n=de(t.shape);let r;if("quantization"in t){const i=t.quantization;r=rf[i.dtype]}else if(t.dtype==="string"){let i=0;for(let a=0;a<n;a++)i+=vu+new Uint32Array(e(i,i+vu))[0];return i}else r=rf[t.dtype];return n*r}async function TPe(t,e){const n=de(t.shape);let r;if("quantization"in t){const i=t.quantization;r=rf[i.dtype]}else if(t.dtype==="string"){let i=0;for(let a=0;a<n;a++)i+=vu+new Uint32Array(await e(i,i+vu))[0];return i}else r=rf[t.dtype];return n*r}function fK(t,e){const n=t.name,r=t.dtype,i=t.shape,a=de(i);let o,s=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=rf[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){o=new Float32Array(u.length);for(let d=0;d<u.length;d++){const f=u[d];o[d]=f*l.scale+l.min}}else if(l.dtype==="float16")o=PPe()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(u.length);for(let d=0;d<u.length;d++){const f=u[d];o[d]=Math.round(f*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);s+=a*c}else if(r==="string"){const l=de(t.shape);o=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(s,s+vu))[0];s+=vu;const d=new Uint8Array(e.slice(s,s+u));o.push(d),s+=u}}else{const l=rf[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const c=new Float32Array(o.length/2),u=new Float32Array(o.length/2);for(let p=0;p<c.length;p++)c[p]=o[p*2],u[p]=o[p*2+1];const d=Bo(c,i,"float32"),f=Bo(u,i,"float32"),h=rc(d,f);return d.dispose(),f.dispose(),h}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);s+=a*l}return Bo(o,i,r)}async function B5(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:i,value:a}=await t.read();if(i&&a==null){const s=n-r.byteLength;throw new Error(`Reader is done but ${s} bytes are still expected`)}const o=new Uint8Array(r.length+a.byteLength);o.set(r,0),o.set(new Uint8Array(a),r.length),r=o}return r.buffer}async function hK(t,e){const n={},r=t.getReader();let i=new ArrayBuffer(0);for(const a of e){const o=await TPe(a,async(c,u)=>(i=await B5(r,i,u),i.slice(c,u)));i=await B5(r,i,o);const s=i.slice(0,o);i=i.slice(o);const l=fK(a,s);if(n[a.name]=l,uK()==="webgpu"){const c=ZD();"uploadToGPU"in c&&de(l.shape)>=oe().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return n}function IPe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(a=>{if(e+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(a=>{r.set(new Uint8Array(a.buffer),i),i+=a.byteLength}),r.buffer}const QD=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function V5(t){return QD?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function NPe(t){if(QD)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function kPe(t){if(QD){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function pK(t){return Ds.join(t)}function W5(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function mK(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function JD(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function eF(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),JD(t,n,r)}function lx(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:V5(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:V5(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Ds(t.weightData).byteLength}}function b$(t){const e=[];for(const n of t)e.push(...n.weights);return e}function OPe(){const t=n=>{let r=n<<13,i=0;for(;!(r&8388608);)i-=8388608,r<<=1;return r&=-8388609,i+=947912704,r|i},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function APe(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function _Pe(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function PPe(){const t=OPe(),e=APe(),n=_Pe();return r=>{const i=new ArrayBuffer(4*r.length),a=new Uint32Array(i);for(let o=0;o<r.length;o++){const s=r[o],l=t[n[s>>10]+(s&1023)]+e[s>>10];a[o]=l}return new Float32Array(i)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ln{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Ln.instance==null&&(Ln.instance=new Ln),Ln.instance}static registerSaveRouter(e){Ln.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Ln.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Ln.getHandlers(e,"save")}static getLoadHandlers(e,n){return Ln.getHandlers(e,"load",n)}static getHandlers(e,n,r){const i=[];return(n==="load"?Ln.getInstance().loadRouters:Ln.getInstance().saveRouters).forEach(o=>{const s=o(e,r);s!==null&&i.push(s)}),i}}const RPe=t=>Ln.registerSaveRouter(t),DPe=t=>Ln.registerLoadRouter(t),gK=t=>Ln.getSaveHandlers(t),FPe=(t,e)=>Ln.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WA="tensorflowjs",UA=1,Od="models_store",Gc="model_info_store";function vK(){if(!oe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function HA(t){const e=t.result;e.createObjectStore(Od,{keyPath:"modelPath"}),e.createObjectStore(Gc,{keyPath:"modelPath"})}class af{constructor(e){if(this.indexedDB=vK(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,i)=>{const a=this.indexedDB.open(WA,UA);a.onupgradeneeded=()=>HA(a),a.onsuccess=()=>{const o=a.result;if(n==null){const s=o.transaction(Od,"readonly"),c=s.objectStore(Od).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),i(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(o.close(),i(c.error)),s.oncomplete=()=>o.close()}else{n.weightData=Ds.join(n.weightData);const s=lx(n),l=o.transaction(Gc,"readwrite");let c=l.objectStore(Gc),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:s})}catch(f){return i(f)}let d;u.onsuccess=()=>{d=o.transaction(Od,"readwrite");const f=d.objectStore(Od);let h;try{h=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:s})}catch(p){return i(p)}h.onsuccess=()=>r({modelArtifactsInfo:s}),h.onerror=p=>{c=l.objectStore(Gc);const g=c.delete(this.modelPath);g.onsuccess=()=>(o.close(),i(h.error)),g.onerror=m=>(o.close(),i(h.error))}},u.onerror=f=>(o.close(),i(u.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},a.onerror=o=>i(a.error)})}}af.URL_SCHEME="indexeddb://";const yK=t=>oe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(af.URL_SCHEME)?MPe(t.slice(af.URL_SCHEME.length)):null;Ln.registerSaveRouter(yK);Ln.registerLoadRouter(yK);function MPe(t){return new af(t)}function LPe(t){return t.startsWith(af.URL_SCHEME)?t.slice(af.URL_SCHEME.length):t}class jPe{constructor(){this.indexedDB=vK()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(WA,UA);r.onupgradeneeded=()=>HA(r),r.onsuccess=()=>{const i=r.result,a=i.transaction(Gc,"readonly"),s=a.objectStore(Gc).getAll();s.onsuccess=()=>{const l={};for(const c of s.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},s.onerror=l=>(i.close(),n(s.error)),a.oncomplete=()=>i.close()},r.onerror=i=>n(r.error)})}async removeModel(e){return e=LPe(e),new Promise((n,r)=>{const i=this.indexedDB.open(WA,UA);i.onupgradeneeded=()=>HA(i),i.onsuccess=()=>{const a=i.result,o=a.transaction(Gc,"readwrite"),s=o.objectStore(Gc),l=s.get(e);let c;l.onsuccess=()=>{if(l.result==null)return a.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=s.delete(e),d=()=>{c=a.transaction(Od,"readwrite");const h=c.objectStore(Od).delete(e);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>r(l.error)};u.onsuccess=d,u.onerror=f=>(d(),a.close(),r(l.error))}},l.onerror=u=>(a.close(),r(l.error)),o.oncomplete=()=>{c==null?a.close():c.oncomplete=()=>a.close()}},i.onerror=a=>r(i.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ml="/",yh="tensorflowjs_models",bK="info",zPe="model_topology",BPe="weight_specs",VPe="weight_data",WPe="model_metadata";function xK(t){return{info:[yh,t,bK].join(Ml),topology:[yh,t,zPe].join(Ml),weightSpecs:[yh,t,BPe].join(Ml),weightData:[yh,t,VPe].join(Ml),modelMetadata:[yh,t,WPe].join(Ml)}}function wK(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function UPe(t){const e=t.split(Ml);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Ml)}function HPe(t){return t.startsWith(of.URL_SCHEME)?t.slice(of.URL_SCHEME.length):t}class of{constructor(e){if(!oe().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=xK(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=lx(e),a=Ds.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,NPe(a));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:i}}catch{throw wK(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${i.modelTopologyBytes}, weightSpecsBytes=${i.weightSpecsBytes}, weightDataBytes=${i.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const i=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(i==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=i;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const s=JSON.parse(a);n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy,s.signature!=null&&(n.signature=s.signature),s.userDefinedMetadata!=null&&(n.userDefinedMetadata=s.userDefinedMetadata),s.modelInitializer!=null&&(n.modelInitializer=s.modelInitializer),s.initializerSignature!=null&&(n.initializerSignature=s.initializerSignature),s.trainingConfig!=null&&(n.trainingConfig=s.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=kPe(o),n}}of.URL_SCHEME="localstorage://";const SK=t=>oe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(of.URL_SCHEME)?GPe(t.slice(of.URL_SCHEME.length)):null;Ln.registerSaveRouter(SK);Ln.registerLoadRouter(SK);function GPe(t){return new of(t)}class qPe{constructor(){j(oe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),j(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=yh+Ml,r=Ml+bK;for(let i=0;i<this.LS.length;++i){const a=this.LS.key(i);if(a.startsWith(n)&&a.endsWith(r)){const o=UPe(a);e[o]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=HPe(e);const n=xK(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return wK(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yh="://";class Fi{constructor(){this.managers={}}static getInstance(){return Fi.instance==null&&(Fi.instance=new Fi),Fi.instance}static registerManager(e,n){j(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(Yh)&&(e=e.slice(0,e.indexOf(Yh))),j(e.length>0,()=>"scheme must not be an empty string.");const r=Fi.getInstance();j(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Fi.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Fi.getInstance().managers)}}function Ew(t){if(t.indexOf(Yh)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Fi.getSchemes().join(",")}`);return{scheme:t.split(Yh)[0],path:t.split(Yh)[1]}}async function $K(t,e,n=!1){j(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Ln.getLoadHandlers(t);j(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),j(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const i=r[0],a=Ln.getSaveHandlers(e);j(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),j(a.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=a[0],s=Ew(t).scheme,l=Ew(t).path,c=s===Ew(t).scheme,u=await i.load();n&&c&&await Fi.getManager(s).removeModel(l);const d=await o.save(u);return n&&!c&&await Fi.getManager(s).removeModel(l),d.modelArtifactsInfo}async function KPe(){const t=Fi.getSchemes(),e={};for(const n of t){const r=await Fi.getManager(n).listModels();for(const i in r){const a=n+Yh+i;e[a]=r[i]}}return e}async function XPe(t){const e=Ew(t);return Fi.getManager(e.scheme).removeModel(e.path)}async function YPe(t,e){return $K(t,e,!1)}async function ZPe(t,e){return $K(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QPe{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!oe().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const i=this.functionRefs[r.data.index];i(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return Gq(e)}}if(oe().get("IS_BROWSER")){oe().setPlatform("browser",new QPe);try{Fi.registerManager(of.URL_SCHEME,new qPe)}catch{}try{Fi.registerManager(af.URL_SCHEME,new jPe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JPe={importFetch:()=>require("node-fetch")};let rN;class eRe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return oe().global.fetch!=null?oe().global.fetch(e,n):(rN==null&&(rN=JPe.importFetch()),rN(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}oe().get("IS_NODE")&&!oe().get("IS_BROWSER")&&oe().setPlatform("node",new eRe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wt(t,e="float32",n){return e=e||"float32",Ma(t),new pr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tRe(t,e){const n=z(t,"x","cast");if(!Fq(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:e};return K.runKernel(Om,r,i)}const _e=Z({cast_:tRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nRe(t){const n={x:z(t,"x","clone","string_or_numeric")};return K.runKernel(Wm,n)}const cl=Z({clone_:nRe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tF(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */sK();const rRe={buffer:wt,cast:_e,clone:cl,print:tF};tPe(rRe);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iRe(t,e){let n=z(t,"a","add"),r=z(e,"b","add");[n,r]=Wn(n,r);const i={a:n,b:r};return K.runKernel(Af,i)}const Ee=Z({add_:iRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRe(t,e){let n=z(t,"a","floorDiv"),r=z(e,"b","floorDiv");[n,r]=Wn(n,r);const i={a:n,b:r};return K.runKernel(Bm,i)}const wE=Z({floorDiv_:aRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oRe(t,e){let n=z(t,"a","div"),r=z(e,"b","div");if([n,r]=Wn(n,r),n.dtype==="int32"&&r.dtype==="int32")return wE(n,r);const i={a:n,b:r},a={};return K.runKernel(Dm,i,a)}const nt=Z({div_:oRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sRe(t,e){let n=z(t,"a","mul"),r=z(e,"b","mul");[n,r]=Wn(n,r);const i={a:n,b:r};return K.runKernel(Qm,i)}const J=Z({mul_:sRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRe(t){const e=z(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return K.runKernel(hb,n)}else{const n={x:e};return K.runKernel(ib,n)}}const cr=Z({abs_:lRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(t){const n={x:z(t,"x","acos")};return K.runKernel($m,n)}const nF=Z({acos_:cRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uRe(t){const n={x:z(t,"x","acosh")};return K.runKernel(Cm,n)}const rF=Z({acosh_:uRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dRe(t){j(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),j(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((i,a)=>z(i,`tensors${a}`,"addN")),n=e[0];e.forEach(i=>{if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(i=>{if(!Nt(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return K.runKernel(ab,r)}const CK=Z({addN_:dRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fRe(t,e=null,n=!1){const i={x:z(t,"x","all","bool")},a={axis:e,keepDims:n};return K.runKernel(p2,i,a)}const SE=Z({all_:fRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRe(t,e=null,n=!1){const i={x:z(t,"x","any","bool")},a={axis:e,keepDims:n};return K.runKernel(m2,i,a)}const g0=Z({any_:hRe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pRe(t,e=0){const r={x:z(t,"x","argMax")},i={axis:e};return K.runKernel(ob,r,i)}const sf=Z({argMax_:pRe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mRe(t,e=0){const r={x:z(t,"x","argMin")},i={axis:e};return K.runKernel(sb,r,i)}const iF=Z({argMin_:mRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gRe(t){const n={x:z(t,"x","asin")};return K.runKernel(Em,n)}const aF=Z({asin_:gRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vRe(t){const n={x:z(t,"x","asinh")};return K.runKernel(Tm,n)}const oF=Z({asinh_:vRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yRe(t){const n={x:z(t,"x","atan")};return K.runKernel(Im,n)}const sF=Z({atan_:yRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bRe(t,e){let n=z(t,"a","atan2"),r=z(e,"b","atan2");[n,r]=Wn(n,r);const i={a:n,b:r};return K.runKernel(km,i)}const lF=Z({atan2_:bRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xRe(t){const n={x:z(t,"x","atanh")};return K.runKernel(Nm,n)}const cF=Z({atanh_:xRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cx(t,e,n,r,i="NHWC",a){const o=t[3],s=[...e,o],l=mc(i);return Gr(t,s,n,a,r,null,null,l)}function Yo(t,e,n,r,i,a,o="channelsLast"){const[s,l]=v0(e);let c;if(o==="channelsLast")c=[s,l,t[3],t[3]];else if(o==="channelsFirst")c=[s,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Gr(t,c,n,r,i,a,!1,o)}function pc(t,e,n,r,i,a,o="NDHWC"){const[s,l,c]=GA(e);let u,d;if(o==="NDHWC")d="channelsLast",u=[s,l,c,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",u=[s,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Lu(t,u,n,r,i,!1,d,a)}function Gr(t,e,n,r,i,a,o=!1,s="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(s==="channelsLast")[l,c,u,d]=t;else if(s==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${s}`);const[f,h,,p]=e,[g,m]=v0(n),[v,y]=v0(r),b=Zh(f,v),w=Zh(h,y),{padInfo:x,outHeight:$,outWidth:C}=$Re(i,c,u,g,m,b,w,a,s),E=o?p*d:p;let I;return s==="channelsFirst"?I=[l,E,$,C]:s==="channelsLast"&&(I=[l,$,C,E]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:u,inChannels:d,outHeight:$,outWidth:C,outChannels:E,padInfo:x,strideHeight:g,strideWidth:m,filterHeight:f,filterWidth:h,effectiveFilterHeight:b,effectiveFilterWidth:w,dilationHeight:v,dilationWidth:y,inShape:t,outShape:I,filterShape:e}}function Lu(t,e,n,r,i,a=!1,o="channelsLast",s){let[l,c,u,d,f]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d,f]=t;else if(o==="channelsFirst")[l,f,c,u,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[h,p,g,,m]=e,[v,y,b]=GA(n),[w,x,$]=GA(r),C=Zh(h,w),E=Zh(p,x),I=Zh(g,$),{padInfo:T,outDepth:N,outHeight:k,outWidth:O}=CRe(i,c,u,d,v,y,b,C,E,I,s),_=a?m*f:m;let P;return o==="channelsFirst"?P=[l,_,N,k,O]:o==="channelsLast"&&(P=[l,N,k,O,_]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:d,inChannels:f,outDepth:N,outHeight:k,outWidth:O,outChannels:_,padInfo:T,strideDepth:v,strideHeight:y,strideWidth:b,filterDepth:h,filterHeight:p,filterWidth:g,effectiveFilterDepth:C,effectiveFilterHeight:E,effectiveFilterWidth:I,dilationDepth:w,dilationHeight:x,dilationWidth:$,inShape:t,outShape:P,filterShape:e}}function wRe(t,e,n,r,i){r==null&&(r=uF(t,e,n));const a=t[0],o=t[1],s=y0((a-e+2*r)/n+1,i),l=y0((o-e+2*r)/n+1,i);return[s,l]}function SRe(t,e,n,r,i,a){i==null&&(i=uF(t,e[0],r[0]));const o=[0,0,0,n];for(let s=0;s<3;s++)t[s]+2*i>=e[s]&&(o[s]=y0((t[s]-e[s]+2*i)/r[s]+1,a));return o}function uF(t,e,n,r=1){const i=Zh(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function v0(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function GA(t){return typeof t=="number"?[t,t,t]:t}function Zh(t,e){return e<=1?t:t+(t-1)*(e-1)}function $Re(t,e,n,r,i,a,o,s,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const h=wRe([e,n],a,r,t,s);u=h[0],d=h[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/i);const f=Math.max(0,(u-1)*r+a-e),h=Math.max(0,(d-1)*i+o-n),p=Math.floor(f/2),g=f-p,m=Math.floor(h/2),v=h-m;c={top:p,bottom:g,left:m,right:v,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-a+1)/r),d=Math.ceil((n-o+1)/i);else if(typeof t=="object"){const f=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],g=l==="channelsLast"?t[2][1]:t[3][1];c={top:f,bottom:h,left:p,right:g,type:f===0&&h===0&&p===0&&g===0?"VALID":"EXPLICIT"},u=y0((e-a+f+h)/r+1,s),d=y0((n-o+p+g)/i+1,s)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function CRe(t,e,n,r,i,a,o,s,l,c,u){let d,f,h,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const m=SRe([e,n,r,1],[s,l,c],1,[i,a,o],t,u);f=m[0],h=m[1],p=m[2]}else if(t==="same"){f=Math.ceil(e/i),h=Math.ceil(n/a),p=Math.ceil(r/o);const g=(f-1)*i+s-e,m=(h-1)*a+l-n,v=(p-1)*o+c-r,y=Math.floor(g/2),b=g-y,w=Math.floor(m/2),x=m-w,$=Math.floor(v/2),C=v-$;d={top:w,bottom:x,left:$,right:C,front:y,back:b,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function y0(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function yu(t){const[e,n,r]=v0(t);return e===1&&n===1&&r===1}function hi(t,e){return yu(t)||yu(e)}function lf(t){return v0(t).every(e=>e>0)}function mc(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Gi(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")j(nf(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(i=>{j(nf(i),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${i}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ERe(t,e){const r={x:z(t,"x","reshape","string_or_numeric")},i={shape:e};return K.runKernel(qb,r,i)}const te=Z({reshape_:ERe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TRe(t,e,n,r,i){const a=z(t,"x","avgPool","float32"),o=1;j(hi(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let s=a,l=!1;a.rank===3&&(l=!0,s=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),j(s.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`),Gi("avgPool",r,i);const c={x:s},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i};let d=K.runKernel(lb,c,u);return d=_e(d,a.dtype),l?te(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const ux=Z({avgPool_:TRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IRe(t,e,n,r,i,a="NDHWC"){const o=z(t,"x","avgPool3d","float32");let s=o,l=!1;o.rank===4&&(l=!0,s=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),j(s.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),j(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),j(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Gi("avgPool3d",r,i);const c={x:s},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:a};let d=K.runKernel(cb,c,u);return d=_e(d,s.dtype),l?te(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const dF=Z({avgPool3d_:IRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NRe(t,e=0){j(t.length>=1,()=>"Pass at least one tensor to concat");const n=m0(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),n.length===1)return cl(n[0]);const r=n,i={axis:e};return K.runKernel(pb,r,i)}const tr=Z({concat_:NRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kRe(t,e,n=!1,r=!1){let i=z(t,"a","matMul"),a=z(e,"b","matMul");[i,a]=Wn(i,a);const o={a:i,b:a},s={transposeA:n,transposeB:r};return K.runKernel(ub,o,s)}const Ct=Z({matMul_:kRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ORe(t){const n={x:z(t,"x","sigmoid","float32")};return K.runKernel(cg,n)}const Ss=Z({sigmoid_:ORe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ARe(t,e,n){const r=z(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const i={x:r},a={begin:e,size:n};return K.runKernel(Qb,i,a)}const At=Z({slice_:ARe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Re(t){const n={x:z(t,"x","tanh","float32")};return K.runKernel(mg,n)}const bu=Z({tanh_:_Re});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PRe(t,e,n,r,i,a){const o=z(t,"forgetBias","basicLSTMCell"),s=z(e,"lstmKernel","basicLSTMCell"),l=z(n,"lstmBias","basicLSTMCell"),c=z(r,"data","basicLSTMCell"),u=z(i,"c","basicLSTMCell"),d=z(a,"h","basicLSTMCell"),f=tr([c,d],1),h=Ct(f,s),p=Ee(h,l),g=p.shape[0],m=p.shape[1]/4,v=[g,m],y=At(p,[0,0],v),b=At(p,[0,m],v),w=At(p,[0,m*2],v),x=At(p,[0,m*3],v),$=Ee(J(Ss(y),bu(b)),J(u,Ss(Ee(o,w)))),C=J(bu($),Ss(x));return[$,C]}const EK=Z({basicLSTMCell_:PRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RRe(t,e,n){const r=z(t,"x","batchToSpaceND"),i=e.reduce((s,l)=>s*l);j(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),j(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),j(r.shape[0]%i===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${i}`);const a={x:r},o={blockShape:e,crops:n};return K.runKernel(db,a,o)}const dx=Z({batchToSpaceND_:RRe});function DRe(t){let e;return t.rank===0||t.rank===1?e=te(t,[1,1,1,t.size]):t.rank===2?e=te(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=te(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FRe(t,e,n,r,i,a){a==null&&(a=.001);const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let c;i!=null&&(c=z(i,"scale","batchNorm"));let u;r!=null&&(u=z(r,"offset","batchNorm")),j(s.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),j(u==null||s.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),j(c==null||s.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:DRe(o),scale:c,offset:u,mean:s,variance:l},h={varianceEpsilon:a},p=K.runKernel($b,f,h);return te(p,o.shape)}const yg=Z({batchNorm_:FRe});function MRe(t,e,n,r,i,a){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let c;i!=null&&(c=z(i,"scale","batchNorm"));let u;return r!=null&&(u=z(r,"offset","batchNorm")),j(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),j(s.rank===2||s.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${s.rank}.`),j(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&j(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&j(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),yg(o,s,l,u,c,a)}const fF=Z({batchNorm2d_:MRe});function LRe(t,e,n,r,i,a){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let c;i!=null&&(c=z(i,"scale","batchNorm"));let u;return r!=null&&(u=z(r,"offset","batchNorm")),j(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),j(s.rank===3||s.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${s.rank}.`),j(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&j(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&j(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),yg(o,s,l,u,c,a)}const hF=Z({batchNorm3d_:LRe});function jRe(t,e,n,r,i,a){const o=z(t,"x","batchNorm"),s=z(e,"mean","batchNorm"),l=z(n,"variance","batchNorm");let c;i!=null&&(c=z(i,"scale","batchNorm"));let u;return r!=null&&(u=z(r,"offset","batchNorm")),j(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),j(s.rank===4||s.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${s.rank}.`),j(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&j(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&j(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),yg(o,s,l,u,c,a)}const pF=Z({batchNorm4d_:jRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zRe(t,e,n){const r=z(t,"x","bincount"),i=z(e,"weights","bincount");j(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),j(n>=0,()=>`size must be non-negative, but got ${n}.`),j(i.size===r.size||i.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);const a={x:r,weights:i},o={size:n};return K.runKernel(y2,a,o)}const mF=Z({bincount_:zRe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BRe(t,e){const n=z(t,"x","bitwiseAnd"),r=z(e,"y","bitwiseAnd");if(!Nt(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const i={a:n,b:r};return K.runKernel(fb,i)}const TK=Z({bitwiseAnd_:BRe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VRe(t,e){const n=z(t,"s0","broadcastArgs","int32"),r=z(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const i={s0:n,s1:r};return K.runKernel(b2,i)}const IK=Z({broadcastArgs_:VRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WRe(t,e){let n=z(t,"broadcastTo","x");const r=n.shape;if(Ma(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=te(n,c)}const i=n.shape,a=Array.from(e);for(let c=e.length-1;c>=0;c--)if(i[c]===e[c])a[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(a.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return cl(n);const s={x:n},l={reps:a};return K.runKernel(gg,s,l)}const zd=Z({broadcastTo_:WRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function URe(t){const n={x:z(t,"x","ceil","float32")};return K.runKernel(Am,n)}const gF=Z({ceil_:URe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pf(t,e,n){Ma(t),n=n||kf(e);const r={shape:t,value:e,dtype:n};return K.runKernel(D2,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HRe(t,e,n){const r=z(t,"x","clipByValue");if(j(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Pf(r.shape,e,r.dtype);const i={x:r},a={clipValueMin:e,clipValueMax:n};return K.runKernel(_m,i,a)}const da=Z({clipByValue_:HRe});function GRe(t){return tr(t,0)}const vF=Z({concat1d_:GRe});function qRe(t,e){return tr(t,e)}const yF=Z({concat2d_:qRe});function KRe(t,e){return tr(t,e)}const bF=Z({concat3d_:KRe});function XRe(t,e){return tr(t,e)}const xF=Z({concat4d_:XRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YRe(t,e,n,r,i="NHWC",a=[1,1],o){const s=z(t,"x","conv2d","float32"),l=z(e,"filter","conv2d","float32");let c=s,u=!1;s.rank===3&&(u=!0,c=te(s,[1,s.shape[0],s.shape[1],s.shape[2]])),j(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),j(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Gi("conv2d",r,o);const d=i==="NHWC"?c.shape[3]:c.shape[1];j(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),j(hi(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),j(lf(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),j(lf(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:c,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o},p=K.runKernel(mb,f,h);return u?te(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const ic=Z({conv2d_:YRe});function ZRe(t,e,n,r,i="NWC",a=1,o){const s=z(t,"x","conv1d"),l=z(e,"filter","conv1d");let c=s,u=!1;s.rank===2&&(u=!0,c=te(s,[1,s.shape[0],s.shape[1]])),j(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),j(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Gi("conv1d",r,o),j(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),j(hi(n,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${a}'`),j(lf(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),j(lf(n),()=>"Error in conv1D: Stride should be larger than 0."),j(i==="NWC",()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const d=te(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=te(c,[c.shape[0],1,c.shape[1],c.shape[2]]),m=ic(f,d,[1,n],r,"NHWC",[1,a],o);return u?te(m,[m.shape[2],m.shape[3]]):te(m,[m.shape[0],m.shape[2],m.shape[3]])}const $E=Z({conv1d_:ZRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QRe(t,e,n,r,i,a="NHWC",o){j(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let s=t,l=e,c=!1;e.rank===3&&(c=!0,l=te(e,[1,e.shape[0],e.shape[1],e.shape[2]]),s=[1,t[0],t[1],t[2]]),j(s.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),j(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),j(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=a==="NHWC"?s[3]:s[1],d=a==="NHWC"?l.shape[3]:l.shape[1];j(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),j(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Gi("conv2dDerInput",i,o);const f={dy:l,filter:n},h={strides:r,pad:i,dataFormat:a,dimRoundingMode:o,inputShape:s},p=K.runKernel(gb,f,h);return c?te(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const wF=Z({conv2DBackpropInput_:QRe});function JRe(t,e,n,r,i,a){const o=z(t,"x","conv2dTranspose"),s=z(e,"filter","conv2dTranspose");return wF(n,o,s,r,i,"NHWC",a)}const CE=Z({conv2dTranspose_:JRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eDe(t,e,n,r,i="NDHWC",a=[1,1,1]){const o=z(t,"x","conv3d"),s=z(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),j(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),j(s.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),j(l.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`),j(hi(n,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),j(i==="NDHWC",()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),j(lf(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),j(lf(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:s},d={strides:n,pad:r,dataFormat:i,dilations:a},f=K.runKernel(vb,u,d);return c?te(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const SF=Z({conv3d_:eDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tDe(t,e,n,r,i){j(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,o=e,s=!1;e.rank===4&&(s=!0,o=te(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),a=[1,t[0],t[1],t[2],t[3]]);const l=a[4],c=o.shape[4];j(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),j(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),j(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),j(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),j(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:o,filter:n},d={pad:i,strides:r,inputShape:a},f=K.runKernel($2,u,d);return s?te(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const NK=Z({conv3DBackpropInput_:tDe});function nDe(t,e,n,r,i){const a=z(t,"x","conv3dTranspose"),o=z(e,"filter","conv3dTranspose");return NK(n,a,o,r,i)}const $F=Z({conv3dTranspose_:nDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rDe(t){const n={x:z(t,"x","cos","float32")};return K.runKernel(Pm,n)}const fx=Z({cos_:rDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDe(t){const n={x:z(t,"x","cosh","float32")};return K.runKernel(Rm,n)}const EE=Z({cosh_:iDe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aDe(t,e=0,n=!1,r=!1){const a={x:z(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return K.runKernel(C2,a,o)}const b0=Z({cumprod_:aDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oDe(t,e=0,n=!1,r=!1){const a={x:z(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return K.runKernel(yb,a,o)}const TE=Z({cumsum_:oDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sDe(t,e,n,r=!1){const i=z(t,"x","denseBincount"),a=z(e,"weights","denseBincount");j(i.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${i.dtype}`),j(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),j(n>=0,()=>`size must be non-negative, but got ${n}.`),j(a.size===i.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${a.shape}.`);const o={x:i,weights:a},s={size:n,binaryOutput:r};return K.runKernel(T2,o,s)}const x$=Z({denseBincount_:sDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDe(t,e,n="NHWC"){const r=z(t,"x","depthToSpace","float32"),i=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];j(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),j(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e}  for depthToSpace with input shape
    ${r.shape}`),j(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e} for depthToSpace with input shape
        ${r.shape}`),j(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const s={x:r},l={blockSize:e,dataFormat:n};return K.runKernel(I2,s,l)}const CF=Z({depthToSpace_:lDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cDe(t,e,n,r,i="NHWC",a=[1,1],o){const s=z(t,"x","depthwiseConv2d","float32"),l=z(e,"filter","depthwiseConv2d","float32");let c=s,u=!1;s.rank===3&&(u=!0,c=te(s,[1,s.shape[0],s.shape[1],s.shape[2]])),j(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),j(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=i==="NHWC"?c.shape[3]:c.shape[1];j(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Gi("depthwiseConv2d",r,o);const f={x:c,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o},p=K.runKernel(bb,f,h);return u?te(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const bg=Z({depthwiseConv2d_:cDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uDe(t){const n={x:z(t,"x","diag")};return K.runKernel(O2,n)}const kK=Z({diag_:uDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dDe(t,e,n,r,i=[1,1],a="NHWC"){const o=z(t,"x","dilation2d"),s=z(e,"filter","dilation2d");j(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),j(s.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),j(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let l=o,c=!1;o.rank===3&&(l=te(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),j(l.shape[3]===s.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${s.shape[2]}`);const u={x:l,filter:s},d={strides:n,pad:r,dilations:i},f=K.runKernel(xb,u,d);return c?te(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const EF=Z({dilation2d_:dDe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cf(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const a=n-1-i,o=t[a]||1;(e[e.length-1-i]||1)>1&&o===1&&r.unshift(a)}return r}function mr(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],a=e.length-r-1,o=e[a];(i==null||i===1&&o>1)&&n.unshift(a)}return n}function bt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let i=0;i<n;i++){let a=t[t.length-i-1];a==null&&(a=1);let o=e[e.length-i-1];if(o==null&&(o=1),a===1)r[n-i-1]=o;else if(o===1)r[n-i-1]=a;else if(a!==o){const s=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(s)}else r[n-i-1]=a}return r}const fDe=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:bt,getBroadcastDims:cf,getReductionAxes:mr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hDe(t,e){let n=z(t,"a","equal","string_or_numeric"),r=z(e,"b","equal","string_or_numeric");[n,r]=Wn(n,r),bt(n.shape,r.shape);const i={a:n,b:r};return K.runKernel(wb,i)}const Go=Z({equal_:hDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(t,e,n){const r=z(e,"a","where"),i=z(n,"b","where"),a=z(t,"condition","where","bool"),o=bt(bt(a.shape,r.shape),i.shape),s=zd(a,o),l=zd(r,o),c=zd(i,o),u={condition:s,t:l,e:c};return K.runKernel(Zb,u)}const li=Z({where_:pDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mDe(t){const n={x:z(t,"x","zerosLike")};return K.runKernel(ox,n)}const Pt=Z({zerosLike_:mDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDe(t,e){let n=z(t,"a","div"),r=z(e,"b","div");[n,r]=Wn(n,r);const i=nt(n,r),a=Pt(i),o=Go(r,a);return li(o,a,i)}const TF=Z({divNoNan_:gDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vDe(t,e){const n=z(t,"t1","dot"),r=z(e,"t2","dot");j((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const i=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];if(j(i===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${a}.`),n.rank===1&&r.rank===1){const o=te(n,[1,-1]),s=te(r,[-1,1]),l=Ct(o,s);return te(l,[])}else if(n.rank===1&&r.rank===2){const o=te(n,[1,-1]),s=te(r,[r.shape[0],r.shape[1]]),l=Ct(o,s);return te(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=te(r,[-1,1]),s=Ct(n,o);return te(s,[s.size])}else{const o=te(r,[r.shape[0],r.shape[1]]);return Ct(n,o)}}const IF=Z({dot_:vDe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yDe(t,...e){const n=e.map((i,a)=>z(i,`tensors${a}`,"einsum")),r={equation:t};return K.runKernel(_2,n,r)}const gd=Z({einsum_:yDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bDe(t){const n={x:z(t,"x","elu","float32")};return K.runKernel(Fm,n)}const xg=Z({elu_:bDe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xDe(t,e){const n=z(t,"x","ensureShape","string_or_numeric");if(!Rq(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const OK=Z({ensureShape_:xDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wDe(t){let e=z(t,"x","erf");j(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=_e(e,"float32"));const n={x:e};return K.runKernel(Mm,n)}const IE=Z({erf_:wDe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NF(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function AK(t,e,n){const r=t.length+e.length,i=[];let a=0,o=0;for(let s=0;s<r;s++)n.indexOf(s)===-1?i.push(t[a++]):i.push(e[o++]);return i}function qr(t,e){const n=[],r=t.length;for(let a=0;a<r;a++)e.indexOf(a)===-1&&n.push(t[a]);const i=e.map(a=>t[a]);return[n,i]}function nr(t,e){const n=e.map(r=>1);return AK(t,n,e)}function pi(t,e,n){j(NF(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Un(t,e){if(NF(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function ju(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function rr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SDe(t,e=null,n=!1){const i={x:z(t,"x","max")},a={reductionIndices:e,keepDims:n};return K.runKernel(Pb,i,a)}const co=Z({max_:SDe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $De(t,e=null,n=!1){const i={x:z(t,"x","min")},a={axis:e,keepDims:n};return K.runKernel(Mb,i,a)}const Bp=Z({min_:$De});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CDe(t,e){let n=z(t,"base","pow"),r=z(e,"exp","pow");[n,r]=Wn(n,r);const i={a:n,b:r};return K.runKernel(Jm,i)}const vl=Z({pow_:CDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ct(t,e){if((Lr(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Lr(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Mu(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EDe(t){const n={x:z(t,"x","sqrt","float32")};return K.runKernel(dg,n)}const Wr=Z({sqrt_:EDe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TDe(t){const e=z(t,"x","square"),n={};return K.runKernel("Square",{x:e},n)}const rn=Z({square_:TDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IDe(t,e=null,n=!1){let r=z(t,"x","sum");r.dtype==="bool"&&(r=_e(r,"int32"));const i={x:r},a={axis:e,keepDims:n};return K.runKernel(Jb,i,a)}const qe=Z({sum_:IDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NDe(t,e="euclidean",n=null,r=!1){t=z(t,"x","norm");const i=_K(t,e,n);let a=i.shape;if(r){const o=Tt(n,t.shape);a=nr(i.shape,o)}return te(i,a)}function _K(t,e,n=null){if(t.rank===0)return cr(t);if(t.rank!==1&&n===null)return _K(te(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return qe(cr(t),n);if(e===1/0)return co(cr(t),n);if(e===-1/0)return Bp(cr(t),n);if(e==="euclidean"||e===2)return Wr(qe(vl(cr(t),ct(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return co(qe(cr(t),n[0]),n[1]-1);if(e===1/0)return co(qe(cr(t),n[1]),n[0]);if(e===-1/0)return Bp(qe(cr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Wr(qe(rn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const wg=Z({norm_:NDe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kDe(t,e=null,n=!1){return wg(t,"euclidean",e,n)}const kF=Z({euclideanNorm_:kDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ODe(t){const n={x:z(t,"x","exp")};return K.runKernel(Lm,n)}const fa=Z({exp_:ODe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ADe(t,e=0){const n=z(t,"x","expandDims","string_or_numeric");j(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},i={dim:e};return K.runKernel(Sb,r,i)}const Si=Z({expandDims_:ADe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _De(t){const n={x:z(t,"x","expm1")};return K.runKernel(jm,n)}const OF=Z({expm1_:_De});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(t,e){const n=z(t,"x","tile","string_or_numeric");j(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},i={reps:e};return K.runKernel(gg,r,i)}const to=Z({tile_:PDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RDe(t,e,n,r="float32"){e==null&&(e=t);const i=wt([t,e],r),a=t<=e?t:e;for(let s=0;s<a;++s)i.set(1,s,s);const o=te(i.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return to(Si(o,0),[n[0],1,1]);if(n.length===2)return to(Si(Si(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return to(Si(Si(Si(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const NE=Z({eye_:RDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DDe(t){const n={x:z(t,"x","floor","float32")};return K.runKernel(zm,n)}const Sg=Z({floor_:DDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(t,e,n=0,r=0){const i=z(t,"x","gather"),a=z(e,"indices","gather","int32"),o={x:i,indices:a},s={axis:n,batchDims:r};return K.runKernel(Cb,o,s)}const $g=Z({gather_:FDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MDe(t,e){let n=z(t,"a","greater","string_or_numeric"),r=z(e,"b","greater","string_or_numeric");[n,r]=Wn(n,r),bt(n.shape,r.shape);const i={a:n,b:r};return K.runKernel(Eb,i)}const ya=Z({greater_:MDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LDe(t,e){let n=z(t,"a","greaterEqual","string_or_numeric"),r=z(e,"b","greaterEqual","string_or_numeric");[n,r]=Wn(n,r),bt(n.shape,r.shape);const i={a:n,b:r};return K.runKernel(Vm,i)}const gc=Z({greaterEqual_:LDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jDe(t){const n={input:z(t,"input","imag")};return K.runKernel(j2,n)}const hx=Z({imag_:jDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zDe(t){const n={x:z(t,"x","isFinite")};return K.runKernel(Um,n)}const AF=Z({isFinite_:zDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BDe(t){const n={x:z(t,"x","isInf")};return K.runKernel(Hm,n)}const _F=Z({isInf_:BDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VDe(t){const n={x:z(t,"x","isNaN")};return K.runKernel(Gm,n)}const PF=Z({isNaN_:VDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WDe(t,e=.2){const r={x:z(t,"x","leakyRelu")},i={alpha:e};return K.runKernel(Tb,r,i)}const px=Z({leakyRelu_:WDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UDe(t,e){let n=z(t,"a","less","string_or_numeric"),r=z(e,"b","less","string_or_numeric");[n,r]=Wn(n,r),bt(n.shape,r.shape);const i={a:n,b:r};return K.runKernel(Ib,i)}const Vp=Z({less_:UDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HDe(t,e){let n=z(t,"a","lessEqual","string_or_numeric"),r=z(e,"b","lessEqual","string_or_numeric");[n,r]=Wn(n,r),bt(n.shape,r.shape);const i={a:n,b:r};return K.runKernel(Nb,i)}const zu=Z({lessEqual_:HDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PK(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return K.runKernel(z2,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GDe(t,e=5,n=1,r=1,i=.5){const a=z(t,"x","localResponseNormalization");j(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),j(nf(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=a,s=!1;a.rank===3&&(s=!0,o=te(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:o},c={depthRadius:e,bias:n,alpha:r,beta:i},u=K.runKernel(_b,l,c);return s?te(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const RF=Z({localResponseNormalization_:GDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qDe(t){const n={x:z(t,"x","log","float32")};return K.runKernel(qm,n)}const _a=Z({log_:qDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KDe(t){const n={x:z(t,"x","log1p")};return K.runKernel(Km,n)}const mx=Z({log1p_:KDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XDe(t){return j(mu(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=z(e,"x","tf.grad","string_or_numeric"),i=n!=null?z(n,"dy","tf.grad"):null;return K.tidy(()=>{const{value:a,grads:o}=K.gradients(()=>t(r),[r],i);return i!=null&&fi(a.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),kE(o),o[0]})}}function YDe(t){return j(mu(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{j(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=m0(e,"args","tf.grads","string_or_numeric"),i=n!=null?z(n,"dy","tf.grads"):null;return K.tidy(()=>{const{value:a,grads:o}=K.gradients(()=>t(...r),r,i);return i!=null&&fi(a.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),kE(o),o})}}function ZDe(t){return j(mu(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{j(e instanceof Zt,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),j(n==null||n instanceof Zt,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:i}=K.gradients(()=>t(e),[e],n);return kE(r),{grad:r[0],value:i}}}function QDe(t){return j(mu(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{j(Array.isArray(e)&&e.every(i=>i instanceof Zt),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),j(n==null||n instanceof Zt,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=K.gradients(()=>t(...e),e,n);return n!=null&&fi(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),kE(r.grads),r}}function RK(t,e){j(mu(t),()=>"The f passed in variableGrads(f) must be a function"),j(e==null||Array.isArray(e)&&e.every(c=>c instanceof p0),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in K.registeredVariables)e.push(K.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,i=e.length;e=e.filter(c=>c.trainable),j(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);const a=!0,{value:o,grads:s}=K.gradients(t,e,null,a);j(s.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),j(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,u)=>{s[u]!=null&&(l[c.name]=s[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:o,grads:l}}function yl(t){return K.customGrad(t)}function kE(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JDe(t){const n={x:z(t,"x","neg")};return K.runKernel(jb,n)}const bn=Z({neg_:JDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eFe(t){const n={x:z(t,"x","softplus")};return K.runKernel(ug,n)}const Rf=Z({softplus_:eFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tFe(t){const e=z(t,"x","logSigmoid");return yl(r=>({value:bn(Rf(bn(r))),gradFunc:o=>J(o,Ss(bn(r)))}))(e)}const DF=Z({logSigmoid_:tFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nFe(t,e){let n=z(t,"a","sub"),r=z(e,"b","sub");[n,r]=Wn(n,r);const i={a:n,b:r};return K.runKernel(hg,i)}const Ue=Z({sub_:nFe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rFe(t,e=-1){const n=z(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return yl((i,a)=>{const s=co(i,e,!0),l=Ue(i,s),c=Ue(_e(l,"float32"),_a(qe(fa(l),e,!0)));return a([c]),{value:c,gradFunc:(d,f)=>{const[h]=f,p=!0,g=fa(h);return Ue(d,J(qe(d,e,p),g))}}})(n)}const OE=Z({logSoftmax_:rFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iFe(t,e=null,n=!1){const r=z(t,"x","logSumExp"),i=Tt(e,r.shape),a=co(r,i,!0),o=Ue(r,a),s=fa(o),l=qe(s,i),c=_a(l),u=Ee(te(a,c.shape),c);if(n){const d=nr(u.shape,i);return te(u,d)}return u}const gx=Z({logSumExp_:iFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aFe(t,e){const n=z(t,"a","logicalAnd","bool"),r=z(e,"b","logicalAnd","bool");bt(n.shape,r.shape);const i={a:n,b:r};return K.runKernel(kb,i)}const Ns=Z({logicalAnd_:aFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oFe(t){const n={x:z(t,"x","logicalNot","bool")};return K.runKernel(Ob,n)}const vx=Z({logicalNot_:oFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sFe(t,e){const n=z(t,"a","logicalOr","bool"),r=z(e,"b","logicalOr","bool");bt(n.shape,r.shape);const i={a:n,b:r};return K.runKernel(Ab,i)}const AE=Z({logicalOr_:sFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(t,e){const n=z(t,"a","logicalXor","bool"),r=z(e,"b","logicalXor","bool");return bt(n.shape,r.shape),Ns(AE(t,e),vx(Ns(t,e)))}const FF=Z({logicalXor_:lFe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F1=2147483648;function cFe(t,e,n="left"){const r=z(t,"sortedSequence","searchSorted"),i=z(e,"values","searchSorted"),a=r.shape[r.shape.length-1],o=i.shape[i.shape.length-1],s=te(r,[-1,a]),l=te(i,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(de(l.shape)>=F1)throw new Error(`values tensor size must less than ${F1}`);if(s.shape[1]>=F1)throw new Error(`trailing dim_size must less than ${F1} for int32 output type, was ${s.shape[1]}`);const c={sortedSequence:s,values:l},u={side:n};return K.runKernel(iE,c,u)}const _E=Z({searchSorted_:cFe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DK(t,e){return _E(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uFe(t,e,n,r,i){const a=z(t,"x","maxPool"),o=1;let s=a,l=!1;a.rank===3&&(l=!0,s=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),j(s.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`),j(hi(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Gi("maxPool",r,i);const c={x:s},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i},d=K.runKernel(Rb,c,u);return l?te(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const yx=Z({maxPool_:uFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dFe(t,e=[1,1,1],n,r,i,a="NDHWC"){const o=z(t,"x","maxPool3d");let s=o,l=!1;o.rank===4&&(l=!0,s=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),j(s.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),j(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),Gi("maxPool3d",r,i);const c={x:s},u={filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:a},d=K.runKernel(Db,c,u);return l?te(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const MF=Z({maxPool3d_:dFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fFe(t,e,n,r,i=!1){const o={x:z(t,"x","maxPoolWithArgmax")},s={filterSize:e,strides:n,pad:r,includeBatchInIndex:i},l=K.runKernel(U2,o,s);return{result:l[0],indexes:l[1]}}const FK=Z({maxPoolWithArgmax_:fFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFe(t,e){let n=z(t,"a","maximum"),r=z(e,"b","maximum");[n,r]=Wn(n,r),n.dtype==="bool"&&(n=_e(n,"int32"),r=_e(r,"int32")),bt(n.shape,r.shape);const i={a:n,b:r};return K.runKernel(Xm,i)}const El=Z({maximum_:hFe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pFe(t,e=null,n=!1){const i={x:z(t,"x","mean")},a={axis:e,keepDims:n};return K.runKernel(Fb,i,a)}const zn=Z({mean_:pFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hr(t,e="float32"){if(Ma(t),e==="complex64"){const r=hr(t,"float32"),i=hr(t,"float32");return rc(r,i)}const n=ui(de(t),e);return K.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oa(t,e="float32"){if(Ma(t),e==="complex64"){const r=oa(t,"float32"),i=hr(t,"float32");return rc(r,i)}const n=h2(de(t),e);return K.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MK(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=z(t,"x","meshgrid",t instanceof Zt?t.dtype:"float32");if(e===void 0)return[r];let i=z(e,"y","meshgrid",e instanceof Zt?e.dtype:"float32");const a=de(r.shape),o=de(i.shape);return n==="xy"?(r=te(r,[1,-1]),i=te(i,[-1,1]),[Ct(oa([o,1],r.dtype),r),Ct(i,oa([1,a],i.dtype))]):(r=te(r,[-1,1]),i=te(i,[1,-1]),[Ct(r,oa([1,o],r.dtype)),Ct(oa([a,1],i.dtype),i)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mFe(t,e){let n=z(t,"a","minimum"),r=z(e,"b","minimum");[n,r]=Wn(n,r),n.dtype==="bool"&&(n=_e(n,"int32"),r=_e(r,"int32")),bt(n.shape,r.shape);const i={a:n,b:r};return K.runKernel(Ym,i)}const xu=Z({minimum_:mFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gFe(t,e,n){j(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=z(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");j(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const i=n==="reflect"?1:0;for(let s=0;s<r.rank;s++)j(e[s].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),j(e[s][0]>=0&&e[s][0]<=r.shape[s]-i&&e[s][1]>=0&&e[s][1]<=r.shape[s]-i,()=>`Padding in dimension ${s} cannot be greater than or equal to ${r.shape[s]-i} or less than 0 for input of shape ${r.shape}`);const a={paddings:e,mode:n},o={x:r};return K.runKernel(Lb,o,a)}const LF=Z({mirrorPad_:gFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(t,e){let n=z(t,"a","mod"),r=z(e,"b","mod");[n,r]=Wn(n,r);const i={a:n,b:r};return K.runKernel(Zm,i)}const jF=Z({mod_:vFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yFe(t,e=null,n=!1){t=z(t,"x","moments");const r=Tt(e,t.shape),i=zn(t,r,n);let a=i.shape;n||(a=nr(i.shape,r));const o=rn(Ue(_e(t,"float32"),te(i,a))),s=zn(o,r,n);return{mean:i,variance:s}}const bx=Z({moments_:yFe});function bFe(t,e,n,r){const i=z(e,"data","multiRNNCell"),a=m0(n,"c","multiRNNCell"),o=m0(r,"h","multiRNNCell");let s=i;const l=[];for(let d=0;d<t.length;d++){const f=t[d](s,a[d],o[d]);l.push(f[0]),l.push(f[1]),s=f[1]}const c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}const LK=Z({multiRNNCell_:bFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xFe(t,e,n,r=!1){const i=z(t,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const l={logits:o===1?te(i,[1,-1]):i},c={numSamples:e,seed:n,normalized:r},u=K.runKernel(H2,l,c);return o===1?te(u,[u.size]):u}const jK=Z({multinomial_:xFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wFe(t,e){let n=z(t,"a","notEqual","string_or_numeric"),r=z(e,"b","notEqual","string_or_numeric");[n,r]=Wn(n,r),bt(n.shape,r.shape);const i={a:n,b:r};return K.runKernel(zb,i)}const uf=Z({notEqual_:wFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SFe(t,e,n=1,r=0,i="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:z(t,"indices","oneHot","int32")},s={dtype:i,depth:e,onValue:n,offValue:r};return K.runKernel(Vb,o,s)}const Wp=Z({oneHot_:SFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Fe(t){const n={x:z(t,"x","onesLike")};return K.runKernel(Bb,n)}const Pa=Z({onesLike_:$Fe});function CFe(t,e){const n=z(t,"v1","outerProduct"),r=z(e,"v2","outerProduct");j(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const i=te(n,[-1,1]),a=te(r,[1,-1]);return Ct(i,a)}const zK=Z({outerProduct_:CFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EFe(t,e,n=0){const r=z(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const i={paddings:e,constantValue:n},a={x:r};return K.runKernel(Ub,a,i)}const vc=Z({pad_:EFe});function TFe(t,e,n=0){return j(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),vc(t,[e],n)}const BK=Z({pad1d_:TFe});function IFe(t,e,n=0){return j(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),vc(t,e,n)}const VK=Z({pad2d_:IFe});function NFe(t,e,n=0){return j(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),vc(t,e,n)}const WK=Z({pad3d_:NFe});function kFe(t,e,n=0){return j(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),vc(t,e,n)}const UK=Z({pad4d_:kFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OFe(t,e,n){const r=z(t,"x","spaceToBatchND");j(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),j(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),j(r.shape.reduce((o,s,l)=>l>0&&l<=e.length?o&&(s+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const i={x:r},a={blockShape:e,paddings:n};return K.runKernel(ex,i,a)}const xx=Z({spaceToBatchND_:OFe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AFe(t,e,n,r,i,a,o){i==null&&(i=[1,1]),a==null&&(a=1),r===0&&(r="valid");const s=z(t,"x","maxPool");let l=s,c=!1;s.rank===3&&(c=!0,l=te(s,[1,s.shape[0],s.shape[1],s.shape[2]])),j(hi(a,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${i}'`);const u=Yo(l.shape,e,a,i,r),d=[u.dilationHeight,u.dilationWidth];let f;r==="same"?f=PFe([u.filterHeight,u.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[p,g]=_Fe([u.inHeight,u.inWidth],d,f),m=h?r:"valid",v=h?l:xx(l,d,p),b=(n==="avg"?()=>ux(v,e,a,m,o):()=>yx(v,e,a,m,o))(),w=h?b:dx(b,d,g);return c?te(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function _Fe(t,e,n){const r=n.map(u=>u[0]),i=n.map(u=>u[1]),a=t.concat(r,i),o=e.map((u,d)=>(u-a[d]%u)%u),s=i.map((u,d)=>u+o[d]),l=e.map((u,d)=>[r[d],s[d]]),c=e.map((u,d)=>[0,o[d]]);return[l,c]}function PFe(t,e){const r=t.map((o,s)=>o+(o-1)*(e[s]-1)).map(o=>o-1),i=r.map(o=>Math.floor(o/2)),a=r.map((o,s)=>o-i[s]);return r.map((o,s)=>[i[s],a[s]])}const zF=Z({pool_:AFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RFe(t,e){const n=z(t,"x","prelu"),r=z(e,"alpha","prelu"),i={x:n,alpha:r};return K.runKernel(Hb,i)}const wx=Z({prelu_:RFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DFe(t,e=null,n=!1){let r=z(t,"x","prod");r.dtype==="bool"&&(r=_e(r,"int32"));const i={x:r},a={axis:e,keepDims:n};return K.runKernel(Gb,i,a)}const BF=Z({prod_:DFe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FFe(t,e,n,r){const i=t.map((u,d)=>z(u,`tensors${d}`,"raggedGather","int32")),a=z(e,"paramsDenseValues","raggedGather"),o=z(n,"indices","raggedGather","int32"),s={paramsNestedSplits:i,paramsDenseValues:a,indices:o},l={outputRaggedRank:r},c=K.runKernel(X2,s,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const HK=Z({raggedGather_:FFe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MFe(t,e,n){const r=z(t,"starts","raggedRange"),i=z(e,"limits","raggedRange",r.dtype),a=z(n,"deltas","raggedRange",r.dtype),o={starts:r,limits:i,deltas:a},s=K.runKernel(Y2,o);return{rtNestedSplits:s[0],rtDenseValues:s[1]}}const GK=Z({raggedRange_:MFe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LFe(t,e,n,r,i){const a=z(t,"shape","raggedTensorToTensor","int32"),o=z(e,"values","raggedTensorToTensor"),s=z(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((d,f)=>z(d,`tensors${f}`,"raggedTensorToTensor","int32")),c={shape:a,values:o,defaultValue:s,rowPartitionTensors:l},u={rowPartitionTypes:i};return K.runKernel(Z2,c,u)}const qK=Z({raggedTensorToTensor_:LFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jFe(t,e,n){Ma(t);const r=de(t);let i=null;if(n==null||n==="float32")i=new Float32Array(r);else if(n==="int32")i=new Int32Array(r);else if(n==="bool")i=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let a=0;a<r;a++)i[a]=e();return K.makeTensor(i,t,n)}const KK=Z({rand_:jFe});var VF={exports:{}};VF.exports;(function(t){(function(e,n,r){function i(l){var c=this,u=s();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function a(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new i(l),d=c&&c.state,f=u.next;return f.int32=function(){return u.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&a(d,u),f.state=function(){return a(u,{})}),f}function s(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:this.alea=o})(_o,t)})(VF);var zFe=VF.exports,WF={exports:{}};WF.exports;(function(t){(function(e,n,r){function i(s){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},s===(s|0)?l.x=s:c+=s;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function a(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l}function o(s,l){var c=new i(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&a(u,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=o:this.xor128=o})(_o,t)})(WF);var BFe=WF.exports,UF={exports:{}};UF.exports;(function(t){(function(e,n,r){function i(s){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,s===(s|0)?l.x=s:c+=s;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(s,l){return l.x=s.x,l.y=s.y,l.z=s.z,l.w=s.w,l.v=s.v,l.d=s.d,l}function o(s,l){var c=new i(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&a(u,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=o:this.xorwow=o})(_o,t)})(UF);var VFe=UF.exports,HF={exports:{}};HF.exports;(function(t){(function(e,n,r){function i(s){var l=this;l.next=function(){var u=l.x,d=l.i,f,h;return f=u[d],f^=f>>>7,h=f^f<<24,f=u[d+1&7],h^=f^f>>>10,f=u[d+3&7],h^=f^f>>>3,f=u[d+4&7],h^=f^f<<7,f=u[d+7&7],f=f^f<<13,h^=f^f<<9,u[d]=h,l.i=d+1&7,h};function c(u,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],u.x=h,u.i=0,f=256;f>0;--f)u.next()}c(l,s)}function a(s,l){return l.x=s.x.slice(),l.i=s.i,l}function o(s,l){s==null&&(s=+new Date);var c=new i(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.x&&a(u,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=o:this.xorshift7=o})(_o,t)})(HF);var WFe=HF.exports,GF={exports:{}};GF.exports;(function(t){(function(e,n,r){function i(s){var l=this;l.next=function(){var u=l.w,d=l.X,f=l.i,h,p;return l.w=u=u+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(u^u>>>16)|0};function c(u,d){var f,h,p,g,m,v=[],y=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,y=Math.max(y,d.length)),p=0,g=-32;g<y;++g)d&&(h^=d.charCodeAt((g+32)%d.length)),g===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,g>=0&&(m=m+1640531527|0,f=v[g&127]^=h+m,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,g=4*128;g>0;--g)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;u.w=m,u.X=v,u.i=p}c(l,s)}function a(s,l){return l.i=s.i,l.w=s.w,l.X=s.X.slice(),l}function o(s,l){s==null&&(s=+new Date);var c=new i(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.X&&a(u,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=o:this.xor4096=o})(_o,t)})(GF);var UFe=GF.exports,qF={exports:{}};qF.exports;(function(t){(function(e,n,r){function i(s){var l=this,c="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,s===Math.floor(s)?(l.a=s/4294967296|0,l.b=s|0):c+=s;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function a(s,l){return l.a=s.a,l.b=s.b,l.c=s.c,l.d=s.d,l}function o(s,l){var c=new i(s),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,h=(c.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&a(u,c),d.state=function(){return a(c,{})}),d}n&&n.exports?n.exports=o:this.tychei=o})(_o,t)})(qF);var HFe=qF.exports,XK={exports:{}};const GFe={},qFe=Object.freeze(Object.defineProperty({__proto__:null,default:GFe},Symbol.toStringTag,{value:"Module"})),KFe=PP(qFe);(function(t){(function(e,n,r){var i=256,a=6,o=52,s="random",l=r.pow(i,a),c=r.pow(2,o),u=c*2,d=i-1,f;function h(w,x,$){var C=[];x=x==!0?{entropy:!0}:x||{};var E=v(m(x.entropy?[w,b(n)]:w??y(),3),C),I=new p(C),T=function(){for(var N=I.g(a),k=l,O=0;N<c;)N=(N+O)*i,k*=i,O=I.g(1);for(;N>=u;)N/=2,k/=2,O>>>=1;return(N+O)/k};return T.int32=function(){return I.g(4)|0},T.quick=function(){return I.g(4)/4294967296},T.double=T,v(b(I.S),n),(x.pass||$||function(N,k,O,_){return _&&(_.S&&g(_,I),N.state=function(){return g(I,{})}),O?(r[s]=N,k):N})(T,E,"global"in x?x.global:this==r,x.state)}function p(w){var x,$=w.length,C=this,E=0,I=C.i=C.j=0,T=C.S=[];for($||(w=[$++]);E<i;)T[E]=E++;for(E=0;E<i;E++)T[E]=T[I=d&I+w[E%$]+(x=T[E])],T[I]=x;(C.g=function(N){for(var k,O=0,_=C.i,P=C.j,D=C.S;N--;)k=D[_=d&_+1],O=O*i+D[d&(D[_]=D[P=d&P+k])+(D[P]=k)];return C.i=_,C.j=P,O})(i)}function g(w,x){return x.i=w.i,x.j=w.j,x.S=w.S.slice(),x}function m(w,x){var $=[],C=typeof w,E;if(x&&C=="object")for(E in w)try{$.push(m(w[E],x-1))}catch{}return $.length?$:C=="string"?w:w+"\0"}function v(w,x){for(var $=w+"",C,E=0;E<$.length;)x[d&E]=d&(C^=x[d&E]*19)+$.charCodeAt(E++);return b(x)}function y(){try{var w;return f&&(w=f.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),b(w)}catch{var x=e.navigator,$=x&&x.plugins;return[+new Date,e,$,e.screen,b(n)]}}function b(w){return String.fromCharCode.apply(0,w)}if(v(r.random(),n),t.exports){t.exports=h;try{f=KFe}catch{}}else r["seed"+s]=h})(typeof self<"u"?self:_o,[],Math)})(XK);var XFe=XK.exports,YFe=zFe,ZFe=BFe,QFe=VFe,JFe=WFe,eMe=UFe,tMe=HFe,Df=XFe;Df.alea=YFe;Df.xor128=ZFe;Df.xorwow=QFe;Df.xorshift7=JFe;Df.xor4096=eMe;Df.tychei=tMe;var PE=Df;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nMe=.001,YK=.1;function rMe(t,e,n){return n==null&&(n=KF()),qA(t,e,(r,i)=>XF(r,i,n))}function KF(){return K.backend.floatPrecision()===32?nMe:YK}function qA(t,e,n){let r=!0;if((Lr(t)||Lr(e))&&(r=!1),Lr(t)&&Lr(e)&&(r=!0),r){const o=t.constructor.name,s=e.constructor.name;if(o!==s)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${s}`)}if(Array.isArray(t)&&Array.isArray(e)){const o=gl(t),s=gl(e);if(!Nt(o,s))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${s}]`)}const i=Lr(t)?t:ml(t),a=Lr(e)?e:ml(e);if(i.length!==a.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${a.length}.
Actual:   ${i}.
Expected: ${a}.`);for(let o=0;o<a.length;++o){const s=i[o],l=a[o];if(!n(s,l))throw new Error(`Arrays differ: actual[${o}] = ${s}, expected[${o}] = ${l}.
Actual:   ${i}.
Expected: ${a}.`)}typeof expect<"u"&&expect().nothing()}function iMe(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function aMe(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return Qs(t)||Qs(t[0])||Qs(e)||Qs(e[0])?qA(t,n,(r,i)=>r==i):qA(t,e,(r,i)=>XF(r,i,0))}function oMe(t,e,n){if(n==null&&(n=KF()),!XF(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function XF(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function sMe(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function lMe(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let i=0;i<r.length;i++)if(n[i]!==r[i])throw new Error(`Expected ArrayBuffer value at ${i} to be ${r[i]} but got ${n[i]} instead`)}function ZK(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?ZK(n):t[e]=ll(n)}return t}function cMe(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function uMe(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const dMe=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:YK,createVideoElement:cMe,encodeStrings:ZK,expectArrayBuffersEqual:lMe,expectArraysClose:rMe,expectArraysEqual:aMe,expectNumbersClose:oMe,expectPromiseToFail:iMe,expectValuesInRange:sMe,play:uMe,testEpsilon:KF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YF{constructor(e,n,r,i,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=a||Math.random();this.random=PE.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const i=this.nextVal;return this.nextVal=NaN,i}let e,n,r=!1;for(;!r;){let i,a,o;do i=2*this.random()-1,a=2*this.random()-1,o=i*i+a*a;while(o>=1||o===0);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*s,n=this.mean+this.stdDev*a*s,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class fMe{constructor(e,n,r,i){this.alpha=e,this.beta=1/n,this.dtype=r;const a=i||Math.random();this.randu=PE.alea(a.toString()),this.randn=new YF(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,i,a,o;for(;;){do i=this.randn.nextValue(),o=1+this.c*i;while(o<=0);if(o*=o*o,e=i*i,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),a=this.randu(),a<n||Math.log(a)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class hMe{constructor(e=0,n=1,r,i){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=PE.alea(i)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pMe(t,e,n=1,r="float32",i){if(Ma(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const a=new fMe(e,n,r,i),o=wt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const QK=Z({randomGamma_:pMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mMe(t,e=0,n=1,r,i){if(Ma(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const a=new YF(e,n,r,!1,i),o=wt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const RE=Z({randomNormal_:mMe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gMe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return RE(t,0,1,e,n)}const JK=Z({randomStandardNormal_:gMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vMe(t,e=0,n=1,r="float32",i){Ma(t);const a=wt(t,r),o=new hMe(e,n,null,i);for(let s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}const Bu=Z({randomUniform_:vMe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yMe(t,e,n,r){return Bu(t,e,n,"int32",r)}const eX=Z({randomUniformInt_:yMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function df(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const i={start:t,stop:e,step:n,dtype:r};return K.runKernel(Q2,{},i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bMe(t){const n={input:z(t,"input","real")};return K.runKernel(J2,n)}const Up=Z({real_:bMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xMe(t){const n={x:z(t,"x","reciprocal")};return K.runKernel(eg,n)}const ZF=Z({reciprocal_:xMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wMe(t){const n={x:z(t,"x","relu")};return K.runKernel(tg,n)}const Fs=Z({relu_:wMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SMe(t){const n={x:z(t,"x","relu6")};return K.runKernel(ng,n)}const DE=Z({relu6_:SMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Me(t,e){const r={x:z(t,"x","reverse")},i={dims:e};return K.runKernel(Yb,r,i)}const fo=Z({reverse_:$Me});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CMe(t){const e=z(t,"x","reverse");return j(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),fo(e,0)}const tX=Z({reverse1d_:CMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EMe(t,e){const n=z(t,"x","reverse");return j(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),fo(n,e)}const nX=Z({reverse2d_:EMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TMe(t,e){const n=z(t,"x","reverse");return j(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),fo(n,e)}const rX=Z({reverse3d_:TMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IMe(t,e){const n=z(t,"x","reverse");return j(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),fo(n,e)}const iX=Z({reverse4d_:IMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NMe(t){const n={x:z(t,"x","round")};return K.runKernel(rg,n)}const FE=Z({round_:NMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kMe(t){const n={x:z(t,"x","rsqrt","float32")};return K.runKernel(ig,n)}const ME=Z({rsqrt_:kMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OMe(t){const n={x:z(t,"x","selu")};return K.runKernel(ag,n)}const LE=Z({selu_:OMe});function AMe(t,e,n,r,i,a=[1,1],o="NHWC"){const s=z(t,"x","separableConv2d"),l=z(e,"depthwiseFilter","separableConv2d"),c=z(n,"pointwiseFilter","separableConv2d");let u=s,d=!1;if(s.rank===3&&(d=!0,u=te(s,[1,s.shape[0],s.shape[1],s.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");j(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),j(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),j(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),j(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),j(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const f=l.shape[2],h=l.shape[3];j(c.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${c.shape[2]}.`);const p=bg(u,l,r,i,o,a),m=ic(p,c,1,"valid",o);return d?te(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const jE=Z({separableConv2d_:AMe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function _Me(t,e){const n=z(t,"x","setdiff1d"),r=z(e,"y","setdiff1d");j(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),j(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),j(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await n.data(),a=await r.data(),o=new Set(a);let s=0;for(let u=0;u<i.length;u++)o.has(i[u])||s++;const l=new pr([s],n.dtype),c=new pr([s],"int32");for(let u=0,d=0;u<i.length;u++)o.has(i[u])||(l.values[d]=i[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]}const aX=_Me;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PMe(t){const n={x:z(t,"x","sign")};return K.runKernel(lg,n)}const QF=Z({sign_:PMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RMe(t){const n={x:z(t,"x","sin","float32")};return K.runKernel(og,n)}const zE=Z({sin_:RMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DMe(t){const n={x:z(t,"x","sinh")};return K.runKernel(sg,n)}const BE=Z({sinh_:DMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FMe(t,e,n){const r=z(t,"x","slice1d");return j(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),At(r,[e],[n])}const Sx=Z({slice1d_:FMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MMe(t,e,n){const r=z(t,"x","slice2d");return j(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),At(r,e,n)}const VE=Z({slice2d_:MMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LMe(t,e,n){const r=z(t,"x","slice3d");return j(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),At(r,e,n)}const $x=Z({slice3d_:LMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jMe(t,e,n){const r=z(t,"x","slice4d");return j(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),At(r,e,n)}const Hp=Z({slice4d_:jMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMe(t,e=-1){const n=z(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},i={dim:e};return K.runKernel(nx,r,i)}const Cx=Z({softmax_:zMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BMe(t){j(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return K.runKernel(R2,e)}const Ex=Z({fft_:BMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VMe(t){j(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return K.runKernel(L2,e)}const Gp=Z({ifft_:VMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WMe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const i=te(t,[n,e]);r=Gp(i)}else{const i=[n,2*(e-1)],a=te(Up(t),[n,e]),o=te(hx(t),[n,e]),s=fo(At(a,[0,1],[n,e-2]),1),l=J(fo(At(o,[0,1],[n,e-2]),1),ct(-1)),c=tr([a,s],1),u=tr([o,l],1),d=te(rc(c,u),[i[0],i[1]]);r=Gp(d)}if(r=Up(r),t.rank===3&&t.shape[0]!==0){const i=r,a=t.shape[0];r=te(r,[a,r.shape[0]/a,r.shape[1]]),i.dispose()}return r}const WE=Z({irfft_:WMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UMe(t,e,n=0){const i={x:z(t,"x","split")},a={numOrSizeSplits:e,axis:n};return K.runKernel(tx,i,a)}const la=Z({split_:UMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMe(t,e){j(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(e!=null&&e<n){const p=t.shape.map(m=>0),g=t.shape.map(m=>m);g[t.shape.length-1]=e,i=At(t,p,g),n=e}else if(e!=null&&e>n){const p=t.shape.map(g=>g);p[t.shape.length-1]=e-n,i=tr([t,hr(p)],t.shape.length-1),n=e}else i=t;const a=Pt(i),o=te(rc(i,a),[r,n]),s=Ex(o),l=Math.floor(n/2)+1,c=Up(s),u=hx(s),d=la(c,[l,n-l],c.shape.length-1),f=la(u,[l,n-l],u.shape.length-1),h=i.shape.slice();return h[i.shape.length-1]=l,te(rc(d[0],f[0]),h)}const Tx=Z({rfft_:HMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GMe(t,e){let n=z(t,"a","squaredDifference"),r=z(e,"b","squaredDifference");[n,r]=Wn(n,r),bt(n.shape,r.shape);const i={a:n,b:r},a={};return K.runKernel(fg,i,a)}const UE=Z({squaredDifference_:GMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMe(t,e){const n=z(t,"x","squeeze","string_or_numeric");return te(n,fc(n.shape,e).newShape)}const Vu=Z({squeeze_:qMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KMe(t,e=0){const n=m0(t,"tensors","stack","string_or_numeric");j(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&j(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,i={axis:e};return K.runKernel(Wb,r,i)}const ha=Z({stack_:KMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XMe(t,e=0){const r={x:z(t,"x","step")},i={alpha:e};return K.runKernel(vg,r,i)}const Ff=Z({step_:XMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YMe(t,e,n,r,i=0,a=0,o=0,s=0,l=0){const u={x:z(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};return K.runKernel(dE,u,d)}const JF=Z({stridedSlice_:YMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZMe(t){const n={x:z(t,"x","tan","float32")};return K.runKernel(pg,n)}const eM=Z({tan_:ZMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $i(t,e){Nf(t);const n=gl(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Mu(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qh(t,e,n){if(Nf(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=gl(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Mu(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tM(t,e,n){if(Nf(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=gl(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Mu(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oX(t,e,n){if(Nf(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=gl(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Mu(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sX(t,e,n){if(Nf(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=gl(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Mu(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lX(t,e,n){if(Nf(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=gl(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Mu(t,e,r,n)}function nM(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(a+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(a+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(a+` update.rank != ${i+t.length-r}`);for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(a+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(a+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function HE(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}nM(n,e,t)}function Wu(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,a=n.length;let o=1;for(let d=i;d<a;++d)o*=n[d];const s=i<1?1:i,l=de(e.shape)/s,c=[...ot(n.slice(0,i)),1],u=de(n);return{sliceRank:i,numUpdates:l,sliceSize:o,strides:c,outputSize:u}}const QMe=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:Wu,validateInput:HE,validateUpdateShape:nM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JMe(t,e,n){const r=z(t,"tensor","tensorScatterupdate"),i=z(e,"indices","tensorScatterupdate","int32"),a=z(n,"updates","tensorScatterupdate");if(HE(a,i,r.shape),r.dtype!==a.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${a.dtype}.`);const o={tensor:r,indices:i,updates:a},s={};return K.runKernel(rE,o,s)}const cX=Z({tensorScatterUpdate_:JMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e3e(t,e=1,n=!0){const r=z(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${e}`);const a={x:r},o={k:e,sorted:n},[s,l]=K.runKernel(mE,a,o);return{values:s,indices:l}}const rM=Z({topk_:e3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(t,e=0,n=1,r,i){if(Ma(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new YF(e,n,r,!0,i),o=wt(t,r);for(let s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}const GE=Z({truncatedNormal_:t3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3e(t,e=0){const n=z(t,"x","unique","string_or_numeric");j(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},i={axis:e},[a,o]=K.runKernel(vE,r,i);return{values:a,indices:o}}const iM=Z({unique_:n3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3e(t,e,n){const r=z(t,"x","unsortedSegmentSum"),i=z(e,"segmentIds","unsortedSegmentSum","int32");j(nf(n),()=>"numSegments must be of dtype int");const a={x:r,segmentIds:i},o={numSegments:n};return K.runKernel(ax,a,o)}const qE=Z({unsortedSegmentSum_:r3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i3e(t,e=0){const n=z(t,"x","unstack","string_or_numeric");j(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},i={axis:e};return K.runKernel(ix,r,i)}const ho=Z({unstack_:i3e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uX(t,e){return _E(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aM(t,e=!0,n,r){return K.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KE(t,e){const n=[];for(let a=0;a<e.length;a++)e[a]&&n.push(a);const r=wt(t,"int32"),i=wt([n.length,t.length],"int32");for(let a=0;a<n.length;a++){const o=r.indexToLoc(n[a]),s=a*t.length;i.values.set(o,s)}return i.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function a3e(t){const e=z(t,"condition","whereAsync","bool"),n=await e.data(),r=KE(e.shape,n);return t!==e&&e.dispose(),r}const oM=a3e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function o3e(t,e,n){const r=z(t,"tensor","boolMask"),i=z(e,"mask","boolMask","bool"),a=n??0,o=i.rank,s=r.shape;j(o>0,()=>"mask cannot be scalar"),fi(s.slice(a,a+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let g=a;g<a+o;g++)l*=s[g];const c=s.slice(0,a).concat([l],s.slice(a+o)),u=te(r,c),d=te(i,[-1]),f=await oM(d),h=Vu(f,[1]),p=$g(u,h,a);return t!==r&&r.dispose(),e!==i&&i.dispose(),h.dispose(),u.dispose(),d.dispose(),f.dispose(),p}const dX=o3e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(t,e,n){const r=z(t,"x","transpose");if(e==null&&(e=r.shape.map((o,s)=>s).reverse()),j(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{j(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const i={x:r},a={perm:e};return r.dtype==="complex64"?ae(()=>{let o=Up(r),s=hx(r);return o=K.runKernel(jd,{x:o},a),s=K.runKernel(jd,{x:s},a),n&&(s=bn(s)),rc(o,s)}):K.runKernel(jd,i,a)}const kt=Z({transpose_:s3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3e(t,e,n,r,i=!0){const a=z(t,"v","movingAverage"),o=z(e,"x","movingAverage"),s=z(n,"decay","movingAverage");aK(a,o),j(Nt(a.shape,o.shape),()=>"Shape mismatch in v and x");const l=ct(1),c=Ue(l,s);let u=J(Ue(o,a),c);if(i){j(r!=null,()=>"When using zeroDebias: true, step is required.");const d=z(r,"step","movingAverage");u=nt(u,Ue(l,vl(s,d)))}return Ee(a,u)}const fX=Z({movingAverage_:l3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e(t,e,n){Ma(n);const r=z(t,"indices","scatterND","int32"),i=z(e,"updates","scatterND");HE(i,r,n);const a={indices:r,updates:i},o={shape:n};return K.runKernel(nE,a,o)}const hX=Z({scatterND_:c3e});function u3e(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const i=t.rank>0?t.shape[0]:1,a=t.rank>1?t.shape[1]:1;if(n.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${a}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===i))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d3e(t,e,n,r=0){Ma(n);const i=z(t,"sparseIndices","sparseToDense","int32"),a=z(e,"sparseValues","sparseToDense","string_or_numeric"),o=z(r,"defaultValue","sparseToDense",a.dtype);u3e(i,a,n,o);const s={sparseIndices:i,sparseValues:a,defaultValue:o},l={outputShape:n};return K.runKernel(cE,s,l)}const pX=Z({sparseToDense_:d3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f3e(t,e){const n=z(e,"indices","gatherND","int32"),i={params:z(t,"x","gatherND","string_or_numeric"),indices:n};return K.runKernel(M2,i)}const mX=Z({gatherND_:f3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h3e(t,e){if(e==null)return t.shape.slice();if(Nt(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3e(t,e,n,r){const i=z(t,"x","dropout");if(j(i.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),j(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Zt?i.clone():i;const a=h3e(i,n),o=1-e,s=nt(Sg(Ee(Bu(a,0,1,"float32",r),o)),o);return J(i,s)}const sM=Z({dropout_:p3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lM(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function XE(t,e,n){const r=1-t%2,i=new Float32Array(t);for(let a=0;a<t;++a){const o=2*Math.PI*a/(t+r-1);i[a]=e-n*Math.cos(o)}return $i(i,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function m3e(t,e,n=1){const r=z(t,"predictions","inTopK"),i=z(e,"targets","inTopK");j(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),j(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),fi(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];j(n>0&&n<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${n}`);const o=await r.data(),s=await i.data(),[l,c]=[o.length/a,a],u=Vr("bool",l);for(let d=0;d<l;d++){const f=d*c,h=o.subarray(f,f+c),p=[];for(let g=0;g<h.length;g++)p.push({value:h[g],index:g});p.sort((g,m)=>m.value-g.value),u[d]=0;for(let g=0;g<n;g++)if(p[g].index===s[d]){u[d]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),Bo(u,i.shape,"bool")}const gX=m3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g3e(t,e,n,r,i,a="NHWC",o){let s=t;t.rank===3&&(s=te(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=te(e,[1,e.shape[0],e.shape[1],e.shape[2]])),j(s.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),j(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),j(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=a==="NHWC"?s.shape[3]:s.shape[1],u=a==="NHWC"?l.shape[3]:l.shape[1];j(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),j(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Gi("conv2dDerFilter",i,o);const d={x:s,dy:l},f={strides:r,pad:i,dataFormat:a,dimRoundingMode:o,filterShape:n};return K.runKernel(w2,d,f)}const cM=Z({conv2DBackpropFilter_:g3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YE(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return J(t,Ff(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function ZE(t,e){let n=e;const r=mr(t.shape,e.shape);return r.length>0&&(n=qe(n,r)),te(n,t.shape)}function QE(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Fs(t);if(e==="elu")return xg(t);if(e==="relu6")return DE(t);if(e==="prelu")return wx(t,n);if(e==="leakyrelu")return px(t,r);if(e==="sigmoid")return Ss(t);throw new Error(`Unknown fused activation ${e}.`)}const JE=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v3e({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",JE(K.state.gradientDepth,l)===!1){j(i==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let $=ic(t,e,n,r,i,a,o);return s!=null&&($=Ee($,s)),QE($,l,c,u)}const d=z(t,"x","conv2d","float32"),f=z(e,"filter","conv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=te(d,[1,d.shape[0],d.shape[1],d.shape[2]])),j(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),j(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),Gi("fused conv2d",r,o);const g=i==="NHWC"?h.shape[3]:h.shape[1];j(f.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${f.shape[2]}.`),j(hi(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);const m=Gr(h.shape,f.shape,n,a,r,o);let v;s!=null&&(v=z(s,"bias","fused conv2d"),[v]=Wn(v,d),i==="NHWC"?bt(m.outShape,v.shape):(j(v.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${v.shape.length}.`),j(v.shape.length===0||v.shape[0]===m.outChannels||v.shape[0]===1,()=>`Error in fused conv2d: bias shape (${v.shape}) is not compatible with the number of output channels (${m.outChannels})`)));let y;if(c!=null){const $=c.shape;if(j($.length<=1||$.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${$.length}.`),$.length===1)j($[0]===1||$[0]===m.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${$}) is not compatible with the number of output channels (${m.outChannels}).`);else if($.length===3)try{bt($,m.outShape)}catch{const E=`Error in fused conv2d: PReLU activation weights (${$}) is not compatible with the output shape of the conv2d (${m.outShape}).`;throw Error(E)}y=z(c,"prelu weights","fused conv2d")}const b=($,C)=>{j(i==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);const[E,I,T,N]=C,k=YE($,T,l);j(yu(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const O=wF(I.shape,k,E,n,r),_=cM(I,k,E.shape,n,r),P=[O,_];if(N!=null){const D=ZE(N,k);P.push(D)}return P},w={x:h,filter:f,bias:v,preluActivationWeights:y},x={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return s==null?yl((C,E,I)=>{let T=K.runKernel(u0,w,x);return I([E,C,T]),p&&(T=te(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:b}})(h,f):yl((C,E,I,T)=>{let N=K.runKernel(u0,w,x);return T([E,C,N,I]),p&&(N=te(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:b}})(h,f,v)}const vX=Z({fusedConv2d_:v3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3e(t,e,n,r,i,a=[1,1],o){let s=t;t.rank===3&&(s=te(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=te(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:s,dy:l},u={strides:r,pad:i,dimRoundingMode:o,dilations:a,filterShape:n};return K.runKernel(N2,c,u)}const yX=Z({depthwiseConv2dNativeBackpropFilter_:y3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3e(t,e,n,r,i,a=[1,1],o){let s=e,l=!1;e.rank===3&&(l=!0,s=te(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:s,filter:n},u={strides:r,pad:i,dimRoundingMode:o,dilations:a,inputShape:t},d=K.runKernel(k2,c,u);return l?te(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const bX=Z({depthwiseConv2dNativeBackpropInput_:b3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3e({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:a=[1,1],dimRoundingMode:o,bias:s,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(JE(K.state.gradientDepth,l)===!1){let x=bg(t,e,n,r,i,a,o);return s!=null&&(x=Ee(x,s)),QE(x,l,c,u)}const d=z(t,"x","depthwiseConv2d","float32"),f=z(e,"filter","depthwiseConv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=te(d,[1,d.shape[0],d.shape[1],d.shape[2]])),j(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),j(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),j(h.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),a==null&&(a=[1,1]),j(hi(n,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),Gi("fused depthwiseConv2d",r,o);const g=Gr(h.shape,f.shape,n,a,r,o,!0);let m;s!=null&&(m=z(s,"bias","fused conv2d"),[m]=Wn(m,d),bt(g.outShape,m.shape));let v;c!=null&&(v=z(c,"prelu weights","fused depthwiseConv2d"));const y=(x,$)=>{j(yu(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[C,E,I,T]=$,N=YE(x,I,l),k=bX(E.shape,N,C,n,r,a,o),O=yX(E,N,C.shape,n,r,a,o);if(T!=null){const _=ZE(m,N);return[k,O,_]}return[k,O]},b={x:h,filter:f,bias:m,preluActivationWeights:v},w={strides:n,pad:r,dataFormat:i,dilations:a,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return s==null?yl(($,C,E)=>{let I=K.runKernel(d0,b,w);return E([C,$,I]),p&&(I=te(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:y}})(h,f):yl(($,C,E,I)=>{let T=K.runKernel(d0,b,w);return I([C,$,T,E]),p&&(T=te(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:y}})(h,f,m)}const w3e=Z({fusedDepthwiseConv2d_:x3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S3e({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:a="linear",preluActivationWeights:o,leakyreluAlpha:s=.2}){if(JE(K.state.gradientDepth,a)===!1){let N=Ct(t,e,n,r);return i!=null&&(N=Ee(N,i)),QE(N,a,o,s)}let l=z(t,"a","fused matMul"),c=z(e,"b","fused matMul");[l,c]=Wn(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?c.shape[c.rank-2]:c.shape[c.rank-1],p=l.shape.slice(0,-2),g=c.shape.slice(0,-2),m=de(p),v=de(g);j(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const b=bt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([f,h]),w=n?te(l,[m,u,f]):te(l,[m,f,u]),x=r?te(c,[v,h,d]):te(c,[v,d,h]);let $;i!=null&&($=z(i,"bias","fused matMul"),[$]=Wn($,l),bt(b,$.shape));let C;o!=null&&(C=z(o,"prelu weights","fused matMul"));const E=(N,k)=>{const[O,_,P,D]=k,L=YE(te(N,P.shape),P,a);let R,F;if(!n&&!r?(R=Ct(L,_,!1,!0),F=Ct(O,L,!0,!1)):!n&&r?(R=Ct(L,_,!1,!1),F=Ct(L,O,!0,!1)):n&&!r?(R=Ct(_,L,!1,!0),F=Ct(O,L,!1,!1)):(R=Ct(_,L,!0,!0),F=Ct(L,O,!0,!0)),i!=null){const V=ZE(D,L);return[R,F,V]}else return[R,F]},I={a:w,b:x,bias:$,preluActivationWeights:C},T={transposeA:n,transposeB:r,activation:a,leakyreluAlpha:s};return i==null?yl((k,O,_)=>{const P=K.runKernel(c0,I,T);return _([k,O,P]),{value:te(P,b),gradFunc:E}})(w,x):yl((k,O,_,P)=>{const D=K.runKernel(c0,I,T);return P([k,O,D,_]),{value:te(D,b),gradFunc:E}})(w,x,$)}const KA=Z({fusedMatMul_:S3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xX=Object.freeze(Object.defineProperty({__proto__:null,conv2d:vX,depthwiseConv2d:w3e,matMul:KA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3e(t){return XE(t,.54,.46)}const C3e=Z({hammingWindow_:$3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3e(t){return XE(t,.5,.5)}const wX=Z({hannWindow_:E3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3e(t,e,n,r=!1,i=0){let a=0;const o=[];for(;a+e<=t.size;)o.push(At(t,a,e)),a+=n;if(r)for(;a<t.size;){const s=a+e-t.size,l=tr([At(t,a,e-s),Pf([s],i)]);o.push(l),a+=n}return o.length===0?Qh([],[0,e]):te(tr(o),[o.length,e])}const SX=Z({frame_:T3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I3e(t,e,n,r,i=wX){r==null&&(r=lM(e));const a=SX(t,e,n),o=J(a,i(e));return Tx(o,r)}const N3e=Z({stft_:I3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k3e(t,e,n,r,i="bilinear",a=0){const o=z(t,"image","cropAndResize"),s=z(e,"boxes","cropAndResize","float32"),l=z(n,"boxInd","cropAndResize","int32"),c=s.shape[0];j(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),j(s.rank===2&&s.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${s.shape}.`),j(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${s.shape}.`),j(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),j(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),j(i==="bilinear"||i==="nearest",()=>`method must be bilinear or nearest, but was ${i}`);const u={image:o,boxes:s,boxInd:l},d={method:i,extrapolationValue:a,cropSize:r};return K.runKernel(E2,u,d)}const O3e=Z({cropAndResize_:k3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A3e(t){const e=z(t,"image","flipLeftRight","float32");j(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return K.runKernel(F2,n,{})}const _3e=Z({flipLeftRight_:A3e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(t){const e=z(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];j(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),j(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const i=new Array(e.rank);return i.fill(1,0,n),i[n]=3,to(e,i)}const R3e=Z({grayscaleToRGB_:P3e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D3e(t){const e=z(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];j(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),j(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const i=e.dtype,a=_e(e,"float32"),o=$i([.2989,.587,.114]);let s;switch(e.rank){case 2:s=gd("ij,j->i",a,o);break;case 3:s=gd("ijk,k->ij",a,o);break;case 4:s=gd("ijkl,l->ijk",a,o);break;case 5:s=gd("ijklm,m->ijkl",a,o);break;case 6:s=gd("ijklmn,n->ijklm",a,o);break;default:throw new Error("Not a valid tensor rank.")}return s=Si(s,-1),_e(s,i)}const F3e=Z({rgbToGrayscale_:D3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3e(t,e,n=0,r=.5){const i=z(t,"image","rotateWithOffset","float32");j(i.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);const a={image:i},o={radians:e,fillValue:n,center:r};return K.runKernel(yE,a,o)}const L3e=Z({rotateWithOffset_:M3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cg(t,e,n,r,i,a){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),a==null&&(a=0);const o=t.shape[0];return n=Math.min(n,o),j(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),j(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),j(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),j(e.rank===1,()=>"scores must be a 1D tensor"),j(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),j(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=z(t,"boxes","nonMaxSuppression","float32"),o=z(e,"scores","nonMaxSuppression","float32"),s=Cg(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return K.runKernel(G2,{boxes:a,scores:o},l)}const z3e=Z({nonMaxSuppression_:j3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3e(t,e,n){const r=V3e(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function V3e(t,e,n){return U3e(t,e,n||W3e)}function W3e(t,e){return t>e?1:t<e?-1:0}function U3e(t,e,n){let r=0,i=t.length,a=0,o=!1;for(;r<i;){a=r+(i-r>>>1);const s=n(e,t[a]);s>0?r=a+1:(i=a,o=!s)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eT(t,e,n,r,i){return uM(t,e,n,r,i,0)}function tT(t,e,n,r,i,a){return uM(t,e,n,r,i,0,!1,a,!0)}function nT(t,e,n,r,i,a){return uM(t,e,n,r,i,a,!0)}function uM(t,e,n,r,i,a,o=!1,s=!1,l=!1){const c=[];for(let m=0;m<e.length;m++)e[m]>i&&c.push({score:e[m],boxIndex:m,suppressBeginIndex:0});c.sort(U5);const u=a>0?-.5/a:0,d=[],f=[];for(;d.length<n&&c.length>0;){const m=c.pop(),{score:v,boxIndex:y,suppressBeginIndex:b}=m;if(v<i)break;let w=!1;for(let x=d.length-1;x>=b;--x){const $=H3e(t,y,d[x]);if($>=r){w=!0;break}if(m.score=m.score*G3e(r,u,$),m.score<=i)break}m.suppressBeginIndex=d.length,w||(m.score===v?(d.push(y),f.push(m.score)):m.score>i&&B3e(c,m,U5))}const h=d.length,p=n-h;s&&p>0&&(d.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const g={selectedIndices:d};return o&&(g.selectedScores=f),l&&(g.validOutputs=h),g}function H3e(t,e,n){const r=t.subarray(e*4,e*4+4),i=t.subarray(n*4,n*4+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),u=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),h=(s-a)*(l-o),p=(d-c)*(f-u);if(h<=0||p<=0)return 0;const g=Math.max(a,c),m=Math.max(o,u),v=Math.min(s,d),y=Math.min(l,f),b=Math.max(v-g,0)*Math.max(y-m,0);return b/(h+p-b)}function G3e(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function U5(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function q3e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const a=z(t,"boxes","nonMaxSuppressionAsync"),o=z(e,"scores","nonMaxSuppressionAsync"),s=Cg(a,o,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;const l=await Promise.all([a.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:d}=eT(c,u,n,r,i);return a!==t&&a.dispose(),o!==e&&o.dispose(),$i(d,"int32")}const K3e=q3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=z(t,"boxes","nonMaxSuppression"),s=z(e,"scores","nonMaxSuppression"),l=Cg(o,s,n,r,i,a);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma;const c={boxes:o,scores:s},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:a},d=K.runKernel(K2,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const Y3e=Z({nonMaxSuppressionWithScore_:X3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Z3e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=0){const o=z(t,"boxes","nonMaxSuppressionAsync"),s=z(e,"scores","nonMaxSuppressionAsync"),l=Cg(o,s,n,r,i,a);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,a=l.softNmsSigma;const c=await Promise.all([o.data(),s.data()]),u=c[0],d=c[1],{selectedIndices:f,selectedScores:h}=nT(u,d,n,r,i,a);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:$i(f,"int32"),selectedScores:$i(h)}}const Q3e=Z3e;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3e(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=z(t,"boxes","nonMaxSuppression"),s=z(e,"scores","nonMaxSuppression"),l=Cg(o,s,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,f={boxes:o,scores:s},h={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:a},p=K.runKernel(q2,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}const eLe=Z({nonMaxSuppressionPadded_:J3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function tLe(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,a=!1){const o=z(t,"boxes","nonMaxSuppressionAsync"),s=z(e,"scores","nonMaxSuppressionAsync"),l=Cg(o,s,n,r,i,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([o.data(),s.data()]),{selectedIndices:p,validOutputs:g}=tT(f,h,c,u,d,a);return o!==t&&o.dispose(),s!==e&&s.dispose(),{selectedIndices:$i(p,"int32"),validOutputs:ct(g,"int32")}}const nLe=tLe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rLe(t,e,n=!1,r=!1){const i=z(t,"images","resizeBilinear");j(i.rank===3||i.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),j(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),j(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=i,o=!1;i.rank===3&&(o=!0,a=te(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const s={images:a},l={alignCorners:n,halfPixelCenters:r,size:e},c=K.runKernel(Xb,s,l);return o?te(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const $X=Z({resizeBilinear_:rLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iLe(t,e,n=!1,r=!1){const i=z(t,"images","resizeNearestNeighbor");j(i.rank===3||i.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),j(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),j(i.dtype==="float32"||i.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),j(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=i,o=!1;i.rank===3&&(o=!0,a=te(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const s={images:a},l={alignCorners:n,halfPixelCenters:r,size:e},c=K.runKernel(Kb,s,l);return o?te(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const CX=Z({resizeNearestNeighbor_:iLe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aLe(t,e="binary",n=!1,r=.5){const i=z(t,"image","threshold"),a=.2989,o=.587,s=.114,l=i.shape[0]*i.shape[1];let c=J($i([r]),255),u,d,f,h;if(j(i.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${i.rank}.`),j(i.shape[2]===3||i.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${i.shape[2]}.`),j(i.dtype==="int32"||i.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${i.dtype}.`),j(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),i.shape[2]===3){[u,d,f]=la(i,[1,1,1],-1);const m=J(u,a),v=J(d,o),y=J(f,s);h=Ee(Ee(m,v),y)}else h=t;if(e==="otsu"){const m=mF(_e(FE(h),"int32"),Bo([]),256);c=oLe(m,l)}const p=n?zu(h,c):ya(h,c);return _e(J(p,255),"int32")}function oLe(t,e){let n=$i([-1]),r=$i([0]),i=$i([0]),a,o,s,l,c,u;for(let d=0;d<t.size-1;d++){a=At(t,0,d+1),o=At(t,d+1),c=nt(qe(a),e),u=nt(qe(o),e);const f=qe(J(a,df(0,a.size)));s=nt(f,qe(a));const h=Pf(o.shape,a.size),p=Ee(df(0,o.size),h),g=J(o,p);l=nt(qe(g),qe(o));const m=Ue(s,l),v=Ue(s,l),y=J(c,u);i=J(J(y,m),v);const b=ya(i,r);r=li(b,i,r),n=li(b,$i([d]),n)}return n}const sLe=Z({threshold_:aLe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lLe(t,e,n="nearest",r="constant",i=0,a){const o=z(t,"image","transform","float32"),s=z(e,"transforms","transform","float32");j(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),j(s.rank===2&&(s.shape[0]===o.shape[0]||s.shape[0]===1)&&s.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),j(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const l={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:i,outputShape:a};return K.runKernel(gE,l,c)}const cLe=Z({transform_:lLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uLe(t,e,n){const r=z(t,"a","bandPart");j(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[a,o]=r.shape.slice(-2);let s,l;typeof e=="number"?(j(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),j(e<=a,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`),s=z(e<0?a:e,"numLower","bandPart")):(j(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),s=li(Vp(e,0),a,xu(e,a))),typeof n=="number"?(j(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),j(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=z(n<0?o:n,"numUpper","bandPart")):(j(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=li(Vp(n,0),o,xu(n,o)));const c=te(df(0,a,1,"int32"),[-1,1]),u=df(0,o,1,"int32"),d=Ue(c,u),f=Ns(zu(d,s),gc(d,bn(l))),h=hr([a,o],r.dtype);return te(ha(ho(te(r,[-1,a,o])).map(p=>li(f,p,h))),i)}const dLe=Z({bandPart_:uLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fLe(t){let e;if(Array.isArray(t)){e=!1,j(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const i=t[0].shape[0];for(let a=1;a<t.length;++a)j(t[a].shape[0]===i,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[a].shape[0]} vs. ${i})`)}else e=!0,t=la(t,t.shape[0],0).map(i=>Vu(i,[0]));j(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(K.tidy(()=>{let a=r[i];if(i>0)for(let o=0;o<i;++o){const s=J(qe(J(n[o],a)),n[o]);a=Ue(a,s)}return nt(a,wg(a,"euclidean"))}));return e?ha(n,0):n}const hLe=Z({gramSchmidt_:fLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pLe(t,e=!1){if(j(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return H5(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=ho(te(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],a=[];r.forEach(l=>{const[c,u]=H5(l,e);i.push(c),a.push(u)});const o=te(ha(i,0),t.shape),s=te(ha(a,0),t.shape);return[o,s]}}function H5(t,e=!1){return K.tidy(()=>{j(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=NE(n),a=cl(t);const o=Qh([[1]],[1,1]);let s=cl(o);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=a,d=s,f=i;[s,a,i]=K.tidy(()=>{const h=At(a,[c,c],[n-c,1]),p=wg(h),g=At(a,[c,c],[1,1]),m=li(ya(g,0),Qh([[-1]]),Qh([[1]])),v=Ue(g,J(m,p)),y=nt(h,v);y.shape[0]===1?s=cl(o):s=tr([o,At(y,[1,0],[y.shape[0]-1,y.shape[1]])],0);const b=bn(nt(Ct(m,v),p)),w=At(a,[c,0],[n-c,r]),x=J(b,s),$=kt(s);if(c===0)a=Ue(w,Ct(x,Ct($,w)));else{const I=Ue(w,Ct(x,Ct($,w)));a=tr([At(a,[0,0],[c,r]),I],0)}const C=kt(x),E=At(i,[0,c],[n,i.shape[1]-c]);if(c===0)i=Ue(E,Ct(Ct(E,s),C));else{const I=Ue(E,Ct(Ct(E,s),C));i=tr([At(i,[0,0],[n,c]),I],1)}return[s,a,i]}),Et([u,d,f])}return!e&&n>r&&(i=At(i,[0,0],[n,r]),a=At(a,[0,0],[r,r])),[i,a]})}const mLe=Z({qr_:pLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Bi;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Bi||(Bi={}));function gLe(t,e,n=Bi.SUM_BY_NONZERO_WEIGHTS){const r=z(t,"losses","computeWeightedLoss");let i=null;e!=null&&(i=z(e,"weights","computeWeightedLoss"));const a=i==null?r:J(r,i);if(n===Bi.NONE)return a;if(n===Bi.SUM)return qe(a);if(n===Bi.MEAN){if(i==null)return zn(a);{const o=r.size/i.size,s=nt(qe(a),qe(i));return o>1?nt(s,ct(o)):s}}if(n===Bi.SUM_BY_NONZERO_WEIGHTS){if(i==null)return nt(qe(a),ct(r.size));{const o=J(i,oa(r.shape)),s=_e(qe(uf(o,ct(0))),"float32");return nt(qe(a),s)}}throw Error(`Unknown reduction: ${n}`)}const yc=Z({computeWeightedLoss_:gLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vLe(t,e,n,r=Bi.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","absoluteDifference"),a=z(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=z(n,"weights","absoluteDifference")),fi(i.shape,a.shape,"Error in absoluteDifference: ");const s=cr(Ue(i,a));return yc(s,o,r)}const yLe=Z({absoluteDifference_:vLe});function bLe(t,e,n,r,i=Bi.SUM_BY_NONZERO_WEIGHTS){const a=z(t,"labels","cosineDistance"),o=z(e,"predictions","cosineDistance");let s=null;r!=null&&(s=z(r,"weights","cosineDistance")),fi(a.shape,o.shape,"Error in cosineDistance: ");const l=ct(1),c=Ue(l,qe(J(a,o),n,!0));return yc(c,s,i)}const xLe=Z({cosineDistance_:bLe});function wLe(t,e,n,r=Bi.SUM_BY_NONZERO_WEIGHTS){let i=z(t,"labels","hingeLoss");const a=z(e,"predictions","hingeLoss");let o=null;n!=null&&(o=z(n,"weights","hingeLoss")),fi(i.shape,a.shape,"Error in hingeLoss: ");const s=ct(1);i=Ue(J(ct(2),i),s);const l=Fs(Ue(s,J(i,a)));return yc(l,o,r)}const SLe=Z({hingeLoss_:wLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Le(t,e,n,r=1,i=Bi.SUM_BY_NONZERO_WEIGHTS){const a=z(t,"labels","huberLoss"),o=z(e,"predictions","huberLoss");let s=null;n!=null&&(s=z(n,"weights","huberLoss")),fi(a.shape,o.shape,"Error in huberLoss: ");const l=ct(r),c=cr(Ue(o,a)),u=xu(c,l),d=Ue(c,u),f=Ee(J(ct(.5),rn(u)),J(l,d));return yc(f,s,i)}const CLe=Z({huberLoss_:$Le});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ELe(t,e,n,r=1e-7,i=Bi.SUM_BY_NONZERO_WEIGHTS){const a=z(t,"labels","logLoss"),o=z(e,"predictions","logLoss");let s=null;n!=null&&(s=z(n,"weights","logLoss")),fi(a.shape,o.shape,"Error in logLoss: ");const l=ct(1),c=ct(r),u=bn(J(a,_a(Ee(o,c)))),d=J(Ue(l,a),_a(Ee(Ue(l,o),c))),f=Ue(u,d);return yc(f,s,i)}const TLe=Z({logLoss_:ELe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ILe(t,e,n,r=Bi.SUM_BY_NONZERO_WEIGHTS){const i=z(t,"labels","meanSquaredError"),a=z(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=z(n,"weights","meanSquaredError")),fi(i.shape,a.shape,"Error in meanSquaredError: ");const s=UE(i,a);return yc(s,o,r)}const NLe=Z({meanSquaredError_:ILe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kLe(t,e){const n=z(t,"labels","sigmoidCrossEntropyWithLogits"),r=z(e,"logits","sigmoidCrossEntropyWithLogits");fi(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=Fs(r),a=J(r,n),o=mx(fa(bn(cr(r))));return Ee(Ue(i,a),o)}function OLe(t,e,n,r=0,i=Bi.SUM_BY_NONZERO_WEIGHTS){let a=z(t,"multiClassLabels","sigmoidCrossEntropy");const o=z(e,"logits","sigmoidCrossEntropy");let s=null;if(n!=null&&(s=z(n,"weights","sigmoidCrossEntropy")),fi(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=ct(r),u=ct(1),d=ct(.5);a=Ee(J(a,Ue(u,c)),J(d,c))}const l=kLe(a,o);return yc(l,s,i)}const ALe=Z({sigmoidCrossEntropy_:OLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Le(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return yl((i,a,o)=>{const l=gx(a,[n],!0),c=Ue(_e(a,"float32"),l);o([i,c]);const u=bn(J(c,i));return{value:qe(u,[n]),gradFunc:(h,p)=>{const[g,m]=p,v=nr(h.shape,[n]);return[J(te(h,v),Ue(_e(g,"float32"),fa(m))),J(te(h,v),Ue(fa(m),_e(g,"float32")))]}}})(t,e)}function PLe(t,e,n,r=0,i=Bi.SUM_BY_NONZERO_WEIGHTS){let a=z(t,"onehotLabels","softmaxCrossEntropy");const o=z(e,"logits","softmaxCrossEntropy");let s=null;if(n!=null&&(s=z(n,"weights","softmaxCrossEntropy")),fi(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const c=ct(r),u=ct(1),d=ct(a.shape[1]);a=Ee(J(a,Ue(u,c)),nt(c,d))}const l=_Le(a,o);return yc(l,s,i)}const RLe=Z({softmaxCrossEntropy_:PLe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DLe(t,e,n,r){const i=z(t,"indices","sparseFillEmptyRows","int32"),a=z(e,"values","sparseFillEmptyRows"),o=z(n,"denseShape","sparseFillEmptyRows","int32"),s=z(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(i.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${i.shape}`);if(a.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(s.rank!==0)throw new Error(`Default value should be a scalar but received shape ${s.shape}`);const l={indices:i,values:a,denseShape:o,defaultValue:s},c=K.runKernel(aE,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const FLe=Z({sparseFillEmptyRows_:DLe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MLe(t,e,n){const r=z(t,"inputIndices","sparseReshape","int32"),i=z(e,"inputShape","sparseReshape","int32"),a=z(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(i.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${i.shape}`);if(a.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const o={inputIndices:r,inputShape:i,newShape:a},s=K.runKernel(oE,o);return{outputIndices:s[0],outputShape:s[1]}}const LLe=Z({sparseReshape_:MLe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jLe(t,e,n){const r=z(t,"data","sparseSegmentMean"),i=z(e,"indices","sparseSegmentMean","int32"),a=z(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${i.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${a.shape}`);const o={data:r,indices:i,segmentIds:a};return K.runKernel(sE,o)}const zLe=Z({sparseSegmentMean_:jLe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BLe(t,e,n){const r=z(t,"data","sparseSegmentSum"),i=z(e,"indices","sparseSegmentSum","int32"),a=z(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${i.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${a.shape}`);const o={data:r,indices:i,segmentIds:a};return K.runKernel(lE,o)}const VLe=Z({sparseSegmentSum_:BLe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WLe(t,e,n,r,i,a,o,s){const l=z(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=z(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:i,rightPad:a,padWidth:o,preserveShortSequences:s},d={data:l,dataSplits:c},f=K.runKernel(fE,d,u);return{nGrams:f[0],nGramsSplits:f[1]}}const ULe=Z({stringNGrams_:WLe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HLe(t,e,n=!0){const r=z(t,"input","stringSplit","string"),i=z(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(i.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${i.shape}`);const a={skipEmpty:n},o={input:r,delimiter:i},s=K.runKernel(hE,o,a);return{indices:s[0],values:s[1],shape:s[2]}}const GLe=Z({stringSplit_:HLe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qLe(t,e){const n=z(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const i={input:n};return K.runKernel(pE,i,r)}const KLe=Z({stringToHashBucketFast_:qLe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XLe(t,e,n,r=!0){const i=z(t,"input","staticRegexReplace","string"),a={pattern:e,rewrite:n,replaceGlobal:r};return K.runKernel(rx,{x:i},a)}const YLe=Z({staticRegexReplace_:XLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EX={fft:Ex,ifft:Gp,rfft:Tx,irfft:WE},TX={hammingWindow:C3e,hannWindow:wX,frame:SX,stft:N3e},gs={flipLeftRight:_3e,grayscaleToRGB:R3e,resizeNearestNeighbor:CX,resizeBilinear:$X,rgbToGrayscale:F3e,rotateWithOffset:L3e,cropAndResize:O3e,nonMaxSuppression:z3e,nonMaxSuppressionAsync:K3e,nonMaxSuppressionWithScore:Y3e,nonMaxSuppressionWithScoreAsync:Q3e,nonMaxSuppressionPadded:eLe,nonMaxSuppressionPaddedAsync:nLe,threshold:sLe,transform:cLe},dM={bandPart:dLe,gramSchmidt:hLe,qr:mLe},IX={absoluteDifference:yLe,computeWeightedLoss:yc,cosineDistance:xLe,hingeLoss:SLe,huberLoss:CLe,logLoss:TLe,meanSquaredError:NLe,sigmoidCrossEntropy:ALe,softmaxCrossEntropy:RLe},NX={sparseFillEmptyRows:FLe,sparseReshape:LLe,sparseSegmentMean:zLe,sparseSegmentSum:VLe},kX={stringNGrams:ULe,stringSplit:GLe,stringToHashBucketFast:KLe,staticRegexReplace:YLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZLe=new Map,XA=new Map;class Mf{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Ja{constructor(){this.classNameMap={}}static getMap(){return Ja.instance==null&&(Ja.instance=new Ja),Ja.instance}static register(e){Ja.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Te(t,e,n){j(t.className!=null,()=>"Class being registered does not have the static className property defined."),j(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),j(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,i=e+">"+r;return Ja.register(t),ZLe.set(i,t),XA.set(t,i),t}function QLe(t){return XA.has(t)?XA.get(t):t.className}const JLe=Object.freeze(Object.defineProperty({__proto__:null,Serializable:Mf,SerializationMap:Ja,getRegisteredName:QLe,registerClass:Te},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bc extends Mf{minimize(e,n=!1,r){const{value:i,grads:a}=this.computeGradients(e,r);if(r!=null){const o=r.map(s=>({name:s.name,tensor:a[s.name]}));this.applyGradients(o)}else this.applyGradients(a);return Et(a),n?i:(i.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return RK(e,n)}dispose(){this.iterations_!=null&&Et(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:ct(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(bc,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fM extends bc{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=K.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=K.registeredVariables[r],o=!1;this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accum_grad`,variable:ae(()=>Pt(a).variable(o))}),this.accumulatedUpdates[i]==null&&(this.accumulatedUpdates[i]={originalName:`${r}/accum_var`,variable:ae(()=>Pt(a).variable(o))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const l=this.accumulatedGrads[i].variable,c=this.accumulatedUpdates[i].variable;ae(()=>{const u=Ee(J(l,this.rho),J(rn(s),1-this.rho)),d=J(nt(Wr(Ee(c,this.epsilon)),Wr(Ee(l,this.epsilon))),s),f=Ee(J(c,this.rho),J(rn(d),1-this.rho));l.assign(u),c.assign(f);const h=Ee(J(d,-this.learningRate),a);a.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Et(this.accumulatedGrads.map(e=>e.variable)),Et(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hM extends bc{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=K.registeredVariables[r];this.accumulatedGrads[i]==null&&(this.accumulatedGrads[i]={originalName:`${r}/accumulator`,variable:ae(()=>Pf(a.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[i].tensor:e[r];if(o==null)return;const s=this.accumulatedGrads[i].variable;ae(()=>{const l=Ee(s,rn(o));s.assign(l);const c=Ee(J(nt(o,Wr(Ee(l,K.backend.epsilon()))),-this.learningRate),a);a.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Et(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pM extends bc{static get className(){return"Adam"}constructor(e,n,r,i=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],ae(()=>{this.accBeta1=ct(n).variable(),this.accBeta2=ct(r).variable()}),i==null&&(this.epsilon=K.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ae(()=>{const r=Ue(1,this.accBeta1),i=Ue(1,this.accBeta2);n.forEach((a,o)=>{const s=K.registeredVariables[a],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:ae(()=>Pt(s).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${a}/v`,variable:ae(()=>Pt(s).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[a];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,f=Ee(J(u,this.beta1),J(c,1-this.beta1)),h=Ee(J(d,this.beta2),J(rn(c),1-this.beta2)),p=nt(f,r),g=nt(h,i);u.assign(f),d.assign(h);const m=Ee(J(nt(p,Ee(Wr(g),this.epsilon)),-this.learningRate),s);s.assign(m)}),this.accBeta1.assign(J(this.accBeta1,this.beta1)),this.accBeta2.assign(J(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Et(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Et(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),ae(()=>{this.accBeta1.assign(vl(this.beta1,this.iterations_+1)),this.accBeta2.assign(vl(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mM extends bc{static get className(){return"Adamax"}constructor(e,n,r,i=null,a=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=i,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],ae(()=>{this.iteration=ct(0).variable(),this.accBeta1=ct(n).variable()}),i==null&&(this.epsilon=K.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);ae(()=>{const r=Ue(1,this.accBeta1),i=nt(-this.learningRate,Ee(J(this.iteration,this.decay),1));n.forEach((a,o)=>{const s=K.registeredVariables[a],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${a}/m`,variable:Pt(s).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${a}/v`,variable:Pt(s).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[a];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,f=Ee(J(u,this.beta1),J(c,1-this.beta1)),h=J(d,this.beta2),p=cr(c),g=El(h,p);u.assign(f),d.assign(g);const m=Ee(J(nt(i,r),nt(f,Ee(g,this.epsilon))),s);s.assign(m)}),this.iteration.assign(Ee(this.iteration,1)),this.accBeta1.assign(J(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Et(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Et(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rT extends bc{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=Array.isArray(e)?e[i].tensor:e[r];if(a==null)return;const o=K.registeredVariables[r];ae(()=>{const s=Ee(J(this.c,a),o);o.assign(s)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Cr(ct(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gM extends rT{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=ct(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=K.registeredVariables[r];this.accumulations[i]==null&&(this.accumulations[i]={originalName:`${r}/momentum`,variable:ae(()=>Pt(a).variable(!1))});const o=this.accumulations[i].variable,s=Array.isArray(e)?e[i].tensor:e[r];s!=null&&ae(()=>{let l;const c=Ee(J(this.m,o),s);this.useNesterov?l=Ee(J(this.c,Ee(s,J(c,this.m))),a):l=Ee(J(this.c,c),a),o.assign(c),a.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Et(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vM extends bc{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,i=null,a=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=i,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,i==null&&(this.epsilon=K.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,i)=>{const a=K.registeredVariables[r],o=!1;this.accumulatedMeanSquares[i]==null&&(this.accumulatedMeanSquares[i]={originalName:`${r}/rms`,variable:ae(()=>Pt(a).variable(o))}),this.accumulatedMoments[i]==null&&(this.accumulatedMoments[i]={originalName:`${r}/momentum`,variable:ae(()=>Pt(a).variable(o))}),this.accumulatedMeanGrads[i]==null&&this.centered&&(this.accumulatedMeanGrads[i]={originalName:`${r}/mg`,variable:ae(()=>Pt(a).variable(o))});const s=Array.isArray(e)?e[i].tensor:e[r];if(s==null)return;const l=this.accumulatedMeanSquares[i].variable,c=this.accumulatedMoments[i].variable;ae(()=>{const u=Ee(J(l,this.decay),J(rn(s),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[i].variable,f=Ee(J(d,this.decay),J(s,1-this.decay)),h=nt(J(s,this.learningRate),Wr(Ue(u,Ee(rn(f),this.epsilon)))),p=Ee(J(c,this.momentum),h);l.assign(u),d.assign(f),c.assign(p);const g=Ue(a,p);a.assign(g)}else{const d=Ee(J(l,this.decay),J(rn(s),1-this.decay)),f=Ee(J(c,this.momentum),nt(J(s,this.learningRate),Wr(Ee(d,this.epsilon))));l.assign(d),c.assign(f);const h=Ue(a,f);a.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Et(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Et(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Et(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(i=>({originalName:i.name,variable:i.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eje=[fM,hM,pM,mM,gM,vM,rT];function tje(){for(const t of eje)Te(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nje="model",rje=".json",ije=".weights.bin";function G5(t){return new Promise(e=>setTimeout(e)).then(t)}class ff{constructor(e){if(!oe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(ff.URL_SCHEME)&&(e=e.slice(ff.URL_SCHEME.length)),(e==null||e.length===0)&&(e=nje),this.modelJsonFileName=e+rje,this.weightDataFileName=e+ije}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=Ds.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const i=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=mK(e,i),o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),s=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(s.download=this.modelJsonFileName,s.href=o,await G5(()=>s.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await G5(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:lx(e)}}}}ff.URL_SCHEME="downloads://";class aje{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=i=>{const a=JSON.parse(i.target.result),o=a.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(a.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const l=eF(a,c=>this.loadWeights(c));e(l)},r.onerror=i=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const i=this.checkManifestAndWeightFiles(e),a=r.map(o=>this.loadWeightsFile(o,i[o]));return Promise.all(a).then(o=>[n,o])}loadWeightsFile(e,n){return new Promise((r,i)=>{const a=new FileReader;a.onload=o=>{const s=o.target.result;r(s)},a.onerror=o=>i(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(a=>W5(a.name)),i={};for(const a of e)a.paths.forEach(o=>{const s=W5(o);if(n.indexOf(s)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),r.indexOf(s)===-1)throw new Error(`Weight file with basename '${s}' is not provided.`);i[o]=this.weightsFiles[r.indexOf(s)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}}const oje=t=>oe().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ff.URL_SCHEME)?sje(t.slice(ff.URL_SCHEME.length)):null;Ln.registerSaveRouter(oje);function sje(t="model"){return new ff(t)}function lje(t){return new aje(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q5(t,e,n,r){o(t),n=n??0,r=r??1,s(n,r);let i=0;const a=l=>(l.then(c=>{const u=n+ ++i/t.length*(r-n);return e(u),c}),l);function o(l){j(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function s(l,c){j(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),j(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),j(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(a))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function OX(t,e){e==null&&(e={});const n=e.fetchFunc==null?oe().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),s=(e.onProgress==null?await Promise.all(r):await q5(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(s):await q5(s,e.onProgress,.5,1)}function cje(t,e){var n;const r=e.fetchFunc==null?oe().platform.fetch:e.fetchFunc;let i=0,a;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async o=>{for(var s;i<t.length;){a||(a=(await r(t[i],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await a.read();if(l){i++,a=void 0,(s=e.onProgress)===null||s===void 0||s.call(e,i/t.length);continue}o.enqueue(c);return}o.close()}})}async function uje(t,e="",n,r){return AX(o=>OX(o,{requestInit:r}))(t,e,n)}function AX(t){return async(e,n="",r)=>{const i=e.map(()=>!1),a={},o=r!=null?r.map(()=>!1):[],s=[];if(e.forEach((h,p)=>{let g=0;h.weights.forEach(m=>{const v="quantization"in m?m.quantization.dtype:m.dtype,y=rf[v]*de(m.shape),b=()=>{i[p]=!0,a[p]==null&&(a[p]=[]),a[p].push({manifestEntry:m,groupOffset:g,sizeBytes:y})};r!=null?r.forEach((w,x)=>{w===m.name&&(b(),o[x]=!0)}):b(),s.push(m.name),g+=y})}),!o.every(h=>h)){const h=r.filter((p,g)=>!o[g]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}const l=i.reduce((h,p,g)=>(p&&h.push(g),h),[]),c=[];l.forEach(h=>{e[h].paths.forEach(p=>{const g=n+(n.endsWith("/")?"":"/")+p;c.push(g)})});const u=await t(c),d={};let f=0;return l.forEach(h=>{const p=e[h].paths.length,g=new Ds(u.slice(f,f+p));a[h].forEach(v=>{const y=g.slice(v.groupOffset,v.groupOffset+v.sizeBytes),b=dK(y,[v.manifestEntry]);for(const w in b)d[w]=b[w]}),f+=p}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dje="application/octet-stream",fje="application/json";class yM{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(j(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=oe().platform.fetch,j(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&j(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i=mK(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(i)],{type:fje}),"model.json"),e.weightData!=null){const o=Ds.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:dje}),"model.weights.bin")}const a=await this.fetch(this.path,n);if(a.ok)return{modelArtifactsInfo:lx(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,i=n.weightsManifest;if(r==null&&i==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return eF(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=b$(e.weightsManifest),i=()=>cje(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:i})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,i]=hje(n),a=this.weightPathPrefix||r,o=[],s=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?s.push(this.weightUrlConverter(c)):o.push(a+c+i);return this.weightUrlConverter&&o.push(...await Promise.all(s)),o}async loadWeights(e){const n=await this.getWeightUrls(e),r=b$(e),i=await OX(n,this.loadOptions);return[r,i]}}yM.URL_SCHEME_REGEX=/^https?:\/\//;function hje(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),i=n>e?t.substring(n):"";return[r+"/",i]}function YA(t){return t.match(yM.URL_SCHEME_REGEX)!=null}const _X=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>YA(r)):n=YA(t),n)return bM(t,e)}return null};Ln.registerSaveRouter(_X);Ln.registerLoadRouter(_X);function bM(t,e){return new yM(t,e)}function pje(t,e){return bM(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iN{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class PX{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class mje{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function gje(t,e,n,r){const i=arguments;return new mje(w$(...i))}function w$(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new iN(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new iN({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new iN({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function vje(t){return new PX(t)}function yje(t){return new PX(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xM=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Ds,browserFiles:lje,browserHTTPRequest:pje,concatenateArrayBuffers:pK,copyModel:YPe,decodeWeights:dK,decodeWeightsStream:hK,encodeWeights:VA,fromMemory:gje,fromMemorySync:w$,getLoadHandlers:FPe,getModelArtifactsForJSON:eF,getModelArtifactsForJSONSync:JD,getModelArtifactsInfoForJSON:lx,getSaveHandlers:gK,getWeightSpecs:b$,http:bM,isHTTPScheme:YA,listModels:KPe,loadWeights:uje,moveModel:ZPe,registerLoadRouter:DPe,registerSaveRouter:RPe,removeModel:XPe,weightsLoaderFactory:AX,withSaveHandler:vje,withSaveHandlerSync:yje},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bje(t,e,n){const r=z(t,"labels","confusionMatrix"),i=z(e,"predictions","confusionMatrix");j(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),j(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),j(i.rank===1,()=>`Expected the rank of predictions to be 1, but got ${i.rank}`),j(r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),j(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const a=Wp(_e(r,"int32"),n),o=Wp(_e(i,"int32"),n),s=kt(a),l=Ct(s,o);return _e(l,"int32")}const xje=Z({confusionMatrix_:bje});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wje=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:xje},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let td,K5=!1;function RX(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,a=!1,o=!1,s=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)a=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)s=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(h0(g$,K.backendName)!=null){const p={pixels:t},g={numChannels:e};return K.runKernel(g$,p,g)}const[c,u]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(o)d=t.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)d=t.data;else if(a||i||s){if(td==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")td=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else td=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});td.canvas.width=c,td.canvas.height=u,td.drawImage(t,0,0,c,u),d=td.getImageData(0,0,c,u).data}let f;if(e===4)f=new Int32Array(d);else{const p=c*u;f=new Int32Array(p*e);for(let g=0;g<p;g++)for(let m=0;m<e;++m)f[g*e+m]=d[g*4+m]}return tM(f,[u,c,e],"int32")}function Sje(t){return t!=null&&t.data instanceof Uint8Array}function $je(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function Cje(t){return t!=null&&t.width!==0&&t.height!==0}function Eje(t){return $je()&&!(t instanceof ImageBitmap)&&Cje(t)&&!Sje(t)}async function Tje(t,e=3){let n=null;if(oe().getBool("WRAP_TO_IMAGEBITMAP")&&Eje(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return RX(n,e)}function DX(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function Ije(t){const e=(t==null?void 0:t.alpha)||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function Nje(t,e){let n=z(t,"img","toPixels");if(!(t instanceof Zt)){const c=n;n=_e(c,"int32"),c.dispose()}DX(n);const[r,i]=n.shape.slice(0,2),a=n.rank===2?1:n.shape[2],o=await n.data(),s=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(i*r*4);for(let c=0;c<r*i;++c){const u=[0,0,0,255];for(let f=0;f<a;f++){const h=o[c*a+f];if(n.dtype==="float32"){if(h<0||h>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${h}.`)}else if(n.dtype==="int32"&&(h<0||h>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${h}.`);a===1?(u[0]=h*s,u[1]=h*s,u[2]=h*s):u[f]=h*s}const d=c*4;l[d+0]=Math.round(u[0]),l[d+1]=Math.round(u[1]),l[d+2]=Math.round(u[2]),l[d+3]=Math.round(u[3])}if(e!=null){K5||h0(A2,K.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),K5=!0),e.width=i,e.height=r;const c=e.getContext("2d"),u=new ImageData(l,i,r);c.putImageData(u,0,0)}return n!==t&&n.dispose(),l}function kje(t,e,n){let r=z(t,"img","draw");if(!(t instanceof Zt)){const o=r;r=_e(o,"int32"),o.dispose()}DX(r),Ije(n==null?void 0:n.imageOptions);const i={image:r},a={canvas:e,options:n};K.runKernel(A2,i,a)}const Oje=Z({fromPixels_:RX}),Aje=Object.freeze(Object.defineProperty({__proto__:null,draw:kje,fromPixels:Oje,fromPixelsAsync:Tje,toPixels:Nje},Symbol.toStringTag,{value:"Module"}));function iT(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(de(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const i=e.shape,a=i[i.length-1];let o=1;for(let d=0;d<i.length-1;++d)o*=i[d];const s=t.shape,l=i.slice();l.pop();let c=1;for(let d=a;d<n;++d)c*=s[d],l.push(s[d]);const u=[...ot(t.shape).map(d=>d/c),1].slice(0,a);return[l,o,c,u]}const _je=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:iT},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZA=-2,Pje=-1;function wM(t,e,n){const r=t.shape.length;j(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),j(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)j(e[i]+n[i]<=t.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${e[i]+n[i]}) would overflow input.shape[${i}] (${t.shape[i]})`)}function Rje(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function SM(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function FX(t,e,n,r){const i=[...t];for(let a=i.length;a<r.length;a++)i.push(1);for(let a=0;a<n;a++)a===0?i[e]=1:(i.splice(e,0,1),i.pop());return i}function MX(t,e,n){return n<=t?n:n-(e-1)}function LX(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Dje(t,e,n,r,i,a,o,s,l){const c=t.length;let u=new Array(c),d=new Array(c),f=new Array(c);if(e.length&&n>0){const h=e[0],p=n+1;u=jX(o,h,p,r,t),d=zX(s,h,p,i,t),f=FX(a,h,p,t)}else for(let h=0;h<c;h++)u[h]=VX(o,r,a,t,h,l),d[h]=WX(s,i,a,t,h,l),f[h]=BX(a,h,l);return{begin:u,end:d,strides:f}}function jX(t,e,n,r,i){const a=[...i],o=LX(n,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=0;else{const l=MX(e,n,s);let c=r[l];t&1<<l&&(c=0),a[s]=c}return a}function zX(t,e,n,r,i){const a=[...i],o=LX(n,e);for(let s=0;s<a.length;s++)if(o.indexOf(s)>-1)a[s]=Number.MAX_SAFE_INTEGER;else{const l=MX(e,n,s);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),a[s]=c}for(let s=0;s<a.length;s++){const l=i[s];a[s]<0&&(a[s]+=l),a[s]=pu(0,a[s],i[s])}return a}function BX(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function VX(t,e,n,r,i,a){let o=e[i];const s=n[i]||1;(t&1<<i||a&1<<i||o==null)&&(s>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),o=pu(0,o,l-1),o}function WX(t,e,n,r,i,a){let o=e[i];const s=n[i]||1;(t&1<<i||a&1<<i||o==null)&&(s>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),s>0?o=pu(0,o,l):o=pu(-1,o,l-1),o}function $M(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function CM(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function aT(t,e,n){let r;const i=t.shape.length;typeof e=="number"?r=[e,...new Array(i-1).fill(0)]:e.length<i?r=e.concat(new Array(i-e.length).fill(0)):r=e.slice(),r.forEach(o=>{j(o!==-1,()=>"slice() does not support negative begin indexing.")});let a;return n==null?a=new Array(i).fill(-1):typeof n=="number"?a=[n,...new Array(i-1).fill(-1)]:n.length<i?a=n.concat(new Array(i-n.length).fill(-1)):a=n,a=a.map((o,s)=>o>=0?o:(j(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${s}.`),t.shape[s]-r[s])),[r,a]}function EM(t,e,n,r,i,a,o,s,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:a,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:l};for(let b=0;b<d.dims;b++)u&&1<<b&s&&d.numAddAxisAfterEllipsis++,1<<b&o&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Fje(d,f);let h=!0,p=!0,g=!0;const m=[],v=[];for(let b=0;b<t.length;++b){if(f.strides[b]===0)throw Error(`strides[${b}] must be non-zero`);const w=!!(f.shrinkAxisMask&1<<b),x=t[b];if(x===-1){m.push(w?1:-1);continue}const $=[f.beginMask&1<<b,f.endMask&1<<b],C=[f.strides[b]>0?0:-1,f.strides[b]>0?x:x-1];if(w&&f.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&f.strides[b]===1;const E=!!(f.beginMask&1<<b&&f.endMask&1<<b);if(f.beginValid&&f.endValid){if(w){const k=f.begin[b]<0?x+f.begin[b]:f.begin[b];if(f.begin[b]=k,f.end[b]=f.begin[b]+1,k<0||k>=x)throw Error(`slice index ${f.begin[b]} of dimension ${b} out of bounds.`)}else f.begin[b]=X5(f.begin[b],0,f.strides[b],x,$,C),f.end[b]=X5(f.end[b],1,f.strides[b],x,$,C);const N=f.strides[b]===1&&f.begin[b]===0&&f.end[b]===x;h=h&&N,p=p&&(b===0&&f.strides[b]===1||N)}else h=h&&f.strides[b]===1&&E,p=p&&(b===0&&f.strides[b]===1||E);let I,T=!1;if(f.beginValid&&f.endValid?(I=f.end[b]-f.begin[b],T=!0):w?(I=1,T=!0):E&&x>=0&&(f.strides[b]<0?I=-x:I=x,T=!0),T){let N;I===0||I<0!=f.strides[b]<0?N=0:N=Math.trunc(I/f.strides[b])+(I%f.strides[b]!==0?1:0),m.push(N)}else m.push(-1)}for(let b=0;b<f.finalShapeGatherIndices.length;++b){const w=f.finalShapeGatherIndices[b];w>=0?v.push(m[w]):w===ZA&&v.push(1)}return{finalShapeSparse:v.filter((b,w)=>f.finalShapeGatherIndices[w]!==ZA),finalShape:v,isIdentity:h,sliceDim0:p,isSimpleSlice:g,begin:f.begin,end:f.end,strides:f.strides}}function Fje(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(ZA),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(Pje),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function X5(t,e,n,r,i,a){if(i[e])return n>0?a[e]:a[e+1&1];{const o=t<0?r+t:t;return o<a[0]?a[0]:o>a[1]?a[1]:o}}const UX=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:wM,computeFlatOffset:CM,computeOutShape:SM,getNormalizedAxes:Dje,isSliceContinous:$M,maskToAxes:Rje,parseSliceParams:aT,sliceInfo:EM,startForAxis:VX,startIndicesWithElidedDims:jX,stopForAxis:WX,stopIndicesWithElidedDims:zX,stridesForAxis:BX,stridesWithElidedDims:FX},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const Mje="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HX{static sgd(e){return new rT(e)}static momentum(e,n,r=!1){return new gM(e,n,r)}static rmsprop(e,n=.9,r=0,i=null,a=!1){return new vM(e,n,r,i,a)}static adam(e=.001,n=.9,r=.999,i=null){return new pM(e,n,r,i)}static adadelta(e=.001,n=.95,r=null){return new fM(e,n,r)}static adamax(e=.002,n=.9,r=.999,i=null,a=0){return new mM(e,n,r,i,a)}static adagrad(e,n=.1){return new hM(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hd=HX;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lje=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function TM(){return new Promise(t=>Lje(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IM(t,e){const n=t[0].length;t.forEach((i,a)=>{j(i.length===n,()=>`Error in concat${n}D: rank of tensors[${a}] must be the same as the rank of the rest (${n})`)}),j(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((i,a)=>{for(let o=0;o<n;o++)j(o===e||i[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${a}] (${i}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function ul(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ps;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(ps||(ps={}));function GX(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const a=n[i],o=r[r.length-n.length+i],s=r[o];if(a>=0)if(s>=0){if(s!==a)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${i+t}] = ${a} but shape[${i+t}] = ${s}`)}else r[o]=a}return r}function qX(t){const e={FIRST_DIM_SIZE:ps.FIRST_DIM_SIZE,VALUE_ROWIDS:ps.VALUE_ROWIDS,ROW_LENGTHS:ps.ROW_LENGTHS,ROW_SPLITS:ps.ROW_SPLITS,ROW_LIMITS:ps.ROW_LIMITS,ROW_STARTS:ps.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function KX(t){return t.length===0?0:t[0]===ps.FIRST_DIM_SIZE?t.length-1:t.length}function XX(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const a=t[i],o=e[i+1];if(a>=0&&o>=0&&a!==1&&a!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${i-t.length}] = ${a} but ragged tensor input.flatValues.shape[${i-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NM=30;function oT(t){return t<=NM?t:h$(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kM(t,e,n){const r=n*(typeof t=="number"?t:t[0]),i=e*(typeof t=="number"?t:t[1]);return[r,i]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ix(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const a=e.length;for(let o=0;o<a;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(a+1))}return i}function Nx(t,e,n=!0){const r=[];if(n){r.push(e);for(let i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{const i=[],a=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?a.push(o):i.push(o);r.push(...i),r.push(0),r.push(...a)}return r}function kx(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let a=1;a<t.length;++a)a<=e.length?r?i.push(e[a-1]*t[a]):i.push(t[a]/e[a-1]):i.push(t[a]);return i}function OM(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function AM(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sT=1.7580993408473768,lT=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _M=.3275911,PM=.254829592,RM=-.284496736,DM=1.421413741,FM=-1.453152027,MM=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ac(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function YX(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function ZX(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function QX(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function LM(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function JX(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function eY(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const a=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(a),r[i]=Math.sin(a)}return{real:n,imag:r}}function tY(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),i=Math.cos(r),a=Math.sin(r);return{real:i,imag:a}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aN="->",jje=/->/g,Y5=",",Z5="...";function jM(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(jje,"").length)/aN.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${aN}").`);const[r,i]=t.split(aN);j(r.indexOf(Z5)===-1,()=>`The ellipsis notation ("${Z5}") is not supported yet.`);const a=r.split(Y5),o=a.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let f=0;f<i.length;++f){const h=i[f];if(!a.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);s.indexOf(h)===-1&&s.push(h)}for(let f=0;f<r.length;++f){const h=r[f];s.indexOf(h)===-1&&h!==Y5&&s.push(h)}const l=new Array(a.length);for(let f=0;f<o;++f){if(new Set(a[f].split("")).size!==a[f].length)throw new Error(`Found duplicate axes in input component ${a[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let h=0;h<a[f].length;++h)l[f].push(s.indexOf(a[f][h]))}const c=s.length,u=i.length,d=[];for(let f=u;f<c;++f)d.push(f);return{allDims:s,summedDims:d,idDims:l}}function zM(t,e){let n=new Array(t);n.fill(-1);for(let i=0;i<e.length;++i)n[e[i]]=i;const r=[];for(let i=0;i<t;++i)n[i]===-1&&r.push(i);return n=n.filter(i=>i!==-1),{permutationIndices:n,expandDims:r}}function BM(t,e,n){const r=new Array(t);for(let i=0;i<n.length;++i){const a=n[i].shape;for(let o=0;o<e[i].length;++o)r[e[i][o]]===void 0?r[e[i][o]]=a[o]:j(r[e[i][o]]===a[o],()=>`Expected dimension ${r[e[i][o]]} at axis ${o} of input shaped ${JSON.stringify(a)}, but got dimension ${a[o]}`)}}function VM(t,e){const n=t,r=[];let i=0;t.length===0&&n.push(-1),i=t.length+1;for(let o=0;o<i;++o)r.push([]);const a=[];for(let o=0;o<n.length;++o){const s=n[o],l=zje(e,s);for(const c of l)a.indexOf(c)===-1&&(r[o].push(c),a.push(c))}return{path:n,steps:r}}function WM(t){return t.every((e,n)=>e===n)}function zje(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function UM(t,e,n=0){let r=[];if(typeof e=="number")j(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const i=e.reduce((o,s)=>(s===-1&&(o+=1),o),0);j(i<=1,()=>"There should be only one negative value in split array.");const a=e.indexOf(-1);if(a!==-1){const o=e.reduce((s,l)=>l>0?s+l:s);e[a]=t.shape[n]-o}j(t.shape[n]===e.reduce((o,s)=>o+s),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nY(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function rY(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function iY(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aY(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function oY(t,e){return`size ${t} must be non-negative, not ${e}`}function sY(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function lY(t,e){const n=de(t),r=de(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function cY(t,e){const n=de(t),r=de(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QA(){return"segment ids must be >= 0"}function uY(){return"segment ids are not increasing"}function dY(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function fY(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hY(t,e){let n=!1,r;for(t<=NM?(r=t,n=!0):r=h$(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=h$(t,r+1);return r}function pY(t,e,n){const r=[],i=t.length;for(let a=0;a<i;a++)a!==e?r.push(t[a]):r.push(n);return r}function HM(t,e,n,r){const i=e.shape.length,a=t.shape.length;if(r!==0&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],s=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)s.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)s.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<i;d++)s.push(e.shape[d]);for(let d=n+1;d<a;d++)s.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:s}}const Bje=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:HM,computeOutShape:pY,segOpComputeOptimalWindowSize:hY},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oc(t){try{return t.map(e=>nc(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function mY(t){return t.map(e=>ll(e))}const gY=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:PM,ERF_A2:RM,ERF_A3:DM,ERF_A4:FM,ERF_A5:MM,ERF_P:_M,PARALLELIZE_THRESHOLD:NM,get RowPartitionType(){return ps},SELU_SCALE:lT,SELU_SCALEALPHA:sT,applyActivation:QE,assertAndGetBroadcastShape:bt,assertAxesAreInnerMostDims:pi,assertParamsConsistent:IM,assignToTypedArray:JX,axesAreInnerMostDims:NF,calculateShapes:Wu,checkEinsumDimSizes:BM,checkPadOnDimRoundingMode:Gi,combineLocations:AK,combineRaggedTensorToTensorShapes:GX,complexWithEvenIndex:ZX,complexWithOddIndex:QX,computeConv2DInfo:Gr,computeConv3DInfo:Lu,computeDefaultPad:uF,computeDilation2DInfo:cx,computeOptimalWindowSize:oT,computeOutAndReduceShapes:qr,computeOutShape:ul,computePool2DInfo:Yo,computePool3DInfo:pc,convertConv2DDataFormat:mc,decodeEinsumEquation:jM,eitherStridesOrDilationsAreOne:hi,expandShapeToKeepDim:nr,exponent:tY,exponents:eY,fromStringArrayToUint8:mY,fromUint8ToStringArray:oc,getAxesPermutation:Un,getBroadcastDims:cf,getComplexWithIndex:LM,getEinsumComputePath:VM,getEinsumPermutation:zM,getFusedBiasGradient:ZE,getFusedDyActivation:YE,getImageCenter:kM,getInnerMostAxes:rr,getPermuted:Nx,getRaggedRank:KX,getReductionAxes:mr,getReshaped:Ix,getReshapedPermuted:kx,getRowPartitionTypesHelper:qX,getSliceBeginCoords:OM,getSliceSize:AM,getSparseFillEmptyRowsIndicesDenseShapeMismatch:nY,getSparseFillEmptyRowsNegativeIndexErrorMessage:rY,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:iY,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:sY,getSparseReshapeInputOutputMismatchErrorMessage:cY,getSparseReshapeInputOutputMultipleErrorMessage:lY,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:aY,getSparseReshapeNegativeOutputDimErrorMessage:oY,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:fY,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:QA,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:uY,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:dY,getUndoAxesPermutation:ju,isIdentityPermutation:WM,log:P_e,mergeRealAndImagArrays:ac,prepareAndValidate:iT,prepareSplitSize:UM,segment_util:Bje,shouldFuse:JE,slice_util:UX,splitRealAndImagArrays:YX,stridesOrDilationsArePositive:lf,tupleValuesAreOne:yu,upcastType:ca,validateDefaultValueShape:XX,validateInput:HE,validateUpdateShape:nM,warn:Qa},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vje=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:eT,nonMaxSuppressionV4Impl:tT,nonMaxSuppressionV5Impl:nT,whereImpl:KE},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */tje();const Wje=Object.freeze(Object.defineProperty({__proto__:null,Abs:ib,Acos:$m,Acosh:Cm,AdadeltaOptimizer:fM,AdagradOptimizer:hM,AdamOptimizer:pM,AdamaxOptimizer:mM,Add:Af,AddN:ab,All:p2,Any:m2,ArgMax:ob,ArgMin:sb,Asin:Em,Asinh:Tm,Atan:Im,Atan2:km,Atanh:Nm,AvgPool:lb,AvgPool3D:cb,AvgPool3DGrad:v2,AvgPoolGrad:g2,BatchMatMul:ub,BatchToSpaceND:db,Bincount:y2,BitwiseAnd:fb,BroadcastArgs:b2,BroadcastTo:Wq,Cast:Om,Ceil:Am,ClipByValue:_m,Complex:x2,ComplexAbs:hb,Concat:pb,Conv2D:mb,Conv2DBackpropFilter:w2,Conv2DBackpropInput:gb,Conv3D:vb,Conv3DBackpropFilterV2:S2,Conv3DBackpropInputV2:$2,Cos:Pm,Cosh:Rm,CropAndResize:E2,Cumprod:C2,Cumsum:yb,DataStorage:MD,DenseBincount:T2,DepthToSpace:I2,DepthwiseConv2dNative:bb,DepthwiseConv2dNativeBackpropFilter:N2,DepthwiseConv2dNativeBackpropInput:k2,Diag:O2,Dilation2D:xb,Dilation2DBackpropFilter:m$,Dilation2DBackpropInput:p$,Draw:A2,get ENV(){return VD},Einsum:_2,Elu:Fm,EluGrad:P2,Environment:Bq,Equal:wb,Erf:Mm,Exp:Lm,ExpandDims:Sb,Expm1:jm,FFT:R2,Fill:D2,FlipLeftRight:F2,Floor:zm,FloorDiv:Bm,FromPixels:g$,FusedBatchNorm:$b,FusedConv2D:u0,FusedDepthwiseConv2D:d0,GatherNd:M2,GatherV2:Cb,Greater:Eb,GreaterEqual:Vm,IFFT:L2,Identity:Wm,Imag:j2,IsFinite:Um,IsInf:Hm,IsNan:Gm,KernelBackend:d2,LRN:_b,LRNGrad:B2,LeakyRelu:Tb,Less:Ib,LessEqual:Nb,LinSpace:z2,Log:qm,Log1p:Km,LogSoftmax:Uq,LogicalAnd:kb,LogicalNot:Ob,LogicalOr:Ab,LogicalXor:N_e,LowerBound:k_e,MatrixBandPart:O_e,Max:Pb,MaxPool:Rb,MaxPool3D:Db,MaxPool3DGrad:W2,MaxPoolGrad:V2,MaxPoolWithArgmax:U2,Maximum:Xm,Mean:Fb,Min:Mb,Minimum:Ym,MirrorPad:Lb,Mod:Zm,MomentumOptimizer:gM,Multinomial:H2,Multiply:Qm,Neg:jb,NonMaxSuppressionV3:G2,NonMaxSuppressionV4:q2,NonMaxSuppressionV5:K2,NotEqual:zb,OP_SCOPE_SUFFIX:XD,OneHot:Vb,OnesLike:Bb,Optimizer:bc,OptimizerConstructors:HX,Pack:Wb,PadV2:Ub,Pool:A_e,Pow:Jm,Prelu:Hb,Prod:Gb,RMSPropOptimizer:vM,RaggedGather:X2,RaggedRange:Y2,RaggedTensorToTensor:Z2,Range:Q2,get Rank(){return DA},Real:J2,RealDiv:Dm,Reciprocal:eg,get Reduction(){return Bi},Relu:tg,Relu6:ng,Reshape:qb,ResizeBilinear:Xb,ResizeBilinearGrad:tE,ResizeNearestNeighbor:Kb,ResizeNearestNeighborGrad:eE,Reverse:Yb,RotateWithOffset:yE,Round:rg,Rsqrt:ig,SGDOptimizer:rT,ScatterNd:nE,SearchSorted:iE,Select:Zb,Selu:ag,Sigmoid:cg,Sign:lg,Sin:og,Sinh:sg,Slice:Qb,Softmax:nx,Softplus:ug,SpaceToBatchND:ex,SparseFillEmptyRows:aE,SparseReshape:oE,SparseSegmentMean:sE,SparseSegmentSum:lE,SparseToDense:cE,SplitV:tx,Sqrt:dg,Square:uE,SquaredDifference:fg,StaticRegexReplace:rx,Step:vg,StridedSlice:dE,StringNGrams:fE,StringSplit:hE,StringToHashBucketFast:pE,Sub:hg,Sum:Jb,Tan:pg,Tanh:mg,Tensor:Zt,TensorBuffer:pr,TensorScatterUpdate:rE,Tile:gg,TopK:mE,Transform:gE,Transpose:jd,Unique:vE,Unpack:ix,UnsortedSegmentSum:ax,UpperBound:__e,Variable:p0,ZerosLike:ox,_FusedMatMul:c0,abs:cr,acos:nF,acosh:rF,add:Ee,addN:CK,all:SE,any:g0,argMax:sf,argMin:iF,asin:aF,asinh:oF,atan:sF,atan2:lF,atanh:cF,avgPool:ux,avgPool3d:dF,backend:ZD,backend_util:gY,basicLSTMCell:EK,batchNorm:yg,batchNorm2d:fF,batchNorm3d:hF,batchNorm4d:pF,batchToSpaceND:dx,bincount:mF,bitwiseAnd:TK,booleanMaskAsync:dX,broadcastArgs:IK,broadcastTo:zd,broadcast_util:fDe,browser:Aje,buffer:wt,cast:_e,ceil:gF,clipByValue:da,clone:cl,complex:rc,concat:tr,concat1d:vF,concat2d:yF,concat3d:bF,concat4d:xF,conv1d:$E,conv2d:ic,conv2dTranspose:CE,conv3d:SF,conv3dTranspose:$F,copyRegisteredKernels:F_e,cos:fx,cosh:EE,cosineWindow:XE,cumprod:b0,cumsum:TE,customGrad:yl,denseBincount:x$,deprecationWarn:gPe,depthToSpace:CF,depthwiseConv2d:bg,device_util:uPe,diag:kK,dilation2d:EF,disableDeprecationWarnings:mPe,dispose:Et,disposeVariables:vPe,div:nt,divNoNan:TF,dot:IF,dropout:sM,einsum:gd,elu:xg,enableDebugMode:pPe,enableProdMode:hPe,enclosingPowerOfTwo:lM,engine:os,ensureShape:OK,env:oe,equal:Go,erf:IE,euclideanNorm:kF,exp:fa,expandDims:Si,expm1:OF,eye:NE,fft:Ex,fill:Pf,findBackend:SPe,findBackendFactory:$Pe,floor:Sg,floorDiv:wE,fused:xX,gather:$g,gatherND:mX,gather_util:_je,getBackend:uK,getGradient:_A,getKernel:h0,getKernelsForBackend:v$,grad:XDe,grads:YDe,greater:ya,greaterEqual:gc,ifft:Gp,imag:hx,image:gs,inTopKAsync:gX,io:xM,irfft:WE,isFinite:AF,isInf:_F,isNaN:PF,keep:Cr,kernel_impls:Vje,leakyRelu:px,less:Vp,lessEqual:zu,linalg:dM,linspace:PK,localResponseNormalization:RF,log:_a,log1p:mx,logSigmoid:DF,logSoftmax:OE,logSumExp:gx,logicalAnd:Ns,logicalNot:vx,logicalOr:AE,logicalXor:FF,losses:IX,lowerBound:DK,matMul:Ct,math:wje,max:co,maxPool:yx,maxPool3d:MF,maxPoolWithArgmax:FK,maximum:El,mean:zn,memory:BA,meshgrid:MK,min:Bp,minimum:xu,mirrorPad:LF,mod:jF,moments:bx,movingAverage:fX,mul:J,multiRNNCell:LK,multinomial:jK,neg:bn,nextFrame:TM,norm:wg,notEqual:uf,oneHot:Wp,ones:oa,onesLike:Pa,op:Z,outerProduct:zK,pad:vc,pad1d:BK,pad2d:VK,pad3d:WK,pad4d:UK,pool:zF,pow:vl,prelu:wx,print:tF,prod:BF,profile:yPe,raggedGather:HK,raggedRange:GK,raggedTensorToTensor:qK,rand:KK,randomGamma:QK,randomNormal:RE,randomStandardNormal:JK,randomUniform:Bu,randomUniformInt:eX,range:df,ready:cK,real:Up,reciprocal:ZF,registerBackend:YD,registerGradient:Hq,registerKernel:bE,relu:Fs,relu6:DE,removeBackend:wPe,reshape:te,reverse:fo,reverse1d:tX,reverse2d:nX,reverse3d:rX,reverse4d:iX,rfft:Tx,round:FE,rsqrt:ME,scalar:ct,scatterND:hX,scatter_util:QMe,searchSorted:_E,selu:LE,separableConv2d:jE,serialization:JLe,setBackend:xPe,setPlatform:CPe,setdiff1dAsync:aX,sigmoid:Ss,sign:QF,signal:TX,sin:zE,sinh:BE,slice:At,slice1d:Sx,slice2d:VE,slice3d:$x,slice4d:Hp,slice_util:UX,softmax:Cx,softplus:Rf,spaceToBatchND:xx,sparse:NX,sparseToDense:pX,spectral:EX,split:la,sqrt:Wr,square:rn,squaredDifference:UE,squeeze:Vu,stack:ha,step:Ff,stridedSlice:JF,string:kX,sub:Ue,sum:qe,sumOutType:xE,tan:eM,tanh:bu,tensor:Bo,tensor1d:$i,tensor2d:Qh,tensor3d:tM,tensor4d:oX,tensor5d:sX,tensor6d:lX,tensorScatterUpdate:cX,tensor_util:aPe,test_util:dMe,tidy:ae,tile:to,time:bPe,topk:rM,train:hd,transpose:kt,truncatedNormal:GE,unique:iM,unregisterGradient:D_e,unregisterKernel:R_e,unsortedSegmentSum:qE,unstack:ho,upcastType:ca,upperBound:uX,util:G_e,valueAndGrad:ZDe,valueAndGrads:QDe,variable:aM,variableGrads:RK,version_core:Mje,where:li,whereAsync:oM,zeros:hr,zerosLike:Pt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vY={kernelName:ib,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,Ff(_e(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uje={kernelName:$m,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=rn(_e(n,"float32")),i=Wr(Ue(ct(1),r));return bn(nt(t,i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hje={kernelName:Cm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Wr(Ue(rn(_e(n,"float32")),1));return nt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gje={kernelName:Af,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=bt(n.shape,r.shape);return{a:()=>{let s=t;const l=mr(n.shape,i);return l.length>0&&(s=qe(s,l)),te(s,n.shape)},b:()=>{let s=t;const l=mr(r.shape,i);return l.length>0&&(s=qe(s,l)),te(s,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qje={kernelName:ab,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,i)=>{n[i]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kje={kernelName:ob,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Pt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xje={kernelName:sb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Pt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yje={kernelName:Em,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>nt(t,Wr(Ue(ct(1),rn(_e(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zje={kernelName:Tm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Wr(Ee(ct(1),rn(_e(n,"float32"))));return nt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qje={kernelName:km,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=bt(n.shape,r.shape);return{a:()=>{const s=Ee(rn(n),rn(r));let l=J(t,nt(r,s));const c=mr(n.shape,i);return c.length>0&&(l=qe(l,c)),te(l,n.shape)},b:()=>{const s=Ee(rn(n),rn(r));let l=bn(J(t,nt(n,s)));const c=mr(r.shape,i);return c.length>0&&(l=qe(l,c)),te(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jje={kernelName:Im,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>nt(t,Ee(rn(_e(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eze={kernelName:Nm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>nt(t,Ue(ct(1),rn(_e(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tze(t,e,n,r,i,a){const o=z(t,"dy","avgPool3dGrad"),s=z(e,"input","avgPool3dGrad");let l=o,c=s,u=!1;s.rank===4&&(u=!0,l=te(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=te(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),j(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),j(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Gi("avgPool3dGrad",i,a);const d={dy:l,input:c},f={filterSize:n,strides:r,pad:i,dimRoundingMode:a},h=K.runKernel(v2,d,f);return u?te(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const nze=Z({avgPool3dGrad_:tze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rze={kernelName:cb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:a,pad:o,dimRoundingMode:s}=n;return{x:()=>nze(t,r,i,a,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ize(t,e,n,r,i){const a=z(t,"dy","avgPoolGrad"),o=z(e,"input","avgPoolGrad");j(o.rank===a.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${a.rank})`);let s=o,l=a,c=!1;o.rank===3&&(c=!0,s=te(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=te(a,[1,a.shape[0],a.shape[1],a.shape[2]])),j(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),j(s.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`);const u={dy:l,input:s},d={filterSize:n,strides:r,pad:i},f=K.runKernel(g2,u,d);return c?te(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const aze=Z({avgPoolGrad_:ize});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oze={kernelName:lb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:a,pad:o}=n;return{x:()=>aze(t,r,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sze={kernelName:ub,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:a,transposeB:o}=n;return!a&&!o?{a:()=>Ct(t,i,!1,!0),b:()=>Ct(r,t,!0,!1)}:!a&&o?{a:()=>Ct(t,i,!1,!1),b:()=>Ct(t,r,!0,!1)}:a&&!o?{a:()=>Ct(i,t,!1,!0),b:()=>Ct(r,t,!1,!1)}:{a:()=>Ct(i,t,!0,!0),b:()=>Ct(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lze={kernelName:db,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>xx(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cze={kernelName:Wq,gradFunc:(t,e,n)=>{const r=n,i=r.inputShape,a=r.shape,o=Array.from(a);for(let l=i.length-1;l>=0;l--)if(i[l]===a[l])o[l]=1;else if(i[l]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${a}].`);const s=[];for(let l=0;l<o.length;l++)o[l]>1&&s.push(l);return{x:()=>qe(t,s,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uze={kernelName:Om,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dze={kernelName:Am,gradFunc:t=>({x:()=>Pt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fze={kernelName:_m,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:i,clipValueMax:a}=n;return{x:()=>li(Ns(gc(r,i),zu(r,a)),t,Pt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hze={kernelName:hb,inputsToSave:["x"],gradFunc:vY.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pze={kernelName:pb,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:i}=n,a=Tt(i,e[0].shape)[0],o=r.map(l=>l[a]);return la(t,o,a).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mze={kernelName:mb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:a,strides:o,pad:s,dataFormat:l}=n;return j(yu(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>wF(r.shape,t,i,o,s,l),filter:()=>cM(r,t,i.shape,o,s,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gze={kernelName:gb,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:a,pad:o,dataFormat:s,dimRoundingMode:l}=n;return{dy:()=>ic(t,i,a,o,s,1,l),filter:()=>cM(t,r,i.shape,a,o,s,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vze(t,e,n,r,i){let a=t;t.rank===4&&(a=te(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=te(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),j(a.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),j(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),j(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),j(a.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`),j(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const s={x:a,dy:o},l={strides:r,pad:i,filterShape:n};return K.runKernel(S2,s,l)}const yze=Z({conv3DBackpropFilter_:vze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bze={kernelName:vb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:a}=n;j(yu(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,s]=e;return{x:()=>NK(o.shape,t,s,i,a),filter:()=>yze(o,t,s.shape,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xze={kernelName:Pm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(bn(zE(_e(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wze={kernelName:Rm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(BE(_e(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sze={kernelName:yb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:a,reverse:o}=n;return{x:()=>{const s=Un([i],r.rank);let l=TE(t,i,a,!o);return s!=null&&(l=kt(l,s)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ze={kernelName:bb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:a,dimRoundingMode:o}=n,s=r??[1,1];j(yu(s),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);const[l,c]=e;return j(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),j(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),j(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),j(hi(i,s),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`),Gi("depthwiseConv2d",a,o),{x:()=>bX(l.shape,t,c,i,a,s,o),filter:()=>yX(l,t,c.shape,i,a,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cze={kernelName:xb,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,a={x:r,filter:i,dy:t},o={x:r,filter:i,dy:t};return{x:()=>K.runKernel(p$,a,n),filter:()=>K.runKernel(m$,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eze={kernelName:Fm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>K.runKernel(P2,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tze={kernelName:Mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=J(fa(bn(rn(n))),2/Math.sqrt(Math.PI));return{x:()=>J(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ize={kernelName:Lm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nze={kernelName:Sb,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>te(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kze={kernelName:jm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,fa(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oze={kernelName:zm,gradFunc:t=>({x:()=>Pt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aze={kernelName:Bm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=bt(n.shape,r.shape);return{a:()=>{const s=nt(t,_e(r,"float32")),l=mr(n.shape,i);return l.length>0?te(qe(s,l),n.shape):s},b:()=>{let s=J(t,_e(n,"float32"));const l=mr(r.shape,i);l.length>0&&(s=te(qe(s,l),r.shape));const c=rn(r);return bn(nt(s,_e(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ze={kernelName:$b,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,a,o,s]=e,l=s??ct(1),c=mr(a.shape,i.shape),u=[];if(a.rank===1){for(let w=0;w<i.shape.length-1;++w)u.push(i.shape[w]);u.push(1)}const d=Ue(i,a),f=J(t,l),h=ME(Ee(o,ct(r))),p=J(J(J(h,h),h),ct(-.5));return{x:()=>a.rank===1?te(J(J(t,to(te(h,[1,1,1,a.shape[0]]),u)),l),i.shape):te(J(J(t,h),l),i.shape),mean:()=>{let w=J(J(h,ct(-1)),f);return a.rank===1&&(w=qe(w,c)),te(w,a.shape)},variance:()=>{let w=J(J(p,d),f);return a.rank===1&&(w=qe(w,c)),te(w,a.shape)},scale:()=>{const w=J(d,h);let x=J(t,w);return a.rank===1&&(x=qe(x,c)),te(x,a.shape)},offset:()=>{let w=t;return a.rank===1&&(w=qe(w,c)),te(w,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pze={kernelName:Cb,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,i]=e,{axis:a,batchDims:o}=n,s=Tt(a,r.shape)[0],l=(c,u,d)=>()=>{const f=c.shape,h=u.size,p=f.slice(0,s),g=p.length,m=f.slice(a,f.length).slice(1),v=m.length,y=Q5(0,g),b=Q5(g+1,g+1+v),w=J5([p,[h],m]),x=te(d,w),$=te(u,[h]),C=J5([[g],y,b]),E=kt(x,C);let I=qE(E,$,c.shape[s]);const T=ju(C);return I=kt(I,T),I};if(o===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>ha(u.map((h,p)=>l(h,i.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>i}}else return{x:l(r,i,t),indices:()=>i}}};function Q5(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function J5(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rze={kernelName:Vm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Pt(n),b:()=>Pt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dze={kernelName:Wm,gradFunc:t=>({x:()=>_e(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fze={kernelName:Um,gradFunc:t=>({x:()=>Pt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mze={kernelName:Hm,gradFunc:t=>({x:()=>Pt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lze={kernelName:Gm,gradFunc:t=>({x:()=>Pt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jze={kernelName:Tb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:i}=n,a=ya(r,0);return{x:()=>li(a,t,J(t,i))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zze={kernelName:Km,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>nt(t,Ee(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bze={kernelName:qm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>nt(t,_e(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vze={kernelName:Uq,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;return{logits:()=>{const o=fa(r);return Ue(t,J(qe(t,i,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wze(t,e,n,r=5,i=1,a=1,o=.5){const s={x:t,y:e,dy:n},l={depthRadius:r,bias:i,alpha:a,beta:o};return K.runKernel(B2,s,l)}const Uze=Z({localResponseNormalizationBackprop_:Wze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hze={kernelName:_b,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:a,bias:o,alpha:s,beta:l}=n;return{x:()=>Uze(r,i,t,a,o,s,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yY(t,e,n,r){return e.rank<n.rank&&(e=te(e,nr(e.shape,r))),t.rank<n.rank&&(t=te(t,nr(t.shape,r))),{x:()=>J(t,_e(Go(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eV={kernelName:Pb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,a=e[0],o=e[1],s=Tt(i,a.shape),l=yY(t,o,a,s);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gze={kernelName:Xm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>J(t,_e(gc(n,r),"float32")),b:()=>J(t,_e(Vp(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qze(t,e,n,r,i,a,o){const s=z(t,"dy","maxPool3dGrad"),l=z(e,"input","maxPool3dGrad"),c=z(n,"output","maxPool3dGrad");let u=s,d=l,f=c,h=!1;l.rank===4&&(h=!0,u=te(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=te(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=te(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),j(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),j(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),j(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),Gi("maxPool3dGrad",a,o);const p={dy:u,input:d,output:f},g={filterSize:r,strides:i,pad:a,dimRoundingMode:o},m=K.runKernel(W2,p,g);return h?te(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const Kze=Z({maxPool3dGrad_:qze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xze={kernelName:Db,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=n;return{x:()=>Kze(t,r,i,a,o,s,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yze(t,e,n,r,i,a,o){const s=z(t,"dy","maxPoolGrad"),l=z(e,"input","maxPoolGrad"),c=z(n,"output","maxPoolGrad");j(l.rank===s.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${s.rank})`),j(s.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`),j(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Gi("maxPoolGrad",a,o);const u={dy:s,input:l,output:c},d={filterSize:r,strides:i,pad:a,dimRoundingMode:o};return K.runKernel(V2,u,d)}const Zze=Z({maxPoolGrad_:Yze});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qze={kernelName:Rb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:a,strides:o,pad:s}=n;return{x:()=>Zze(t,r,i,a,o,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jze={kernelName:Fb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n,a=Tt(i,r.shape),s=qr(r.shape,a)[1],l=de(s);return{x:()=>{const u=r.shape.slice();a.forEach(h=>{u[h]=1});const d=te(t,u);return nt(J(d,oa(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e={kernelName:Mb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:i}=r,[a,o]=e,s=Tt(i,a.shape),l=yY(t,o,a,s);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t4e={kernelName:Ym,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>J(t,_e(zu(n,r),"float32")),b:()=>J(t,_e(ya(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n4e={kernelName:Lb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,a=i.map(o=>o[0]);return{x:()=>At(t,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r4e={kernelName:Zm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=bt(n.shape,r.shape);return{a:()=>{const s=mr(n.shape,i);return s.length>0?te(qe(t,s),n.shape):t},b:()=>{const s=J(t,bn(Sg(nt(n,r)))),l=mr(r.shape,i);return l.length>0?te(qe(s,l),r.shape):s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i4e={kernelName:Qm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=bt(n.shape,r.shape);return{a:()=>{const s=J(t,_e(r,"float32")),l=mr(n.shape,i);return l.length>0?te(qe(s,l),n.shape):s},b:()=>{const s=J(t,_e(n,"float32")),l=mr(r.shape,i);return l.length>0?te(qe(s,l),r.shape):s}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a4e={kernelName:jb,gradFunc:t=>({x:()=>bn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4e={kernelName:Vb,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>hr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s4e={kernelName:Bb,gradFunc:t=>({x:()=>Pt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l4e={kernelName:Wb,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return ho(t,r).map(a=>()=>a)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tV={kernelName:Ub,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,a=i.map(o=>o[0]);return{x:()=>At(t,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c4e={kernelName:Jm,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,a=n,o=r,s=bt(a.shape,o.shape);return{a:()=>{const u=_e(o,"float32");let d=J(t,J(u,vl(a,Ue(u,ct(1)))));const f=mr(a.shape,s);return f.length>0&&(d=qe(d,f)),te(d,a.shape)},b:()=>{const u=ya(a,0),d=li(u,_a(a),Pt(a));let f=J(t,J(i,d));const h=mr(o.shape,s);return h.length>0&&(f=qe(f,h)),te(f,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e={kernelName:Hb,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=ya(n,0);return{x:()=>li(i,t,J(t,r)),alpha:()=>{let a=li(i,Pt(t),J(t,n));const o=mr(r.shape,t.shape);return o.length>0&&(a=qe(a,o)),te(a,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d4e(t,e,n){const r=t.shape.slice();r[n]=1;const i=te(e,r),a=b0(t,n,!0,!1),o=b0(t,n,!0,!0),s=J(a,o);return J(i,s)}function f4e(t,e,n){const r=t.shape.length,i=r-n.length,a=Un(n,r);let o=t;a!=null&&(o=kt(t,a));const s=o.shape.slice(),c=s.splice(r-n.length,n.length).reduce((f,h)=>f*h,1);s.push(c);const u=o.reshape(s);let d=d4e(u,e,i);if(d=d.reshape(o.shape),a!=null){const f=ju(a);d=kt(d,f)}return d}const h4e={kernelName:Gb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i}=n;let a=[];return i==null?a=r.shape.map((o,s)=>s):typeof i=="number"?a=[i]:a=i,{x:()=>f4e(r,t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p4e={kernelName:Dm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=bt(n.shape,r.shape);return{a:()=>{const s=nt(t,_e(r,"float32")),l=mr(n.shape,i);return l.length>0?te(qe(s,l),n.shape):s},b:()=>{let s=J(t,_e(n,"float32"));const l=mr(r.shape,i);l.length>0&&(s=te(qe(s,l),r.shape));const c=rn(r);return bn(nt(s,_e(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m4e={kernelName:eg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>nt(t,bn(rn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4e={kernelName:ng,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=J(zu(n,6),Ff(n));return{x:()=>J(t,_e(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v4e={kernelName:tg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,_e(Ff(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y4e={kernelName:qb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>te(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b4e={kernelName:Xb,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>K.runKernel(tE,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x4e={kernelName:Kb,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,i={dy:t,images:r};return{images:()=>K.runKernel(eE,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w4e={kernelName:Yb,gradFunc:(t,e,n)=>{const{dims:r}=n,i=Tt(r,t.shape);return{x:()=>fo(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S4e={kernelName:rg,gradFunc:t=>({x:()=>Pt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e={kernelName:ig,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>bn(nt(t,J(vl(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C4e={kernelName:Zb,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>_e(Pt(n),"float32"),t:()=>J(t,_e(n,t.dtype)),e:()=>J(t,_e(vx(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E4e={kernelName:ag,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ya(n,ct(0)),i=ct(sT),a=ct(lT),o=J(t,a),s=J(J(t,i),fa(_e(n,"float32")));return li(r,o,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e={kernelName:cg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,J(n,Ue(ct(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I4e={kernelName:lg,gradFunc:t=>({x:()=>Pt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N4e={kernelName:og,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(fx(_e(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k4e={kernelName:sg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(EE(_e(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4e={kernelName:Qb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:i,size:a}=n,o=r.shape,[s,l]=aT(r,i,a),c=[];for(let u=0;u<t.rank;u++)c.push([s[u],o[u]-s[u]-l[u]]);return{x:()=>vc(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A4e={kernelName:nx,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:i}=n,a=!0,o=J(t,r);return{logits:()=>Ue(o,J(qe(o,[i],a),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4e={kernelName:ug,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,Ss(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nV={kernelName:ex,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>dx(t,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rV={kernelName:tx,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>tr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4e={kernelName:dg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>nt(t,J(Wr(_e(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R4e={kernelName:uE,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(t,J(_e(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D4e={kernelName:fg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ct(2);return{a:()=>J(t,J(i,Ue(n,r))),b:()=>J(t,J(i,Ue(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F4e={kernelName:vg,gradFunc:t=>({x:()=>Pt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M4e={kernelName:hg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=bt(n.shape,r.shape);return{a:()=>{let s=t;const l=mr(n.shape,i);return l.length>0&&(s=qe(s,l)),te(s,n.shape)},b:()=>{let s=t;const l=mr(r.shape,i);return l.length>0&&(s=qe(s,l)),te(bn(s),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L4e={kernelName:Jb,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,i=r.shape.slice(),{axis:a}=n;Tt(a,r.shape).forEach(c=>{i[c]=1});const s=te(t,i),l=J(s,oa(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j4e={kernelName:pg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>nt(t,rn(fx(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z4e={kernelName:mg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>J(Ue(ct(1),rn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B4e={kernelName:gg,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let o=Pt(r);if(r.rank===1)for(let s=0;s<i[0];++s)o=Ee(o,At(t,[s*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let s=0;s<i[0];++s)for(let l=0;l<i[1];++l)o=Ee(o,At(t,[s*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let s=0;s<i[0];++s)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)o=Ee(o,At(t,[s*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let s=0;s<i[0];++s)for(let l=0;l<i[1];++l)for(let c=0;c<i[2];++c)for(let u=0;u<i[3];++u)o=Ee(o,At(t,[s*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V4e={kernelName:jd,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,a=ju(i);return{x:()=>kt(t,a)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W4e={kernelName:ix,gradFunc:(t,e,n)=>{const r=n,{axis:i}=r;return{value:()=>ha(t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U4e={kernelName:ax,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>H4e(t,n)}}};function H4e(t,e){const n=El(e,Pt(e)),r=$g(t,n);let i=gc(e,ct(0,"int32"));const a=r.rank-i.rank;for(let s=0;s<a;++s)i=Si(i,s+1);i=Ns(i,oa(r.shape,"bool"));const o=Pt(r);return li(i,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e={kernelName:ox,gradFunc:t=>({x:()=>Pt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q4e=[vY,Uje,Hje,Gje,qje,Kje,Xje,Yje,Zje,Qje,Jje,eze,rze,oze,sze,lze,cze,uze,dze,fze,hze,pze,gze,mze,bze,xze,wze,Sze,$ze,Cze,p4e,Eze,Tze,Ize,Nze,kze,Aze,Oze,_ze,Pze,Rze,Dze,Fze,Mze,Lze,jze,zze,Bze,Vze,Hze,eV,eV,Gze,Xze,Qze,Jze,e4e,t4e,n4e,r4e,i4e,a4e,o4e,s4e,l4e,tV,tV,c4e,u4e,h4e,m4e,g4e,v4e,y4e,b4e,x4e,w4e,S4e,$4e,C4e,E4e,T4e,I4e,N4e,k4e,O4e,A4e,_4e,nV,nV,rV,rV,P4e,D4e,R4e,F4e,M4e,L4e,j4e,z4e,B4e,V4e,W4e,U4e,G4e];for(const t of q4e)Hq(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.abs=function(){return this.throwIfDisposed(),cr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.acos=function(){return this.throwIfDisposed(),nF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.acosh=function(){return this.throwIfDisposed(),rF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.add=function(t){return this.throwIfDisposed(),Ee(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.all=function(t,e){return this.throwIfDisposed(),SE(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.any=function(t,e){return this.throwIfDisposed(),g0(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.argMax=function(t){return this.throwIfDisposed(),sf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.argMin=function(t){return this.throwIfDisposed(),iF(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.asScalar=function(){return this.throwIfDisposed(),j(this.size===1,()=>"The array must have only 1 element."),te(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.asType=function(t){return this.throwIfDisposed(),_e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.as1D=function(){return this.throwIfDisposed(),te(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.as2D=function(t,e){return this.throwIfDisposed(),te(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),te(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),te(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.as5D=function(t,e,n,r,i){return this.throwIfDisposed(),te(this,[t,e,n,r,i])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.asin=function(){return this.throwIfDisposed(),aF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.asinh=function(){return this.throwIfDisposed(),oF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.atan=function(){return this.throwIfDisposed(),sF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.atan2=function(t){return this.throwIfDisposed(),lF(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.atanh=function(){return this.throwIfDisposed(),cF(this)};he().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),ux(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),dx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),yg(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.broadcastTo=function(t){return this.throwIfDisposed(),zd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.cast=function(t){return this.throwIfDisposed(),_e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.ceil=function(){return this.throwIfDisposed(),gF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),da(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Zt&&(t=[t]),tr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.conv1d=function(t,e,n,r,i,a){return this.throwIfDisposed(),$E(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),CE(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.conv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),ic(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.cos=function(){return this.throwIfDisposed(),fx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.cosh=function(){return this.throwIfDisposed(),EE(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),b0(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),TE(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),CF(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.depthwiseConv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),bg(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.dilation2d=function(t,e,n,r,i){return this.throwIfDisposed(),EF(this,t,e,n,r,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.divNoNan=function(t){return this.throwIfDisposed(),TF(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.div=function(t){return this.throwIfDisposed(),nt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.dot=function(t){return this.throwIfDisposed(),IF(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.elu=function(){return this.throwIfDisposed(),xg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.equal=function(t){return this.throwIfDisposed(),Go(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.erf=function(){return this.throwIfDisposed(),IE(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),kF(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.exp=function(){return this.throwIfDisposed(),fa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.expandDims=function(t){return this.throwIfDisposed(),Si(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.expm1=function(){return this.throwIfDisposed(),OF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.fft=function(){return this.throwIfDisposed(),Ex(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.flatten=function(){return this.throwIfDisposed(),te(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.floor=function(){return this.throwIfDisposed(),Sg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.floorDiv=function(t){return this.throwIfDisposed(),wE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.gather=function(t,e,n){return this.throwIfDisposed(),$g(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.greaterEqual=function(t){return this.throwIfDisposed(),gc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.greater=function(t){return this.throwIfDisposed(),ya(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.ifft=function(){return this.throwIfDisposed(),Gp(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.irfft=function(){return this.throwIfDisposed(),WE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.isFinite=function(){return this.throwIfDisposed(),AF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.isInf=function(){return this.throwIfDisposed(),_F(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.isNaN=function(){return this.throwIfDisposed(),PF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.leakyRelu=function(t){return this.throwIfDisposed(),px(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.lessEqual=function(t){return this.throwIfDisposed(),zu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.less=function(t){return this.throwIfDisposed(),Vp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),RF(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.logSigmoid=function(){return this.throwIfDisposed(),DF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.logSoftmax=function(t){return this.throwIfDisposed(),OE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),gx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.log=function(){return this.throwIfDisposed(),_a(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.log1p=function(){return this.throwIfDisposed(),mx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Ns(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.logicalNot=function(){return this.throwIfDisposed(),vx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.logicalOr=function(t){return this.throwIfDisposed(),AE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.logicalXor=function(t){return this.throwIfDisposed(),FF(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Ct(this,t,e,n)};he().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),yx(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.max=function(t,e){return this.throwIfDisposed(),co(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.maximum=function(t){return this.throwIfDisposed(),El(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.mean=function(t,e){return this.throwIfDisposed(),zn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.min=function(t,e){return this.throwIfDisposed(),Bp(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.minimum=function(t){return this.throwIfDisposed(),xu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),LF(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.mod=function(t){return this.throwIfDisposed(),jF(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.mul=function(t){return this.throwIfDisposed(),J(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.neg=function(){return this.throwIfDisposed(),bn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.norm=function(t,e,n){return this.throwIfDisposed(),wg(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.notEqual=function(t){return this.throwIfDisposed(),uf(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),Wp(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.onesLike=function(){return this.throwIfDisposed(),Pa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.pad=function(t,e){return this.throwIfDisposed(),vc(this,t,e)};he().prototype.pool=function(t,e,n,r,i,a){return this.throwIfDisposed(),zF(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.pow=function(t){return this.throwIfDisposed(),vl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.prelu=function(t){return this.throwIfDisposed(),wx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.prod=function(t,e){return this.throwIfDisposed(),BF(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.reciprocal=function(){return this.throwIfDisposed(),ZF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.relu=function(){return this.throwIfDisposed(),Fs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.relu6=function(){return this.throwIfDisposed(),DE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.reshapeAs=function(t){return this.throwIfDisposed(),te(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.reshape=function(t){return this.throwIfDisposed(),te(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),$X(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),CX(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.reverse=function(t){return this.throwIfDisposed(),fo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.rfft=function(){return this.throwIfDisposed(),Tx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.round=function(){return this.throwIfDisposed(),FE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.rsqrt=function(){return this.throwIfDisposed(),ME(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.selu=function(){return this.throwIfDisposed(),LE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.separableConv2d=function(t,e,n,r,i,a){return this.throwIfDisposed(),jE(this,t,e,n,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.sigmoid=function(){return this.throwIfDisposed(),Ss(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.sign=function(){return this.throwIfDisposed(),QF(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.sin=function(){return this.throwIfDisposed(),zE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.sinh=function(){return this.throwIfDisposed(),BE(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.slice=function(t,e){return this.throwIfDisposed(),At(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.softmax=function(t){return this.throwIfDisposed(),Cx(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.softplus=function(){return this.throwIfDisposed(),Rf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),xx(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.split=function(t,e){return this.throwIfDisposed(),la(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.sqrt=function(){return this.throwIfDisposed(),Wr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.square=function(){return this.throwIfDisposed(),rn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.squaredDifference=function(t){return this.throwIfDisposed(),UE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.squeeze=function(t){return this.throwIfDisposed(),Vu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Zt?[this,t]:[this,...t];return ha(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.step=function(t){return this.throwIfDisposed(),Ff(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.stridedSlice=function(t,e,n,r,i,a,o,s){return this.throwIfDisposed(),JF(this,t,e,n,r,i,a,o,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.sub=function(t){return this.throwIfDisposed(),Ue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.sum=function(t,e){return this.throwIfDisposed(),qe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.tan=function(){return this.throwIfDisposed(),eM(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.tanh=function(){return this.throwIfDisposed(),bu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.tile=function(t){return this.throwIfDisposed(),to(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.toBool=function(){return this.throwIfDisposed(),_e(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.toFloat=function(){return this.throwIfDisposed(),_e(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.toInt=function(){return this.throwIfDisposed(),_e(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.topk=function(t,e){return this.throwIfDisposed(),rM(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.transpose=function(t){return this.throwIfDisposed(),kt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.unique=function(t){return this.throwIfDisposed(),iM(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),qE(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.unstack=function(t){return this.throwIfDisposed(),ho(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.where=function(t,e){return this.throwIfDisposed(),li(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */he().prototype.zerosLike=function(){return this.throwIfDisposed(),Pt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Gs extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Gs.prototype)}}class Lo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Lo.prototype)}}class ne extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ne.prototype)}}class St extends Error{constructor(e){super(e),Object.setPrototypeOf(this,St.prototype)}}class GM extends Error{constructor(e){super(e),Object.setPrototypeOf(this,GM.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class bY{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function hf(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function qs(t,e){if(!t)throw new GM(e)}function iV(t,e){let n=0;for(const r of t)r===e&&n++;return n}function na(t){return t.length===1?t[0]:t}function tn(t){return Array.isArray(t)?t:[t]}function Pl(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function vd(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let So={};function qM(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function JA(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>JA(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:JA(r))}}}function Ox(t,e={},n={},r="object",i=!1){if(typeof t=="string"){const a=t;let o;if(a in n)o=n[a];else if(a in So)o=So[a];else if(o=e[a],o==null)throw new ne(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const a=t;if(a.className==null||a.config==null)throw new ne(`${r}: Improper config format: ${JSON.stringify(a)}.
'className' and 'config' must set.`);const o=a.className;let s,l;if(o in n?[s,l]=n[o]:o in So?[s,l]=So.className:o in e&&([s,l]=e[o]),s==null)throw new ne(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const h of Object.keys(So))c[h]=So[h];for(const h of Object.keys(n))c[h]=n[h];const u=a.config;u.customObjects=c;const d=Object.assign({},So);for(const h of Object.keys(n))So[h]=n[h];JA(a.config);const f=l(s,a.config,n,i);return So=Object.assign({},d),f}else{const c=Object.assign({},So);for(const d of Object.keys(n))So[d]=n[d];const u=new s(a.config);return So=Object.assign({},c),u}}}function K4e(t,e){return t<e?-1:t>e?1:0}function M1(t,e){return-1*K4e(t,e)}function lu(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function X4e(t){if(t==null)throw new ne(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Lf(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new ne(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function KM(t,e,n=0,r=1/0){return qs(n>=0),qs(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(i=>typeof i===e)}function Br(t,e){Array.isArray(t)?(j(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Br(n,`element ${r+1} of ${e}`))):j(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${xY(t)}.`)}function xY(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>xY(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function Y4e(t,e,n){let r=n!=null?n():Di(),i;return(...o)=>{const s=n!=null?n():Di();return s-r<e||(r=s,i=t(...o)),i}}function wY(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Z4e=0;function SY(){return Z4e++}const L1={};function cT(t=""){return t in L1||(L1[t]=0),L1[t]+=1,t+L1[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Q4e=["channelsFirst","channelsLast"],J4e=["nearest","bilinear"],eBe=["valid","same","causal"],tBe=["max","avg"],nBe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ih=new Map;function ir(t){Lf(Q4e,"DataFormat",t)}function rBe(t){Lf(J4e,"InterpolationFormat",t)}function go(t){Lf(eBe,"PaddingMode",t)}function $Y(t){Lf(tBe,"PoolMode",t)}const ry=[],aV="/";function Bd(t,e){ry.push(t);try{const n=e();return ry.pop(),n}catch(n){throw ry.pop(),n}}function iBe(){return ry.length===0?"":ry.join(aV)+aV}function CY(t){if(!TY(t))throw new Error("Not a valid tensor name: '"+t+"'");return iBe()+t}function EY(t){if(!TY(t))throw new Error("Not a valid tensor name: '"+t+"'");ih.has(t)||ih.set(t,0);const e=ih.get(t);if(ih.set(t,ih.get(t)+1),e>0){const n=`${t}_${e}`;return ih.set(n,1),n}else return t}const aBe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function TY(t){return!!t.match(aBe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oBe(t){return t===parseInt(t.toString(),10)}function cu(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function qp(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function wu(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function ks(t,e){if(e<t)throw new ne(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let oN;function Er(){return oN==null&&(oN=ZD().epsilon()),oN}function Os(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function dl(t,e){return _e(t,e)}function Ax(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),te(t,n)}function sBe(t,e){return ae(()=>{if(t.shape.length!==2)throw new ne(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Ax(t,1);return e_(n,[1,e,1])})}function lBe(t){const e=[cu(t.shape)];return te(t,e)}function cBe(t){if(t.rank<=1)throw new ne(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],cu(t.shape,1)];return te(t,e)}function Vd(t,e,n){return ae(()=>{switch(t.rank){case 1:return Sx(t,e,n);case 2:return VE(t,[e,0],[n,t.shape[1]]);case 3:return $x(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Hp(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return At(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return At(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ne(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function sN(t,e,n){return ae(()=>{switch(t.rank){case 1:return Sx(t,e,n);case 2:return VE(t,[0,e],[t.shape[0],n]);case 3:return $x(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Hp(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ne(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function j1(t,e,n,r){return ae(()=>{switch(t.rank){case 1:return Sx(t,e,n);case 2:switch(r){case 1:return Vd(t,e,n);case 2:return sN(t,e,n);default:throw new ne(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Vd(t,e,n);case 2:return $x(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return sN(t,e,n);default:throw new ne(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Vd(t,e,n);case 2:return Hp(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Hp(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return sN(t,e,n);default:throw new ne(`The axis is not within the rank of the tensor ${r}`)}default:throw new ne(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function XM(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),tr(t,e)}function oV(t,e){switch(t.rank){case 1:return vF([t,e]);case 2:return yF([t,e],0);case 3:return bF([t,e],0);case 4:return xF([t,e],0);default:throw new ne(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function e_(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ne(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return to(t,e)}function uT(t,e=0,n=1,r,i){return RE(t,e,n,r,i)}function fl(t,e,n,r){if(t.rank<2||e.rank<2)throw new St(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const i=t.shape.slice(-1)[0],a=e.shape.slice(-2)[0];if(i!==a)throw new St(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return KA({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?t_(t.rank,r,Os()):null,activation:n});{const i=t.shape.slice(),a=i.pop();t=te(t,[-1,a]);const o=e.shape.slice(),s=o.pop(),l=o.pop(),c=[...o,s],u=Array.from({length:e.rank},(p,g)=>g===0?e.rank-2:g<=e.rank-2?g-1:g);e=te(kt(e,u),[l,-1]);const d=[...i,...c];return te(KA({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?t_(t.rank,r,Os()):null,activation:n}),d)}}function IY(t,e,n){return ae(()=>(Array.isArray(e)?e=$i(e,"int32"):e=_e(e,"int32"),$g(t,e,n)))}function _x(t){return J(t,t)}function t_(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new ne(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?te(e,[1,r[0],1,1,1]):te(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?te(e,[1,1,1,1,r[0]]):te(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?te(e,[1,r[0],1,1]):te(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?te(e,[1,1,1,r[0]]):te(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?te(e,[1,r[0],1]):te(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?te(e,[1,1,r[0]]):te(e,[1].concat(r))}else if(t<3)return e;throw new ne(`Unsupported input rank by biasAdd: ${e.rank}`)}function Ms(t,e,n){return ae(()=>(n==null&&(n=Os()),ir(n),Ee(t,t_(t.rank,e,n))))}function uBe(t,e=1){if(e!==1)throw new St(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return xg(t)}function dBe(t){return ae(()=>nt(t,Ee(cr(t),1)))}function NY(t,e,n,r){return ae(()=>sM(t,e,n,r))}function fBe(t){return ae(()=>{const e=Ee(.5,J(.2,t));return da(e,0,1)})}function Px(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const hBe=["fanIn","fanOut","fanAvg"],pBe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mBe(t){Lf(hBe,"FanMode",t)}function gBe(t){Lf(pBe,"Distribution",t)}class Zo extends Mf{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class kY extends Zo{apply(e,n){return hr(e,n)}}kY.className="Zeros";Te(kY);class YM extends Zo{apply(e,n){return oa(e,n)}}YM.className="Ones";Te(YM);class OY extends Zo{constructor(e){if(super(),typeof e!="object")throw new ne(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new ne(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return ae(()=>J(ct(this.value),oa(e,n)))}getConfig(){return{value:this.value}}}OY.className="Constant";Te(OY);class AY extends Zo{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Bu(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}AY.className="RandomUniform";Te(AY);class _Y extends Zo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new St(`randomNormal does not support dType ${n}.`);return uT(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}_Y.className="RandomNormal";Te(_Y);class PY extends Zo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new St(`truncatedNormal does not support dType ${n}.`);return GE(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}PY.className="TruncatedNormal";Te(PY);class RY extends Zo{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return ae(()=>{if(e.length!==2||e[0]!==e[1])throw new ne("Identity matrix initializer can only be used for 2D square matrices.");return J(this.gain,NE(e[0]))})}getConfig(){return{gain:this.gain}}}RY.className="Identity";Te(RY);function vBe(t,e="channelsLast"){let n,r;if(ir(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const i=cu(t,2);n=t[1]*i,r=t[0]*i}else if(e==="channelsLast"){const i=cu(t,0,t.length-2);n=t[t.length-2]*i,r=t[t.length-1]*i}}else{const i=cu(t);n=Math.sqrt(i),r=Math.sqrt(i)}return[n,r]}class Ra extends Zo{constructor(e){if(super(),e.scale<0)throw new ne(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,mBe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,gBe(this.distribution),this.seed=e.seed}apply(e,n){const r=vBe(e),i=r[0],a=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,i):this.mode==="fanOut"?o/=Math.max(1,a):o/=Math.max(1,(i+a)/2),this.distribution==="normal"){const s=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new St(`${this.getClassName()} does not support dType ${n}.`);return GE(e,0,s,n,this.seed)}else{const s=Math.sqrt(3*o);return Bu(e,-s,s,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ra.className="VarianceScaling";Te(Ra);class ZM extends Ra{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ra.className}}ZM.className="GlorotUniform";Te(ZM);class QM extends Ra{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ra.className}}QM.className="GlorotNormal";Te(QM);class JM extends Ra{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ra.className}}JM.className="HeNormal";Te(JM);class e3 extends Ra{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ra.className}}e3.className="HeUniform";Te(e3);class t3 extends Ra{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ra.className}}t3.className="LeCunNormal";Te(t3);class n3 extends Ra{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ra.className}}n3.className="LeCunUniform";Te(n3);class DY extends Zo{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return ae(()=>{if(e.length<2)throw new St("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=de(e.slice(0,-1)),i=e[e.length-1],a=r*i;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);const o=[Math.max(i,r),Math.min(i,r)],s=uT(o,0,1,n,this.seed),l=dM.qr(s,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(i,r)*Math.min(i,r)],[Math.min(i,r)+1]);return c=J(c,d.sign()),r<i&&(c=c.transpose()),J(ct(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}DY.className="Orthogonal";Te(DY);const sV={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function lV(t,e={}){return Ox(t,Ja.getMap().classNameMap,e,"initializer")}function Vn(t){return qM(t)}function Pn(t){if(typeof t=="string"){const e=t in sV?sV[t]:t;if(e==="GlorotNormal")return new QM;if(e==="GlorotUniform")return new ZM;if(e==="HeNormal")return new JM;if(e==="HeUniform")return new e3;if(e==="LeCunNormal")return new t3;if(e==="LeCunUniform")return new n3;{const n={};return n.className=e,n.config={},lV(n)}}else return t instanceof Zo?t:lV(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function n_(t){return Array.isArray(t)&&Array.isArray(t[0])}function S$(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function vt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new ne(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Ut(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new ne(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $$(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,i)=>r*i);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const cV="Variable";class yBe{constructor(e,n="float32",r=cV,i=!0,a=null){this.dtype=n??"float32",this.shape=e.shape,this.id=SY(),r=r??cV,this.originalName=CY(r),this.name=EY(this.originalName),this.trainable_=i,this.constraint=a,this.val=aM(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),bBe(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function bBe(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function r_(t){return t.map(e=>e.read())}function r3(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Tr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class bl{constructor(e,n,r,i,a,o,s){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=i,this.callArgs=a,this.outputTensorIndex=s,this.id=SY(),o!=null&&(this.originalName=CY(o),this.name=EY(this.originalName)),this.rank=n.length}}let xBe=0;class dT{constructor(e,n){this.callArgs=n,this.id=xBe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let wBe=0;class It extends Mf{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=wBe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Pl(r)+"_"+cT(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let a=null;e.batchSize!=null&&(a=e.batchSize),r=[a].concat(e.inputShape)}this.batchInputShape=r;let i=e.dtype;i==null&&(i=e.inputDType),i==null&&(i="float32"),this.dtype=i}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Lo(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new ne(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return na(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return na(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Gs(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Gs(`Layer ${this.name} is not connected, no input to return.`);return na(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Gs(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Gs(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return na(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=tn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=tn(this.inputSpec);if(n.length!==r.length)throw new ne(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let i=0;i<n.length;i++){const a=n[i],o=r[i];if(o==null)continue;const s=a.rank;if(o.ndim!=null&&s!==o.ndim)throw new ne(`Input ${i} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${s}`);if(o.maxNDim!=null&&s>o.maxNDim)throw new ne(`Input ${i} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${s}`);if(o.minNDim!=null&&s<o.minNDim)throw new ne(`Input ${i} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${s}.`);if(o.dtype!=null&&a.dtype!==o.dtype)throw new ne(`Input ${i} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${a.dtype}.`);if(o.axes){const l=a.shape;for(const c in o.axes){const u=Number(c),d=o.axes[c],f=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(f)===-1)throw new ne(`Input ${i} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=a.shape[l];if(c!=null&&u!=null&&c!==u)throw new ne(`Input ${i} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${a.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=tn(e),i=CBe(e),a=EBe(e);if(i===a)throw new ne("Arguments to apply() must be all SymbolicTensors or all Tensors");return Bd(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const s of tn(e))o.push(s.shape);this.build(na(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const s=tn(o),l=[];for(let c of s)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(o=na(l),this.activityRegularizer!=null)throw new St("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=SBe(e),s=this.computeOutputShape(o);let l;const c=$Be(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),s!=null&&s.length>0&&Array.isArray(s[0])?l=s.map((u,d)=>new bl(c,u,this,tn(e),n,this.name,d)):l=new bl(c,s,this,tn(e),n,this.name),this.addInboundNode(e,l,null,null,o,s,n),this._refCount++,this.activityRegularizer!=null)throw new St("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,i)=>{r!=null&&e[i]!=null&&e[i]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Gs(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Gs(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Lo(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return $$(this.weights)}build(e){this.built=!0}getWeights(e=!1){return r_(e?this.trainableWeights:this.weights)}setWeights(e){ae(()=>{const n=this.weights;if(n.length!==e.length)throw new ne(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],i=r_(n);for(let a=0;a<i.length;++a){const o=i[a],s=n[a],l=e[a];if(!Nt(o.shape,l.shape))throw new ne(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([s,l])}r3(r)})}addWeight(e,n,r,i,a,o,s,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new ne(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(i=l!=null?l():Pn("zeros"));const c=i.apply(n,r),u=new yBe(c,r,e,o,s);return c.dispose(),a!=null&&this.addLoss(()=>a.apply(u.read())),o==null&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=tn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const i=this.computeMask(e,r),a=tn(n),o=tn(i);if(a.length!==o.length)throw new Error(`${this.name} outputs ${a.length} tensors but ${a.length} masks for those tensors`);for(let s=0;s<a.length;s++)a[s].kerasMask=o[s]}addInboundNode(e,n,r,i,a,o,s=null){const l=tn(e);n=tn(n),r=tn(r),i=tn(i),a=S$(a),o=S$(o);const c=[],u=[],d=[];for(const f of l)c.push(f.sourceLayer),u.push(f.nodeIndex),d.push(f.tensorIndex);new dT({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:i,inputShapes:a,outputShapes:o},s);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function SBe(t){t=tn(t);const e=[];for(const n of t)e.push(n.shape);return na(e)}function $Be(t){return"float32"}function FY(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const i=[];for(let a=0;a<r.inboundLayers.length;a++){const o=r.inputTensors[a],s=r.inboundLayers[a],l=r.nodeIndices[a],c=FY(o,s,l);for(const u of c)i.indexOf(u)===-1&&i.push(u)}return i}}}function CBe(t){let e=!0;for(const n of tn(t))if(!(n instanceof bl)){e=!1;break}return e}function EBe(t){let e=!0;for(const n of tn(t))if(n instanceof bl){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Rx extends It{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:cT("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new ne("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new ne("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new ne("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const i=new bl(this.dtype,this.batchInputShape,this,[],{},this.name);i.nodeIndex=0,i.tensorIndex=0,new dT({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new ne(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Rx.className="InputLayer";Te(Rx);function TBe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new ne("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Rx({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function IBe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return _e(e,t.dtype)}catch{throw new ne(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class qc{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof qc)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=IBe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new ne(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof bl){if(this.id2Value[e.id]==null)throw new ne(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ne(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof bl){if(this.id2Value[e.id]==null)throw new ne(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new ne(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Et(this.id2Mask)}}const C$=new bY,E$=new bY;function NBe(t){C$!=null&&C$.setMaxEntries(t),E$!=null&&E$.setMaxEntries(t)}function _v(t,e,n,r){const i=n==null?!1:n.training,a=Array.isArray(t),o=a?t:[t],s=o.map(p=>p.name),l=[],c=e.names();for(const p of s)c.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);const u=s.join(",")+"|"+e.names().sort().join(",");let d=C$.get(u),f;if(d==null){const p=kBe(o,e);d=p.sorted,f=p.recipientCounts,C$.put(u,d),E$.put(u,f)}f={},i||Object.assign(f,E$.get(u));const h=new qc(e);for(let p=0;p<d.length;++p){const g=d[p],m=g.sourceLayer;if(m instanceof Rx)continue;const v=[],y=[],b=[];let w=!1;for(const I of g.inputs){const T=h.getValue(I),N=h.getMask(I);v.push(T),y.push(N),N!=null&&(w=!0),i||(f[I.name]--,f[I.name]===0&&!e.hasKey(I)&&s.indexOf(I.name)===-1&&!T.isDisposed&&I.sourceLayer.stateful!==!0&&b.push(T))}w&&(n=n||{},n.mask=y[0]);const x=tn(m.apply(v,n));let $=null;m.supportsMasking&&($=m.computeMask(v,y));const C=ABe(g),E=Array.isArray(C)?C:[C];for(let I=0;I<E.length;++I){h.hasKey(E[I])||h.add(E[I],x[I],Array.isArray($)?$[0]:$);const T=s.indexOf(E[I].name);T!==-1&&(l[T]=x[I])}i||Et(b)}return h.disposeMasks(),a?l:l[0]}function kBe(t,e){j(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const i=uV(t[0],e);n=i.sorted,r=i.recipientMap}else{const i=new Set;for(const a of t){const{sorted:o,recipientMap:s}=uV(a,e);for(const l of o)i.has(l.name)||(n.push(l),i.add(l.name));for(const l in s)r[l]==null&&(r[l]=new Set),s[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:OBe(r)}}function OBe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function uV(t,e){const n=new Set,r=[],i={};for(const s of e.names())n.add(s);const a=[],o=[];for(a.push(t);a.length>0;){const s=a[a.length-1];if(n.has(s.name)){a.pop();continue}const l=o[o.length-1]===a.length-1;if(s.inputs.length===0||l)a.pop(),r.push(s),n.add(s.name),l&&o.pop();else{o.push(a.length-1);for(const c of s.inputs)i[c.name]==null&&(i[c.name]=new Set),i[c.name].add(s.name),!n.has(c.name)&&a.push(c)}}return{sorted:r,recipientMap:i}}function ABe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const i of t.sourceLayer.inboundNodes[r].outputTensors)if(i.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Be=oe();_Be.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,NBe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function i3(t,e){return ae(()=>Wr(qe(J(t,t),e,!0)))}class Dx extends Mf{getConfig(){return{}}}class MY extends Dx{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ae(()=>{const n=i3(e,this.axis),r=da(n,0,this.maxValue);return J(e,nt(r,Ee(Er(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}MY.className="MaxNorm";Te(MY);class LY extends Dx{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ae(()=>nt(e,Ee(Er(),i3(e,this.axis))))}getConfig(){return{axis:this.axis}}}LY.className="UnitNorm";Te(LY);class jY extends Dx{apply(e){return Fs(e)}}jY.className="NonNeg";Te(jY);class zY extends Dx{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return ae(()=>{const n=i3(e,this.axis),r=Ee(J(this.rate,da(n,this.minValue,this.maxValue)),J(1-this.rate,n));return J(e,nt(r,Ee(Er(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}zY.className="MinMaxNorm";Te(zY);const dV={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function kr(t){return qM(t)}function fV(t,e={}){return Ox(t,Ja.getMap().classNameMap,e,"constraint")}function Or(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in dV?dV[t]:t,config:{}};return fV(n)}else return t instanceof Dx?t:fV(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function nd(t){if(t==null)return;const e=[],n=[],r=[];for(const i in t){const a=t[i];if(typeof a!="number"){const o=a;e.push(o.data()),n.push(i),r.push(o)}}if(e.length>0){const i=await Promise.all(e);for(let a=0;a<i.length;++a)t[n[a]]=i[a][0];Et(r)}}function BY(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var hV;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(hV||(hV={}));const PBe=125;class x0{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class RBe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class DBe extends x0{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const i in n){const a=n[i];if(typeof a=="number")this.totals.hasOwnProperty(i)||(this.totals[i]=0),this.totals[i]=this.totals[i]+a*r;else{let o;i in this.totals?o=this.totals[i]:this.totals[i]=0;const s=ae(()=>Ee(this.totals[i],J(a,r)));this.totals[i]=s,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:ae(()=>{const i=J(nt(1,this.seen),this.totals[r]);n[r]=i,this.totals[r].dispose(),Cr(n[r])}))}}class FBe extends x0{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const a in this.history){const o=this.history[a];for(let s=0;s<o.length;++s)if(typeof o[s]!="number"){const l=o[s];e.push(l.data()),n.push(a),r.push(s)}}const i=await Promise.all(e);for(let a=0;a<i.length;++a)this.history[n[a]][r[a]].dispose(),this.history[n[a]][r[a]]=i[a][0]}}class MBe extends x0{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||TM,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=PBe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");f$(this.yieldEvery)&&(this.maybeWait=Y4e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const i=[];this.yield!=null&&(await nd(r),i.push(this.yield(e,n,r))),i.push(this.nextFrameFunc()),await Promise.all(i)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await nd(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await nd(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await nd(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await nd(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):f$(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await nd(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await nd(e),await this.trainEnd(e))}}function VY(t,e){return t==null&&(t={}),t instanceof x0?[t]:Array.isArray(t)&&t[0]instanceof x0?t:tn(t).map(r=>new MBe(r,e))}class Io{constructor(){}static registerCallbackConstructor(e,n){j(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Io.checkForDuplicate(n),Io.constructors[e]==null&&(Io.constructors[e]=[]),Io.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Io.constructors)Io.constructors[+n].forEach(i=>{if(i===e)throw new ne("Duplicate callback constructor.")})}static clear(){Io.constructors={}}static createCallbacks(e){const n=[];for(const r in Io.constructors){const i=+r;e>=i&&n.push(...Io.constructors[i])}return n.map(r=>new r)}}Io.constructors={};function WY(t,e,n,r,i,a,o,s,l){const c=new FBe,u=[new DBe,...Io.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const d=new RBe(u);return d.setParams({epochs:n,initialEpoch:r,samples:i,steps:a,batchSize:o,verbose:e,doValidation:s,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gl(t,e={},n=!1){return Ox(t,Ja.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function T$(t,e){return ae(()=>{t.dtype!=="float32"&&(t=_e(t,"float32"));const n=qe(_x(t),e,!0),r=Pf(n.shape,Er()),i=Wr(El(n,r));return nt(t,i)})}function fT(t,e){return ae(()=>zn(_x(Ue(e,t)),-1))}function a3(t,e){return ae(()=>zn(cr(Ue(e,t)),-1))}function o3(t,e){return ae(()=>{const n=Ue(t,e),r=da(cr(t),Er(),Number.MAX_VALUE),i=cr(nt(n,r));return J(100,zn(i,-1))})}function LBe(t,e){return ae(()=>{const n=da(e,Er(),Number.MAX_VALUE),r=_a(Ee(1,n)),i=da(t,Er(),Number.MAX_VALUE),a=_a(Ee(1,i));return zn(_x(Ue(r,a)),-1)})}function jBe(t,e){return ae(()=>{const n=El(0,Ue(1,J(t,e)));return zn(_x(n),-1)})}function zBe(t,e){return ae(()=>{const n=El(0,Ue(1,J(t,e)));return zn(n,-1)})}function BBe(t,e){return ae(()=>{const n=qe(J(t,e),-1),r=co(J(Ue(1,t),e),-1);return El(0,Ee(1,Ue(r,n)))})}function VBe(t,e){return ae(()=>{const n=Math.log(2),r=Ue(e,t),i=Ue(Ee(r,Rf(J(-2,r))),n);return zn(i,-1)})}function w0(t,e,n=!1){return ae(()=>{if(n)e=Cx(e);else{const r=qe(e,e.shape.length-1,!0);e=nt(e,r)}return e=da(e,Er(),1-Er()),bn(qe(J(_e(t,"float32"),_a(e)),e.shape.length-1))})}function I$(t,e,n=!1){return ae(()=>{const r=_e(Sg(lBe(t)),"int32");e=da(e,Er(),1-Er());const i=e.shape,a=te(Wp(r,i[i.length-1]),i);return w0(a,e,n)})}function WBe(t,e){if(!Nt(t.shape,e.shape))throw new ne(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return ae(()=>{const n=Fs(e),r=bn(cr(e));return Ee(Ue(n,J(e,t)),mx(fa(r)))})}function hT(t,e){return ae(()=>{let n;return n=da(e,Er(),1-Er()),n=_a(nt(n,Ue(1,n))),zn(WBe(t,n),-1)})}function UBe(t,e){return ae(()=>{const n=da(t,Er(),1),r=da(e,Er(),1);return qe(J(t,_a(nt(n,r))),-1)})}function HBe(t,e){return ae(()=>{const n=_a(Ee(Er(),e));return zn(Ue(e,J(t,n)),-1)})}function UY(t,e){return ae(()=>{const n=T$(t,-1),r=T$(e,-1),i=J(n,r);return bn(qe(i,-1))})}const N$={meanSquaredError:fT,meanAbsoluteError:a3,meanAbsolutePercentageError:o3,meanSquaredLogarithmicError:LBe,squaredHinge:jBe,hinge:zBe,categoricalHinge:BBe,logcosh:VBe,categoricalCrossentropy:w0,sparseCategoricalCrossentropy:I$,binaryCrossentropy:hT,kullbackLeiblerDivergence:UBe,poisson:HBe,cosineProximity:UY};function lN(t){if(typeof t=="string"){if(t in N$)return N$[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ne(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function HY(t,e){return ae(()=>{const n=J(.5,Pa(e)),r=dl(ya(e,n),t.dtype);return zn(Go(t,r),-1)})}function GY(t,e){return ae(()=>dl(Go(sf(t,-1),sf(e,-1)),"float32"))}function GBe(t,e){return ae(()=>_e(qe(Ns(Go(t,1),Go(e,1))),"float32"))}function qBe(t,e){return ae(()=>_e(qe(Ns(Go(t,0),Go(e,1))),"float32"))}function KBe(t,e){return ae(()=>{const n=GBe(t,e),r=qBe(t,e),i=Ee(n,r);return _e(li(ya(i,0),nt(n,i),0),"float32")})}function XBe(t,e){return hT(t,e)}function YBe(t,e){return t.rank===e.rank&&(t=Vu(t,[t.rank-1])),e=sf(e,-1),e.dtype!==t.dtype&&(e=_e(e,t.dtype)),_e(Go(t,e),"float32")}const ZBe=fT,QBe=fT,JBe=a3,e5e=a3,t5e=o3,n5e=o3,qY=w0,r5e=UY,KY=I$,k$={binaryAccuracy:HY,categoricalAccuracy:GY,precision:KBe,categoricalCrossentropy:qY,sparseCategoricalCrossentropy:KY,mse:ZBe,MSE:QBe,mae:JBe,MAE:e5e,mape:t5e,MAPE:n5e,cosine:r5e};function i5e(t){if(typeof t=="string"&&t in k$)return k$[t];if(typeof t!="string"&&t!=null)return t;throw new ne(`Unknown metric ${t}`)}function z1(t){if(qs(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(N$))if(N$[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(k$))if(k$[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a5e(t){const e={Adagrad:()=>hd.adagrad(.01),Adadelta:()=>hd.adadelta(1,.95,Er()),Adam:()=>hd.adam(.001,.9,.999,Er()),Adamax:()=>hd.adamax(.002,.9,.999,Er(),0),RMSProp:()=>hd.rmsprop(.001,.9,0,Er()),SGD:()=>hd.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ne(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const pV=1*1024*1024;function mV(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!i_(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>pV&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${pV}.`)}}function i_(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!i_(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!i_(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o5e(t,e,n,r=console.log){const i=l5e(t),a=["Layer (type)","Input Shape","Output shape","Param #"];i?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let o;if(!i){a.push("Receives inputs"),o=[];for(const u in t.nodesByDepth)o.push(...t.nodesByDepth[u])}r("_".repeat(e)),O$(a,n,r),r("=".repeat(e));const s=t.layers;for(let u=0;u<s.length;++u)i?c5e(s[u],n,r):u5e(s[u],n,o,r),r((u===s.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=s5e(t),c=$$(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function s5e(t){let e;return t.collectedTrainableWeights!=null?e=$$(t.collectedTrainableWeights):e=$$(t.trainableWeights),e}function l5e(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||i.length===1&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let a=!1;for(const o of i.inboundNodes)if(r.indexOf(o)!==-1)if(a){e=!1;break}else a=!0;if(!e)break}return e}function O$(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r+=t[i],r=r.slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function c5e(t,e,n){let r,i;try{i=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{i="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const a=t.name,o=t.getClassName(),s=[`${a} (${o})`,i,r,t.countParams().toString()];O$(s,e,n)}function u5e(t,e,n,r){let i,a;try{a=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{a="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}const o=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let f=0;f<d.inboundLayers.length;++f){const h=d.inboundLayers[f].name,p=d.nodeIndices[f],g=d.tensorIndices[f];o.push(`${h}[${p}][${g}]`)}const s=t.name,l=t.getClassName(),c=o.length===0?"":o[0],u=[`${s} (${l})`,a,i,t.countParams().toString(),c];O$(u,e,r);for(let d=1;d<o.length;++d)O$(["","","","",o[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XY(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function a_(t,e){if(t===null)return null;if(typeof t=="string")return vd(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const a=t[i];XY(e,i,a)?n.push(a):n.push(a_(a,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r];if(r==="name"&&typeof i=="string")n[r]=i;else{const a=vd(r);n[a]=a_(i,a)}}return n}}function o_(t,e){if(t==null)return null;if(typeof t=="string")return Pl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let i=0;i<r;++i){const a=t[i];XY(e,i,a)?n.push(a):n.push(o_(a,e))}return n}else{const n={};for(const r of Object.keys(t)){const i=t[r],a=Pl(r);(r==="name"||r==="className")&&typeof i=="string"?n[a]=i:n[a]=o_(i,r)}return n}}/** @license See the LICENSE file. */const YY="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const d5e=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class is extends It{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const y=this.getClassName().toLowerCase();this.name=cT(y)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],lu(this.inputs).length!==this.inputs.length)throw new ne(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(y=>y.name)}`);lu(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(y=>y.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const y of this.outputs){const b=y.sourceLayer,w=y.nodeIndex,x=y.tensorIndex;this.outputLayers.push(b),this.outputLayersNodeIndices.push(w),this.outputLayersTensorIndices.push(x)}for(const y of this.inputs){const b=y.sourceLayer,w=y.nodeIndex,x=y.tensorIndex;qs(w===0,"input layer has >1 nodes"),qs(x===0,"input layer has >1 tensors"),this.inputLayers.push(b),this.inputLayersNodeIndices.push(w),this.inputLayersTensorIndices.push(x)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let y=0;y<this.inputLayers.length;y++){const b=this.inputLayers[y];if(!(b instanceof Rx))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${y} (0-based) originates from layer type ${b.getClassName()}.`);this.inputNames.push(b.name),this.feedInputShapes.push(b.batchInputShape),this.feedInputNames.push(b.name)}for(const y of this.outputLayers)this.outputNames.push(y.name);this.internalInputShapes=this.inputs.map(y=>y.shape),this.internalOutputShapes=this.outputs.map(y=>y.shape);const n={},r={},i={},a={},o={},s=[],l=(y,b,w,x,$,C)=>{(x==null||$==null||C==null)&&(x=y.sourceLayer,$=y.nodeIndex,C=y.tensorIndex);const E=x.inboundNodes[$];if(w.indexOf(E)!==-1)throw new Lo(`The tensor ${y.name} at layer "${x.name}" is part of a cycle.`);if(b.indexOf(E)!==-1)return;this.containerNodes.add(is.nodeKey(x,$)),x.id in o||(o[x.id]=Object.keys(o).length),w.indexOf(E)===-1&&w.push(E);const I=E.inboundLayers.length;for(let T=0;T<I;T++){const N=E.inputTensors[T],k=E.inboundLayers[T],O=E.nodeIndices[T],_=E.tensorIndices[T];l(N,b,w,k,O,_)}for(b.push(E);w.indexOf(E)>=0;)w.splice(w.indexOf(E),1);s.push(E)},c=[],u=[];for(const y of this.outputs)l(y,c,u);const d=s.slice().reverse();for(const y of d){r[y.id]=y,y.id in n||(n[y.id]=0);let b=n[y.id];const w=i[y.outboundLayer.id]==null?0:i[y.outboundLayer.id];b=Math.max(b,w),i[y.outboundLayer.id]=b,a[y.outboundLayer.id]=y.outboundLayer,n[y.id]=b;for(let x=0;x<y.inboundLayers.length;x++){const $=y.inboundLayers[x],C=y.nodeIndices[x],E=$.inboundNodes[C],I=n[E.id]==null?0:n[E.id];n[E.id]=Math.max(b+1,I),r[E.id]=E}}const f={};for(const y in n){const b=n[y];b in f||(f[b]=[]),f[b].push(r[y])}const h={};for(const y in i){const b=i[y];b in h||(h[b]=[]),h[b].push(a[y])}let p=Object.keys(h).map(y=>parseInt(y,10)).sort(M1);this.layers=[];for(const y of p){const b=h[y];b.sort((w,x)=>{const $=o[w.id],C=o[x.id];return $<C?-1:$>C?1:0});for(const w of b)w instanceof is&&this.internalContainerRefs.push(w),this.layers.push(w)}this.layersByDepth=h,p=Object.keys(f).map(y=>parseInt(y,10)).sort(M1);const g=this.inputs.slice(),m=[];for(const y of p)for(const b of f[y]){const w=b.outboundLayer;if(w!=null){for(const x of b.inputTensors)if(g.indexOf(x)===-1)throw new Lo(`Graph disconnected: cannot obtain value for tensor ${x} at layer "${w.name}". The following previous layers were accessed without issue: ${m}`);for(const x of b.outputTensors)g.push(x);m.push(w.name)}}this.nodesByDepth=f;const v=this.layers.map(y=>y.name);for(const y of v){const b=v.filter(w=>w===y).length;if(b!==1)throw new Lo(`The name "${y}" is used ${b} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new dT({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(y=>null),outputMasks:this.outputs.map(y=>null),inputShapes:this.inputs.map(y=>y.shape),outputShapes:this.outputs.map(y=>y.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new ne("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let i=0;const a=d5e(e);a&&this.parseWeights(e);for(const s of this.layers)for(const[l,c]of s.weights.entries()){const u=a?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new ne(`Duplicate weight name: ${u}`);r[u]=c,i++}const o=[];for(const s in e){let l=s;if(r[s]==null){const c=s.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[s]]);else if(n)throw new ne(`Provided weight data has no target variable: ${s}`);delete r[l]}if(n){const s=[];for(const l in r)s.push(l);if(s.length>0)throw new ne(`${s.length} of ${i} weights are not set: ${s}`)}r3(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),i=["vars","layer_checkpoint_dependencies"],a=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!i.includes(o)).join("/");a!==n&&(e[a]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${YY}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=o_(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return ae(()=>{e=tn(e);const r=new qc;for(let i=0;i<this.inputs.length;++i)r.add(this.inputs[i],e[i]);return _v(this.outputs,r,n)})}computeMask(e,n){return ae(()=>{e=tn(e);let r;return n==null?r=hf(null,e.length):r=tn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=S$(e);if(n.length!==this.inputLayers.length)throw new ne(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let s=0;s<n.length;s++){const l=this.inputLayers[s],c=n[s],u=l.name+"_0_0";r[u]=c}const i=Object.keys(this.nodesByDepth).map(s=>parseInt(s,10)).sort(M1);if(i.length>1)for(const s of i){const l=this.nodesByDepth[s];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(u.id)!==-1)continue;const d=[];for(let g=0;g<c.inboundLayers.length;g++){const m=c.inboundLayers[g],v=c.nodeIndices[g],y=c.tensorIndices[g],b=`${m.name}_${v}_${y}`,w=r[b];d.push(w)}const f=u.computeOutputShape(na(d)),h=S$(f),p=u.inboundNodes.indexOf(c);for(let g=0;g<h.length;g++){const m=`${u.name}_${p}_${g}`;r[m]=h[g]}}}const a=[],o=[];for(let s=0;s<this.outputLayers.length;s++){const l=this.outputLayers[s],c=this.outputLayersNodeIndices[s],u=this.outputLayersTensorIndices[s],d=`${l.name}_${c}_${u}`;o.push(d)}for(let s=0;s<o.length;s++){const l=o[s];qs(l in r),a.push(r[l])}return na(a)}runInternalGraph(e,n){n==null&&(n=hf(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=n[l];r[c.id]=[u,d]}const i=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(M1);for(const l of i){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,f=u.inputTensors,h=u.outputTensors,p=new Array;for(const g of f)g.id in r&&p.push(r[g.id]);if(p.length===f.length){let g={},m,v,y,b;if(u.callArgs!=null&&(g=u.callArgs),p.length===1){const[w,x]=p[0];g.mask==null&&(g.mask=x),y=tn(d.call(w,g)),b=tn(d.computeMask(w,x)),m=[w],v=[x]}else m=p.map(w=>w[0]),v=p.map(w=>w[1]),g.mask==null&&(g.mask=v),y=tn(d.call(m,g)),b=tn(d.computeMask(m,v));if(d.activityRegularizer)throw new St("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let w=0;w<h.length;++w){const x=h[w],$=y[w],C=b[w];r[x.id]=[$,C]}}}}const a=[],o=[],s=[];for(const l of this.outputs){qs(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];s.push(c.shape),a.push(c),o.push(u)}return[a,o,s]}buildNodeConversionMap(e){const n={};let r;for(const i of this.layers){r=i instanceof is?1:0;for(let a=0;a<i.inboundNodes.length;a++){const o=is.nodeKey(i,a);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new ne("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new ne(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new ne(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return ae(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const i=is.nodeKey(n,r);this.containerNodes.has(i)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const s=o.getClassName(),l=o.getConfig(),c=[];for(let d=0;d<o.inboundNodes.length;d++){const f=o.inboundNodes[d],h=is.nodeKey(o,d);let p={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(f.inboundLayers.length>0){const g=[];for(let m=0;m<f.inboundLayers.length;m++){const v=f.inboundLayers[m],y=f.nodeIndices[m],b=f.tensorIndices[m],w=is.nodeKey(v,y);let x=n[w];x==null&&(x=0),g.push([v.name,x,b,p])}c.push(g)}}}const u={};u.name=o.name,u.className=s,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const i=[];for(let o=0;o<this.inputLayers.length;o++){const s=this.inputLayers[o],l=this.inputLayersNodeIndices[o],c=is.nodeKey(s,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[o];i.push([s.name,u,d])}e.inputLayers=i;const a=[];for(let o=0;o<this.outputLayers.length;o++){const s=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=is.nodeKey(s,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[o];a.push([s.name,u,d])}return e.outputLayers=a,e}static fromConfig(e,n,r={},i=!1){const a={},o={};function s(m,v){m.name in o?o[m.name].push(v):o[m.name]=[v]}function l(m,v){const y=[];let b;for(const w of v){const x=w[0],$=w[1],C=w[2];if(b=w[3]==null?{}:w[3],!(x in a)){s(m,v);return}const E=a[x];if(E.inboundNodes.length<=$){s(m,v);return}const I=E.inboundNodes[$];y.push(I.outputTensors[C])}y.length>0&&m.apply(na(y),b)}function c(m){const v=m.name,y=Gl(m,n.customObjects!=null?n.customObjects:{});y.setFastWeightInitDuringBuild(i),a[v]=y,m.inboundNodes.forEach(w=>{if(!(w instanceof Array))throw new ne(`Corrupted configuration, expected array for nodeData: ${w}`);s(y,w)})}const u=n.name,d=n.layers;for(const m of d)c(m);for(;!X4e(o);)for(const m of d){const v=a[m.name];if(v.name in o){const y=o[v.name];delete o[v.name];for(const b of y)l(v,b)}}const f=[],h=[],p=n.inputLayers;for(const m of p){const v=m[0],y=m[1],b=m[2];qs(v in a);const x=a[v].inboundNodes[y].outputTensors;f.push(x[b])}const g=n.outputLayers;for(const m of g){const v=m[0],y=m[1],b=m[2];qs(v in a);const x=a[v].inboundNodes[y].outputTensors;h.push(x[b])}return new e({inputs:f,outputs:h,name:u})}get stateful(){if(this._stateful)throw new ne("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){ae(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function f5e(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(i=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const i=[];return e.forEach(a=>{a in t?i.push(t[a]):i.push(null)}),i}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function ZY(t,e){return f5e(t,e,"classWeight")}async function QY(t,e,n,r){if(n!=null){const i=ae(()=>{if(t.shape.length===1)return cl(t);if(t.shape.length===2){if(t.shape[1]>1)return sf(t,1);if(t.shape[1]===1)return te(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await i.data());Et(i);const o=[];return a.forEach(s=>{if(n[s]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${s} exists in the data but not in classWeight`);o.push(n[s])}),$i(o,"float32")}else return null}function h5e(t,e){return J(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const p5e=32;function JY(t,e){let n,r;const i=e;n=i.xs,r=i.ys,j(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const a=gV("input",t.inputNames,n),o=gV("output",t.outputNames,r),s=a[0].shape[0];j(a.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),j(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<a.length;l++)j(a[l].shape[0]===s,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${a[l].shape[0]}; expected  ${s} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)j(o[l].shape[0]===s,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${s} based on input ${t.inputNames[0]}.`);return{xs:a,ys:o}}function gV(t,e,n){if(n instanceof Zt)return[n];if(Array.isArray(n))return j(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(n[i]==null)throw new ne(`The feature data generated by the dataset lacks the required ${t} key '${i}'.`);r.push(n[i])}return r}}function m5e(t){if(t.length===3)throw new St("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function g5e(t,e,n){const r=n.batchesPerEpoch!=null;if(j(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),j(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),j(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),j(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),j(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const i=n.validationData!=null;let a,o;if(i)if(vV(n.validationData))j(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const m=m5e(n.validationData);a=m.xs,o=m.ys}const s=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;i?c=l.slice().concat(l.map(m=>"val_"+m)):c=l.slice();const u=VY(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:h}=WY(u,d,n.epochs,null,null,v5e(e,n),null,i,c);f.setModel(t),t.history=h,await f.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,g=await e.iterator();for(;p<n.epochs;){const m={};await f.onEpochBegin(p);let v=0,y=0;for(r||(g=await e.iterator());!r||v<n.batchesPerEpoch;){const b=await g.next();if(r&&b.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(b.value!=null){const{xs:w,ys:x}=JY(t,b.value),$={};$.batch=y,$.size=w[0].shape[0],await f.onBatchBegin(y,$);const C=[];if(n.classWeight!=null){const T=ZY(n.classWeight,t.outputNames);for(let N=0;N<T.length;++N)C.push(await QY(x[N],null,T[N]))}const E=w.concat(x).concat(C),I=s(E);Et(E);for(let T=0;T<l.length;++T){const N=l[T],k=I[T];$[N]=k,Cr(k)}await f.onBatchEnd(y,$),BY($),y++,v++}if(r?v>=n.batchesPerEpoch:b.done){if(i){let w;vV(n.validationData)?w=tn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):w=tn(t.evaluate(a,o,{batchSize:n.validationBatchSize==null?p5e:n.validationBatchSize,verbose:0}));for(let x=0;x<t.metricsNames.length;++x)m[`val_${t.metricsNames[x]}`]=w[x]}break}if(t.stopTraining_)break}if(await f.onEpochEnd(p,m),p++,t.stopTraining_)break}return await f.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function v5e(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function vV(t){return typeof t.iterator=="function"}function y5e(t){return typeof t.next=="function"}async function b5e(t,e,n){n=n||{};const r=n.batches!=null,i=t.testFunction;let a=[];if(n.verbose>0)throw new St("Verbose mode is not implemented yet.");j(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=y5e(e)?e:await e.iterator();let s=0,l=0;for(;!r||l<n.batches;){const c=await o.next();if(a=ae(()=>{if(c.value){const{xs:u,ys:d}=JY(t,c.value),f=u.concat(d),h=ae(()=>i(f));if(Et(f),l===0)for(let g=0;g<h.length;++g)a.push(ct(0));const p=f[0].shape[0];for(let g=0;g<h.length;++g){const m=h[g],v=a[g];a[g]=ae(()=>Ee(a[g],J(p,m))),l>0&&Et(v)}Et(h),s+=p,++l}return a}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<a.length;++c){const u=a[c];a[c]=nt(a[c],s),Et(u)}return na(a)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cN(t){j(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function uv(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Vd(r,e,n-e)):Vd(t,e,n-e)}function s_(t,e){return ae(()=>t==null?null:Array.isArray(t)?t.map(n=>s_(n,e)):IY(t,e.dtype==="int32"?e:_e(e,"int32")))}function uN(t,e){const n=[];let r=0,i=null;for(;r<t;)i=r+e,i>=t&&(i=t),n.push([r,i]),r=i;return n}function eZ(t){const e=[];t instanceof Zt&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(Ax(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function rs(t,e){if(t==null)return;const n=[];if(e instanceof Zt)n.push(e.id);else if(Array.isArray(e))e.forEach(i=>n.push(i.id));else if(e!=null)for(const i in e){const a=e[i];n.push(a.id)}const r=[];if(t instanceof Zt)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(i=>{n.indexOf(i.id)===-1&&r.push(i)});else if(t!=null)for(const i in t){const a=t[i];n.indexOf(a.id)===-1&&r.push(a)}r.forEach(i=>{i.isDisposed||i.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function x5e(t){return t instanceof Zt}function l_(t){return Array.isArray(t)}function yV(t){return!x5e(t)&&!l_(t)}function bV(t,e,n,r=!0,i=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(l_(t)&&t.length>0)o=!0;else if(yV(t)){for(const s in t)if(t.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new ne(`Error when checking model ${i} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let a;if(yV(t)){t=t,a=[];for(const o of e){if(t[o]==null)throw new ne(`No data provided for "${o}". Need data for each key in: ${e}`);a.push(t[o])}}else if(l_(t)){if(t=t,t.length!==e.length)throw new ne(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);a=t}else{if(t=t,e.length>1)throw new ne(`The model ${i} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);a=[t]}if(a=eZ(a),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const s=a[o];if(s.shape.length!==n[o].length)throw new ne(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${s.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=s.shape[l],u=n[o][l];if(u!=null&&u>=0&&c!==u)throw new ne(`${i} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${i} received an input with ${s.shape[0]} examples, each with shape [${s.shape.slice(1,s.shape.length)}] (tensor shape [${s.shape}])`)}}return a}function w5e(t,e,n){const r=lu(t.map(a=>a.shape[0]));r.sort();const i=lu(e.map(a=>a.shape[0]));if(i.sort(),r.length>1)throw new ne(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(a=>a.shape))}`);if(i.length>1)throw new ne(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(a=>a.shape))}`);if(r.length>0&&i.length>0&&!Nt(r,i))throw new ne(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}function S5e(t,e,n){const r=[fT,hT,w0];for(let i=0;i<t.length;++i){const a=t[i],o=e[i],s=n[i];if(o!=null){if(o===w0&&a.shape[a.shape.length-1]===1)throw new ne(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=a.shape.slice(1),c=s.slice(1);for(let u=0;u<l.length;++u){const d=l[u],f=c[u];if(f!=null&&d!==f)throw new ne(`A target Tensor with shape ${a.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function xV(t,e,n,r=!0,i=""){let a;if(Array.isArray(t)){if(t.length!==e.length)throw new ne(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);a=t}else{if(e.length>1)throw new ne(`The model expects ${e.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);a=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const s=a[o];if(s.shape.length!==n[o].length)throw new ne(`Error when checking ${i}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(s.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=s.shape[l],u=n[o][l];if(u!=null&&u!==c)throw new ne(`Error when checking ${i}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(s.shape)}.`)}}}function $5e(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const i of e){let a=n.hasOwnProperty(i)?n[i]:[];Array.isArray(a)||(a=[a]),r.push(a)}return r}}const C5e="layers-model";class Jh extends is{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new ne("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");o5e(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=a5e(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof bc))throw new ne("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new ne(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(lN(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new ne(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(s=>lN(s))}else{const o=lN(e.loss);this.outputs.forEach(s=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const s=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(s),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Bd("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const s=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([s,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const i=$5e(e.metrics,this.outputNames),a=(o,s,l)=>{this.outputNames.length>1&&(s=this.outputNames[o]+"_"+s),this.metricsNames.push(s),this.metricsTensors.push([l,o])};Bd("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const s=i[o];(c=>{const u="";let d,f,h;for(const p of c){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const m=this.internalOutputShapes[o];m[m.length-1]===1||this.lossFunctions[o]===hT?["accuracy","acc"].indexOf(p)!==-1?f=HY:["crossentropy","ce"].indexOf(p)!==-1&&(f=XBe):this.lossFunctions[o]===I$?["accuracy","acc"].indexOf(p)!==-1?f=YBe:["crossentropy","ce"].indexOf(p)!==-1&&(f=KY):["accuracy","acc"].indexOf(p)!==-1?f=GY:["crossentropy","ce"].indexOf(p)!==-1&&(f=qY);let v;["accuracy","acc"].indexOf(p)!==-1?v="acc":["crossentropy","ce"].indexOf(p)!==-1&&(v="ce"),h=f,d=u+v}else h=i5e(p),d=u+z1(p);let g;Bd(d,()=>{g=h}),a(o,d,g)}})(s)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const i=r.batchSize==null?32:r.batchSize;cN(i);const o=this.standardizeUserDataXY(e,n,!0,i);try{const s=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,s,i,r.verbose,r.steps);return na(c)}finally{rs(o[0],e),rs(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),b5e(this,e,n)}checkNumSamples(e,n,r,i="steps"){let a;if(r!=null){if(a=null,n!=null)throw new ne(`If ${i} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?a=e[0].shape[0]:a=e.shape[0];else throw new ne(`Either the input data should have a defined shape, or ${i} shoud be specified.`);return a}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new ne("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),i=r?n:[n],a=this.retrieveSymbolicTensors(i),o=new qc;if(e instanceof Zt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new ne(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new ne(`No value is provided for the model's input ${l.name}`);o.add(l,c)}const s=_v(a,o);return r?s:s[0]}retrieveSymbolicTensors(e){const n=hf(null,e.length);let r=e.length;for(const i of this.layers){const a=Array.isArray(i.output)?i.output:[i.output],o=a.map(s=>s.name);for(let s=0;s<e.length;++s){const l=o.indexOf(e[s]);if(l!==-1&&(n[s]=a[l],r--),r===0)break}if(r===0)break}if(r>0){const i=[];throw n.forEach((a,o)=>{a==null&&i.push(e[o])}),new ne(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(i)}`)}return n}predictLoop(e,n=32,r=!1){return ae(()=>{const i=this.checkNumSamples(e);if(r)throw new St("Verbose predictLoop() is not implemented yet.");const a=uN(i,n),o=this.outputs.map(s=>[]);for(let s=0;s<a.length;++s)ae(()=>{const c=a[s][0],u=a[s][1],d=uv(e,c,u),f=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)f.push({key:this.inputs[p],value:d[p]});else f.push({key:this.inputs[0],value:d});const h=new qc(f);return _v(this.outputs,h)}).forEach((c,u)=>o[u].push(c));return na(o.map(s=>tr(s,0)))})}predict(e,n={}){const r=eZ(e);xV(r,this.inputNames,this.feedInputShapes,!1);try{const i=n.batchSize==null?32:n.batchSize;return cN(i),this.predictLoop(r,i)}finally{rs(r,e)}}predictOnBatch(e){xV(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,i){if(this.optimizer_==null)throw new Lo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let o=0;o<this.feedOutputShapes.length;++o){const s=this.feedOutputShapes[o];this.feedLossFns[o]===I$?a.push(s.slice(0,s.length-1).concat([1])):a.push(s)}if(e=bV(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=bV(n,this.feedOutputNames,a,!1,"target"),w5e(e,n),S5e(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&i!=null&&i>0&&e[0].shape[0]%i!==0)throw new ne(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${i}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,i,a=!0,o){const[s,l]=this.standardizeUserDataXY(e,n,a,o);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(i!=null){const u=ZY(i,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await QY(l[d],null,u[d]))}return[s,l,c]}testLoop(e,n,r,i=0,a){return ae(()=>{const o=this.checkNumSamples(n,r,a,"steps"),s=[];if(i>0)throw new St("Verbose mode is not implemented yet.");if(a!=null)throw new St("steps mode in testLoop() is not implemented yet");{const l=uN(o,r),c=$i(ks(0,o));for(let u=0;u<l.length;++u){const d=l[u][0],f=l[u][1],h=Vd(c,d,f-d),p=s_(n,h),g=e(p);if(u===0)for(let m=0;m<g.length;++m)s.push(ct(0));for(let m=0;m<g.length;++m){const v=g[m];s[m]=Ee(s[m],J(f-d,v))}}for(let u=0;u<s.length;++u)s[u]=nt(s[u],o)}return s})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const i=e[r];let a=i;if(iV(e,i)>1){const o=iV(e.slice(0,r),i);a+=`_${o}`}n.push(a)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],s=()=>{const d=[];for(let g=0;g<this.inputs.length;++g)d.push({key:this.inputs[g],value:r[g]});const f=new qc(d),h=_v(this.outputs,f,{training:!0});let p;for(let g=0;g<this.lossFunctions.length;++g){const m=this.lossFunctions[g];let v=m(i[g],h[g]);a[g]!=null&&(v=h5e(v,a[g]));const y=zn(v);n.push(y),g===0?p=v:p=Ee(p,v)}for(let g=0;g<this.metricsTensors.length;++g){let m;if(this.outputs.length>1&&g<this.outputs.length)m=n[g];else{const v=this.metricsTensors[g][0],y=this.metricsTensors[g][1];m=zn(v(i[y],h[y]))}Cr(m),o.push(m)}return p=zn(p),this.calculateLosses().forEach(g=>{p=Ee(p,g)}),p},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(s,!0,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>ae(()=>{const n=[];let r;const i=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let c=0;c<this.inputs.length;++c)o.push({key:this.inputs[c],value:i[c]});const s=new qc(o),l=_v(this.outputs,s);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=zn(u(a[c],l[c]));c===0?r=d:r=Ee(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],f=zn(u(a[d],l[d]));n.push(f)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let i,a,o,s,l,c,u,d,f;try{const h=r.batchSize==null?32:r.batchSize;cN(h);const g=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,h);i=g[0],a=g[1],f=g[2];let m=!1,v;if(r.validationData!=null&&r.validationData.length>0){if(m=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new St("validationData including sample weights is not supported yet."):new ne(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const T=await this.standardizeUserData(l,c,null,null,!0,h);u=T[0],d=T[1],v=u.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){m=!0;const I=Math.floor(i[0].shape[0]*(1-r.validationSplit)),T=i[0].shape[0];u=uv(i,I,T),o=i,i=uv(i,0,I),d=uv(a,I,T),s=a,a=uv(a,0,I),v=u.concat(d)}else r.validationSteps!=null&&(m=!0);const y=i.concat(a).concat(f);this.checkTrainableWeightsConsistency();const b=this.makeTrainFunction(),w=this.getDedupedMetricsNames();let x,$;m?(this.makeTestFunction(),x=this.testFunction,$=w.slice().concat(w.map(I=>"val_"+I))):(x=null,v=[],$=w.slice());const C=VY(r.callbacks,r.yieldEvery);return await this.fitLoop(b,y,w,h,r.epochs,r.verbose,C,x,v,r.shuffle,$,r.initialEpoch,null,null)}finally{this.isTraining=!1,rs(i,e),rs(a,n),rs(o,e),rs(s,n),rs(u,l),rs(d,c),f!=null&&Et(f)}}async fitLoop(e,n,r,i,a,o,s,l,c,u,d,f,h,p){i==null&&(i=32),a==null&&(a=1),u==null&&(u=!0),f==null&&(f=0);let g=!1;if(l!=null&&c!=null&&(g=!0),p!=null&&(g=!0,h==null))throw new ne("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=this.checkNumSamples(n,i,h,"steps_per_epoch");let v;m!=null&&(v=ks(0,m)),o==null&&(o=1);const{callbackList:y,history:b}=WY(s,o,a,f,m,h,i,g,d);y.setModel(this),this.history=b,await y.onTrainBegin(),this.stopTraining_=!1;for(let w=f;w<a;++w){await y.onEpochBegin(w);const x={};if(h!=null)throw new St("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new St("batch shuffling is not implemneted yet");u&&LD(v);const $=$i(v),C=uN(m,i);for(let E=0;E<C.length;++E){const I={};if(await y.onBatchBegin(E,I),ae(()=>{const T=C[E][0],N=C[E][1],k=Vd($,T,N-T);I.batch=E,I.size=N-T;const O=s_(n,k),_=e(O);for(let P=0;P<r.length;++P){const D=r[P],L=_[P];I[D]=L,Cr(L)}if(E===C.length-1&&g){const P=this.testLoop(l,c,i);for(let D=0;D<r.length;++D){const L=r[D],R=P[D];Cr(R),x["val_"+L]=R}}}),await y.onBatchEnd(E,I),BY(I),this.stopTraining_)break}$.dispose()}if(await y.onEpochEnd(w,x),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return g5e(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),i=r[0],a=r[1],s=this.makeTrainFunction()(i.concat(a)),l=[];for(const c of s){const u=await c.data();l.push(u[0])}return Et(s),rs(r[0],e),rs(r[1],n),na(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,i=r?this.trainableWeights:this.weights,a=this.getWeights(r);for(let o=0;o<i.length;++o)r&&!i[o].trainable||n.push({name:i[o].originalName,tensor:a[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=BA().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-BA().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Pl(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Pl(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const i of n)if(typeof r[i]=="string")e[i]=Pl(r[i]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Pl(z1(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Pl(z1(e)));{const e={};for(const n in this.metrics)e[n]=Pl(z1(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=a_(e.optimizer_config),r=Gl(n);let i;if(typeof e.loss=="string")i=vd(e.loss);else if(Array.isArray(e.loss))i=e.loss.map(o=>vd(o));else if(e.loss!=null){i={};for(const o in e.loss)i[o]=vd(e.loss[o])}let a;if(Array.isArray(e.metrics))a=e.metrics.map(o=>vd(o));else if(e.metrics!=null){a={};for(const o in e.metrics)a[o]=vd(e.metrics[o])}this.compile({loss:i,metrics:a,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=gK(e);if(c.length===0)throw new ne(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new ne(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new ne("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await VA(this.getNamedWeights(n)),s={modelTopology:this.toJSON(null,!1),format:C5e,generatedBy:`TensorFlow.js tfjs-layers v${YY}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){s.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await VA(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=pK([r.data,u])}return this.userDefinedMetadata!=null&&(mV(this.userDefinedMetadata,this.name,!0),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=r.data,s.weightSpecs=r.specs,e.save(s)}setUserDefinedMetadata(e){mV(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}Jh.className="Model";Te(Jh);class tZ extends Jh{}tZ.className="Functional";Te(tZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class S0 extends Jh{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:cT("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new ne(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof S0||e instanceof Jh;let r;if(n){if(r=e,r.outputs.length!==1)throw new ne("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new ne("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new ne("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const i=TBe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(i)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new ne(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new ne("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=FY(this.outputs[0])}this.inboundNodes=[],new dT({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:hf(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(i=>i.shape),outputShapes:this.outputs[0].shape})}else{const i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Ut(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Jh({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Lo("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Lo("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Lo("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Lo("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},i=!1){let a,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new ne("Legacy serialization format not supported yet.");a=n}else j(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=n.layers,delete n.layers,o=n;const s=new e(o);if(!(s instanceof S0))throw new St(`Sequential.fromConfig called on non-Sequential input: ${s}`);for(const l of a){const u=Gl(l,void 0,i);i&&u.setFastWeightInitDuringBuild(!0),s.add(u)}return s}set stopTraining(e){if(this.model==null)throw new ne("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new ne("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}S0.className="Sequential";Te(S0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Ti=class extends Mf{getConfig(){return{}}};class nZ extends Ti{apply(e,n=1){return uBe(e,n)}}nZ.className="elu";Te(nZ);class rZ extends Ti{apply(e){return LE(e)}}rZ.className="selu";Te(rZ);class iZ extends Ti{apply(e){return Fs(e)}}iZ.className="relu";Te(iZ);class aZ extends Ti{apply(e){return ae(()=>xu(6,Fs(e)))}}aZ.className="relu6";Te(aZ);class oZ extends Ti{apply(e){return e}}oZ.className="linear";Te(oZ);class sZ extends Ti{apply(e){return Ss(e)}}sZ.className="sigmoid";Te(sZ);class lZ extends Ti{apply(e){return fBe(e)}}lZ.className="hardSigmoid";Te(lZ);class cZ extends Ti{apply(e){return Rf(e)}}cZ.className="softplus";Te(cZ);class uZ extends Ti{apply(e){return dBe(e)}}uZ.className="softsign";Te(uZ);class dZ extends Ti{apply(e){return bu(e)}}dZ.className="tanh";Te(dZ);let s3=class extends Ti{apply(e,n=-1){return Cx(e,n)}};s3.className="softmax";Te(s3);class fZ extends Ti{apply(e,n=-1){return OE(e,n)}}fZ.className="logSoftmax";Te(fZ);class hZ extends Ti{apply(e){return ae(()=>ae(()=>{const n=Math.sqrt(2),r=J(.5,Ee(1,IE(nt(e,n))));return J(e,r)}))}}hZ.className="gelu";Te(hZ);class pZ extends Ti{apply(e){return ae(()=>J(.5,J(e,Ee(1,bu(J(Wr(nt(2,Math.PI)),Ee(e,J(.044715,vl(e,3)))))))))}}pZ.className="gelu_new";Te(pZ);class mZ extends Ti{apply(e){return ae(()=>J(e,bu(Rf(e))))}}mZ.className="mish";Te(mZ);class gZ extends Ti{apply(e,n=1){return ae(()=>J(Ss(J(e,n)),e))}}gZ.className="swish";Te(gZ);function Su(t){return t.getClassName()}function dN(t,e={}){return Ox(t,Ja.getMap().classNameMap,e,"activation")}function $u(t){if(t==null){const e={};return e.className="linear",e.config={},dN(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},dN(e)}else return t instanceof Ti?t:dN(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function E5e(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class vZ extends Mf{}class yZ extends vZ{constructor(e){super(),E5e(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return ae(()=>{let n=hr([1]);return this.hasL1&&(n=Ee(n,qe(J(this.l1,cr(e))))),this.hasL2&&(n=Ee(n,qe(J(this.l2,_x(e))))),te(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}yZ.className="L1L2";Te(yZ);const wV={l1l2:"L1L2"};function fn(t){return qM(t)}function SV(t,e={}){return Ox(t,Ja.getMap().classNameMap,e,"regularizer")}function Rn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in wV?wV[t]:t,config:{}};return SV(n)}else return t instanceof vZ?t:SV(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class bZ extends It{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=vt(e);let r=Fs(e);return this.maxValue!=null&&(r=da(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}bZ.className="ReLU";Te(bZ);class xZ extends It{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=vt(e);return px(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}xZ.className="LeakyReLU";Te(xZ);class wZ extends It{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Pn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Rn(e.alphaRegularizer),this.alphaConstraint=Or(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new ne(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Ut(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const i of this.sharedAxes)n[i-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let i=1;i<e.length;++i)r[i]=e[i];this.inputSpec=[new Tr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=vt(e),wx(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Vn(this.alphaInitializer),alphaRegularizer:fn(this.alphaRegularizer),alphaConstraint:kr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}wZ.className="PReLU";Te(wZ);let SZ=class extends It{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new St(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=vt(e);return xg(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};SZ.className="ELU";Te(SZ);class $Z extends It{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=vt(e);return J(r,_e(ya(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}$Z.className="ThresholdedReLU";Te($Z);class CZ extends It{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new s3().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return ae(()=>{let r=vt(e);const i=n.mask;if(i!=null){const a=J(Ue(oa(r.shape),_e(i,r.dtype)),ct(-1e9));r=Ee(r,a)}return this.axis instanceof Array?this.axis.length>1?fa(Ue(r,gx(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}CZ.className="Softmax";Te(CZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ep(t,e,n){if(typeof t=="number")return hf(t,e);if(t.length!==e)throw new ne(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const i=t[r];if(!oBe(i))throw new ne(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${i}`)}return t}function $s(t,e,n,r,i=1){if(t==null)return t;const a=e+(e-1)*(i-1);let o;return n==="same"?o=t:o=t-a+1,Math.floor((o+r-1)/r)}function Ks(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+wu([n-e,0]);else if(r==="same")t=t*e;else throw new ne(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function l3(t,e){return ae(()=>(ir(e),e==="channelsFirst"?kt(t,[0,2,3,1]):t))}function EZ(t,e){return ae(()=>(ir(e),e==="channelsFirst"?kt(t,[0,2,3,4,1]):t))}function T5e(t,e,n,r=1,i="valid",a,o=1){return ae(()=>{if(a==null&&(a=Os()),ir(a),t.shape.length!==3)throw new ne(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new ne(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new ne(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(a==="channelsFirst"&&(t=kt(t,[0,2,1])),i==="causal")throw new St("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=$E(t,e,r,i==="same"?"same":"valid","NWC",o);return n!=null&&(s=Ms(s,n)),s})}function $V(t,e,n,r=[1,1],i="valid",a,o,s=null){return ae(()=>{if(a==null&&(a=Os()),ir(a),t.rank!==3&&t.rank!==4)throw new ne(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new ne(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=l3(t,a);if(i==="causal")throw new St("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=vX({x:l,filter:e,strides:r,pad:i==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),a==="channelsFirst"&&(l=kt(l,[0,3,1,2])),l})}function I5e(t,e,n,r=[1,1,1],i="valid",a,o){return ae(()=>{if(a==null&&(a=Os()),ir(a),t.rank!==4&&t.rank!==5)throw new ne(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new ne(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let s=EZ(t,a);if(i==="causal")throw new St("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=SF(s,e,r,i==="same"?"same":"valid","NDHWC",o),n!=null&&(s=Ms(s,n)),a==="channelsFirst"&&(s=kt(s,[0,4,1,2,3])),s})}class pT extends It{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",pT.verifyArgs(n),this.rank=e,Br(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new St(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=ep(n.kernelSize,e,"kernelSize"),this.strides=ep(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,go(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,ir(this.dataFormat),this.activation=$u(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Pn(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Or(n.biasConstraint),this.biasRegularizer=Rn(n.biasRegularizer),this.activityRegularizer=Rn(n.activityRegularizer),this.dilationRate=ep(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ne(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ne(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ne(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(qs("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!KM(e.kernelSize,"number",1,3))throw new ne(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Su(this.activation),useBias:this.useBias,biasInitializer:Vn(this.biasInitializer),biasRegularizer:fn(this.biasRegularizer),activityRegularizer:fn(this.activityRegularizer),biasConstraint:kr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class Eg extends pT{constructor(e,n){super(e,n),this.kernel=null,Eg.verifyArgs(n),this.filters=n.filters,Br(this.filters,"filters"),this.kernelInitializer=Pn(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Or(n.kernelConstraint),this.kernelRegularizer=Rn(n.kernelRegularizer)}build(e){e=Ut(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ne(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return ae(()=>{e=vt(e);let r;const i=this.bias==null?null:this.bias.read(),a=wY(this.activation.getClassName());if(a!=null&&this.rank===2)r=$V(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)r=T5e(e,this.kernel.read(),i,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=$V(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=I5e(e,this.kernel.read(),i,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new St("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Ut(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<r.length;++a){const o=$s(r[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);n.push(o)}let i=[e[0]];return this.dataFormat==="channelsLast"?(i=i.concat(n),i.push(this.filters)):(i.push(this.filters),i=i.concat(n)),i}getConfig(){const e={filters:this.filters,kernelInitializer:Vn(this.kernelInitializer),kernelRegularizer:fn(this.kernelRegularizer),kernelConstraint:kr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new ne(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class Fx extends Eg{constructor(e){super(2,e),Fx.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!KM(e.kernelSize,"number",1,2))throw new ne(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}Fx.className="Conv2D";Te(Fx);class Mx extends Eg{constructor(e){super(3,e),Mx.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new ne(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}Mx.className="Conv3D";Te(Mx);class TZ extends Fx{constructor(e){if(super(e),this.inputSpec=[new Tr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ne(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ut(e),e.length!==4)throw new ne("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ne("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Tr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return ae(()=>{let r=vt(e);if(r.shape.length!==4)throw new ne(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,a=i[0];let o,s;this.dataFormat==="channelsFirst"?(o=2,s=3):(o=1,s=2);const l=i[o],c=i[s],u=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],h=this.strides[1],p=Ks(l,f,u,this.padding),g=Ks(c,h,d,this.padding),m=[a,p,g,this.filters];this.dataFormat!=="channelsLast"&&(r=kt(r,[0,2,3,1]));let v=CE(r,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(v=kt(v,[0,3,1,2])),this.bias!=null&&(v=Ms(v,this.bias.read(),this.dataFormat)),this.activation!=null&&(v=this.activation.apply(v)),v})}computeOutputShape(e){e=Ut(e);const n=e.slice();let r,i,a;this.dataFormat==="channelsFirst"?(r=1,i=2,a=3):(r=3,i=1,a=2);const o=this.kernelSize[0],s=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[i]=Ks(n[i],l,o,this.padding),n[a]=Ks(n[a],c,s,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}TZ.className="Conv2DTranspose";Te(TZ);class IZ extends Mx{constructor(e){if(super(e),this.inputSpec=[new Tr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ne(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Ut(e),e.length!==5)throw new ne("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new ne("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Tr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return ae(()=>{let r=vt(e);if(r.shape.length!==5)throw new ne(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const i=r.shape,a=i[0];let o,s,l;this.dataFormat==="channelsFirst"?(l=2,o=3,s=4):(l=1,o=2,s=3);const c=i[l],u=i[o],d=i[s],f=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],g=this.strides[0],m=this.strides[1],v=this.strides[2],y=Ks(c,g,f,this.padding),b=Ks(u,m,h,this.padding),w=Ks(d,v,p,this.padding),x=[a,y,b,w,this.filters];this.dataFormat!=="channelsLast"&&(r=kt(r,[0,2,3,4,1]));let $=$F(r,this.kernel.read(),x,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&($=kt($,[0,4,1,2,3])),this.bias!==null&&($=Ms($,this.bias.read(),this.dataFormat)),this.activation!==null&&($=this.activation.apply($)),$})}computeOutputShape(e){e=Ut(e);const n=e.slice();let r,i,a,o;this.dataFormat==="channelsFirst"?(r=1,i=2,a=3,o=4):(r=4,i=1,a=2,o=3);const s=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],f=this.strides[2];return n[r]=this.filters,n[i]=Ks(n[i],u,s,this.padding),n[a]=Ks(n[a],d,l,this.padding),n[o]=Ks(n[o],f,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}IZ.className="Conv3DTranspose";Te(IZ);class NZ extends Eg{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new ne("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new ne("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new ne(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Pn(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Rn(n.depthwiseRegularizer),this.depthwiseConstraint=Or(n.depthwiseConstraint),this.pointwiseInitializer=Pn(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Rn(n.pointwiseRegularizer),this.pointwiseConstraint=Or(n.pointwiseConstraint)}build(e){if(e=Ut(e),e.length<this.rank+2)throw new ne(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new ne(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],i=this.kernelSize.concat([r,this.depthMultiplier]),a=[];for(let s=0;s<this.rank;++s)a.push(1);a.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Tr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return ae(()=>{e=vt(e);let r;if(this.rank===1)throw new St("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=kt(e,[0,2,3,1])),r=jE(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Ms(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=kt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Vn(this.depthwiseInitializer),e.pointwiseInitializer=Vn(this.pointwiseInitializer),e.depthwiseRegularizer=fn(this.depthwiseRegularizer),e.pointwiseRegularizer=fn(this.pointwiseRegularizer),e.depthwiseConstraint=kr(this.depthwiseConstraint),e.pointwiseConstraint=kr(this.pointwiseConstraint),e}}NZ.className="SeparableConv";class kZ extends NZ{constructor(e){super(2,e)}}kZ.className="SeparableConv2D";Te(kZ);class mT extends Eg{constructor(e){super(1,e),mT.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!KM(e.kernelSize,"number",1,1))throw new ne(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}mT.className="Conv1D";Te(mT);class OZ extends It{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return ae(()=>{if(e=vt(e),this.dataFormat==="channelsLast"){const r=j1(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return j1(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=j1(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return j1(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}OZ.className="Cropping2D";Te(OZ);class AZ extends It{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,ir(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,rBe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return ae(()=>{let r=vt(e);const i=r.shape;if(this.dataFormat==="channelsFirst"){r=kt(r,[0,2,3,1]);const a=this.size[0]*i[2],o=this.size[1]*i[3],s=this.interpolation==="nearest"?gs.resizeNearestNeighbor(r,[a,o]):gs.resizeBilinear(r,[a,o]);return kt(s,[0,3,1,2])}else{const a=this.size[0]*i[1],o=this.size[1]*i[2];return this.interpolation==="nearest"?gs.resizeNearestNeighbor(r,[a,o]):gs.resizeBilinear(r,[a,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}AZ.className="UpSampling2D";Te(AZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function N5e(t,e,n=[1,1],r="valid",i,a){return ae(()=>{i==null&&(i=Os()),ir(i);let o=l3(t,i);if(t.rank!==4)throw new ne(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new ne(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=bg(o,e,n,r==="same"?"same":"valid","NHWC",a),i==="channelsFirst"&&(o=kt(o,[0,3,1,2])),o})}class _Z extends pT{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Pn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Or(e.depthwiseConstraint),this.depthwiseRegularizer=Rn(e.depthwiseRegularizer)}build(e){if(e=Ut(e),e.length<4)throw new ne(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new ne(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],i=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",i,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ae(()=>{e=vt(e);let r=N5e(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Ms(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Ut(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=$s(n,this.kernelSize[0],this.padding,this.strides[0]),o=$s(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],i,a,o]:[e[0],a,o,i]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Vn(this.depthwiseInitializer),e.depthwiseRegularizer=fn(this.depthwiseRegularizer),e.depthwiseConstraint=kr(this.depthwiseRegularizer),e}}_Z.className="DepthwiseConv2D";Te(_Z);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function PZ(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new ne("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(a){return a==null||Array.isArray(a)?a:[a]}return e=i(e),n=i(n),{inputs:t,initialState:e,constants:n}}function RZ(t,e,n,r=!1,i,a,o=!1,s=!1){return ae(()=>{const l=e.shape.length;if(l<3)throw new ne(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(ks(2,l));e=kt(e,c),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i!=null&&(i=_e(_e(i,"bool"),"float32"),i.rank===l-1&&(i=Si(i,-1)),i=kt(i,c)),r&&(e=fo(e,0),i!=null&&(i=fo(i,0)));const u=[];let d,f=n;const h=e.shape[0],p=ho(e);let g;i!=null&&(g=ho(i));for(let v=0;v<h;++v){const y=p[v],b=ae(()=>t(y,f));if(i==null)d=b[0],f=b[1];else{const w=ae(()=>{const x=g[v],$=Ue(Pa(x),x),C=Ee(J(b[0],x),J(f[0],$)),E=f.map((I,T)=>Ee(J(b[1][T],x),J(I,$)));return{output:C,newStates:E}});d=w.output,f=w.newStates}s&&u.push(d)}let m;return s&&(m=ha(u,1)),[d,m,f]})}class Uu extends It{constructor(e){super(e);let n;if(e.cell==null)throw new ne("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new d3({cells:e.cell}):n=e.cell,n.stateSize==null)throw new ne("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Tr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ks(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){n_(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let i;if(this.returnSequences?i=[e[0],e[1],r]:i=[e[0],r],this.returnState){const a=[];for(const o of n)a.push([e[0],o]);return[i].concat(a)}else return i}computeMask(e,n){return ae(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const i=this.states.map(a=>null);return[r].concat(i)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new St("Constants support is not implemented in RNN yet.");n_(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Tr({shape:[n,null,...r]});const i=[e[0]].concat(e.slice(2));this.cell.build(i);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!Nt(this.stateSpec.map(o=>o.shape[o.shape.length-1]),a))throw new ne(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(o=>new Tr({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){ae(()=>{if(!this.stateful)throw new Gs("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new ne("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>hr([r,i])):this.states_=[hr([r,this.cell.stateSize])];else if(e==null)Et(this.states_),this.keptStates!=null&&(Et(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(i=>hr([r,i])):this.states_[0]=hr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ne(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):Et(this.states_);for(let i=0;i<this.states_.length;++i){const a=e[i],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[i]:this.cell.stateSize,s=[r,o];if(!Nt(a.shape,s))throw new ne(`State ${i} is incompatible with layer ${this.name}: expected shape=${s}, received shape=${a.shape}`);this.states_[i]=a}}this.states_=this.states_.map(i=>Cr(i.clone()))})}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const a=PZ(e,r,i,this.numConstants);e=a.inputs,r=a.initialState,i=a.constants;let o=[],s=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Tr({shape:c.shape}));s=s.concat(this.stateSpec)}if(i!=null&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof bl){const c=[e].concat(o),u=this.inputSpec.concat(s),d=this.inputSpec;this.inputSpec=u;const f=super.apply(c,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return ae(()=>{const r=n==null?null:n.mask,i=n==null?null:n.training;let a=n==null?null:n.initialState;e=vt(e),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==o)throw new ne(`RNN Layer has ${o} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const s={training:i},c=RZ((p,g)=>{const m=this.cell.call([p].concat(g),s);return[m[0],m.slice(1)]},e,a,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],d=c[1],f=c[2];this.stateful&&this.resetStates(f,i);const h=this.returnSequences?d:u;return this.returnState?[h].concat(f):h})}getInitialState(e){return ae(()=>{let n=hr(e.shape);return n=qe(n,[1,2]),n=Ax(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?e_(n,[1,r]):n):this.cell.stateSize>1?[e_(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Uu.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const i=n.cell,a=Gl(i,r);return new e(Object.assign(n,{cell:a}))}}Uu.className="RNN";Te(Uu);class gT extends It{}class c3 extends gT{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Br(this.units,"units"),this.activation=$u(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Pn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Pn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Pn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Rn(e.kernelRegularizer),this.recurrentRegularizer=Rn(e.recurrentRegularizer),this.biasRegularizer=Rn(e.biasRegularizer),this.kernelConstraint=Or(e.kernelConstraint),this.recurrentConstraint=Or(e.recurrentConstraint),this.biasConstraint=Or(e.biasConstraint),this.dropout=qp([1,wu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=qp([1,wu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ut(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ae(()=>{if(e=e,e.length!==2)throw new ne(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const i=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Cu({ones:()=>Pa(e),rate:this.dropout,training:i,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Cu({ones:()=>Pa(r),rate:this.recurrentDropout,training:i,dropoutFunc:this.dropoutFunc}));let a;const o=this.dropoutMask,s=this.recurrentDropoutMask;o!=null?a=fl(J(e,o),this.kernel.read()):a=fl(e,this.kernel.read()),this.bias!=null&&(a=Ms(a,this.bias.read())),s!=null&&(r=J(r,s));let l=Ee(a,fl(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Su(this.activation),useBias:this.useBias,kernelInitializer:Vn(this.kernelInitializer),recurrentInitializer:Vn(this.recurrentInitializer),biasInitializer:Vn(this.biasInitializer),kernelRegularizer:fn(this.kernelRegularizer),recurrentRegularizer:fn(this.recurrentRegularizer),biasRegularizer:fn(this.biasRegularizer),activityRegularizer:fn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}c3.className="SimpleRNNCell";Te(c3);class DZ extends Uu{constructor(e){e.cell=new c3(e),super(e)}call(e,n){return ae(()=>{this.cell.dropoutMask!=null&&(Et(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Et(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}static fromConfig(e,n){return new e(n)}}DZ.className="SimpleRNN";Te(DZ);class u3 extends gT{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new ne("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Br(this.units,"units"),this.activation=$u(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=$u(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Pn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Pn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Pn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Rn(e.kernelRegularizer),this.recurrentRegularizer=Rn(e.recurrentRegularizer),this.biasRegularizer=Rn(e.biasRegularizer),this.kernelConstraint=Or(e.kernelConstraint),this.recurrentConstraint=Or(e.recurrentConstraint),this.biasConstraint=Or(e.biasConstraint),this.dropout=qp([1,wu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=qp([1,wu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ut(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return ae(()=>{if(e=e,e.length!==2)throw new ne(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let i=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Cu({ones:()=>Pa(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Cu({ones:()=>Pa(i),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,o=this.recurrentDropoutMask;let s,l,c;0<this.dropout&&this.dropout<1&&(e=J(e,a[0]));let u=fl(e,this.kernel.read());this.useBias&&(u=Ms(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(i=J(i,o[0]));const d=this.recurrentKernel.read(),[f,h]=la(d,[2*this.units,this.units],d.rank-1),p=fl(i,f),[g,m,v]=la(u,3,u.rank-1),[y,b]=la(p,2,p.rank-1);s=this.recurrentActivation.apply(Ee(g,y)),l=this.recurrentActivation.apply(Ee(m,b));const w=fl(J(l,i),h);c=this.activation.apply(Ee(v,w));const x=Ee(J(s,i),J(Ee(1,bn(s)),c));return[x,x]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Su(this.activation),recurrentActivation:Su(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Vn(this.kernelInitializer),recurrentInitializer:Vn(this.recurrentInitializer),biasInitializer:Vn(this.biasInitializer),kernelRegularizer:fn(this.kernelRegularizer),recurrentRegularizer:fn(this.recurrentRegularizer),biasRegularizer:fn(this.biasRegularizer),activityRegularizer:fn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}u3.className="GRUCell";Te(u3);class FZ extends Uu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new u3(e),super(e)}call(e,n){return ae(()=>{this.cell.dropoutMask!=null&&(Et(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Et(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}FZ.className="GRU";Te(FZ);class vT extends gT{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Br(this.units,"units"),this.activation=$u(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=$u(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Pn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Pn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Pn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Rn(e.kernelRegularizer),this.recurrentRegularizer=Rn(e.recurrentRegularizer),this.biasRegularizer=Rn(e.biasRegularizer),this.kernelConstraint=Or(e.kernelConstraint),this.recurrentConstraint=Or(e.recurrentConstraint),this.biasConstraint=Or(e.biasConstraint),this.dropout=qp([1,wu([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=qp([1,wu([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Ut(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let i;if(this.useBias){if(this.unitForgetBias){const a=this.biasInitializer,o=this.units;i=new(n=class extends Zo{apply(l,c){const u=a.apply([o]),d=new YM().apply([o]),f=a.apply([o*2]);return oV(oV(u,d),f)}},n.className="CustomInit",n)}else i=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,i,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return ae(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new ne(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let i=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Cu({ones:()=>Pa(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Cu({ones:()=>Pa(i),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=J(e,o[0]));let f=fl(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(i=J(i,s[0])),f=Ee(f,fl(i,this.recurrentKernel.read())),this.useBias&&(f=Ms(f,this.bias.read()));const[h,p,g,m]=la(f,4,f.rank-1);l=this.recurrentActivation.apply(h),c=this.recurrentActivation.apply(p),u=Ee(J(c,a),J(l,this.activation.apply(g))),d=this.recurrentActivation.apply(m);const v=J(d,this.activation.apply(u));return[v,v,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Su(this.activation),recurrentActivation:Su(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Vn(this.kernelInitializer),recurrentInitializer:Vn(this.recurrentInitializer),biasInitializer:Vn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:fn(this.kernelRegularizer),recurrentRegularizer:fn(this.recurrentRegularizer),biasRegularizer:fn(this.biasRegularizer),activityRegularizer:fn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),recurrentConstraint:kr(this.recurrentConstraint),biasConstraint:kr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}vT.className="LSTMCell";Te(vT);class MZ extends Uu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new vT(e),super(e)}call(e,n){return ae(()=>{this.cell.dropoutMask!=null&&(Et(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Et(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}MZ.className="LSTM";Te(MZ);class d3 extends gT{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return ae(()=>{e=e;let r=e.slice(1);const i=[];for(const s of this.cells.slice().reverse())Array.isArray(s.stateSize)?i.push(r.splice(0,s.stateSize.length)):i.push(r.splice(0,1));i.reverse();const a=[];let o;for(let s=0;s<this.cells.length;++s){const l=this.cells[s];r=i[s],s===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),a.push(o.slice(1))}r=[];for(const s of a.slice().reverse())r.push(...s);return[o[0]].concat(r)})}build(e){n_(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,i)=>{Bd(`RNNCell_${i}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=a=>({className:a.getClassName(),config:a.getConfig()}),i={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),i)}static fromConfig(e,n,r={}){const i=[];for(const a of n.cells)i.push(Gl(a,r));return new e({cells:i})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return r_(e)}setWeights(e){const n=[];for(const r of this.cells){const i=r.weights.length,a=e.splice(i);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],a[o]])}r3(n)}}d3.className="StackedRNNCells";Te(d3);function Cu(t){const{ones:e,rate:n,training:r=!1,count:i=1,dropoutFunc:a}=t,o=()=>a!=null?a(e(),n):NY(e(),n),s=()=>Px(o,e,r);return!i||i<=1?Cr(s().clone()):Array(i).fill(void 0).map(s).map(c=>Cr(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var k5e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class LZ extends Uu{constructor(e){if(e.unroll)throw new St("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new St("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Tr({ndim:5})]}call(e,n){return ae(()=>{if(this.cell.dropoutMask!=null&&(Et(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Et(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new ne("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,i=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:i,initialState:a})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return ae(()=>{const{stateSize:n}=this.cell,r=e.shape,i=this.computeSingleOutputShape(r),a=[i[0],...i.slice(2)],o=hr(a);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){ae(()=>{if(!this.stateful)throw new Gs("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,i=this.computeSingleOutputShape(r),a=[i[0],...i.slice(2)];if(r[0]==null)throw new ne("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>hr(a)):this.states_=[hr(a)];else if(e==null)Et(this.states_),this.keptStates!=null&&(Et(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>hr(a)):this.states_[0]=hr(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ne(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):Et(this.states_);for(let s=0;s<this.states_.length;++s){const l=e[s],c=a;if(!Nt(l.shape,c))throw new ne(`State ${s} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[s]=l}}this.states_=this.states_.map(s=>Cr(s.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:i,padding:a,strides:o,dilationRate:s}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=$s(c,i[0],a,o[0],s[0]),f=$s(u,i[1],a,o[1],s[1]);return[...e.slice(0,2),...l?[r,d,f]:[d,f,r]]}}LZ.className="ConvRNN2D";class f3 extends vT{constructor(e){const{filters:n,kernelSize:r,strides:i,padding:a,dataFormat:o,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Br(this.filters,"filters"),this.kernelSize=ep(r,2,"kernelSize"),this.kernelSize.forEach(l=>Br(l,"kernelSize")),this.strides=ep(i||1,2,"strides"),this.strides.forEach(l=>Br(l,"strides")),this.padding=a||"valid",go(this.padding),this.dataFormat=o||"channelsLast",ir(this.dataFormat),this.dilationRate=ep(s||1,2,"dilationRate"),this.dilationRate.forEach(l=>Br(l,"dilationRate"))}build(e){var n;e=Ut(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new ne(`The channel dimension of the input should be defined. Found ${e[r]}`);const i=e[r],a=4,o=this.kernelSize.concat([i,this.filters*a]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const s=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",s,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends Zo{apply(f,h){const p=c.apply([u]),g=oa([u]),m=c.apply([u*2]);return XM([p,g,m])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return ae(()=>{if(e.length!==3)throw new ne(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,i=e[0],a=e[1],o=e[2],s=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Cu({ones:()=>Pa(i),rate:this.dropout,training:r,count:s,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(V,H,U)=>!H||!H[U]?V:J(H[U],V);let u=c(i,l,0),d=c(i,l,1),f=c(i,l,2),h=c(i,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Cu({ones:()=>Pa(a),rate:this.recurrentDropout,training:r,count:s,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let g=c(a,p,0),m=c(a,p,1),v=c(a,p,2),y=c(a,p,3);const b=3,[w,x,$,C]=la(this.kernel.read(),s,b),[E,I,T,N]=this.useBias?la(this.bias.read(),s):[null,null,null,null];u=this.inputConv(u,w,E,this.padding),d=this.inputConv(d,x,I,this.padding),f=this.inputConv(f,$,T,this.padding),h=this.inputConv(h,C,N,this.padding);const[k,O,_,P]=la(this.recurrentKernel.read(),s,b);g=this.recurrentConv(g,k),m=this.recurrentConv(m,O),v=this.recurrentConv(v,_),y=this.recurrentConv(y,P);const D=this.recurrentActivation.apply(Ee(u,g)),L=this.recurrentActivation.apply(Ee(d,m)),R=Ee(J(L,o),J(D,this.activation.apply(Ee(f,v)))),F=J(this.recurrentActivation.apply(Ee(h,y)),this.activation.apply(R));return[F,F,R]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=k5e(e,["units"]),i={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),i)}inputConv(e,n,r,i){const a=ic(e,n,this.strides,i||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Ms(a,r,this.dataFormat):a}recurrentConv(e,n){return ic(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}f3.className="ConvLSTM2DCell";Te(f3);class jZ extends LZ{constructor(e){const n=new f3(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}jZ.className="ConvLSTM2D";Te(jZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class h3 extends It{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let i=0;i<this.noiseShape.length;++i)r.push(this.noiseShape[i]==null?n[i]:this.noiseShape[i]);return r}call(e,n){return ae(()=>{this.invokeCallHook(e,n);const r=vt(e);if(0<this.rate&&this.rate<1){const i=n.training==null?!1:n.training,a=this.getNoiseShape(r);return Px(()=>NY(r,this.rate,a,this.seed),()=>r,i)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}h3.className="Dropout";Te(h3);class zZ extends h3{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}zZ.className="SpatialDropout1D";Te(zZ);class BZ extends It{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Br(this.units,"units"),this.activation=$u(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Pn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Pn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Or(e.kernelConstraint),this.biasConstraint=Or(e.biasConstraint),this.kernelRegularizer=Rn(e.kernelRegularizer),this.biasRegularizer=Rn(e.biasRegularizer),this.activityRegularizer=Rn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Ut(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Ut(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return ae(()=>{this.invokeCallHook(e,n);const r=vt(e),i=wY(this.activation.getClassName());let a;return i!=null?a=fl(r,this.kernel.read(),i,this.bias?this.bias.read():null):(a=fl(r,this.kernel.read()),this.bias!=null&&(a=Ms(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:Su(this.activation),useBias:this.useBias,kernelInitializer:Vn(this.kernelInitializer),biasInitializer:Vn(this.biasInitializer),kernelRegularizer:fn(this.kernelRegularizer),biasRegularizer:fn(this.biasRegularizer),activityRegularizer:fn(this.activityRegularizer),kernelConstraint:kr(this.kernelConstraint),biasConstraint:kr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}BZ.className="Dense";Te(BZ);class VZ extends It{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Ut(e);for(const n of e.slice(1))if(n==null)throw new ne(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],cu(e,1)]}call(e,n){return ae(()=>{this.invokeCallHook(e,n);let r=vt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const i=[0];for(let a=2;a<r.rank;++a)i.push(a);i.push(1),r=kt(r,i)}return cBe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}VZ.className="Flatten";Te(VZ);class WZ extends It{constructor(e){super(e),this.supportsMasking=!0,this.activation=$u(e.activation)}call(e,n){return ae(()=>{this.invokeCallHook(e,n);const r=vt(e);return this.activation.apply(r)})}getConfig(){const e={activation:Su(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}WZ.className="Activation";Te(WZ);class UZ extends It{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return ae(()=>(e=vt(e),sBe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}UZ.className="RepeatVector";Te(UZ);class HZ extends It{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",i=n.slice();let a=1,o=null;for(let l=0;l<i.length;++l){const c=i[l];if(this.isUnknown(c))if(o===null)o=l;else throw new ne("Can only specifiy one unknown dimension.");else a*=c}const s=cu(e);if(o!==null){if(a===0||s%a!==0)throw new ne(r);i[o]=s/a}else if(s!==a)throw new ne(r);return i}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return ae(()=>{this.invokeCallHook(e,n);const r=vt(e),i=r.shape,a=i.slice(0,1).concat(this.fixUnknownDimension(i.slice(1),this.targetShape));return te(r,a)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}HZ.className="Reshape";Te(HZ);class GZ extends It{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=ks(1,e.dims.length+1);if(!Nt(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Tr({ndim:this.dims.length+1})]}computeOutputShape(e){e=Ut(e);const n=e.slice();return this.dims.forEach((r,i)=>{n[i+1]=e[r]}),n}call(e,n){return kt(vt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}GZ.className="Permute";Te(GZ);class qZ extends It{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=vt(e);return g0(uf(r,this.maskValue),-1)}call(e,n){return ae(()=>{this.invokeCallHook(e,n);const r=vt(e),o=g0(uf(r,this.maskValue),-1,!0);return J(r,_e(o,r.dtype))})}}qZ.className="Masking";Te(qZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class KZ extends It{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(tn(e.inputLength))}this.inputDim=e.inputDim,Br(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Br(this.outputDim,"outputDim"),this.embeddingsInitializer=Pn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Rn(e.embeddingsRegularizer),this.activityRegularizer=Rn(e.activityRegularizer),this.embeddingsConstraint=Or(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return ae(()=>this.maskZero?(e=vt(e),uf(e,Pt(e))):null)}computeOutputShape(e){if(e=Ut(e),this.inputLength==null)return[...e,this.outputDim];const n=tn(this.inputLength);if(n.length!==e.length-1)throw new ne(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let i=0;i<n.length;++i){const a=n[i],o=e[i+1];if(a!=null&&o!=null&&a!==o)throw new ne(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);a==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return ae(()=>{this.invokeCallHook(e,n);let r=vt(e);r.dtype!=="int32"&&(r=dl(r,"int32"));const i=IY(this.embeddings.read(),te(r,[r.size]));return te(i,Ut(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Vn(this.embeddingsInitializer),embeddingsRegularizer:fn(this.embeddingsRegularizer),activityRegularizer:fn(this.activityRegularizer),embeddingsConstraint:kr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}KZ.className="Embedding";Te(KZ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class jf extends It{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new St}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let i=0;i<n.length;++i){const a=e[e.length-n.length+i],o=n[i];if(a==null||o==null||a<0||o<0)r.push(null);else if(a===1)r.push(o);else if(o===1)r.push(a);else{if(a!==o)throw new ne("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(a)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Ut(e)]),e=e,e.length<2)throw new ne(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const a of e)a!=null&&a[0]!==null&&n.push(a[0]);if(n=lu(n),n.length>1)throw new ne(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let a=1;a<e.length;++a){const o=e[a]==null?null:e[a].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const i=e.map(a=>a.length);e.indexOf(null)===-1&&lu(i).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return ae(()=>{if(e=e,this.reshapeRequired){const r=[],i=e.map(a=>a.rank);if(i.indexOf(null)===-1){const a=wu(i);for(let o of e){const s=o.rank;for(let l=0;l<a-s;++l)o=Ax(o,1);r.push(o)}return this.mergeFunction(r)}else{let a=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],f=u.slice(1).concat([d]);let h=te(l,[d].concat(cu(u.slice(1))));h=kt(h,[1,0]),h=te(h,f),r.push(h),a=!0}else if(c>1){const u=ks(1,c).concat([0]);r.push(kt(l,u)),a=!0}else r.push(l)}let o=this.mergeFunction(r);const s=o.rank;if(a){if(s==null){const l=o.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));o=te(kt(te(o,[-1,u]),[1,0]),d)}else if(s>1){const l=[s-1].concat(ks(0,s-1));o=kt(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let i=1;i<e.length;++i){const a=e[i]==null?null:e[i].slice(1);n=this.computeElementwiseOpOutputShape(n,a)}let r=[];for(const i of e)i!=null&&i[0]!==null&&r.push(i[0]);return r=lu(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return ae(()=>{if(n==null)return null;if(!Array.isArray(n))throw new ne("`mask` should be an Array");if(!Array.isArray(e))throw new ne("`inputs` should be an Array");if(n.length!==e.length)throw new ne(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(i=>i==null))return null;n=n.map(i=>i==null?i:Si(i,0));let r=n[0];for(let i=1;i<n.length-1;++i)r=Ns(r,n[i]);return r})}}class XZ extends jf{constructor(e){super(e)}mergeFunction(e){return ae(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ee(n,e[r]);return n})}}XZ.className="Add";Te(XZ);class YZ extends jf{constructor(e){super(e)}mergeFunction(e){return ae(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=J(n,e[r]);return n})}}YZ.className="Multiply";Te(YZ);class ZZ extends jf{constructor(e){super(e)}mergeFunction(e){return ae(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Ee(n,e[r]);return J(1/e.length,n)})}}ZZ.className="Average";Te(ZZ);class QZ extends jf{constructor(e){super(e)}mergeFunction(e){return ae(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=El(n,e[r]);return n})}}QZ.className="Maximum";Te(QZ);class JZ extends jf{constructor(e){super(e)}mergeFunction(e){return ae(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=xu(n,e[r]);return n})}}JZ.className="Minimum";Te(JZ);class eQ extends jf{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new ne("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const i of e)if(i!=null){n=!1;break}if(n)return;const r=[];for(let i=0;i<e.length;++i){const a=e[i].slice();a.splice(this.axis,1);let o=!1;for(const s of r)if(Nt(s,a)){o=!0;break}o||r.push(a)}if(r.length>1)throw new ne("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return ae(()=>XM(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ne("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),i=this.axis<0?r.length+this.axis:this.axis;for(const a of n.slice(1)){if(r[i]==null||a[i]==null){r[i]=null;break}r[i]+=a[i]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new ne("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ne("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new ne(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return ae(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const i=[];for(let o=0;o<e.length;++o)n[o]==null?i.push(_e(Pa(e[o]),"bool")):n[o].rank<e[o].rank?i.push(Si(n[o],-1)):i.push(n[o]);const a=tr(i,this.axis);return SE(a,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}eQ.className="Concatenate";Te(eQ);function dv(t,e){for(;t<0;)t+=e;return t}function O5e(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new St("batchDot is not implemented for tensors of 4D or higher rank yet");if(j(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),j(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new St("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,i=e.shape.length;n==null&&(n=[r-1,i-2]);const a=n;return ae(()=>{let o;if(r>i){o=r-i;const l=[];for(let c=0;c<o;++c)l.push(1);e=te(e,e.shape.concat(l))}else if(i>r){o=i-r;const l=[];for(let c=0;c<o;++c)l.push(1);t=te(t,t.shape.concat(l))}else o=0;let s;if(t.shape.length===2&&e.shape.length===2)a[0]===a[1]?s=qe(J(t,e),a[0]):s=qe(J(kt(t,[1,0]),e),a[1]);else{const l=a[0]!==t.shape.length-1,c=a[1]===e.shape.length-1;s=Ct(t,e,l,c)}if(o>0){let l;r>i?l=r+i-3:l=r-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);s=Vu(s,c)}return s.shape.length===1&&(s=Si(s,1)),s})}class tQ extends jf{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){j(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new St("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);if(n[i[0]]!==r[i[1]])throw new ne(`Dimension incompatibility: ${n[i[0]]} !== ${r[i[1]]}`)}mergeFunction(e){if(e.length!==2)throw new ne(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],i;return Array.isArray(this.axes)?i=this.axes.map((a,o)=>dv(a,e[o].shape.length)):i=[dv(this.axes,n.shape.length),dv(this.axes,r.shape.length)],this.normalize&&(n=T$(n,i[0]),r=T$(r,i[1])),O5e(n,r,i)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[dv(this.axes,e.length),dv(this.axes,n.length)],r}computeOutputShape(e){j(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new St("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(n,r);n.splice(i[0],1),r.splice(i[1],1),r.splice(0,1);const a=n.concat(r);return a.length===1&&a.push(1),a}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}tQ.className="Dot";Te(tQ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nQ extends It{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return ae(()=>{this.invokeCallHook(e,n);const r=vt(e);return Px(()=>Ee(uT(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}nQ.className="GaussianNoise";Te(nQ);class rQ extends It{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ae(()=>{this.invokeCallHook(e,n);const r=vt(e);return this.rate>0&&this.rate<1?Px(()=>{const a=Math.sqrt(this.rate/(1-this.rate));return J(r,uT(r.shape,1,a))},()=>r,n.training||!1):r})}}rQ.className="GaussianDropout";Te(rQ);class iQ extends It{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||vt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return ae(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return Px(()=>{const a=vt(e),s=-1.6732632423543772*1.0507009873554805;let l=gc(Bu(r),this.rate);l=dl(l,"float32");const c=((1-this.rate)*(1+this.rate*s**2))**-.5,u=-c*s*this.rate,d=Ee(J(a,l),J(Ee(l,-1),s));return Ee(J(d,c),u)},()=>vt(e),n.training||!1)}return e})}}iQ.className="AlphaDropout";Te(iQ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $0(t,e,n,r,i,a=.001){let o;if(t.rank===2)o=fF(t,e,n,r,i,a);else if(t.rank===3)o=hF(t,e,n,r,i,a);else if(t.rank===4)o=pF(t,e,n,r,i,a);else throw new St(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function A5e(t,e,n,r,i=.001){return ae(()=>{const a=bx(t,r),o=a.mean,s=a.variance;return[$0(t,o,s,n,e,i),o,s]})}function _5e(t,e,n,r,i=.001){return ae(()=>{const a=bx(t,r),o=a.mean,s=a.variance,l=[];for(const p of ks(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const c=te(o,l),u=te(s,l),d=e==null?null:te(e,l),f=n==null?null:te(n,l);return[$0(t,c,u,f,d,i),o,s]})}function P5e(t,e,n,r,i=.001){return Nt(r.slice().sort(),ks(0,t.rank-1))?A5e(t,e,n,r,i):_5e(t,e,n,r,i)}class aQ extends It{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Pn(e.betaInitializer||"zeros"),this.gammaInitializer=Pn(e.gammaInitializer||"ones"),this.movingMeanInitializer=Pn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Pn(e.movingVarianceInitializer||"ones"),this.betaConstraint=Or(e.betaConstraint),this.gammaConstraint=Or(e.gammaConstraint),this.betaRegularizer=Rn(e.betaRegularizer),this.gammaRegularizer=Rn(e.gammaRegularizer)}build(e){e=Ut(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new ne(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Tr({ndim:e.length,axes:{[n]:r}})];const i=[r];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return ae(()=>{const r=n.training==null?!1:n.training,i=vt(e),a=i.shape,o=a.length,s=ks(0,o),l=this.axis>=0?this.axis:this.axis+o;s.splice(l,1);const c=hf(1,o);c[l]=a[l];const u=s.slice();u.sort();const d=!Nt(u,ks(0,o).slice(0,o-1)),f=()=>{if(d){const y=te(this.movingMean.read(),c),b=te(this.movingVariance.read(),c),w=this.center?te(this.beta.read(),c):null,x=this.scale?te(this.gamma.read(),c):null;return $0(i,y,b,w,x,this.epsilon)}else return $0(i,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return f();const[h,p,g]=P5e(i,this.gamma.read(),this.beta.read(),s,this.epsilon),m=(y,b,w)=>{ae(()=>{const x=1-w,$=y.read(),C=J(Ue($,b),x);y.write(Ue($,C))})};return(()=>{m(this.movingMean,p,this.momentum),m(this.movingVariance,g,this.momentum)})(),h})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Vn(this.betaInitializer),gammaInitializer:Vn(this.gammaInitializer),movingMeanInitializer:Vn(this.movingMeanInitializer),movingVarianceInitializer:Vn(this.movingVarianceInitializer),betaRegularizer:fn(this.betaRegularizer),gammaRegularizer:fn(this.gammaRegularizer),betaConstraint:kr(this.betaConstraint),gammaConstraint:kr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}aQ.className="BatchNormalization";Te(aQ);class oQ extends It{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Pn(e.betaInitializer||"zeros"),this.gammaInitializer=Pn(e.gammaInitializer||"ones"),this.betaRegularizer=Rn(e.betaRegularizer),this.gammaRegularizer=Rn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Ut(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=n);for(const a of this.axis)if(a<0||a>=n)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==lu(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(a=>e[a]),i=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,i):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,i):this.beta=null,this.built=!0}call(e,n){const r=vt(e),i=r.shape,a=i.length;return ae(()=>{let{mean:s,variance:l}=bx(r,this.axis,!0);const c=hf(1,a);for(const g of this.axis)c[g]=i[g];const u=g=>g!=null&&g.shape.length!==a?te(g,c):g;let d=this.scale?u(this.gamma.read()):null,f=this.center?u(this.beta.read()):null;const h=[],p=[];for(let g=0;g<a;++g)this.axis.indexOf(g)!==-1?(h.push(i[g]),p.push(1)):(h.push(1),p.push(i[g]));return s=to(s,h),l=to(l,h),d!=null&&(d=to(d,p)),f!=null&&(f=to(f,p)),$0(r,s,l,f,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Vn(this.betaInitializer),gammaInitializer:Vn(this.gammaInitializer),betaRegularizer:fn(this.betaRegularizer),gammaRegularizer:fn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}oQ.className="LayerNormalization";Te(oQ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function R5e(t,e,n){return ae(()=>{if(t.rank!==4)throw new ne(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new ne("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Os()),n!=="channelsLast"&&n!=="channelsFirst")throw new ne(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],vc(t,r)})}class sQ extends It{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Os():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new ne(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new ne(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new ne(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Tr({ndim:4})]}computeOutputShape(e){e=Ut(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return ae(()=>R5e(vt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}sQ.className="ZeroPadding2D";Te(sQ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yT(t,e,n,r,i,a){return ae(()=>{ir(i),$Y(a),go(r),n==null&&(n=[1,1]),r==null&&(r="valid"),i==null&&(i=Os()),a==null&&(a="max"),t=l3(t,i);let o;const s=r==="same"?"same":"valid";return a==="max"?o=yx(t,e,n,s):o=ux(t,e,n,s),i==="channelsFirst"&&(o=kt(o,[0,3,1,2])),o})}function lQ(t,e,n,r,i,a){return ae(()=>{ir(i),$Y(a),go(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),i==null&&(i=Os()),a==null&&(a="max"),t=EZ(t,i);let o;const s=r==="same"?"same":"valid";return a==="max"?o=MF(t,e,n,s):o=dF(t,e,n,s),i==="channelsFirst"&&(o=kt(o,[0,4,1,2,3])),o})}class cQ extends It{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new ne(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Br(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new ne(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Br(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,go(this.padding),this.inputSpec=[new Tr({ndim:3})]}computeOutputShape(e){e=Ut(e);const n=$s(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return ae(()=>{this.invokeCallHook(e,n),e=Ax(vt(e),2);const r=this.poolingFunction(vt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Vu(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class uQ extends cQ{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return ir(a),go(i),yT(e,n,r,i,a,"max")}}uQ.className="MaxPooling1D";Te(uQ);class dQ extends cQ{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return ir(a),go(i),yT(e,n,r,i,a,"avg")}}dQ.className="AveragePooling1D";Te(dQ);class fQ extends It{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new ne(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Br(this.poolSize,"poolSize"),Br(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,ir(this.dataFormat),go(this.padding),this.inputSpec=[new Tr({ndim:4})]}computeOutputShape(e){e=Ut(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=$s(n,this.poolSize[0],this.padding,this.strides[0]),r=$s(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return ae(()=>(this.invokeCallHook(e,n),this.poolingFunction(vt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class hQ extends fQ{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return ir(a),go(i),yT(e,n,r,i,a,"max")}}hQ.className="MaxPooling2D";Te(hQ);class pQ extends fQ{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return ir(a),go(i),yT(e,n,r,i,a,"avg")}}pQ.className="AveragePooling2D";Te(pQ);class mQ extends It{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new ne(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Br(this.poolSize,"poolSize"),Br(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,ir(this.dataFormat),go(this.padding),this.inputSpec=[new Tr({ndim:5})]}computeOutputShape(e){e=Ut(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],i=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=$s(n,this.poolSize[0],this.padding,this.strides[0]),r=$s(r,this.poolSize[1],this.padding,this.strides[1]),i=$s(i,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,i]:[e[0],n,r,i,e[4]]}call(e,n){return ae(()=>(this.invokeCallHook(e,n),this.poolingFunction(vt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class gQ extends mQ{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return ir(a),go(i),lQ(e,n,r,i,a,"max")}}gQ.className="MaxPooling3D";Te(gQ);class vQ extends mQ{constructor(e){super(e)}poolingFunction(e,n,r,i,a){return ir(a),go(i),lQ(e,n,r,i,a,"avg")}}vQ.className="AveragePooling3D";Te(vQ);class yQ extends It{constructor(e){super(e),this.inputSpec=[new Tr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new St}}class bQ extends yQ{constructor(e){super(e||{})}call(e,n){return ae(()=>{const r=vt(e);return zn(r,1)})}}bQ.className="GlobalAveragePooling1D";Te(bQ);class xQ extends yQ{constructor(e){super(e||{})}call(e,n){return ae(()=>{const r=vt(e);return co(r,1)})}}xQ.className="GlobalMaxPooling1D";Te(xQ);class wQ extends It{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,ir(this.dataFormat),this.inputSpec=[new Tr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new St}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class SQ extends wQ{call(e,n){return ae(()=>{const r=vt(e);return this.dataFormat==="channelsLast"?zn(r,[1,2]):zn(r,[2,3])})}}SQ.className="GlobalAveragePooling2D";Te(SQ);class $Q extends wQ{call(e,n){return ae(()=>{const r=vt(e);return this.dataFormat==="channelsLast"?co(r,[1,2]):co(r,[2,3])})}}$Q.className="GlobalMaxPooling2D";Te($Q);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class CQ extends It{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const i=n.layer,a=Gl(i,r);delete n.layer;const o={layer:a};return Object.assign(o,n),new e(o)}}class EQ extends CQ{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Ut(e),e.length<3)throw new ne(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Ut(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),i=e[1];return[r[0],i].concat(r.slice(1))}call(e,n){return ae(()=>(e=vt(e),RZ((o,s)=>[vt(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}EQ.className="TimeDistributed";Te(EQ);function D5e(t){Lf(nBe,"BidirectionalMergeMode",t)}const F5e="concat";class TQ extends CQ{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Gl(r),n.goBackwards=n.goBackwards!==!0;const i={};if(i.className=e.layer.getClassName(),i.config=n,this.backwardLayer=Gl(i),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?F5e:e.mergeMode,D5e(this.mergeMode),e.weights)throw new St("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,i,a;return this.returnState&&(a=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,i=[r]):this.mergeMode==null?i=[r,r.slice()]:i=[r],this.returnState?this.mergeMode==null?i.concat(a).concat(a.slice()):[r].concat(a).concat(a.slice()):na(i)}apply(e,n){let r=n==null?null:n.initialState,i=n==null?null:n.constants;n==null&&(n={});const a=PZ(e,r,i,this.numConstants);if(e=a.inputs,r=a.initialState,i=a.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&i==null)return super.apply(e,n);const o=[],s=[];if(r!=null){const c=r.length;if(c%2>0)throw new ne("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const u=r.map(d=>new Tr({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),s.push(...u)}if(i!=null)throw new St("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof bl;for(const c of o)if(c instanceof bl!==l)throw new ne("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(o),u=this.inputSpec.concat(s),d=this.inputSpec;this.inputSpec=u;const f=super.apply(c,n);return this.inputSpec=d,f}else return super.apply(e,n)}call(e,n){return ae(()=>{const r=n.initialState;let i,a;if(r==null)i=this.forwardLayer.call(e,n),a=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);i=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),a=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let o;this.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(a.slice(1))),i=i[0],a=a[0]),this.returnSequences&&(a=fo(a,1));let s;return this.mergeMode==="concat"?s=XM([i,a]):this.mergeMode==="sum"?s=Ee(i,a):this.mergeMode==="ave"?s=J(.5,Ee(i,a)):this.mergeMode==="mul"?s=J(i,a):this.mergeMode==null&&(s=[i,a]),this.returnState?this.mergeMode==null?s.concat(o):[s].concat(o):s})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Bd(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Bd(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const a=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(a).concat(a):[r].concat(a).concat(a)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Gl(n.layer);if(delete n.layer,n.numConstants!=null)throw new St("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const i=n;return i.layer=r,new e(i)}}TQ.className="Bidirectional";Te(TQ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IQ extends It{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ae(()=>(e=vt(e),e.dtype!=="float32"&&(e=dl(e,"float32")),Ee(J(e,this.scale),this.offset)))}}IQ.className="Rescaling";Te(IQ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:M5e,cropAndResize:L5e}=gs;class NQ extends It{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,i,a,o,s,l){return ae(()=>{let c,u=!1;const d=n/o,f=r/s,h=(i+n)/o,p=(a+r)/s,g=[d,f,h,p],m=[];e.rank===3?(u=!0,c=ha([e])):c=e;for(let x=0;x<c.shape[0];x++)m.push(g);const v=Bo(m,[m.length,4]),y=df(0,m.length,1,"int32"),w=L5e(c,v,y,[i,a],"nearest");return dl(u?vt(ho(w)):w,l)})}upsize(e,n,r,i){return ae(()=>{const a=M5e(e,[n,r]);return dl(a,i)})}call(e,n){return ae(()=>{const r=vt(e),i=r.dtype,a=r.shape,o=a[a.length-3],s=a[a.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let c=0;return s!==this.width&&(c=Math.floor((s-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,o,s,i):this.upsize(e,this.height,this.width,i)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Ut(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}NQ.className="CenterCrop";Te(NQ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function j5e(t,e,n,r){let i=vt(t);if(i.dtype!=="int32"&&(i=dl(i,"int32")),e==="int")return i;const a=i.shape;if(i.rank===0&&(i=Si(i,-1)),e==="oneHot"&&i.shape[i.shape.length-1]!==1&&(i=Si(i,-1)),i.rank>2)throw new ne(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${a} which would result in output rank ${i.rank}.`);const o=["multiHot","oneHot"].includes(e),s=i;let l;if(typeof r<"u"&&e==="count"?l=x$(s,r,n,o):l=x$(s,[],n,o),e!=="tfIdf")return l;if(r)return J(l,r);throw new ne("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class kQ extends It{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Ut(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return ae(()=>{e=vt(e),e.dtype!=="int32"&&(e=dl(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new ne(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=vt(n.countWeights)}const i=co(e),a=Bp(e),o=ya(this.numTokens,i).bufferSync().get(0),s=gc(a,0).bufferSync().get(0);if(!(o&&s))throw new ne(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return j5e(e,this.outputMode,this.numTokens,r)})}}kQ.className="CategoryEncoding";Te(kQ);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const z5e=["bilinear","nearest"],CV=new Set(z5e);class OQ extends It{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(CV.has(e.interpolation))this.interpolation=e.interpolation;else throw new ne(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Ut(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return ae(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return gs.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return gs.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...CV]} are supported`)})}}OQ.className="Resizing";Te(OQ);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class AQ{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}AQ.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _Q extends It{constructor(e){super(e),this.randomGenerator=new AQ(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}_Q.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const B5e=["bilinear","nearest"],EV=new Set(B5e);class PQ extends _Q{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ne(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ne(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ne(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(EV.has(r))this.interpolation=r;else throw new ne(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Ut(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return ae(()=>{const r=vt(e);this.imgHeight=r.shape[r.shape.length-3];const i=r.shape[r.shape.length-2];this.widthFactor=Bu([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*i;a=Math.round(a);const o=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return gs.resizeBilinear(e,o);case"nearest":return gs.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...EV]} are supported`)}})}}PQ.className="RandomWidth";Te(PQ);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V5e=oe();V5e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var wa;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(wa||(wa={}));var TV;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(TV||(TV={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p3={};function W5e(t,e){const n={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e};p3[t]=n}function RQ(t){return p3[t]}function U5e(t){delete p3[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A(t,e,n,r,i){const a=e.inputParams[t];if(a&&a.inputIndexStart!==void 0){const s=a.inputIndexStart,l=a.inputIndexEnd===0?void 0:a.inputIndexEnd===void 0?s+1:a.inputIndexEnd,c=s<0?e.inputNames.length+s:s;if(a.type==="tensor")return ai(e.inputNames[c],n,r,i);if(a.type==="tensors"){const f=e.inputs.slice(s,l);return e.inputNames.slice(s,l).filter((p,g)=>{var m;return((m=f[g])===null||m===void 0?void 0:m.op)!=="NoOp"}).map(p=>ai(p,n,r,i))}const u=ai(e.inputNames[c],n,r,i),d=u.dataSync();return a.type==="number"?d[0]:lo(u.shape,d)}const o=e.attrParams[t];return o&&o.value}function ai(t,e,n,r){const[i,a]=Sa(t,n);if(r!=null){const s=r.getHashTableHandleByName(i);if(s!=null)return s}const o=n.currentContextIds.find(s=>!!e[A$(i,s)]);return o!==void 0?e[A$(i,o)][a]:void 0}function IV(t,e,n){return e[A$(t,n.currentContextId)]}function Rl(t,e){const[n,r,i]=Sa(t,e);return[A$(n,e&&e.currentContextId),r,i]}function A$(t,e){return e?`${t}-${e}`:t}function Sa(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const a=e.parseNodeNameCache.get(t);if(a!=null)return a}const r=t.split(":");let i;if(r.length===1)i=[t,0,void 0];else{const a=r[0],o=r.length===3?r[1]:void 0,s=Number(r[r.length-1]);i=[a,s,o]}return n&&e.parseNodeNameCache.set(t,i),i}function Tw(t,e,n){let r=A("pad",t,e,n);if(r==="explicit"){r=A("explicitPaddings",t,e,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let a=0;a<4;a++)i[a][0]=r[a*2],i[a][1]=r[a*2+1];return i}return r}function Dl(t){return t.kept?t:cl(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H5e=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],G5e=Object.freeze(Object.defineProperty({__proto__:null,json:H5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q5e=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],K5e=Object.freeze(Object.defineProperty({__proto__:null,json:q5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X5e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],Y5e=Object.freeze(Object.defineProperty({__proto__:null,json:X5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z5e=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Q5e=Object.freeze(Object.defineProperty({__proto__:null,json:Z5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J5e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],eVe=Object.freeze(Object.defineProperty({__proto__:null,json:J5e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tVe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],nVe=Object.freeze(Object.defineProperty({__proto__:null,json:tVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rVe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],iVe=Object.freeze(Object.defineProperty({__proto__:null,json:rVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aVe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],oVe=Object.freeze(Object.defineProperty({__proto__:null,json:aVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sVe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],lVe=Object.freeze(Object.defineProperty({__proto__:null,json:sVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cVe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],uVe=Object.freeze(Object.defineProperty({__proto__:null,json:cVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dVe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],fVe=Object.freeze(Object.defineProperty({__proto__:null,json:dVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hVe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],pVe=Object.freeze(Object.defineProperty({__proto__:null,json:hVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mVe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],gVe=Object.freeze(Object.defineProperty({__proto__:null,json:mVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vVe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],yVe=Object.freeze(Object.defineProperty({__proto__:null,json:vVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bVe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],xVe=Object.freeze(Object.defineProperty({__proto__:null,json:bVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wVe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],SVe=Object.freeze(Object.defineProperty({__proto__:null,json:wVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ve=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],CVe=Object.freeze(Object.defineProperty({__proto__:null,json:$Ve},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EVe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],TVe=Object.freeze(Object.defineProperty({__proto__:null,json:EVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IVe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],NVe=Object.freeze(Object.defineProperty({__proto__:null,json:IVe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NV{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[G5e,K5e,Y5e,Q5e,eVe,nVe,iVe,oVe,lVe,uVe,fVe,pVe,gVe,yVe,xVe,SVe,CVe,TVe,NVe],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,i)=>(r[i.tfOpName]=i,r),{})}transformGraph(e,n={}){const r=e.node,i=[],a=[],o=[],s=r.reduce((g,m)=>(g[m.name]=this.mapNode(m),m.op.startsWith("Placeholder")?i.push(g[m.name]):m.op==="Const"?a.push(g[m.name]):(m.input==null||m.input.length===0)&&o.push(g[m.name]),g),{});let l=[];const c=[];let u={},d={};n!=null&&(u=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const f=Object.keys(s);f.forEach(g=>{const m=s[g];m.inputNames.forEach((v,y)=>{const[b,,w]=Rl(v),x=s[b];if(x.outputs!=null){const $=x.outputs.indexOf(w);if($!==-1){const C=`${b}:${$}`;m.inputNames[y]=C}}m.inputs.push(x),x.children.push(m)})}),Object.keys(d).length===0?f.forEach(g=>{const m=s[g];m.children.length===0&&c.push(m)}):Object.keys(d).forEach(g=>{const[m]=Rl(g),v=s[m];v!=null&&(v.signatureKey=d[g],c.push(v))}),Object.keys(u).length>0?Object.keys(u).forEach(g=>{const[m]=Rl(g),v=s[m];v&&(v.signatureKey=u[g],l.push(v))}):l=i;let h={};e.library!=null&&e.library.function!=null&&(h=e.library.function.reduce((g,m)=>(g[m.signature.name]=this.mapFunction(m),g),{}));const p={nodes:s,inputs:l,outputs:c,weights:a,placeholders:i,signature:n,functions:h};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=RQ(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(i=>i.startsWith("^")?i.slice(1):i),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((i,a)=>(i[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},i),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((i,a)=>{const o=a.type;let s;switch(a.type){case"string":s=c_(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=c_(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":s=g_(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=g_(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":s=d_(e.attr,a.tfName,a.defaultValue||0),s===void 0&&a.tfDeprecatedName&&(s=d_(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":s=m_(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=m_(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":s=u_(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=u_(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":s=y_(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=y_(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":s=p_(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=p_(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":s=v_(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=v_(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":s=f_(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=f_(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":s=h_(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=h_(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":s=kV(e.attr,a.tfName,a.defaultValue),s===void 0&&a.tfDeprecatedName&&(s=kV(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return i[a.name]={value:s,type:o},i},{})),r}mapFunction(e){const n=e.nodeDef,r=[],i=[];let a={};n!=null&&(a=n.reduce((d,f)=>(d[f.name]=this.mapNode(f),f.op==="Const"&&i.push(d[f.name]),d),{}));const o=[],s=[];e.signature.inputArg.forEach(d=>{const[f]=Rl(d.name),h={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:m3(d.type),type:"dtype"}},children:[]};h.signatureKey=d.name,o.push(h),a[f]=h}),Object.keys(a).forEach(d=>{const f=a[d];f.inputNames.forEach((h,p)=>{const[g,,m]=Rl(h),v=a[g];if(v.outputs!=null){const y=v.outputs.indexOf(m);if(y!==-1){const b=`${g}:${y}`;f.inputNames[p]=b}}f.inputs.push(v),v.children.push(f)})});const c=e.ret;e.signature.outputArg.forEach(d=>{const[f,h]=Rl(c[d.name]),p=a[f];p!=null&&(p.defaultOutput=h,s.push(p))});const u=this.mapArgsToSignature(e);return{nodes:a,inputs:o,outputs:s,weights:i,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function kVe(t){const e=oe().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function DQ(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):kVe(t);return e?n:n.toLowerCase()}function c_(t,e,n,r=!1){const i=t[e];return i!=null?DQ(i.s,r):n}function u_(t,e,n){const r=t[e];return r?r.b:n}function d_(t,e,n){const r=t[e]||{},i=r.i!=null?r.i:r.f!=null?r.f:n;return typeof i=="number"?i:parseInt(i,10)}function m3(t){switch(typeof t=="string"&&(t=wa[t]),t){case wa.DT_FLOAT:case wa.DT_HALF:return"float32";case wa.DT_INT32:case wa.DT_INT64:case wa.DT_INT8:case wa.DT_UINT8:return"int32";case wa.DT_BOOL:return"bool";case wa.DT_DOUBLE:return"float32";case wa.DT_STRING:return"string";case wa.DT_COMPLEX64:case wa.DT_COMPLEX128:return"complex64";default:return null}}function kV(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function f_(t,e,n){const r=t[e];return r&&r.type?m3(r.type):n}function h_(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(i=>m3(i)):n}function FQ(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function p_(t,e,n){const r=t[e];return r&&r.shape?FQ(r.shape):n}function m_(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(i=>typeof i=="number"?i:parseInt(i,10)):n}function g_(t,e,n,r=!1){const i=t[e];return i&&i.list&&i.list.s?i.list.s.map(a=>DQ(a,r)):n}function v_(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(i=>FQ(i)):n}function y_(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OVe{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(i=>this.getInput(i)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((i,a)=>(i[a]=this.getAttr(a),i),{}))}getInput(e){return ai(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return ai(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return d_(this.node.rawAttrs,e,n);if(r.s!=null)return c_(this.node.rawAttrs,e,n);if(r.b!=null)return u_(this.node.rawAttrs,e,n);if(r.shape!=null)return p_(this.node.rawAttrs,e,n);if(r.type!=null)return f_(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return m_(this.node.rawAttrs,e,n);if(r.list.s!=null)return g_(this.node.rawAttrs,e,n);if(r.list.shape!=null)return v_(this.node.rawAttrs,e,n);if(r.list.b!=null)return y_(this.node.rawAttrs,e,n);if(r.list.type!=null)return h_(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mi=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:XD,abs:cr,acos:nF,acosh:rF,add:Ee,addN:CK,all:SE,any:g0,argMax:sf,argMin:iF,asin:aF,asinh:oF,atan:sF,atan2:lF,atanh:cF,avgPool:ux,avgPool3d:dF,basicLSTMCell:EK,batchNorm:yg,batchNorm2d:fF,batchNorm3d:hF,batchNorm4d:pF,batchToSpaceND:dx,bincount:mF,bitwiseAnd:TK,booleanMaskAsync:dX,broadcastArgs:IK,broadcastTo:zd,buffer:wt,cast:_e,ceil:gF,clipByValue:da,clone:cl,complex:rc,concat:tr,concat1d:vF,concat2d:yF,concat3d:bF,concat4d:xF,conv1d:$E,conv2d:ic,conv2dTranspose:CE,conv3d:SF,conv3dTranspose:$F,cos:fx,cosh:EE,cosineWindow:XE,cumprod:b0,cumsum:TE,denseBincount:x$,depthToSpace:CF,depthwiseConv2d:bg,diag:kK,dilation2d:EF,div:nt,divNoNan:TF,dot:IF,dropout:sM,einsum:gd,elu:xg,enclosingPowerOfTwo:lM,ensureShape:OK,equal:Go,erf:IE,euclideanNorm:kF,exp:fa,expandDims:Si,expm1:OF,eye:NE,fft:Ex,fill:Pf,floor:Sg,floorDiv:wE,fused:xX,gather:$g,gatherND:mX,greater:ya,greaterEqual:gc,ifft:Gp,imag:hx,image:gs,inTopKAsync:gX,irfft:WE,isFinite:AF,isInf:_F,isNaN:PF,leakyRelu:px,less:Vp,lessEqual:zu,linalg:dM,linspace:PK,localResponseNormalization:RF,log:_a,log1p:mx,logSigmoid:DF,logSoftmax:OE,logSumExp:gx,logicalAnd:Ns,logicalNot:vx,logicalOr:AE,logicalXor:FF,losses:IX,lowerBound:DK,matMul:Ct,max:co,maxPool:yx,maxPool3d:MF,maxPoolWithArgmax:FK,maximum:El,mean:zn,meshgrid:MK,min:Bp,minimum:xu,mirrorPad:LF,mod:jF,moments:bx,movingAverage:fX,mul:J,multiRNNCell:LK,multinomial:jK,neg:bn,norm:wg,notEqual:uf,oneHot:Wp,ones:oa,onesLike:Pa,op:Z,outerProduct:zK,pad:vc,pad1d:BK,pad2d:VK,pad3d:WK,pad4d:UK,pool:zF,pow:vl,prelu:wx,print:tF,prod:BF,raggedGather:HK,raggedRange:GK,raggedTensorToTensor:qK,rand:KK,randomGamma:QK,randomNormal:RE,randomStandardNormal:JK,randomUniform:Bu,randomUniformInt:eX,range:df,real:Up,reciprocal:ZF,relu:Fs,relu6:DE,reshape:te,reverse:fo,reverse1d:tX,reverse2d:nX,reverse3d:rX,reverse4d:iX,rfft:Tx,round:FE,rsqrt:ME,scalar:ct,scatterND:hX,searchSorted:_E,selu:LE,separableConv2d:jE,setdiff1dAsync:aX,sigmoid:Ss,sign:QF,signal:TX,sin:zE,sinh:BE,slice:At,slice1d:Sx,slice2d:VE,slice3d:$x,slice4d:Hp,softmax:Cx,softplus:Rf,spaceToBatchND:xx,sparse:NX,sparseToDense:pX,spectral:EX,split:la,sqrt:Wr,square:rn,squaredDifference:UE,squeeze:Vu,stack:ha,step:Ff,stridedSlice:JF,string:kX,sub:Ue,sum:qe,tan:eM,tanh:bu,tensor:Bo,tensor1d:$i,tensor2d:Qh,tensor3d:tM,tensor4d:oX,tensor5d:sX,tensor6d:lX,tensorScatterUpdate:cX,tile:to,topk:rM,transpose:kt,truncatedNormal:GE,unique:iM,unsortedSegmentSum:qE,unstack:ho,upperBound:uX,variable:aM,where:li,whereAsync:oM,zeros:hr,zerosLike:Pt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AVe=(t,e,n,r=mi)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(A("a",t,e,n),A("b",t,e,n))];case"AddN":return[r.addN(A("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(A("a",t,e,n),A("b",t,e,n))];case"Mul":return[r.mul(A("a",t,e,n),A("b",t,e,n))];case"RealDiv":case"Div":return[r.div(A("a",t,e,n),A("b",t,e,n))];case"DivNoNan":return[r.divNoNan(A("a",t,e,n),A("b",t,e,n))];case"FloorDiv":return[r.floorDiv(A("a",t,e,n),A("b",t,e,n))];case"Sub":return[r.sub(A("a",t,e,n),A("b",t,e,n))];case"Minimum":return[r.minimum(A("a",t,e,n),A("b",t,e,n))];case"Maximum":return[r.maximum(A("a",t,e,n),A("b",t,e,n))];case"Pow":return[r.pow(A("a",t,e,n),A("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(A("a",t,e,n),A("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ve=(t,e,n,r=mi)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(A("x",t,e,n))];case"Acos":return[r.acos(A("x",t,e,n))];case"Acosh":return[r.acosh(A("x",t,e,n))];case"Asin":return[r.asin(A("x",t,e,n))];case"Asinh":return[r.asinh(A("x",t,e,n))];case"Atan":return[r.atan(A("x",t,e,n))];case"Atan2":return[r.atan2(A("x",t,e,n),A("y",t,e,n))];case"Atanh":return[r.atanh(A("x",t,e,n))];case"Ceil":return[r.ceil(A("x",t,e,n))];case"Complex":return[r.complex(A("real",t,e,n),A("imag",t,e,n))];case"Cos":return[r.cos(A("x",t,e,n))];case"Cosh":return[r.cosh(A("x",t,e,n))];case"Elu":return[r.elu(A("x",t,e,n))];case"Erf":return[r.erf(A("x",t,e,n))];case"Exp":return[r.exp(A("x",t,e,n))];case"Expm1":return[r.expm1(A("x",t,e,n))];case"Floor":return[r.floor(A("x",t,e,n))];case"Log":return[r.log(A("x",t,e,n))];case"Log1p":return[r.log1p(A("x",t,e,n))];case"Imag":return[r.imag(A("x",t,e,n))];case"Neg":return[r.neg(A("x",t,e,n))];case"Reciprocal":return[r.reciprocal(A("x",t,e,n))];case"Real":return[r.real(A("x",t,e,n))];case"Relu":return[r.relu(A("x",t,e,n))];case"Round":return[r.round(A("x",t,e,n))];case"Selu":return[r.selu(A("x",t,e,n))];case"Sigmoid":return[r.sigmoid(A("x",t,e,n))];case"Sin":return[r.sin(A("x",t,e,n))];case"Sign":return[r.sign(A("x",t,e,n))];case"Sinh":return[r.sinh(A("x",t,e,n))];case"Softplus":return[r.softplus(A("x",t,e,n))];case"Sqrt":return[r.sqrt(A("x",t,e,n))];case"Square":return[r.square(A("x",t,e,n))];case"Tanh":return[r.tanh(A("x",t,e,n))];case"Tan":return[r.tan(A("x",t,e,n))];case"ClipByValue":return[r.clipByValue(A("x",t,e,n),A("clipValueMin",t,e,n),A("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(A("x",t,e,n))];case"Rsqrt":return[r.rsqrt(ai(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(A("x",t,e,n),A("alpha",t,e,n))];case"Prelu":return[r.prelu(A("x",t,e,n),A("alpha",t,e,n))];case"IsNan":return[r.isNaN(ai(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(ai(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(ai(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function No(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){j(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const i=t[r],a=e[r];j(i<0||a<0||i===a,()=>n+` Shapes ${t} and ${e} must match`)}}}function OV(t){return!(typeof t=="number"||t.some(e=>e<0))}function fv(t,e,n){let r=b_(t,n);const i=!OV(r);if(i&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&e.forEach(a=>{r=b_(a.shape,r)}),!OV(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function b_(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const i=t[r],a=e[r];if(i>=0&&a>=0&&i!==a)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=i>=0?i:a}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PVe{constructor(e,n,r,i,a,o,s){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=a,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=ct(0),Cr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),No(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,Cr(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,i)=>this.write(r,n[i]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let i=0;i<this.size();i++)e.push(i)}if(e.length===0)return Bo([],[0].concat(this.elementShape));const r=this.readMany(e);return No(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),ha(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Bo([],[0].concat(this.elementShape));const n=[];for(let i=0;i<this.size();i++)n.push(i);const r=this.readMany(n);return No(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),tr(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,ho(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const i=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const a=r===0?0:n.size/r,o=[];ae(()=>{n=te(n,[1,r,a]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:i[l-1],0],d=[1,e[l],a];o[l]=te(At(n,u,d),this.elementShape)}return o});const s=[];for(let l=0;l<e.length;l++)s[l]=l;this.writeMany(s,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pf{get id(){return this.idTensor.id}constructor(e,n,r,i=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(a=>{if(r!==a.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${a.dtype}`);No(n,a.shape,"TensorList shape mismatch: "),Cr(a)}),this.idTensor=ct(0),this.maxNumElements=i,Cr(this.idTensor)}copy(){return new pf([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);No(e,this.elementShape,"TensorList shape mismatch: ");const i=fv(this.elementShape,this.tensors,e);return ae(()=>{const a=this.tensors.map(o=>te(o,i));return ha(a,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=fv(this.elementShape,this.tensors,e),i=this.tensors.pop();return i.kept=!1,No(i.shape,e,"TensorList shape mismatch: "),te(i,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(No(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Cr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new pf([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);No(this.tensors[e].shape,n,"TensorList shape mismatch: ");const i=fv(this.elementShape,this.tensors,n);return te(this.tensors[e],i)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);No(this.elementShape,n.shape,"TensorList shape mismatch: "),Cr(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);No(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const i=fv(this.elementShape,this.tensors,r);return e.length===0?Bo([],[0].concat(i)):ae(()=>{const a=e.map(o=>te(this.tensors[o],i));return ha(a,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);No(this.elementShape,n,"TensorList shape mismatch: ");const r=fv(this.elementShape,this.tensors,n);return this.size()===0?Bo([],[0].concat(r)):ae(()=>{const i=this.tensors.map(a=>te(a,r));return tr(i,0)})}}function RVe(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const i=t.shape.slice(1);No(i,e,"TensorList shape mismatch: ");const a=ho(t);return new pf(a,e,r)}function DVe(t,e,n,r){return new pf([],t,e,r)}function FVe(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const i=Math.max(...e);if(r!=null&&r!==-1&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const a=new pf([],n,t.dtype,r),o=ho(t,0);return e.forEach((s,l)=>{a.setItem(s,o[l])}),a}function MVe(t,e,n){let r=0;const i=e.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const a=t.shape.slice(1),o=b_(a,n),s=r===0?0:t.size/r,l=ae(()=>{const u=[];t=te(t,[1,r,s]);for(let d=0;d<e.length;++d){const h=[0,d===0?0:i[d-1],0],p=[1,e[d],s];u[d]=te(At(t,h,p),o)}return t.dispose(),u}),c=new pf([],n,t.dtype,e.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LVe=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=A("thenBranch",t,e,n),i=A("elseBranch",t,e,n),a=A("cond",t,e,n),o=A("args",t,e,n);return(await a.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=A("body",t,e,n),i=A("cond",t,e,n),a=A("args",t,e,n),o=await n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap),s=a.map(u=>u.id);let l=await o[0].data();o.forEach(u=>{!u.kept&&s.indexOf(u.id)===-1&&u.dispose()});let c=a;for(;l[0];){const u=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const d=c.map(h=>h.id);u.forEach(h=>{!h.kept&&s.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()});const f=await n.functionMap[i].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await f[0].data(),f.forEach(h=>{!h.kept&&s.indexOf(h.id)===-1&&d.indexOf(h.id)===-1&&h.dispose()})}return c}case"LoopCond":{const r=A("pred",t,e,n);return[Dl(r)]}case"Switch":{const r=A("pred",t,e,n);let i=A("data",t,e,n);return i.kept||(i=Dl(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=t.inputNames.find(i=>ai(i,e,n)!==void 0);if(r){const i=ai(r,e,n);return[Dl(i)]}return}case"Enter":{const r=A("frameName",t,e,n),i=A("tensor",t,e,n);return n.enterFrame(r),[Dl(i)]}case"Exit":{const r=A("tensor",t,e,n);return n.exitFrame(),[Dl(r)]}case"NextIteration":{const r=A("tensor",t,e,n);return n.nextIteration(),[Dl(r)]}case"TensorArrayV3":{const r=A("size",t,e,n),i=A("dtype",t,e,n),a=A("elementShape",t,e,n),o=A("dynamicSize",t,e,n),s=A("clearAfterRead",t,e,n),l=A("identicalElementShapes",t,e,n),c=A("name",t,e,n),u=new PVe(c,i,r,a,l,o,s);return n.addTensorArray(u),[u.idTensor,ct(1)]}case"TensorArrayWriteV3":{const r=A("tensorArrayId",t,e,n),i=A("index",t,e,n),a=A("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(i,a),[o.idTensor]}case"TensorArrayReadV3":{const r=A("tensorArrayId",t,e,n),i=A("index",t,e,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=A("tensorArrayId",t,e,n),i=A("indices",t,e,n),a=A("dtype",t,e,n);return[n.getTensorArray(r.id).gather(i,a)]}case"TensorArrayScatterV3":{const r=A("tensorArrayId",t,e,n),i=A("indices",t,e,n),a=A("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(i,a),[o.idTensor]}case"TensorArrayConcatV3":{const r=A("tensorArrayId",t,e,n),i=n.getTensorArray(r.id),a=A("dtype",t,e,n);return[i.concat(a)]}case"TensorArraySplitV3":{const r=A("tensorArrayId",t,e,n),i=A("tensor",t,e,n),a=A("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(a,i),[o.idTensor]}case"TensorArraySizeV3":{const r=A("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return[ct(i.size(),"int32")]}case"TensorArrayCloseV3":{const r=A("tensorArrayId",t,e,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=A("tensorListId",t,e,n),i=A("index",t,e,n),a=A("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(i,a),[o.idTensor]}case"TensorListGetItem":{const r=A("tensorListId",t,e,n),i=A("index",t,e,n),a=A("elementShape",t,e,n),o=A("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(i,a,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=A("indices",t,e,n),i=A("tensor",t,e,n),a=A("elementShape",t,e,n),o=A("numElements",t,e,n),s=FVe(i,r,a,o);return n.addTensorList(s),[s.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=A("elementShape",t,e,n),i=A("elementDType",t,e,n);let a;t.op==="TensorListReserve"?a="numElements":a="maxNumElements";const o=A(a,t,e,n),s=t.op==="TensorListReserve"?-1:o,l=DVe(r,i,o,s);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=A("tensorListId",t,e,n),i=A("indices",t,e,n),a=A("elementShape",t,e,n),o=A("elementDType",t,e,n);return[n.getTensorList(r.id).gather(i,o,a)]}case"TensorListStack":{const r=A("tensorListId",t,e,n),i=A("elementShape",t,e,n),a=A("elementDType",t,e,n),o=A("numElements",t,e,n);return[n.getTensorList(r.id).stack(i,a,o)]}case"TensorListFromTensor":{const r=A("tensor",t,e,n),i=A("elementShape",t,e,n),a=A("elementDType",t,e,n),o=RVe(r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=A("tensorListId",t,e,n),i=n.getTensorList(r.id),a=A("dtype",t,e,n),o=A("elementShape",t,e,n);return[i.concat(a,o)]}case"TensorListPushBack":{const r=A("tensorListId",t,e,n),i=A("tensor",t,e,n),a=n.getTensorList(r.id);return a.pushBack(i),[a.idTensor]}case"TensorListPopBack":{const r=A("tensorListId",t,e,n),i=A("elementShape",t,e,n),a=A("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(i,a)]}case"TensorListSplit":{const r=A("tensor",t,e,n),i=A("elementShape",t,e,n),a=A("lengths",t,e,n),o=MVe(r,a,i);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=A("tensorListId",t,e,n),i=n.getTensorList(r.id);return[ct(i.size(),"int32")]}case"TensorListResize":{const r=A("tensorListId",t,e,n),i=A("size",t,e,n),o=n.getTensorList(r.id).resize(i);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AV(t,e,n){const[r,i]=A("fusedOps",t,e,n),a=r==="biasadd",o=!a,s=i==="prelu",l=r==="fusedbatchnorm",c=A("numArgs",t,e,n);if(a){if(s&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&a&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=A("strides",t,e,n),d=Tw(t,e,n),f=A("dataFormat",t,e,n).toUpperCase(),h=A("dilations",t,e,n);let[p,g]=A("args",t,e,n);o&&(g=p,p=void 0);const m=A("leakyreluAlpha",t,e,n);return{stride:u,pad:d,dataFormat:f,dilations:h,biasArg:p,preluArg:g,activationFunc:i,leakyreluAlpha:m}}const jVe=(t,e,n,r=mi)=>{switch(t.op){case"Conv1D":{const i=A("stride",t,e,n),a=A("pad",t,e,n),o=A("dataFormat",t,e,n).toUpperCase(),s=A("dilation",t,e,n);return[r.conv1d(A("x",t,e,n),A("filter",t,e,n),i,a,o,s)]}case"Conv2D":{const i=A("strides",t,e,n),a=Tw(t,e,n),o=A("dataFormat",t,e,n).toUpperCase(),s=A("dilations",t,e,n);return[r.conv2d(A("x",t,e,n),A("filter",t,e,n),[i[1],i[2]],a,o,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:i,pad:a,dataFormat:o,dilations:s,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=AV(t,e,n);return[r.fused.conv2d({x:A("x",t,e,n),filter:A("filter",t,e,n),strides:[i[1],i[2]],pad:a,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:a,dataFormat:o,dilations:s,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=AV(t,e,n);return[r.fused.depthwiseConv2d({x:A("x",t,e,n),filter:A("filter",t,e,n),strides:[i[1],i[2]],pad:a,dataFormat:o,dilations:[s[1],s[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=A("outputShape",t,e,n),a=A("strides",t,e,n),o=Tw(t,e,n);return[r.conv2dTranspose(A("x",t,e,n),A("filter",t,e,n),i,[a[1],a[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=A("strides",t,e,n),a=Tw(t,e,n),o=A("dilations",t,e,n),s=A("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(A("input",t,e,n),A("filter",t,e,n),[i[1],i[2]],a,s,[o[1],o[2]])]}case"Conv3D":{const i=A("strides",t,e,n),a=A("pad",t,e,n),o=A("dataFormat",t,e,n).toUpperCase(),s=A("dilations",t,e,n);return[r.conv3d(A("x",t,e,n),A("filter",t,e,n),[i[1],i[2],i[3]],a,o,[s[1],s[2],s[3]])]}case"AvgPool":{const i=A("strides",t,e,n),a=A("pad",t,e,n),o=A("kernelSize",t,e,n);return[r.avgPool(A("x",t,e,n),[o[1],o[2]],[i[1],i[2]],a)]}case"MaxPool":{const i=A("strides",t,e,n),a=A("pad",t,e,n),o=A("kernelSize",t,e,n);return[r.maxPool(A("x",t,e,n),[o[1],o[2]],[i[1],i[2]],a)]}case"MaxPoolWithArgmax":{const i=A("strides",t,e,n),a=A("pad",t,e,n),o=A("kernelSize",t,e,n),s=A("includeBatchInIndex",t,e,n),{result:l,indexes:c}=r.maxPoolWithArgmax(A("x",t,e,n),[o[1],o[2]],[i[1],i[2]],a,s);return[l,c]}case"AvgPool3D":{const i=A("strides",t,e,n),a=A("pad",t,e,n),o=A("kernelSize",t,e,n);return[r.avgPool3d(A("x",t,e,n),[o[1],o[2],o[3]],[i[1],i[2],i[3]],a)]}case"MaxPool3D":{const i=A("strides",t,e,n),a=A("pad",t,e,n),o=A("kernelSize",t,e,n);return[r.maxPool3d(A("x",t,e,n),[o[1],o[2],o[3]],[i[1],i[2],i[3]],a)]}case"Dilation2D":{const i=A("strides",t,e,n),a=A("pad",t,e,n),o=A("dilations",t,e,n),s=i[1],l=i[2],c=o[1],u=o[2];return[r.dilation2d(A("x",t,e,n),A("filter",t,e,n),[s,l],a,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zVe=(t,e,n,r=mi)=>{switch(t.op){case"Fill":{const i=A("shape",t,e,n),a=A("dtype",t,e,n),o=A("value",t,e,n);return[r.fill(i,o,a)]}case"LinSpace":{const i=A("start",t,e,n),a=A("stop",t,e,n),o=A("num",t,e,n);return[r.linspace(i,a,o)]}case"Multinomial":{const i=A("logits",t,e,n),a=A("numSamples",t,e,n),o=A("seed",t,e,n);return[r.multinomial(i,a,o)]}case"OneHot":{const i=A("indices",t,e,n),a=A("depth",t,e,n),o=A("onValue",t,e,n),s=A("offValue",t,e,n),l=A("dtype",t,e,n);return[r.oneHot(i,a,o,s,l)]}case"Ones":return[r.ones(A("shape",t,e,n),A("dtype",t,e,n))];case"OnesLike":return[r.onesLike(A("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(A("shape",t,e,n),A("dtype",t,e,n),A("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(A("shape",t,e,n),A("minval",t,e,n),A("maxval",t,e,n),A("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(A("shape",t,e,n),A("minval",t,e,n),A("maxval",t,e,n),A("seed",t,e,n))];case"Range":{const i=A("start",t,e,n),a=A("stop",t,e,n),o=A("step",t,e,n);return[r.range(i,a,o,A("dtype",t,e,n))]}case"TruncatedNormal":{const i=A("shape",t,e,n),a=A("mean",t,e,n),o=A("stdDev",t,e,n),s=A("seed",t,e,n);return[r.truncatedNormal(i,a,o,A("dtype",t,e,n),s)]}case"Zeros":return[r.zeros(A("shape",t,e,n),A("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(A("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fN(t,e,n){const r=A("boxes",t,e,n),i=A("scores",t,e,n),a=A("maxOutputSize",t,e,n),o=A("iouThreshold",t,e,n),s=A("scoreThreshold",t,e,n),l=A("softNmsSigma",t,e,n);return{boxes:r,scores:i,maxOutputSize:a,iouThreshold:o,scoreThreshold:s,softNmsSigma:l}}const BVe=async(t,e,n,r,i=mi)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:a,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=fN(t,e,n),d=await i.image.nonMaxSuppressionWithScoreAsync(a,o,s,l,c,u);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:a,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:c}=fN(t,e,n),u=A("padToMaxOutputSize",t,e,n),d=await i.image.nonMaxSuppressionPaddedAsync(a,o,s,l,c,u);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:a,scores:o,maxOutputSize:s,iouThreshold:l,scoreThreshold:c}=fN(t,e,n);return[await i.image.nonMaxSuppressionAsync(a,o,s,l,c)]}case"Where":{const a=i.cast(A("condition",t,e,n),"bool"),o=[await i.whereAsync(a)];return a.dispose(),o}case"ListDiff":return i.setdiff1dAsync(A("x",t,e,n),A("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VVe=(t,e,n,r=mi)=>{switch(t.op){case"LowerBound":{const i=A("sortedSequence",t,e,n),a=A("values",t,e,n);return[r.lowerBound(i,a)]}case"TopKV2":{const i=A("x",t,e,n),a=A("k",t,e,n),o=A("sorted",t,e,n),s=r.topk(i,a,o);return[s.values,s.indices]}case"UpperBound":{const i=A("sortedSequence",t,e,n),a=A("values",t,e,n);return[r.upperBound(i,a)]}case"Unique":{const i=A("x",t,e,n),a=r.unique(i);return[a.values,a.indices]}case"UniqueV2":{const i=A("x",t,e,n),a=A("axis",t,e,n),o=r.unique(i,a);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WVe=(t,e,n,r=mi)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const i=A("default",t,e,n);return[ai(t.name,e,n)||i];case"Placeholder":return[ai(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=A("x",t,e,n);return[Dl(u)]}case"IdentityN":return A("x",t,e,n).map(u=>Dl(u));case"Snapshot":const a=A("x",t,e,n);return[Dl(a)];case"Shape":return[r.tensor1d(A("x",t,e,n).shape,"int32")];case"ShapeN":return A("x",t,e,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(A("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(A("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=A("x",t,e,n),s=A("data",t,e,n),l=A("message",t,e,n),c=A("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<s.length;u++)console.log(Array.prototype.slice.call(s[u].dataSync()).slice(0,c));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UVe{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=ct(0),this.tensorMap=new Map,Cr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return ct(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(i=>i.dispose()),this.tensorMap.clear(),ae(()=>{const i=ho(n),a=r.length,o=i.length;j(a===o,()=>`The number of elements doesn't match, keys has ${a} elements, the values has ${o} elements.`);for(let s=0;s<a;s++){const l=r[s],c=i[s];Cr(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return ae(()=>{const i=[];for(let a=0;a<r.length;a++){const o=r[a],s=this.findWithDefault(o,n);i.push(s)}return ha(i)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HVe=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const i=r.getHashTableHandleByName(t.name);if(i!=null)return[i];{const a=A("keyDType",t,e,n),o=A("valueDType",t,e,n),s=new UVe(a,o);return r.addHashTable(t.name,s),[s.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const i=A("tableHandle",t,e,n,r),a=A("keys",t,e,n),o=A("values",t,e,n);return[await r.getHashTableById(i.id).import(a,o)]}case"LookupTableFind":case"LookupTableFindV2":{const i=A("tableHandle",t,e,n,r),a=A("keys",t,e,n),o=A("defaultValue",t,e,n);return[await r.getHashTableById(i.id).find(a,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=A("tableHandle",t,e,n,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GVe=(t,e,n,r=mi)=>{switch(t.op){case"ResizeBilinear":{const i=A("images",t,e,n),a=A("size",t,e,n),o=A("alignCorners",t,e,n),s=A("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(i,[a[0],a[1]],o,s)]}case"ResizeNearestNeighbor":{const i=A("images",t,e,n),a=A("size",t,e,n),o=A("alignCorners",t,e,n),s=A("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(i,[a[0],a[1]],o,s)]}case"CropAndResize":{const i=A("image",t,e,n),a=A("boxes",t,e,n),o=A("boxInd",t,e,n),s=A("cropSize",t,e,n),l=A("method",t,e,n),c=A("extrapolationValue",t,e,n);return[r.image.cropAndResize(i,a,o,s,l,c)]}case"ImageProjectiveTransformV3":{const i=A("images",t,e,n),a=A("transforms",t,e,n),o=A("outputShape",t,e,n),s=A("fillValue",t,e,n),l=A("interpolation",t,e,n),c=A("fillMode",t,e,n);return[r.image.transform(i,a,l.toLowerCase(),c.toLowerCase(),s,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qVe=(t,e,n,r=mi)=>{switch(t.op){case"Equal":return[r.equal(A("a",t,e,n),A("b",t,e,n))];case"NotEqual":return[r.notEqual(A("a",t,e,n),A("b",t,e,n))];case"Greater":return[r.greater(A("a",t,e,n),A("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(A("a",t,e,n),A("b",t,e,n))];case"Less":return[r.less(A("a",t,e,n),A("b",t,e,n))];case"LessEqual":return[r.lessEqual(A("a",t,e,n),A("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(A("a",t,e,n),A("b",t,e,n))];case"LogicalNot":return[r.logicalNot(A("a",t,e,n))];case"LogicalOr":return[r.logicalOr(A("a",t,e,n),A("b",t,e,n))];case"Select":case"SelectV2":return[r.where(A("condition",t,e,n),A("a",t,e,n),A("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(A("a",t,e,n),A("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KVe=(t,e,n,r=mi)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(A("a",t,e,n),A("b",t,e,n),A("transposeA",t,e,n),A("transposeB",t,e,n))];case"Einsum":return[r.einsum(A("equation",t,e,n),...A("tensors",t,e,n))];case"Transpose":return[r.transpose(A("x",t,e,n),A("perm",t,e,n))];case"_FusedMatMul":const[i,a]=A("fusedOps",t,e,n),o=i==="biasadd",s=a==="prelu",l=A("numArgs",t,e,n),c=A("leakyreluAlpha",t,e,n);if(o){if(s&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,d]=A("args",t,e,n);return[r.fused.matMul({a:A("a",t,e,n),b:A("b",t,e,n),transposeA:A("transposeA",t,e,n),transposeB:A("transposeB",t,e,n),bias:u,activation:a,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(A("a",t,e,n),A("numLower",t,e,n),A("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XVe=(t,e,n,r=mi)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(A("x",t,e,n),A("axis",t,e,n),A("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(A("x",t,e,n),A("mean",t,e,n),A("variance",t,e,n),A("offset",t,e,n),A("scale",t,e,n),A("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(A("x",t,e,n),A("mean",t,e,n),A("variance",t,e,n),A("offset",t,e,n),A("scale",t,e,n),A("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(A("x",t,e,n),A("radius",t,e,n),A("bias",t,e,n),A("alpha",t,e,n),A("beta",t,e,n))];case"Softmax":return[r.softmax(A("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(A("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YVe=(t,e,n,r=mi)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:i,outputDenseValues:a}=r.raggedGather(A("paramsNestedSplits",t,e,n),A("paramsDenseValues",t,e,n),A("indices",t,e,n),A("outputRaggedRank",t,e,n));return i.concat(a)}case"RaggedRange":{const{rtNestedSplits:i,rtDenseValues:a}=r.raggedRange(A("starts",t,e,n),A("limits",t,e,n),A("splits",t,e,n));return[i,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(A("shape",t,e,n),A("values",t,e,n),A("defaultValue",t,e,n),A("rowPartitionTensors",t,e,n),A("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZVe=(t,e,n,r=mi)=>{switch(t.op){case"Max":{const s=A("axis",t,e,n),l=A("keepDims",t,e,n);return[r.max(A("x",t,e,n),s,l)]}case"Mean":{const s=A("axis",t,e,n),l=A("keepDims",t,e,n);return[r.mean(A("x",t,e,n),s,l)]}case"Min":{const s=A("axis",t,e,n),l=A("keepDims",t,e,n);return[r.min(A("x",t,e,n),s,l)]}case"Sum":{const s=A("axis",t,e,n),l=A("keepDims",t,e,n);return[r.sum(A("x",t,e,n),s,l)]}case"All":{const s=A("axis",t,e,n),l=A("keepDims",t,e,n);return[r.all(A("x",t,e,n),s,l)]}case"Any":{const s=A("axis",t,e,n),l=A("keepDims",t,e,n);return[r.any(A("x",t,e,n),s,l)]}case"ArgMax":{const s=A("axis",t,e,n);return[r.argMax(A("x",t,e,n),s)]}case"ArgMin":{const s=A("axis",t,e,n);return[r.argMin(A("x",t,e,n),s)]}case"Prod":{const s=A("axis",t,e,n),l=A("keepDims",t,e,n);return[r.prod(A("x",t,e,n),s,l)]}case"Cumprod":{const s=A("axis",t,e,n),l=A("exclusive",t,e,n),c=A("reverse",t,e,n);return[r.cumprod(A("x",t,e,n),s,l,c)]}case"Cumsum":{const s=A("axis",t,e,n),l=A("exclusive",t,e,n),c=A("reverse",t,e,n);return[r.cumsum(A("x",t,e,n),s,l,c)]}case"Bincount":const i=A("x",t,e,n),a=A("weights",t,e,n),o=A("size",t,e,n);return[r.bincount(i,a,o)];case"DenseBincount":{const s=A("x",t,e,n),l=A("weights",t,e,n),c=A("size",t,e,n),u=A("binaryOutput",t,e,n);return[r.denseBincount(s,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QVe=(t,e,n,r=mi)=>{switch(t.op){case"ConcatV2":case"Concat":{const i=A("n",t,e,n),a=A("axis",t,e,n);let o=A("tensors",t,e,n);return o=o.slice(0,i),[r.concat(o,a)]}case"Gather":{const i=A("x",t,e,n),a=A("indices",t,e,n);return[r.gather(i,r.cast(a,"int32"),0)]}case"GatherV2":{const i=A("axis",t,e,n),a=A("batchDims",t,e,n),o=A("x",t,e,n),s=A("indices",t,e,n);return[r.gather(o,r.cast(s,"int32"),i,a)]}case"Reverse":{const i=A("dims",t,e,n),a=[];for(let s=0;s<i.length;s++)i[s]&&a.push(s);const o=A("x",t,e,n);return[r.reverse(o,a)]}case"ReverseV2":{const i=A("axis",t,e,n),a=A("x",t,e,n);return[r.reverse(a,i)]}case"Slice":{const i=A("begin",t,e,n),a=A("size",t,e,n);return[r.slice(A("x",t,e,n),i,a)]}case"StridedSlice":{const i=A("begin",t,e,n),a=A("end",t,e,n),o=A("strides",t,e,n),s=A("beginMask",t,e,n),l=A("endMask",t,e,n),c=A("ellipsisMask",t,e,n),u=A("newAxisMask",t,e,n),d=A("shrinkAxisMask",t,e,n),f=A("x",t,e,n);return[r.stridedSlice(f,i,a,o,s,l,c,u,d)]}case"Pack":return ae(()=>{const i=A("axis",t,e,n),a=A("tensors",t,e,n),o=a[0].shape,s=r.squeeze(a[0]).shape,l=a.map(c=>{const u=Nt(c.shape,o);if(!u&&!Nt(r.squeeze(c).shape,s))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,o)});return[r.stack(l,i)]});case"Unpack":{const i=A("axis",t,e,n),a=A("tensor",t,e,n);return r.unstack(a,i)}case"Tile":{const i=A("reps",t,e,n);return[r.tile(A("x",t,e,n),i)]}case"Split":case"SplitV":{const i=A("axis",t,e,n),a=A("numOrSizeSplits",t,e,n),o=A("x",t,e,n);return r.split(o,a,i)}case"ScatterNd":{const i=A("indices",t,e,n),a=A("values",t,e,n),o=A("shape",t,e,n);return[r.scatterND(i,a,o)]}case"GatherNd":{const i=A("x",t,e,n),a=A("indices",t,e,n);return[r.gatherND(i,a)]}case"SparseToDense":{const i=A("sparseIndices",t,e,n),a=A("outputShape",t,e,n),o=A("sparseValues",t,e,n),s=A("defaultValue",t,e,n);return[r.sparseToDense(i,o,a,o.dtype===s.dtype?s:r.cast(s,o.dtype))]}case"TensorScatterUpdate":{const i=A("indices",t,e,n),a=A("values",t,e,n),o=A("tensor",t,e,n);return[r.tensorScatterUpdate(o,i,a)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JVe=(t,e,n,r=mi)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:a,emptyRowIndicator:o,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(A("indices",t,e,n),A("values",t,e,n),A("denseShape",t,e,n),A("defaultValue",t,e,n));return[i,a,o,s]}case"SparseReshape":{const{outputIndices:i,outputShape:a}=r.sparse.sparseReshape(A("inputIndices",t,e,n),A("inputShape",t,e,n),A("newShape",t,e,n));return[i,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(A("data",t,e,n),A("indices",t,e,n),A("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(A("data",t,e,n),A("indices",t,e,n),A("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eWe=(t,e,n,r=mi)=>{switch(t.op){case"FFT":return[r.fft(A("x",t,e,n))];case"IFFT":return[r.ifft(A("x",t,e,n))];case"RFFT":return[r.rfft(A("x",t,e,n))];case"IRFFT":return[r.irfft(A("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tWe=(t,e,n,r=mi)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(A("input",t,e,n),A("pattern",t,e,n),A("rewrite",t,e,n),A("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:i,nGramsSplits:a}=r.string.stringNGrams(A("data",t,e,n),A("dataSplits",t,e,n),A("separator",t,e,n),A("nGramWidths",t,e,n),A("leftPad",t,e,n),A("rightPad",t,e,n),A("padWidth",t,e,n),A("preserveShortSequences",t,e,n));return[i,a]}case"StringSplit":{const{indices:i,values:a,shape:o}=r.string.stringSplit(A("input",t,e,n),A("delimiter",t,e,n),A("skipEmpty",t,e,n));return[i,a,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(A("input",t,e,n),A("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nWe=(t,e,n,r=mi)=>{switch(t.op){case"Cast":return[r.cast(A("x",t,e,n),A("dtype",t,e,n))];case"ExpandDims":{const i=A("axis",t,e,n);return[r.expandDims(A("x",t,e,n),i)]}case"Squeeze":{const i=A("axis",t,e,n);return[r.squeeze(A("x",t,e,n),i)]}case"Reshape":return[r.reshape(A("x",t,e,n),A("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(A("x",t,e,n),A("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(A("x",t,e,n),A("padding",t,e,n),A("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(A("x",t,e,n),A("padding",t,e,n),A("constantValue",t,e,n))];case"SpaceToBatchND":{const i=A("blockShape",t,e,n),a=A("paddings",t,e,n);return[r.spaceToBatchND(A("x",t,e,n),i,a)]}case"BatchToSpaceND":{const i=A("blockShape",t,e,n),a=A("crops",t,e,n);return[r.batchToSpaceND(A("x",t,e,n),i,a)]}case"DepthToSpace":{const i=A("blockSize",t,e,n),a=A("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(A("x",t,e,n),i,a)]}case"BroadcastTo":return[r.broadcastTo(A("x",t,e,n),A("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(A("s0",t,e,n),A("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _V(t,e,n,r,i=ae){const a=((o,s,l)=>{switch(o.category){case"arithmetic":return i(()=>AVe(o,s,l));case"basic_math":return i(()=>_Ve(o,s,l));case"control":return LVe(o,s,l);case"convolution":return i(()=>jVe(o,s,l));case"creation":return i(()=>zVe(o,s,l));case"dynamic":return BVe(o,s,l);case"evaluation":return i(()=>VVe(o,s,l));case"image":return i(()=>GVe(o,s,l));case"graph":return i(()=>WVe(o,s,l));case"logical":return i(()=>qVe(o,s,l));case"matrices":return i(()=>KVe(o,s,l));case"normalization":return i(()=>XVe(o,s,l));case"ragged":return i(()=>YVe(o,s,l));case"reduction":return i(()=>ZVe(o,s,l));case"slice_join":return i(()=>QVe(o,s,l));case"sparse":return i(()=>JVe(o,s,l));case"spectral":return i(()=>eWe(o,s,l));case"string":return i(()=>tWe(o,s,l));case"transformation":return i(()=>nWe(o,s,l));case"hash_table":return HVe(o,s,l,r);case"custom":const c=RQ(o.op);if(c&&c.customExecutor)return c.customExecutor(new OVe(o,s,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return gu(a)?a.then(o=>[].concat(o)):[].concat(a)}class PV{constructor(e={},n={},r={},i={},a){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=i,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RV(t,e,n,r){const i=new Set,a=[];let o=null,s=null;const l=new Set,c=new Set(Object.keys(t).map(f=>Sa(f)[0]));r=r||[];const u=new Set(r.map(f=>Sa(f.name)[0])),d=[...e];for(;d.length>0;){const f=d.pop();if((yd(f)||uWe(f)||dWe(f))&&o==null&&(o=f,s=o.children.map(h=>h.name).filter(h=>i.has(h))),i.add(f.name),n[f.name]==null&&!c.has(f.name)&&!u.has(f.name)){if(f.inputs.length===0){a.push(f.name);continue}f.inputs.forEach(h=>{l.has(h.name)||(l.add(h.name),d.push(h))})}}return{inputs:t,outputs:e,usedNodes:i,missingInputs:a,dynamicNode:o,syncInputs:s}}function rWe(t,e){const{usedNodes:n,inputs:r}=e,i=Object.keys(r).map(m=>Sa(m)[0]).map(m=>t.nodes[m]),a=t.initNodes||[],o=m=>n.has(typeof m=="string"?m:m.name);function s(m){return[...new Map(m.map(v=>[v.name,v])).values()]}const l=s([...i,...t.weights,...a]).filter(o),c=s([...l,...Object.values(t.nodes)]).filter(o),u=new Map(c.map(m=>[m.name,m])),d={};for(const m of c){d[m.name]=d[m.name]||0;for(const v of m.children)o(v)||(d[v.name]=Number.POSITIVE_INFINITY),d[v.name]=(d[v.name]||0)+1}const f=Object.entries(d).filter(([,m])=>m===0).map(([m])=>m),h=[...f];for(;f.length>0;){const m=f.pop(),v=u.get(m);for(const y of v.children.filter(o))--d[y.name]===0&&(h.push(y.name),f.push(y.name))}const p=h.map(m=>u.get(m)),g=iWe(p,l);return aWe(g,l),g}function iWe(t,e){const n=new Map(t.map(o=>[o.name,o])),r=e.map(o=>o.name),i=new Set(r);for(;r.length>0;){const o=r.pop(),s=n.get(o);for(const l of s.children)!n.has(l.name)||i.has(l.name)||(i.add(l.name),r.push(l.name))}return t.filter(o=>i.has(o.name))}class B1 extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function aWe(t,e){const n=new Map(t.map((s,l)=>[s.name,l])),r=new Set(e.map(s=>s.name)),i=s=>r.has(typeof s=="string"?s:s.name),a=new Set(t.map(s=>s.name)),o=s=>a.has(typeof s=="string"?s:s.name);for(const s of t){for(const l of s.children.filter(o)){if(!n.has(l.name))throw new B1(`Child ${l.name} of node ${s.name} is unreachable.`);if(n.get(s.name)>n.get(l.name))throw new B1(`Node ${s.name} is scheduled to run after its child ${l.name}.`)}if(!i(s))for(const l of s.inputs){if(!n.has(l.name))throw new B1(`Input ${l.name} of node ${s.name} is unreachable.`);if(n.get(l.name)>n.get(s.name))throw new B1(`Node ${s.name} is scheduled to run before its input ${l.name}.`)}}}function oWe(t){const e=new Map(t.map((s,l)=>[s.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((s,l)=>yd(s)?n:l),i=s=>{const l=r[e.get(s.name)];return l??-1},a=t.map((s,l)=>s.children.map(i).reduce((c,u)=>Math.max(c,u),r[l])),o=new Map;for(let s=0;s<t.length;++s){const l=a[s];if(l===n)continue;const c=t[s],u=t[l];o.has(u.name)||o.set(u.name,[]),o.get(u.name).push(c)}return o}const sWe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),lWe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),cWe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function yd(t){return sWe.has(t.op)}function uWe(t){return lWe.has(t.op)}function dWe(t){return cWe.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _${get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(i=>i.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new _$(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(a=>a.name).sort(),i=n.map(a=>a.name).sort();return r.join(this.SEPARATOR)+"--"+i.join(this.SEPARATOR)}compile(e,n){const r=RV(e,n,this.weightMap,this._initNodes),{missingInputs:i,dynamicNode:a,syncInputs:o}=r;if(a!=null)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(i.length>0){const c=n.map(d=>d.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${i}]`)}const s=rWe(this.graph,r),l=oWe(s);return{orderedNodes:s,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return Cr(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const i=r.map(f=>this.graph.nodes[Sa(f)[0]]),a=n.map(f=>Sa(f)[0]),o=new Set(a);let s=a.map(f=>this.graph.nodes[f]);s.length===0&&(s=this._outputs);const l=this.getCompilationKey(i,s);let c=this.compiledMap.get(l);c==null&&(c=this.compile(e,s),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=oe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const u={},d={};return ae(()=>{const f=new PV(this.weightMap,u,d,this.functionExecutorMap,this.parseNodeNameCache),h=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(v=>{const[y,b]=Sa(v,f),w=[];w[b]=e[v],h[y]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[y]=this.cloneTensorList(w))});const p=this.getFrozenTensorIds(h),{orderedNodes:g,nodeLiveUntilMap:m}=c;for(const v of g){if(h[v.name])continue;const y=_V(v,h,f,this._resourceManager);if(gu(y))throw new Error(`The execution of the op '${v.op}' returned a promise. Please use model.executeAsync() instead.`);h[v.name]=y,this.keepIntermediateTensors&&(this.clonedTensorsMap[v.name]=this.cloneTensorList(y)),this.checkTensorForDisposalWithNodeLiveUntilInfo(v,h,f,p,o,m.get(v.name))}return this.parent==null&&f.dispose(p),n.map(v=>ai(v,h,f))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(i=>i.id)));return new Set(n)}checkTensorForDisposal(e,n,r,i,a,o,s){if(!(yd(n)||o.has(e))){for(const l of r[e])l!=null&&(s[l.id]=(s[l.id]||0)+n.children.length);for(const l of n.inputs){if(yd(l))continue;const c=IV(l.name,r,i);if(c!=null)for(const u of c){if(!u||u.kept||a.has(u.id))continue;const d=s[u.id];d===1?(u.dispose(),delete s[u.id]):d!=null&&s[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,i,a,o){function s(l){return yd(l)||a.has(l.name)}if(!(yd(e)||o==null))for(const l of o){if(s(l))continue;const c=IV(l.name,n,r);for(const u of c)!u||u.kept||i.has(u.id)||u.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,i={},a={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=oe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const o=new PV(this.weightMap,i,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const s=await this.executeWithControlFlow(e,o,n,r),l=n.map(f=>ai(f,s,o)),c=l.map(f=>f.id),u=Object.keys(e).map(f=>e[f].id),d=new Set([...c,...u,...this.weightIds]);return Object.values(s).forEach(f=>{f.forEach(h=>{h&&!h.isDisposed&&!d.has(h.id)&&h.dispose()})}),this.parent==null&&o.dispose(d),l}async executeFunctionAsync(e,n,r){const i=e.reduce((a,o,s)=>(a[this.inputs[s].name]=o,a),{});return this._executeAsync(i,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,i){const a=Object.keys(e),o=a.map(w=>this.graph.nodes[Sa(w)[0]]),s=r.map(w=>Sa(w)[0]),l=new Set(s);let c=s.map(w=>this.graph.nodes[w]);c.length===0&&(c=this._outputs);const{usedNodes:u,missingInputs:d,dynamicNode:f,syncInputs:h}=RV(e,c,this.weightMap,this._initNodes),p=[...o,...this.graph.weights,...this._initNodes||[]].map(w=>({node:w,contexts:n.currentContext})),g=Object.assign({},this.weightMap);Object.keys(e).forEach(w=>{const[x,$]=Sa(w),C=[];C[$]=e[w],g[x]=C});const m={},v=this.getFrozenTensorIds(g),y={};for(;p.length>0;){const w=this.processStack(o,p,n,g,y,v,l,m,u);await Promise.all(w)}f==null&&!i&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const b=c.filter(w=>!yd(w)&&!ai(w.name,g,n)).map(w=>w.name);if(b.length>0){let w="";throw f!=null&&(w=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),new Error(`Cannot compute the outputs [${b}] from the provided inputs [${a}]. Consider providing the following inputs: [${d}]. ${w}`)}return g}processStack(e,n,r,i,a,o,s,l,c){const u=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let f="";if(d.node.op==="Enter"&&A("isConstant",d.node,i,r)&&([f]=Rl(d.node.name,r)),i[d.node.name]==null){const h=_V(d.node,i,r,this._resourceManager);f||([f]=Rl(d.node.name,r));const p=r.currentContext;gu(h)?u.push(h.then(g=>(i[f]=g,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(g)),r.currentContext=p,this.checkTensorForDisposal(f,d.node,i,r,o,s,l),this.processChildNodes(d.node,n,r,i,a,c),g))):(i[f]=h,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(h)),this.checkTensorForDisposal(f,d.node,i,r,o,s,l),this.processChildNodes(d.node,n,r,i,a,c))}else this.processChildNodes(d.node,n,r,i,a,c)}return u}processChildNodes(e,n,r,i,a,o){e.children.forEach(s=>{const[l]=Rl(s.name,r);a[l]||!o.has(s.name)||(s.op==="Merge"?s.inputNames.some(c=>!!ai(c,i,r))&&(a[l]=!0,n.push({contexts:r.currentContext,node:s})):s.inputNames.every(c=>!!ai(c,i,r))&&(a[l]=!0,n.push({contexts:r.currentContext,node:s})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[i]=Sa(n),a=this.graph.nodes[i];if(a.attrParams.shape&&a.attrParams.shape.value){const o=a.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((l,c)=>o[c]===-1||o[c]===l);j(s,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&j(r.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const i={};for(const a in e){const o=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[a];o!=null?i[o.name]=e[a]:i[a]=e[a]}return i}checkInputs(e){const n=Object.keys(e).filter(r=>{const[i]=Sa(r);return this.graph.nodes[i]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,i;const a=(i=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||i===void 0?void 0:i[n];return a!=null?a.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=Sa(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class fWe{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hWe="?tfjs-format=file",pWe="model.json";class g3{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=xM){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new fWe}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return gu(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await hK(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let i=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const a=this.artifacts.userDefinedMetadata;a.signature!=null&&(i=a.signature),a.structuredOutputKeys!=null&&(this.structuredOutputKeys=a.structuredOutputKeys)}if(this.signature=i,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new _$(NV.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const a=NV.Instance.transformGraph(e.modelInitializer);this.initializer=new _$(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof Zt?[e]:e,r={};return n.forEach((i,a)=>r[this.structuredOutputKeys[a]]=i),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof Zt)&&!Array.isArray(e)){const a=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(a!=null)for(const o in a){const s=a[o];s.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[s.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let i=0;return this.inputNodes.reduce((a,o)=>{var s,l,c;const u=(c=(l=(s=this.signature)===null||s===void 0?void 0:s.inputs)===null||l===void 0?void 0:l[o])===null||c===void 0?void 0:c.resourceId;return u!=null?a[o]=this.resourceIdToCapturedInput[u]:a[o]=e[i++],a},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let i=0;i<r.length;i++){const a=r[i],o=n[a];this.resourceIdToCapturedInput[o.resourceId]=e[i]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Et(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function mWe(t,e={},n=xM){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=vWe(t));const r=new g3(t,e,n);return await r.load(),r}function gWe(t){if(t==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let e;if(t instanceof Array){const[r,i]=t;if(!r)throw new Error("modelJSON must be the first element of the array");if(!i||!(i instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");const a=b$(r.weightsManifest),o=JD(r,a,i);e=w$(o)}else if("load"in t)e=t;else if("modelTopology"in t&&"weightSpecs"in t&&"weightData"in t)e=w$(t);else throw new Error("Unknown model format");const n=new g3(e);return n.load(),n}function vWe(t){return t.endsWith("/")||(t=t+"/"),`${t}${pWe}${hWe}`}/** @license See the LICENSE file. */const yWe="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bWe=Object.freeze(Object.defineProperty({__proto__:null,GraphModel:g3,deregisterOp:U5e,loadGraphModel:mWe,loadGraphModelSync:gWe,registerOp:W5e,version_converter:yWe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var DV;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(DV||(DV={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Je(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&j(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xWe=KE;class bT extends d2{nextDataId(){return bT.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new MD(this,os())}write(e,n,r){this.firstUse&&(this.firstUse=!1,oe().get("IS_NODE")&&Qa(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const i={id:this.nextDataId()};return this.data.set(i,{values:e,dtype:r,refCount:1}),i}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&Qs(r[0])){const a=r.map(o=>ll(o));i=this.write(a,e,n)}else i=this.write(r,e,n);return{dataId:i,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,i,a){this.data.set(e,{values:n,dtype:i,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const i=this.readSync(r.real.dataId),a=this.readSync(r.imag.dataId);return ac(i,a)}return zq(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>nc(i));return wt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return wt(e.shape,e.dtype,n)}makeOutput(e,n,r){return os().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=Di();return e(),{kernelMs:Di()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Je([e],"where");const n=this.readSync(e.dataId);return xWe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}bT.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MQ(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const wWe=t=>{const{x:e}=t.inputs,n=t.backend;Je(e,"abs");let r=new Float32Array(de(e.shape));const i=n.data.get(e.dataId).values;return r=MQ(i),n.makeOutput(r,e.shape,e.dtype)},SWe={kernelName:ib,backendName:"cpu",kernelFunc:wWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ar(t){return(e,n,r,i,a)=>{const o=bt(e,n),s=o.length,l=ot(o),c=de(o),u=Vr(a,c),d=e.length,f=n.length,h=ot(e),p=ot(n),g=cf(e,o),m=cf(n,o);if(g.length+m.length===0)for(let v=0;v<u.length;++v)u[v]=t(r[v%r.length],i[v%i.length]);else for(let v=0;v<u.length;++v){const y=Of(v,s,l),b=y.slice(-d);g.forEach(C=>b[C]=0);const w=ws(b,d,h),x=y.slice(-f);m.forEach(C=>x[C]=0);const $=ws(x,f,p);u[v]=t(r[w],i[$])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ea(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(s.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(i.shape,"float32",o)},s}const $We={kernelName:x2,backendName:"cpu",kernelFunc:Ea};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P$(t,e,n="float32"){if(n==="complex64"){const i=P$(t,e,"float32"),a=P$(t,e,"float32");return Ea({inputs:{real:i,imag:a},backend:t})}const r=ui(de(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xl(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const CWe={kernelName:Wm,backendName:"cpu",kernelFunc:xl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mf(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const EWe={kernelName:J2,backendName:"cpu",kernelFunc:mf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LQ(t,e,n,r){if(r==="int32"){const i=Int32Array.from(t);return[e,"int32",i]}if(r==="bool"){const i=Fu([0],n),[a,o]=ar((s,l)=>s!==l?1:0)(e,[],t,i,"bool");return[o,"bool",a]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Eu(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return xl({inputs:{x:i},backend:n});const u=P$(n,i.shape,i.dtype),d=Eu({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),f=Ea({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),f}if(i.dtype==="complex64"){const u=mf({inputs:{input:i},backend:n}),d=Eu({inputs:{x:u},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(u),d}if(!zD(i.dtype,a)){const u=xl({inputs:{x:i},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:a}}const o=n.data.get(i.dataId).values,[s,l,c]=LQ(o,i.shape,i.dtype,a);return n.makeTensorInfo(s,l,c)}const TWe={kernelName:Om,backendName:"cpu",kernelFunc:Eu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ar(t,e,n,r){return n==null?({inputs:i,backend:a})=>{const{a:o,b:s}=i,l=a;Je([o,s],t);const c=l.data.get(o.dataId).values,u=l.data.get(s.dataId).values,d=o.dtype==="string"?oc(c):c,f=o.dtype==="string"?oc(u):u,h=r||o.dtype,[p,g]=e(o.shape,s.shape,d,f,h);return l.makeTensorInfo(g,h,p)}:({inputs:i,backend:a})=>{const{a:o,b:s}=i,l=a;if(o.dtype==="complex64"||s.dtype==="complex64"){const c=Eu({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,f=u.complexTensorInfos.imag,h=l.data.get(d.dataId).values,p=l.data.get(f.dataId).values,g=Eu({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),m=l.data.get(g.dataId),v=m.complexTensorInfos.real,y=m.complexTensorInfos.imag,b=l.data.get(v.dataId).values,w=l.data.get(y.dataId).values,[x,$,C]=n(o.shape,s.shape,h,p,b,w),E=l.makeTensorInfo(C,"float32",x),I=l.makeTensorInfo(C,"float32",$),T=Ea({inputs:{real:E,imag:I},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(E),l.disposeIntermediateTensorInfo(I),T}else{const c=l.data.get(o.dataId).values,u=l.data.get(s.dataId).values,d=r||o.dtype,[f,h]=e(o.shape,s.shape,c,u,d);return l.makeTensorInfo(h,d,f)}}}function v3(t){return(e,n,r,i,a,o)=>{const s=bt(e,n),l=de(s),c=s.length,u=ot(s),d=Vr("float32",l),f=Vr("float32",l),h=cf(e,s),p=cf(n,s),g=ac(r,i),m=ac(a,o),v=e.length,y=ot(e),b=n.length,w=ot(n);if(h.length+p.length===0)for(let x=0;x<d.length;x++){const $=x%g.length,C=x%m.length,E=t(g[$*2],g[$*2+1],m[C*2],m[C*2+1]);d[x]=E.real,f[x]=E.imag}else for(let x=0;x<d.length;x++){const $=Of(x,c,u),C=$.slice(-v);h.forEach(k=>C[k]=0);const E=ws(C,v,y),I=$.slice(-b);p.forEach(k=>I[k]=0);const T=ws(I,b,w),N=t(g[E*2],g[E*2+1],m[T*2],m[T*2+1]);d[x]=N.real,f[x]=N.imag}return[d,f,s]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jQ=ar((t,e)=>t+e),IWe=v3((t,e,n,r)=>({real:t+n,imag:e+r})),Kp=Ar(Af,jQ,IWe),NWe={kernelName:Af,backendName:"cpu",kernelFunc:Kp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3(t,e,n,r,i){const a=de(r),o=ui(i,n);for(let s=0;s<t.length;s++){const l=t[s];if(l<0)throw new Error("Input x must be non-negative!");l>=i||(a>0?o[l]+=e[s]:o[l]+=1)}return o}function zQ(t,e,n,r=!1){const i=t.shape[0],a=t.shape[1],o=wt([i,n],e.dtype);for(let s=0;s<i;s++)for(let l=0;l<a;l++){const c=t.get(s,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,s,c):e.size>0?o.set(o.get(s,c)+e.get(s,l),s,c):o.set(o.get(s,c)+1,s,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BQ=ar((t,e)=>t&e),kWe=Ar(fb,BQ),OWe={kernelName:fb,backendName:"cpu",kernelFunc:kWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tl(t){return(e,n,r)=>{const i=qn(n,e.length);for(let a=0;a<e.length;++a)i[a]=t(e[a],r);return i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nn(t,e,n){const r=Tl(e);return Hu(t,r,n)}function Hu(t,e,n){return({inputs:r,attrs:i,backend:a})=>{const{x:o}=r;Je(o,t);const s=a,l=s.data.get(o.dataId).values;let c;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=oc(l)}else c=l;const u=n||o.dtype,d=e(c,u,i);return s.makeTensorInfo(o.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VQ=Tl(t=>Math.ceil(t)),AWe=Hu(Am,VQ),_We={kernelName:Am,backendName:"cpu",kernelFunc:AWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WQ(t,e,n,r){const i=qn(n,de(e));if(r&&n!=="string"){let a=0;t.forEach(o=>{const s=de(o.shape);i.set(o.vals,a),a+=s})}else{let a=0;t.forEach(o=>{const s=n==="string"?oc(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*e[1]+a;for(let d=0;d<o.shape[1];++d)i[u+d]=s[l++]}a+=o.shape[1]})}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UQ=ar((t,e)=>t===e?1:0),HQ=Ar(wb,UQ,null,"bool"),PWe={kernelName:wb,backendName:"cpu",kernelFunc:HQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GQ=Tl(t=>Math.exp(t)),qQ=Hu(Lm,GQ,"float32"),RWe={kernelName:Lm,backendName:"cpu",kernelFunc:qQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KQ=Tl(t=>Math.expm1(t)),DWe=Hu(jm,KQ),FWe={kernelName:jm,backendName:"cpu",kernelFunc:DWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XQ=Tl(t=>Math.floor(t)),MWe=Hu(zm,XQ),LWe={kernelName:zm,backendName:"cpu",kernelFunc:MWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YQ=ar((t,e)=>Math.floor(t/e)),jWe=Ar(Bm,YQ,null,"int32"),zWe={kernelName:Bm,backendName:"cpu",kernelFunc:jWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZQ(t,e,n,r,i,a,o,s,l){const c=wt([r,a],n);for(let u=0;u<r;u++){const d=[];let f=0;for(let h=0;h<i;h++){const p=t[u*i+h];f+=p*o[h],d.push(p)}if(f<0||f>=l/a)throw new Error(`Invalid indices: ${d} does not index into ${s}`);for(let h=0;h<a;h++)c.values[u*a+h]=e.get(...e.indexToLoc(f*a+h))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QQ(t,e,n){const r=wt(n,t.dtype);for(let i=0;i<r.size;++i){const o=r.indexToLoc(i).slice(),s=o[0],l=o[2],c=e.locToIndex([s,l]);o[2]=e.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(r.values[i]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JQ=ar((t,e)=>t>e?1:0),BWe=Ar(Eb,JQ,null,"bool"),VWe={kernelName:Eb,backendName:"cpu",kernelFunc:BWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eJ=ar((t,e)=>t>=e?1:0),WWe=Ar(Vm,eJ,null,"bool"),UWe={kernelName:Vm,backendName:"cpu",kernelFunc:WWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tJ=ar((t,e)=>t<e?1:0),HWe=Ar(Ib,tJ,null,"bool"),GWe={kernelName:Ib,backendName:"cpu",kernelFunc:HWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nJ=ar((t,e)=>t<=e?1:0),qWe=Ar(Nb,nJ,null,"bool"),KWe={kernelName:Nb,backendName:"cpu",kernelFunc:qWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rJ(t,e,n){const r=(e-t)/(n-1),i=ui(n,"float32");i[0]=t;for(let a=1;a<i.length;a++)i[a]=i[a-1]+r;return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iJ=Tl(t=>Math.log(t)),XWe=Hu(qm,iJ),YWe={kernelName:qm,backendName:"cpu",kernelFunc:XWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aJ(t,e,n,r){const i=Vr(r,de(n));for(let a=0;a<i.length;++a){const o=a*e;let s=t[o];for(let l=0;l<e;++l){const c=t[o+l];(Number.isNaN(c)||c>s)&&(s=c)}i[a]=s}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oJ=ar((t,e)=>Math.max(t,e)),ZWe=Ar(Xm,oJ),QWe={kernelName:Xm,backendName:"cpu",kernelFunc:ZWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sJ=ar((t,e)=>Math.min(t,e)),JWe=Ar(Ym,sJ),e6e={kernelName:Ym,backendName:"cpu",kernelFunc:JWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b3=ar((t,e)=>t*e),t6e=v3((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),xT=Ar(Qm,b3,t6e),n6e={kernelName:Qm,backendName:"cpu",kernelFunc:xT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lJ(t,e,n){const r=hc(-1,n);return b3([],e,r,t,n)}function r6e(t){const{inputs:e,backend:n}=t,{x:r}=e;Je(r,"neg");const i=n.data.get(r.dataId).values,[a,o]=lJ(i,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,a)}const i6e={kernelName:jb,backendName:"cpu",kernelFunc:r6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cJ=ar((t,e)=>t!==e?1:0),a6e=Ar(zb,cJ,null,"bool"),o6e={kernelName:zb,backendName:"cpu",kernelFunc:a6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3(t,e,n,r,i){const a=e.length,o=de(e),s=ot(e),l=ot(i),c=Vr(n,de(i));for(let u=0;u<o;++u){const d=Of(u,a,s),f=new Array(d.length);for(let p=0;p<f.length;p++)f[p]=d[r[p]];const h=ws(f,a,l);c[h]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pa(t){const{inputs:e,attrs:n,backend:r}=t,{x:i}=e,{perm:a}=n;Je(i,"transpose");const o=i.shape.length,s=new Array(o);for(let d=0;d<s.length;d++)s[d]=i.shape[a[d]];const l=r.data.get(i.dataId).values,c=x3(l,i.shape,i.dtype,a,s);return{dataId:r.write(c,s,i.dtype),shape:s,dtype:i.dtype}}const s6e={kernelName:jd,backendName:"cpu",kernelFunc:pa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uJ(t,e,n,r){const[i,a]=qr(t,r),o=ca(e,"int32"),s=ui(de(i),o),l=de(a);for(let c=0;c<s.length;++c){const u=c*l;let d=1;for(let f=0;f<l;++f)d*=n[u+f];s[c]=d}return{outVals:s,outShape:i,outDtype:o}}function l6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Je(i,"prod");const s=i.shape.length,l=Tt(a,i.shape),c=Un(l,s);let u=l,d=i;const f=[];c!=null&&(d=pa({inputs:{x:i},backend:n,attrs:{perm:c}}),f.push(d),u=rr(u.length,s));const h=n.data.get(d.dataId).values,{outVals:p,outShape:g,outDtype:m}=uJ(d.shape,d.dtype,h,u);let v=g;return o&&(v=nr(g,l)),f.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(v,m,p)}const c6e={kernelName:Gb,backendName:"cpu",kernelFunc:l6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u6e(t,e,n){t.forEach((r,i)=>{if(r<0||r>=n){const a=Of(i,e.length,ot(e)).join(",");throw new Error(`indices[${a}] = ${r} is not in [0, ${n})`)}})}function d6e(t,e){for(let n=0;n<t.length;++n){const r=t[n],i=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let a=1;a<r.length;++a)if(r[a-1]>r[a])throw new Error("Ragged splits must be sorted in ascending order")}}function f6e(t,e,n,r){const i=[];let a=0;const o=e.length-1+n.length,s=new Array(o).fill(null).map(()=>[0]);d6e(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)s[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let f=0;f<n.length;++f){const h=n[f],p=f+e.length-1;if(p>=0){const g=s[p],m=g[g.length-1]-h[u];for(let v=u;v<d;++v)s[p].push(h[v+1]+m)}u=h[u],d=h[d]}d!==u&&(i.push([u,d]),a+=d-u)}return{outSplits:s,valueSlices:i,numValues:a}}function h6e(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,i=qn("int32",r);e.push(i),t[n].forEach((a,o)=>i[o]=a)}return e}function FV(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function p6e(t,e,n,r,i,a){const o=FV(e,2)[1],s=FV(a,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)i[l*s+d]=t[u*o+d];++l}}function m6e(t,e,n,r,i){const a=e.slice();a[0]=i;const o=qn(n,de(a)),s=t.length,l=s===0?0:s/e[0];return p6e(t,e,r,l,o,a),[o,a]}function dJ(t,e,n,r,i,a,o,s){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(u6e(a,o,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:f}=f6e(a,o,t,c),h=h6e(u),p=m6e(n,r,i,d,f);return[h,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MV=2147483647;function fJ(t,e,n,r,i,a,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const s=e.length===0,l=i.length===0,c=o.length===0,u=[];s||u.push(e[0]),l||u.push(i[0]),c||u.push(o[0]);for(let m=1;m<u.length;++m)if(u[m]!==u[m-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],f=qn("int32",d+1);f[0]=0;for(let m=0;m<d;++m){const v=s?t[0]:t[m],y=l?r[0]:r[m],b=c?a[0]:a[m];if(b===0)throw new Error("Requires delta != 0");let w;if(b>0&&y<v||b<0&&y>v)w=0;else if(w=Math.ceil(Math.abs((y-v)/b)),w>MV)throw new Error(`Requires ((limit - start) / delta) <= ${MV}`);f[m+1]=f[m]+w}const h=f[d],p=qn(n,h);let g=0;for(let m=0;m<d;++m){const v=f[m+1]-f[m];let y=s?t[0]:t[m];const b=c?a[0]:a[m];for(let w=0;w<v;++w)p[g++]=y,y+=b}return[f,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var $o=ps;class R${constructor(e,n,r,i,a,o,s,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=i,this.valuesDType=a,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=qX(u),this.raggedRank=KX(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===$o.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===$o.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case $o.VALUE_ROWIDS:return R$.getMaxWidthValueRowID(n);case $o.ROW_SPLITS:return R$.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${$o[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let i=0;i<n-1;++i){const a=e[i+1]-e[i];a>r&&(r=a)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,i=e[0],a=0;for(let o=1;o<n;++o){const s=e[o];s!==i&&(i=s,a=Math.max(o-r,a),r=o)}return Math.max(n-r,a)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return jV(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;XX(r,n);const i=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=GX(this.raggedRank,i,n);o[0]<0&&(o[0]=e);for(let s=1;s<=this.raggedRank;++s)o[s]<0&&(o[s]=this.getMaxWidth(s));return o}calculateFirstParentOutputIndex(e,n,r){const i=Math.min(e,r),a=[];let o=0;for(let s=0;s<i;++s,o+=n)a.push(o);for(let s=i;s<e;++s)a.push(-1);return j(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,n,r,i){const a=e.length,o=[];for(let s=0;s<a-1;++s){const l=e[s+1]-e[s];let c=Math.min(i,l),u=n[s];u===-1&&(c=0);for(let d=0;d<c;++d)o.push(u),u+=r;for(let d=0;d<l-c;++d)o.push(-1)}if(a>0&&o.length!==e[a-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,i){const a=e.length,o=[];if(a===0)return[];let s=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];o.push(c);for(let u=1;u<a;++u){const d=e[u];if(d===l)c>=0&&(++s,s<i?c+=r:c=-1);else{if(s=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,i){const a=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case $o.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,n,r,i);case $o.ROW_SPLITS:if(a.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(a,n,r,i);default:throw new Error(`Unsupported partition type: ${$o[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case $o.FIRST_DIM_SIZE:return e[0];case $o.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case $o.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${$o[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),i=new Array(this.raggedRank+1);i[i.length-1]=1;for(let l=i.length-2;l>=0;--l)i[l]=i[l+1]*r[l+1];const a=jV(r,!1),o=qn(this.valuesDType,de(a));if(i[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,i[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,i[c],r[c]);this.setOutput(this.raggedRank,l,o,a)}return[a,o]}setOutput(e,n,r,i){if(r.length===0)return;const a=this.values,o=r;let s=i.slice();s=s.slice(e+1);const l=de(s),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const p=this.defaultValueShape;ae(()=>{const g=te(u,p);u=zd(g,s).dataSync()})}let d=0,f=0,h=0;for(let p=0;p<=c;++p){let g=p<c?n[p]:-1;if(g===h){++h;continue}if(f<h){const m=a.subarray(d*l),v=o.subarray(f*l),y=(h-f)*l;LV(v,m,y)}if(p>=c){const m=r.length;g=Math.floor(m/l)}if(g>h)if(this.defaultValue.length===1)o.subarray(h*l,g*l).fill(this.defaultValue[0]),h=g;else for(;g>h;){const m=o.slice(h*l);LV(m,u,l),++h}g<0?(d=p+1,f=h):(d=p,f=h,h=f+1)}}}function LV(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function jV(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function hJ(t,e,n,r,i,a,o,s,l,c){return new R$(t,e,n,r,i,a,o,s,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pJ(t,e,n,r){const i=t===e,a=t<e&&n<0,o=e<t&&n>1;if(i||a||o)return ui(0,r);const s=Math.abs(Math.ceil((e-t)/n)),l=ui(s,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mJ=Tl(t=>1/Math.sqrt(t)),g6e=Hu(ig,mJ),v6e={kernelName:ig,backendName:"cpu",kernelFunc:g6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ad(t,e,n,r,i,a,o,s,l,c){const u=[r/i,i],d=t.values,f=e.values;if(r===0)return wt(n,e.dtype);const h=l instanceof pr?l:wt(u,e.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let p=0;p<a;p++){const g=[];let m=0;for(let v=0;v<o;v++){const y=d[p*o+v];g.push(y),m+=y*s[v]}if(m<0||m>=r/i)throw new Error(`Invalid indices: ${g} does not index into ${n}`);for(let v=0;v<i;v++)c?h.values[m*i+v]+=f[p*i+v]:h.values[m*i+v]=e.rank===0?f[0]:f[p*i+v]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y6e=Tl(t=>1/(1+Math.exp(-t))),gJ=nn(cg,t=>1/(1+Math.exp(-t))),b6e={kernelName:cg,backendName:"cpu",kernelFunc:gJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vJ(t,e,n,r,i){const a=$M(r,e,n),o=de(n),s=ot(r);if(a){const d=CM(e,s);return i==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=i==="string"?oc(t):t,c=wt(r,i,l),u=wt(n,i);for(let d=0;d<u.size;++d){const f=u.indexToLoc(d),h=f.map((p,g)=>p+e[g]);u.set(c.get(...h),...f)}return i==="string"?mY(u.values):u.values}function gf(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,size:o}=r;Je(i,"slice");const[s,l]=aT(i,a,o);wM(i,s,l);const c=n.data.get(i.dataId).values,u=vJ(c,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,u)}const x6e={kernelName:Qb,backendName:"cpu",kernelFunc:gf};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yJ(t,e,n,r,i,a,o){const s=e[0],l=a[0],c=new Array(l),u=new Array(s),d=e[1];if(l===0){if(s!==0)throw new Error(nY(s));const m=qn(n,0),v=qn(i,0);return[m,[0,d],v,c,u]}let f=!0,h=0;const p=new Array(l).fill(0);for(let m=0;m<s;++m){const v=t[m*d];if(v<0)throw new Error(rY(m,v));if(v>=l)throw new Error(iY(m,v,l));++p[v],f=f&&v>=h,h=v}let g=!0;for(let m=0;m<l;++m){const v=p[m]===0;c[m]=v,g=g&&!v,p[m]=Math.max(p[m],1),m>0&&(p[m]+=p[m-1])}if(g&&f){const m=t,v=r;for(let y=0;y<s;++y)u[y]=y;return[m,[s,d],v,c,u]}else{const m=p[l-1],v=qn(n,m*d),y=qn(i,m),b=new Array(l).fill(0);for(let w=0;w<s;++w){const x=t[w*d],$=b[x],C=(x===0?0:p[x-1])+$;b[x]++;for(let E=0;E<d;++E)v[C*d+E]=t[w*d+E];y[C]=r[w],u[w]=C}for(let w=0;w<l;++w)if(b[w]===0){const $=w===0?0:p[w-1];v[$*d+0]=w;for(let C=1;C<d;++C)v[$*d+C]=0;y[$]=o}return[v,[m,d],y,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bJ(t,e,n,r,i){const a=de(r),o=e[0],s=i.length,l=[];let c=1,u=-1;for(let m=0;m<s;++m){const v=i[m];if(v===-1){if(u!==-1)throw new Error(aY(u,m));u=m,l.push(1)}else{if(v<0)throw new Error(oY(m,v));c*=v,l.push(v)}}if(u!==-1){if(c<=0)throw new Error(sY());const m=Math.trunc(a/c);if(c*m!==a)throw new Error(lY(r,l));l[u]=m}if(de(l)!==a)throw new Error(cY(r,l));const f=r.length,h=[];if(f>0){h[f-1]=1;for(let m=f-2;m>=0;--m)h[m]=h[m+1]*r[m+1]}const p=[];if(s>0){p[s-1]=1;for(let m=s-2;m>=0;--m)p[m]=p[m+1]*l[m+1]}const g=qn(n,o*s);for(let m=0;m<o;++m){let v=0;for(let y=0;y<f;++y)v+=t[m*f+y]*h[y];for(let y=0;y<s;++y)g[m*s+y]=Math.trunc(v/p[y]),v%=p[y]}return[g,[o,s],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3(t,e,n,r,i,a=!1,o=0){const s=r.length,l=[e[0],t.length/e[0]],c=l[1],d=s>0?i[s-1]+1:0;if(d<0)throw new Error(QA());const f=e.slice();f[0]=d;const h=f.reduce((b,w)=>b*w,1),p=qn(n,h);if(s===0)return d>0&&p.fill(o),[p,f];if(d<=0)throw new Error(QA());let g=0,m=1,v=0,y=i[g];for(;;){let b=0;if(m<s){if(b=i[m],y===b){++m;continue}if(y>=b)throw new Error(uY())}if(y<0||y>=d)throw new Error(dY(y,d));y>v&&p.fill(o,v*c,y*c);for(let w=g;w<m;++w){const x=r[w];if(x<0||x>=l[0])throw new Error(fY(w,r[w],l[0]));for(let $=0;$<c;$++)p[y*c+$]+=t[x*c+$]}if(a)for(let w=0;w<c;w++)p[y*c+w]/=m-g;if(g=m,++m,v=y+1,y=b,m>s)break}return v<d&&p.fill(o,v*c,d*c),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w6e=Tl(t=>Math.sqrt(t)),S6e=nn(dg,t=>Math.sqrt(t)),$6e={kernelName:dg,backendName:"cpu",kernelFunc:S6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xJ=ar((t,e)=>{const n=t-e;return n*n}),C6e=Ar(fg,xJ),E6e={kernelName:fg,backendName:"cpu",kernelFunc:C6e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wJ=Tl((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=e;return t.replace(new RegExp(n,r?"g":""),i)}),T6e=Hu(rx,wJ),I6e={kernelName:rx,backendName:"cpu",kernelFunc:T6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SJ(t,e,n,r){const i=wt(t,e.dtype);for(let a=0;a<i.size;a++){const o=i.indexToLoc(a),s=new Array(o.length);for(let l=0;l<s.length;l++)s[l]=o[l]*n[l]+r[l];i.set(e.get(...s),...o)}return i}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N6e{constructor(e,n,r,i,a,o){this.separator=ll(e),this.nGramWidths=n,this.leftPad=ll(r),this.rightPad=ll(i),this.padWidth=a,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,i,a,o){for(let s=0;s<a;++s){const l=this.getPadWidth(o),c=Math.max(0,l-s),u=Math.max(0,l-(a-(s+1))),d=o-(c+u),f=n+(c>0?0:s-l);let h=0;h+=c*this.leftPad.length;for(let y=0;y<d;++y)h+=e[f+y].length;h+=u*this.rightPad.length;const p=c+u+d-1;h+=p*this.separator.length,r[i+s]=new Uint8Array(h);const g=r[i+s];let m=0;const v=y=>y.forEach(b=>g[m++]=b);for(let y=0;y<c;++y)v(this.leftPad),v(this.separator);for(let y=0;y<d-1;++y)v(e[f+y]),v(this.separator);if(d>0){v(e[f+d-1]);for(let y=0;y<u;++y)v(this.separator),v(this.rightPad)}else{for(let y=0;y<u-1;++y)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(e,n){const r=e.length,i=n.length;if(i>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<i;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const a=i-1,o=qn("int32",i);if(r===0||i===0){const l=new Array(r);for(let c=0;c<=a;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=a;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),o[l]=o[l-1]+u}const s=new Array(o[a]);for(let l=0;l<a;++l){const c=n[l];let u=o[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],h=this.getNumNGrams(f,d);this.createNGrams(e,c,s,u,h,d),u+=h}),this.preserveShort&&u===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth;this.createNGrams(e,c,s,u,1,f)}}return[s,o]}}function $J(t,e,n,r,i,a,o,s){return new N6e(n,r,i,a,o,s).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k6e(t,e,n,r){if(!t.length)return;if(e.length===0){for(let a=0;a<t.length;++a)r.push(t.subarray(a,a+1));return}if(e.length===1){const a=e[0];let o=t.indexOf(a);for(;o!==-1;){const s=t.subarray(0,o);(!n||s.length!==0)&&r.push(s),t=t.subarray(o+1),o=t.indexOf(a)}(!n||t.length!==0)&&r.push(t);return}let i=0;for(let a=0;a<t.length+1;a++)if(a===t.length||e.indexOf(t[a])!==-1){const o=t.subarray(i,a);(!n||o.length!==0)&&r.push(o),i=a+1}}function CJ(t,e,n){const r=t.length,i=[];let a=0,o=0;const s=new Array(r);for(let f=0;f<r;++f){const h=i.length;k6e(t[f],e,n,i);const p=i.length-h;s[f]=p,a+=p,o=Math.max(o,p)}const l=qn("int32",a*2),c=new Array(a),u=[r,o];let d=0;for(let f=0;f<r;++f)for(let h=0;h<s[f];++h)l[d*2]=f,l[d*2+1]=h,c[d]=i[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EJ(t,e){const n=qn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=tK(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TJ=ar((t,e)=>t-e),O6e=v3((t,e,n,r)=>({real:t-n,imag:e-r})),S3=Ar(hg,TJ,O6e),A6e={kernelName:hg,backendName:"cpu",kernelFunc:S3};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IJ(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=wt(n,t.dtype);for(let i=0;i<r.values.length;++i){const a=r.indexToLoc(i),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=a[l]%t.shape[l];const s=t.locToIndex(o);r.values[i]=t.values[s]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pv=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function NJ(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const s=r-n+1,l=e-n+1,c=Math.log(s),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(s-u)/s)*Math.sign(l-s/2),f=Math.max(n,Math.floor(e-l*u/s+d)),h=Math.min(r,Math.floor(e+(s-l)*u/s+d));NJ(t,e,f,h)}const i=t[e];let a=n,o=r;for(Fl(t,n,e),Pv(t[r],i)>0&&Fl(t,n,r);a<o;){for(Fl(t,a,o),a++,o--;Pv(t[a],i)<0;)a=a+1;for(;Pv(t[o],i)>0;)o=o-1}Pv(t[n],i)===0?Fl(t,n,o):(o=o+1,Fl(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function kJ(t,e,n,r,i){const a=e[e.length-1],[o,s]=[t.length/a,a],l=Vr(n,o*r),c=Vr("int32",o*r);for(let d=0;d<o;d++){const f=d*s,h=t.subarray(f,f+s);let p=new Array(h.length);h.forEach((y,b)=>p[b]={value:y,index:b}),r<p.length&&(NJ(p,r),p=p.slice(0,r)),i&&p.sort(Pv);const g=d*r,m=l.subarray(g,g+r),v=c.subarray(g,g+r);for(let y=0;y<r;y++)m[y]=p[y].value,v[y]=p[y].index}const u=e.slice();return u[u.length-1]=r,[wt(u,n,l),wt(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OJ(t,e,n,r){const i=Tt(e,n)[0],a=[1,n[0],1];for(let p=0;p<i;p++)a[0]*=n[p];a[1]=n[i];for(let p=i+1;p<n.length;p++)a[2]*=n[p];const o=new Map,s=new Int32Array(n[i]),l=new pr(a,r,t),c=[],u=a[0]===1&&a[2]===1;for(let p=0;p<n[i];p++){let g;if(u)g=t[p].toString();else{const v=[];for(let y=0;y<a[0];y++)for(let b=0;b<a[2];b++)v.push(l.get(y,p,b));g=v.join(",")}const m=o.get(g);if(m!=null)s[p]=m;else{const v=o.size;o.set(g,v),s[p]=v,c.push(p)}}const d=a.slice();d[1]=o.size;const f=new pr(d,r);c.forEach((p,g)=>{for(let m=0;m<a[0];m++)for(let v=0;v<a[2];v++)f.set(l.get(m,p,v),m,g,v)});const h=n.slice();return h[i]=d[1],{outputValues:f.values,outputShape:h,indices:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _6e=Object.freeze(Object.defineProperty({__proto__:null,addImpl:jQ,bincountImpl:y3,bincountReduceImpl:zQ,bitwiseAndImpl:BQ,castImpl:LQ,ceilImpl:VQ,concatImpl:WQ,equalImpl:UQ,expImpl:GQ,expm1Impl:KQ,floorDivImpl:YQ,floorImpl:XQ,gatherNdImpl:ZQ,gatherV2Impl:QQ,greaterEqualImpl:eJ,greaterImpl:JQ,lessEqualImpl:nJ,lessImpl:tJ,linSpaceImpl:rJ,logImpl:iJ,maxImpl:aJ,maximumImpl:oJ,minimumImpl:sJ,multiplyImpl:b3,negImpl:lJ,notEqualImpl:cJ,prodImpl:uJ,raggedGatherImpl:dJ,raggedRangeImpl:fJ,raggedTensorToTensorImpl:hJ,rangeImpl:pJ,rsqrtImpl:mJ,scatterImpl:Ad,sigmoidImpl:y6e,simpleAbsImpl:MQ,sliceImpl:vJ,sparseFillEmptyRowsImpl:yJ,sparseReshapeImpl:bJ,sparseSegmentReductionImpl:w3,sqrtImpl:w6e,squaredDifferenceImpl:xJ,staticRegexReplaceImpl:wJ,stridedSliceImpl:SJ,stringNGramsImpl:$J,stringSplitImpl:CJ,stringToHashBucketFastImpl:EJ,subImpl:TJ,tileImpl:IJ,topKImpl:kJ,transposeImpl:x3,uniqueImpl:OJ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */YD("cpu",()=>new bT,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AJ=nn(Fm,t=>t>=0?t:Math.exp(t)-1),P6e={kernelName:Fm,backendName:"cpu",kernelFunc:AJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _J(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:a}=r;Je([i],"leakyRelu");const o=de(i.shape),s=n.data.get(i.dataId).values,l=Vr("float32",o);for(let c=0;c<s.length;c++)l[c]=s[c]<0?a*s[c]:s[c];return n.makeTensorInfo(i.shape,"float32",l)}const R6e={kernelName:Tb,backendName:"cpu",kernelFunc:_J};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D6e=ar((t,e)=>t<0?e*t:t);function PJ(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e;Je([r,i],"prelu");const a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,[s,l]=D6e(r.shape,i.shape,a,o,"float32");return n.makeTensorInfo(l,"float32",s)}const F6e={kernelName:Hb,backendName:"cpu",kernelFunc:PJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RJ=nn(tg,t=>Math.max(0,t)),M6e={kernelName:tg,backendName:"cpu",kernelFunc:RJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DJ=nn(ng,t=>Math.min(Math.max(0,t),6)),L6e={kernelName:ng,backendName:"cpu",kernelFunc:DJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D$(t,e,n,r,i){if(n==="linear")return xl({inputs:{x:e},backend:t});if(n==="relu")return RJ({inputs:{x:e},backend:t});if(n==="elu")return AJ({inputs:{x:e},backend:t});if(n==="relu6")return DJ({inputs:{x:e},backend:t});if(n==="prelu")return PJ({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return _J({inputs:{x:e},backend:t,attrs:{alpha:i}});if(n==="sigmoid")return gJ({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xn(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:a}=r,o=de(i.shape),s=jD(a,o),l=de(s);j(o===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${i.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=s,d.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}const j6e={kernelName:qb,backendName:"cpu",kernelFunc:xn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FJ(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a}=e,{transposeA:o,transposeB:s}=r;Je([i,a],"matMul");const l=i.shape.length,c=a.shape.length,u=o?i.shape[l-2]:i.shape[l-1],d=s?a.shape[c-1]:a.shape[c-2],f=o?i.shape[l-1]:i.shape[l-2],h=s?a.shape[c-2]:a.shape[c-1],p=i.shape.slice(0,-2),g=a.shape.slice(0,-2),m=de(p),v=de(g),b=bt(i.shape.slice(0,-2),a.shape.slice(0,-2)).concat([f,h]);j(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${i.shape} and ${a.shape} and transposeA=${o} and transposeB=${s} must match.`);const w=o?[m,u,f]:[m,f,u],x=s?[v,h,d]:[v,d,h],$=xn({inputs:{x:i},backend:n,attrs:{shape:w}}),C=xn({inputs:{x:a},backend:n,attrs:{shape:x}}),E=o?$.shape[1]:$.shape[2],I=o?$.shape[2]:$.shape[1],T=s?C.shape[1]:C.shape[2],N=Math.max(m,v),k=n.data.get($.dataId).values,O=n.data.get(C.dataId).values,_=ot($.shape),P=ot(C.shape),[D,L,R]=o?[_[0],1,_[1]]:[_[0],_[1],1],[F,V,H]=s?[1,P[1],P[0]]:[P[1],1,P[0]],U=I*T,W=wt([N,I,T],$.dtype),G=W.values,q=n.blockSize;for(let X=0;X<N;X++){const re=X%m,ce=X%v;for(let ee=0;ee<I;ee+=q){const se=Math.min(ee+q,I);for(let ue=0;ue<T;ue+=q){const Q=Math.min(ue+q,T);for(let ye=0;ye<E;ye+=q){const le=Math.min(ye+q,E);for(let xe=ee;xe<se;xe++)for(let be=ue;be<Q;be++){let $e=0;for(let Ne=ye;Ne<le;Ne++){const Ve=k[re*D+xe*L+Ne*R],Pe=O[Ne*F+be*V+ce*H];$e+=Ve*Pe}G[X*U+(xe*T+be)]+=$e}}}}}return n.disposeIntermediateTensorInfo($),n.disposeIntermediateTensorInfo(C),n.makeTensorInfo(b,W.dtype,W.values)}const z6e={kernelName:ub,backendName:"cpu",kernelFunc:FJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B6e(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let f,h,p;const g=[];f=FJ({inputs:{a:i,b:a},attrs:{transposeA:l,transposeB:c},backend:n}),o&&(h=Kp({inputs:{a:f,b:o},backend:n}),g.push(f),f=h),u&&(p=D$(n,f,u,s,d),g.push(f),f=p);for(const v of g)n.disposeIntermediateTensorInfo(v);return f}const V6e={kernelName:c0,backendName:"cpu",kernelFunc:B6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W6e=nn($m,t=>Math.acos(t)),U6e={kernelName:$m,backendName:"cpu",kernelFunc:W6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H6e=nn(Cm,t=>Math.acosh(t)),G6e={kernelName:Cm,backendName:"cpu",kernelFunc:H6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q6e(t){const{inputs:e,backend:n}=t,r=e;Je(e,"addN");const i=r.map(s=>n.data.get(s.dataId).values),a=wt(r[0].shape,r[0].dtype),o=a.values;for(let s=0;s<r.length;s++){const l=i[s];for(let c=0;c<o.length;c++)o[c]+=l[c]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}const K6e={kernelName:ab,backendName:"cpu",kernelFunc:q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Je(i,"all");const s=Tt(a,i.shape);let l=s;const c=Un(l,i.shape.length);let u=i;c!=null&&(u=pa({inputs:{x:i},backend:n,attrs:{perm:c}}),l=rr(l.length,i.shape.length)),pi("all",l,u.shape.length);const[d,f]=qr(u.shape,l),h=de(f),p=ui(de(d),u.dtype),g=n.data.get(u.dataId).values;for(let v=0;v<p.length;++v){const y=v*h;let b=g[y];for(let w=0;w<h;++w){const x=g[y+w];b=b&&x}p[v]=b}c!=null&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(d,u.dtype,p);if(o){const v=nr(d,s),y=xn({inputs:{x:m},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(m),y}return m}const Y6e={kernelName:p2,backendName:"cpu",kernelFunc:X6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Je(i,"any");const s=Tt(a,i.shape);let l=s;const c=Un(l,i.shape.length);let u=i;c!=null&&(u=pa({inputs:{x:i},backend:n,attrs:{perm:c}}),l=rr(l.length,i.shape.length)),pi("any",l,u.shape.length);const[d,f]=qr(u.shape,l),h=de(f),p=ui(de(d),u.dtype),g=n.data.get(u.dataId).values;for(let v=0;v<p.length;++v){const y=v*h;let b=g[y];for(let w=0;w<h;++w){const x=g[y+w];b=b||x}p[v]=b}c!=null&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(d,u.dtype,p);if(o){const v=nr(d,s),y=xn({inputs:{x:m},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(m),y}return m}const Q6e={kernelName:m2,backendName:"cpu",kernelFunc:Z6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;Je(i,"argMax");let o=Tt(a,i.shape);const s=Un(o,i.shape.length);let l=i;const c=[];s!=null&&(l=pa({inputs:{x:i},backend:n,attrs:{perm:s}}),c.push(l),o=rr(o.length,l.shape.length)),o=[o[0]],pi("argMax",o,l.shape.length);const[u,d]=qr(l.shape,o),f=de(u),h=ui(f,"int32"),p=de(d),g=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const v=m*p;let y=g[v],b=0;for(let w=0;w<p;++w){const x=g[v+w];x>y&&(y=x,b=w)}h[m]=b}return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(u,"int32",h)}const eUe={kernelName:ob,backendName:"cpu",kernelFunc:J6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;Je(i,"argMin");let o=Tt(a,i.shape);const s=Un(o,i.shape.length);let l=i;const c=[];s!=null&&(l=pa({inputs:{x:i},backend:n,attrs:{perm:s}}),c.push(l),o=rr(o.length,l.shape.length)),o=[o[0]],pi("argMin",o,l.shape.length);const[u,d]=qr(l.shape,o),f=de(u),h=ui(f,"int32"),p=de(d),g=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const v=m*p;let y=g[v],b=0;for(let w=0;w<p;++w){const x=g[v+w];x<y&&(y=x,b=w)}h[m]=b}return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(u,"int32",h)}const nUe={kernelName:sb,backendName:"cpu",kernelFunc:tUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rUe=nn(Em,t=>Math.asin(t)),iUe={kernelName:Em,backendName:"cpu",kernelFunc:rUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aUe=nn(Tm,t=>Math.asinh(t)),oUe={kernelName:Tm,backendName:"cpu",kernelFunc:aUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sUe=nn(Im,t=>Math.atan(t)),lUe={kernelName:Im,backendName:"cpu",kernelFunc:sUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cUe=ar((t,e)=>Math.atan2(t,e)),uUe=Ar(km,cUe),dUe={kernelName:km,backendName:"cpu",kernelFunc:uUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fUe=nn(Nm,t=>Math.atanh(t)),hUe={kernelName:Nm,backendName:"cpu",kernelFunc:fUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3(t,e,n,r,i,a){const o=i.strideHeight,s=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,u=i.effectiveFilterHeight,d=i.effectiveFilterWidth,f=i.padInfo.top,h=i.padInfo.left,p=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=wt(i.outShape,n),m=g.values,v=i.outShape[1]*i.outShape[2]*i.outShape[3],y=i.outShape[2]*i.outShape[3],b=i.outShape[3];for(let w=0;w<i.batchSize;++w){const x=w*v,$=w*r[0];for(let C=0;C<i.inChannels;++C)for(let E=0;E<i.outHeight;++E){const I=E*o-f,T=Math.max(0,I),N=Math.min(i.inHeight,u+I),k=x+E*y;for(let O=0;O<i.outWidth;++O){const _=O*s-h,P=Math.max(0,_),D=Math.min(i.inWidth,d+_);let L=p,R=0,F=0;for(let H=T;H<N;H+=l){const U=$+H*r[1];for(let W=P;W<D;W+=c){const G=U+W*r[2],q=t[G+C];a==="max"&&q>L?L=q:a==="avg"&&(R+=q,F++)}if(isNaN(L))break}const V=k+O*b+C;m[V]=a==="avg"?R/F:L}}}return g}function MJ(t,e,n,r,i=!1,a=!1){const o=wt(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,g=wt(e,n,t);for(let m=0;m<r.batchSize;++m)for(let v=0;v<r.inChannels;++v)for(let y=0;y<r.outHeight;++y){const b=y*s-h;let w=b;for(;w<0;)w+=c;const x=Math.min(r.inHeight,d+b);for(let $=0;$<r.outWidth;++$){const C=$*l-p;let E=C;for(;E<0;)E+=u;const I=Math.min(r.inWidth,f+C);let T=Number.NEGATIVE_INFINITY,N=-1;for(let k=w;k<x;k+=c){const O=k-b;for(let _=E;_<I;_+=u){const P=_-C,D=g.get(m,k,_,v);D>T&&(T=D,i?N=a?((m*r.inHeight+k)*r.inWidth+_)*r.inChannels+v:(k*r.inWidth+_)*r.inChannels+v:N=O*f+P)}}o.set(N,m,y,$,v)}}return o}function LJ(t,e,n,r,i,a){const o=i.strideDepth,s=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,u=i.dilationHeight,d=i.dilationWidth,f=i.effectiveFilterDepth,h=i.effectiveFilterHeight,p=i.effectiveFilterWidth,g=i.padInfo.front,m=i.padInfo.top,v=i.padInfo.left,y=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=wt(i.outShape,n),w=b.values,x=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],$=i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[3]*i.outShape[4],E=i.outShape[4];for(let I=0;I<i.batchSize;++I){const T=I*x,N=I*r[0];for(let k=0;k<i.inChannels;++k)for(let O=0;O<i.outDepth;++O){const _=O*o-g;let P=_;for(;P<0;)P+=c;const D=Math.min(i.inDepth,f+_),L=T+O*$;for(let R=0;R<i.outHeight;++R){const F=R*s-m;let V=F;for(;V<0;)V+=u;const H=Math.min(i.inHeight,h+F),U=L+R*C;for(let W=0;W<i.outWidth;++W){const G=W*l-v;let q=G;for(;q<0;)q+=d;const X=Math.min(i.inWidth,p+G),re=U+W*E;let ce=y,ee=0,se=0;for(let Q=P;Q<D;Q+=c){const ye=N+Q*r[1];for(let le=V;le<H;le+=u){const xe=ye+le*r[2];for(let be=q;be<X;be+=d){const $e=xe+be*r[3],Ne=t[$e+k];if(a==="max"&&Ne>ce?ce=Ne:a==="avg"&&(ee+=Ne,se++),isNaN(ce))break}if(isNaN(ce))break}if(isNaN(ce))break}const ue=re+k;w[ue]=a==="avg"?ee/Math.max(se,1):ce}}}}return b}function pUe(t,e){const n=wt(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,a=e.strideWidth,o=e.dilationDepth,s=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,f=e.padInfo.front,h=e.padInfo.top,p=e.padInfo.left;for(let g=0;g<e.batchSize;++g)for(let m=0;m<e.inChannels;++m)for(let v=0;v<e.outDepth;++v){const y=v*r-f;let b=y;for(;b<0;)b+=o;const w=Math.min(e.inDepth,c+y);for(let x=0;x<e.outHeight;++x){const $=x*i-h;let C=$;for(;C<0;)C+=s;const E=Math.min(e.inHeight,u+$);for(let I=0;I<e.outWidth;++I){const T=I*a-p;let N=T;for(;N<0;)N+=l;const k=Math.min(e.inWidth,d+T);let O=Number.NEGATIVE_INFINITY,_=-1;for(let P=b;P<w;P+=o){const D=P-y;for(let L=C;L<E;L+=s){const R=L-$;for(let F=N;F<k;F+=l){const V=F-T,H=t.get(g,P,L,F,m);H>=O&&(O=H,_=D*u*d+R*u+V)}}}n.set(_,g,v,x,I,m)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Je(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r,c=1;j(hi(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Yo(i.shape,a,o,c,s,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&Nt(u.inShape,u.outShape))d=xl({inputs:{x:i},backend:n});else{const f=n.data.get(i.dataId).values,h=ot(i.shape),p=$3(f,i.shape,i.dtype,h,u,"avg");d=n.makeTensorInfo(u.outShape,i.dtype,p.values)}return d}const gUe={kernelName:lb,backendName:"cpu",kernelFunc:mUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:l,dataFormat:c}=r;Je(i,"avgPool3d");const u=pc(i.shape,a,o,1,s,l,c),d=n.data.get(i.dataId).values,f=LJ(d,i.shape,i.dtype,ot(i.shape),u,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const yUe={kernelName:cb,backendName:"cpu",kernelFunc:vUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:c}=r;Je([i,a],"avgPool3DGrad");const u=pc(a.shape,o,s,1,l,c),d=u.strideDepth,f=u.strideHeight,h=u.strideWidth,p=u.filterDepth,g=u.filterHeight,m=u.filterWidth,v=u.dilationDepth,y=u.dilationHeight,b=u.dilationWidth,w=u.effectiveFilterDepth,x=u.effectiveFilterHeight,$=u.effectiveFilterWidth,C=w-1-u.padInfo.front,E=$-1-u.padInfo.left,I=x-1-u.padInfo.top,T=wt(a.shape,"float32"),N=1/(p*g*m),k=n.bufferSync(i);for(let O=0;O<u.batchSize;++O)for(let _=0;_<u.inChannels;++_)for(let P=0;P<u.inDepth;++P)for(let D=0;D<u.inHeight;++D)for(let L=0;L<u.inWidth;++L){const R=P-C,F=D-I,V=L-E;let H=0;for(let U=0;U<w;U+=v){const W=(R+U)/d;if(!(W<0||W>=u.outDepth||Math.floor(W)!==W))for(let G=0;G<x;G+=y){const q=(F+G)/f;if(!(q<0||q>=u.outHeight||Math.floor(q)!==q))for(let X=0;X<$;X+=b){const re=(V+X)/h;if(re<0||re>=u.outWidth||Math.floor(re)!==re)continue;const ce=k.get(O,W,q,re,_);H+=ce}}}T.set(H*N,O,P,D,L,_)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const xUe={kernelName:v2,backendName:"cpu",kernelFunc:bUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a;Je([i,a],"avgPoolGrad");const{filterSize:s,strides:l,pad:c}=r,u=Yo(o.shape,s,l,1,c),d=u.strideHeight,f=u.strideWidth,h=u.filterHeight,p=u.filterWidth,g=u.dilationHeight,m=u.dilationWidth,v=u.effectiveFilterHeight,y=u.effectiveFilterWidth,b=y-1-u.padInfo.left,w=v-1-u.padInfo.top,x=wt(o.shape,"float32"),$=1/(h*p),C=n.data.get(i.dataId).values,E=wt(i.shape,"float32",C);for(let I=0;I<u.batchSize;++I)for(let T=0;T<u.inChannels;++T)for(let N=0;N<u.inHeight;++N)for(let k=0;k<u.inWidth;++k){const O=N-w,_=k-b;let P=0;for(let D=0;D<v;D+=g){const L=(O+D)/d;if(!(L<0||L>=u.outHeight||Math.floor(L)!==L))for(let R=0;R<y;R+=m){const F=(_+R)/f;if(F<0||F>=u.outWidth||Math.floor(F)!==F)continue;const V=E.get(I,L,F,T);P+=V}}x.set(P*$,I,N,k,T)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const SUe={kernelName:g2,backendName:"cpu",kernelFunc:wUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ue(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,scale:a,offset:o,mean:s,variance:l}=e;j(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),j(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),j(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Je([i,s,l,a,o],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(i.dataId).values,d=n.data.get(s.dataId).values,f=n.data.get(l.dataId).values,h=a?n.data.get(a.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),g=new Float32Array(u.length),m=p.length,v=h.length,y=f.length,b=d.length;let w=0,x=0,$=0,C=0;for(let E=0;E<u.length;++E)g[E]=p[w++]+(u[E]-d[x++])*h[$++]/Math.sqrt(f[C++]+c),w>=m&&(w=0),x>=b&&(x=0),$>=v&&($=0),C>=y&&(C=0);return n.makeTensorInfo(i.shape,i.dtype,g)}const CUe={kernelName:$b,backendName:"cpu",kernelFunc:$Ue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,crops:o}=r;Je([i],"batchToSpaceND");const s=a.reduce((v,y)=>v*y),l=Ix(i.shape,a,s),c=Nx(l.length,a.length),u=kx(i.shape,a,s),d=OM(o,a.length),f=AM(u,o,a.length),h=xn({inputs:{x:i},backend:n,attrs:{shape:l}}),p=pa({inputs:{x:h},backend:n,attrs:{perm:c}}),g=xn({inputs:{x:p},backend:n,attrs:{shape:u}}),m=gf({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),m}const TUe={kernelName:db,backendName:"cpu",kernelFunc:EUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o}=r,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,c=y3(s,l,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,c)}const NUe={kernelName:y2,backendName:"cpu",kernelFunc:IUe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kUe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,a=n.data.get(r.dataId).values,o=n.data.get(i.dataId).values,s=bt(Array.from(a),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const OUe={kernelName:b2,backendName:"cpu",kernelFunc:kUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AUe=nn(_m,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),_Ue={kernelName:_m,backendName:"cpu",kernelFunc:AUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PUe=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(de(e.shape)),i=n.data.get(e.dataId),a=i.complexTensorInfos.real,o=i.complexTensorInfos.imag,s=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values;for(let c=0;c<s.length;c++){const u=s[c],d=l[c];r[c]=Math.hypot(u,d)}return n.makeOutput(r,e.shape,"float32")},RUe={kernelName:hb,backendName:"cpu",kernelFunc:PUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xp(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,a)}const DUe={kernelName:j2,backendName:"cpu",kernelFunc:Xp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yp(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,a=Tt(i,e[0].shape)[0],o=e.map(g=>g.shape);IM(o,a);let s=ul(e.map(g=>g.shape),a);if(de(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(g=>de(g.shape)>0);if(l.length===1)return xl({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const g=l.map(w=>mf({inputs:{input:w},backend:n})),m=l.map(w=>Xp({inputs:{input:w},backend:n})),v=Yp({inputs:g,backend:n,attrs:{axis:a}}),y=Yp({inputs:m,backend:n,attrs:{axis:a}}),b=Ea({inputs:{real:v,imag:y},backend:n});return g.forEach(w=>n.disposeIntermediateTensorInfo(w)),m.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),b}const c=l.map(g=>{const v=[-1,de(g.shape.slice(a))];return xn({inputs:{x:g},backend:n,attrs:{shape:v}})}),u=c.map(g=>({vals:n.data.get(g.dataId).values,shape:g.shape}));s=ul(c.map(g=>g.shape),1);const d=c[0].shape[0]===1,f=WQ(u,s,e[0].dtype,d),h=ul(l.map(g=>g.shape),a),p=n.makeTensorInfo(h,e[0].dtype,f);return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),p}const FUe={kernelName:pb,backendName:"cpu",kernelFunc:Yp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dataFormat:l,dilations:c,dimRoundingMode:u}=r;Je([i,a],"conv2d");const d=mc(l),f=Gr(i.shape,a.shape,o,c,s,u,!1,d),h=f.filterHeight,p=f.filterWidth,g=f.dilationHeight,m=f.dilationWidth,v=f.padInfo.left,y=f.padInfo.top,b=f.dataFormat==="channelsLast",w=new pr(f.outShape,i.dtype),x=ot(i.shape),$=ot(a.shape),C=x[0],E=b?x[1]:x[2],I=b?x[2]:1,T=b?1:x[1],N=w.strides[0],k=b?w.strides[1]:w.strides[2],O=b?w.strides[2]:1,_=b?1:w.strides[1],P=n.data.get(i.dataId).values,D=n.data.get(a.dataId).values,L=w.values;for(let R=0;R<f.batchSize;++R){const F=R*C,V=R*N;for(let H=0;H<f.outHeight;++H){const U=V+H*k,W=H*f.strideHeight-y;for(let G=0;G<h;++G){const q=W+G*g;if(q<0||q>=f.inHeight)continue;const X=G*$[0],re=F+q*E;for(let ce=0;ce<f.outWidth;++ce){const ee=U+ce*O,se=ce*f.strideWidth-v;for(let ue=0;ue<p;++ue){const Q=se+ue*m;if(Q<0||Q>=f.inWidth)continue;const ye=X+ue*$[1],le=re+Q*I;let xe=ye;for(let be=0;be<f.inChannels;++be){const $e=P[le+be*T];for(let Ne=0;Ne<f.outChannels;++Ne)L[ee+Ne*_]+=$e*D[xe+Ne];xe+=f.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,L)}const MUe={kernelName:mb,backendName:"cpu",kernelFunc:jJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;Je([i,a],"conv2dBackpropFilter");const d=mc(l),f=Gr(i.shape,u,o,1,s,c,!1,d),{strideHeight:h,strideWidth:p,filterHeight:g,filterWidth:m}=f,v=f.dataFormat==="channelsLast",y=new pr(f.filterShape,"float32"),b=f.padInfo.left,w=f.padInfo.top,x=n.data.get(i.dataId).values,$=n.data.get(a.dataId).values,C=new pr(i.shape,i.dtype,x),E=new pr(a.shape,a.dtype,$);for(let I=0;I<g;++I){const T=Math.max(0,Math.ceil((w-I)/h)),N=Math.min(f.outHeight,(f.inHeight+w-I)/h);for(let k=0;k<m;++k){const O=Math.max(0,Math.ceil((b-k)/p)),_=Math.min(f.outWidth,(f.inWidth+b-k)/p);for(let P=0;P<f.inChannels;++P)for(let D=0;D<f.outChannels;++D){let L=0;for(let R=0;R<f.batchSize;++R)for(let F=T;F<N;++F){const V=I+F*h-w;for(let H=O;H<_;++H){const U=k+H*p-b;v?L+=C.get(R,V,U,P)*E.get(R,F,H,D):L+=C.get(R,P,V,U)*E.get(R,D,F,H)}}y.set(L,I,k,P,D)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const jUe={kernelName:w2,backendName:"cpu",kernelFunc:LUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{inputShape:o,strides:s,pad:l,dataFormat:c,dimRoundingMode:u}=r;Je([i,a],"conv2dBackpropInput");const d=ot(a.shape),f=ot(i.shape);let h=mc(c);const p=Gr(o,a.shape,s,1,l,u,!1,h),g=new pr(p.inShape,"float32"),m=g.values,v=n.data.get(i.dataId).values,y=n.data.get(a.dataId).values,[b,w,x]=d,{batchSize:$,filterHeight:C,filterWidth:E,inChannels:I,inHeight:T,inWidth:N,outChannels:k,outHeight:O,outWidth:_,strideHeight:P,strideWidth:D}=p;h=p.dataFormat;const L=C-1-p.padInfo.top,R=E-1-p.padInfo.left,F=h==="channelsLast",V=g.strides[0],H=F?g.strides[1]:g.strides[2],U=F?g.strides[2]:1,W=F?1:g.strides[1],G=f[0],q=F?f[1]:f[2],X=F?f[2]:1,re=F?1:f[1];for(let ce=0;ce<$;++ce)for(let ee=0;ee<I;++ee)for(let se=0;se<T;++se){const ue=se-L,Q=Math.max(0,Math.ceil(ue/P)),ye=Math.min(O,(C+ue)/P);for(let le=0;le<N;++le){const xe=le-R,be=Math.max(0,Math.ceil(xe/D)),$e=Math.min(_,(E+xe)/D);let Ne=0;for(let Pe=Q;Pe<ye;++Pe){const ke=Pe*P-ue;for(let fe=be;fe<$e;++fe){const pe=fe*D-xe,Me=G*ce+q*Pe+X*fe,He=b*(C-1-ke)+w*(E-1-pe)+x*ee;for(let je=0;je<k;++je){const pt=v[Me+re*je],ut=y[He+je];Ne+=pt*ut}}}const Ve=V*ce+H*se+U*le+W*ee;m[Ve]=Ne}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const BUe={kernelName:gb,backendName:"cpu",kernelFunc:zUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l}=r;Je([i,a],"conv3d");const c=Lu(i.shape,a.shape,o,l,s),{filterDepth:u,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:p,dilationWidth:g,padInfo:m}=c,v=m.front,y=m.left,b=m.top,w=new pr(c.outShape,i.dtype),x=n.data.get(i.dataId).values,$=n.data.get(a.dataId).values,C=w.values,E=ot(i.shape),I=ot(a.shape);for(let T=0;T<c.batchSize;++T){const N=T*E[0],k=T*w.strides[0];for(let O=0;O<c.outDepth;++O){const _=k+O*w.strides[1],P=O*c.strideDepth-v;for(let D=0;D<u;++D){const L=P+D*h;if(L<0||L>=c.inDepth)continue;const R=D*I[0],F=N+L*E[1];for(let V=0;V<c.outHeight;++V){const H=_+V*w.strides[2],U=V*c.strideHeight-b;for(let W=0;W<d;++W){const G=U+W*p;if(G<0||G>=c.inHeight)continue;const q=R+W*I[1],X=F+G*E[2];for(let re=0;re<c.outWidth;++re){const ce=H+re*c.outChannels,ee=re*c.strideWidth-y;for(let se=0;se<f;++se){const ue=ee+se*g;if(ue<0||ue>=c.inWidth)continue;const Q=q+se*I[2],ye=X+ue*c.inChannels;let le=Q;for(let xe=0;xe<c.inChannels;++xe){const be=x[ye+xe];for(let $e=0;$e<c.outChannels;++$e)C[ce+$e]+=be*$[le+$e];le+=c.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const WUe={kernelName:vb,backendName:"cpu",kernelFunc:VUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UUe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,filterShape:l}=r;Je([i,a],"conv3dBackpropFilterV2");const c=ot(i.shape),u=ot(a.shape),d=Lu(i.shape,l,o,1,s),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,g=d.filterDepth,m=d.filterHeight,v=d.filterWidth,y=new pr(d.filterShape,"float32"),b=y.values,[w,x,$,C]=y.strides,E=n.data.get(a.dataId).values,[I,T,N,k]=u,O=n.data.get(i.dataId).values,[_,P,D,L]=c,R=d.padInfo.front,F=d.padInfo.left,V=d.padInfo.top;for(let H=0;H<g;++H){const U=Math.max(0,Math.ceil((R-H)/f)),W=Math.min(d.outDepth,(d.inDepth+R-H)/f),G=H*w;for(let q=0;q<m;++q){const X=Math.max(0,Math.ceil((V-q)/h)),re=Math.min(d.outHeight,(d.inHeight+V-q)/h),ce=q*x+G;for(let ee=0;ee<v;++ee){const se=Math.max(0,Math.ceil((F-ee)/p)),ue=Math.min(d.outWidth,(d.inWidth+F-ee)/p),Q=ee*$+ce;for(let ye=0;ye<d.inChannels;++ye){const le=ye*C+Q;for(let xe=0;xe<d.outChannels;++xe){let be=0;for(let $e=0;$e<d.batchSize;++$e){const Ne=$e*_,Ve=$e*I;for(let Pe=U;Pe<W;++Pe){const fe=(H+Pe*f-R)*P+Ne,pe=Pe*T+Ve;for(let Me=X;Me<re;++Me){const je=(q+Me*h-V)*D+fe,pt=Me*N+pe;for(let ut=se;ut<ue;++ut){const ft=(ee+ut*p-F)*L+je,We=ut*k+pt;be+=O[ft+ye]*E[We+xe]}}}}b[le+xe]=be}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const HUe={kernelName:S2,backendName:"cpu",kernelFunc:UUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GUe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{pad:o,strides:s,inputShape:l}=r;Je([i],"conv3dBackpropInputV2");const c=ot(i.shape),u=ot(a.shape),d=Lu(l,a.shape,s,1,o),f=new pr(d.inShape,"float32"),h=f.values,[p,g,m,v]=f.strides,y=n.data.get(i.dataId).values,[b,w,x,$]=c,C=n.data.get(a.dataId).values,[E,I,T,N]=u,{batchSize:k,filterDepth:O,filterHeight:_,filterWidth:P,inChannels:D,inDepth:L,inHeight:R,inWidth:F,outChannels:V,outDepth:H,outHeight:U,outWidth:W,strideDepth:G,strideHeight:q,strideWidth:X}=d,re=O-1-d.padInfo.front,ce=_-1-d.padInfo.top,ee=P-1-d.padInfo.left;for(let se=0;se<k;++se)for(let ue=0;ue<D;++ue)for(let Q=0;Q<L;++Q){const ye=Q-re,le=Math.max(0,Math.ceil(ye/G)),xe=Math.min(H,(O+ye)/G);for(let be=0;be<R;++be){const $e=be-ce,Ne=Math.max(0,Math.ceil($e/q)),Ve=Math.min(U,(_+$e)/q);for(let Pe=0;Pe<F;++Pe){const ke=Pe-ee,fe=Math.max(0,Math.ceil(ke/X)),pe=Math.min(W,(P+ke)/X);let Me=0;for(let He=le;He<xe;++He){const je=He*G-ye;for(let pt=Ne;pt<Ve;++pt){const ut=pt*q-$e;for(let rt=fe;rt<pe;++rt){const ft=rt*X-ke,We=b*se+w*He+x*pt+$*rt,Xe=E*(O-1-je)+I*(_-1-ut)+T*(P-1-ft)+N*ue;for(let Le=0;Le<V;++Le){const Se=y[We+Le],Fe=C[Xe+Le];Me+=Se*Fe}}}}h[p*se+g*Q+m*be+v*Pe+ue]=Me}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const qUe={kernelName:$2,backendName:"cpu",kernelFunc:GUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KUe=nn(Pm,t=>Math.cos(t)),XUe={kernelName:Pm,backendName:"cpu",kernelFunc:KUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YUe=nn(Rm,t=>Math.cosh(t)),ZUe={kernelName:Rm,backendName:"cpu",kernelFunc:YUe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QUe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:a,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:c}=r,[u,d,f,h]=i.shape,p=a.shape[0],[g,m]=s,v=wt([p,g,m,h],"float32"),y=n.data.get(a.dataId).values,b=n.data.get(o.dataId).values,w=n.data.get(i.dataId).values,x=ot(i.shape),$=ot(v.shape);for(let C=0;C<p;C++){const E=C*4,I=y[E],T=y[E+1],N=y[E+2],k=y[E+3],O=b[C];if(O>=u)continue;const _=g>1?(N-I)*(d-1)/(g-1):0,P=m>1?(k-T)*(f-1)/(m-1):0;for(let D=0;D<g;D++){const L=g>1?I*(d-1)+D*_:.5*(I+N)*(d-1);if(L<0||L>d-1){for(let R=0;R<m;R++)for(let F=0;F<h;F++){const V=F+R*$[2]+D*$[1]+C*$[0];v.values[V]=c}continue}if(l==="bilinear"){const R=Math.floor(L),F=Math.ceil(L),V=L-R;for(let H=0;H<m;H++){const U=m>1?T*(f-1)+H*P:.5*(T+k)*(f-1);if(U<0||U>f-1){for(let X=0;X<h;X++){const re=X+H*$[2]+D*$[1]+C*$[0];v.values[re]=c}continue}const W=Math.floor(U),G=Math.ceil(U),q=U-W;for(let X=0;X<h;X++){let re=X+W*x[2]+R*x[1]+O*x[0];const ce=w[re];re=X+G*x[2]+R*x[1]+O*x[0];const ee=w[re];re=X+W*x[2]+F*x[1]+O*x[0];const se=w[re];re=X+G*x[2]+F*x[1]+O*x[0];const ue=w[re],Q=ce+(ee-ce)*q,ye=se+(ue-se)*q;re=X+H*$[2]+D*$[1]+C*$[0],v.values[re]=Q+(ye-Q)*V}}}else for(let R=0;R<m;++R){const F=m>1?T*(f-1)+R*P:.5*(T+k)*(f-1);if(F<0||F>f-1){for(let U=0;U<h;U++){const W=U+R*$[2]+D*$[1]+C*$[0];v.values[W]=c}continue}const V=Math.round(F),H=Math.round(L);for(let U=0;U<h;U++){const W=U+V*x[2]+H*x[1]+O*x[0],G=U+R*$[2]+D*$[1]+C*$[0];v.values[G]=w[W]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const JUe={kernelName:E2,backendName:"cpu",kernelFunc:QUe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;Je(i,"cumprod");const l=Un([a],i.shape.length);let c=i;l!=null&&(c=pa({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=rr(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=ca(c.dtype,"int32"),f=h2(de(c.shape),d),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],g=s?(v,y)=>v+p-y-1:(v,y)=>v+y;for(let v=0;v<h.length;v+=p)for(let y=0;y<p;y++){const b=g(v,y);if(y===0)f[b]=o?1:h[b];else{const w=g(v,y-1);f[b]=o?h[w]*f[w]:h[b]*f[w]}}const m=n.makeTensorInfo(c.shape,d,f);if(l!=null){const v=ju(l),y=pa({inputs:{x:m},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(c),y}return m}const tHe={kernelName:C2,backendName:"cpu",kernelFunc:eHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;Je(i,"cumsum");const l=Un([a],i.shape.length);let c=i;l!=null&&(c=pa({inputs:{x:i},backend:n,attrs:{perm:l}}));const u=rr(1,i.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=ca(c.dtype,"int32"),f=ui(de(c.shape),d),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],g=s?(v,y)=>v+p-y-1:(v,y)=>v+y;for(let v=0;v<h.length;v+=p)for(let y=0;y<p;y++){const b=g(v,y);if(y===0)f[b]=o?0:h[b];else{const w=g(v,y-1);f[b]=o?h[w]+f[w]:h[b]+f[w]}}const m=n.makeTensorInfo(c.shape,d,f);if(l!=null){const v=ju(l),y=pa({inputs:{x:m},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(c),y}return m}const rHe={kernelName:yb,backendName:"cpu",kernelFunc:nHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o,binaryOutput:s}=r;if(i.shape.length===1){const l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,u=y3(l,c,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,u)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(a),u=zQ(l,c,o,s);return n.makeTensorInfo(u.shape,a.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const aHe={kernelName:T2,backendName:"cpu",kernelFunc:iHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:a,dataFormat:o}=r;j(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const s=i.shape[0],l=i.shape[1],c=i.shape[2],u=i.shape[3],d=l*a,f=c*a,h=u/(a*a),p=n.data.get(i.dataId).values,g=new Float32Array(s*d*f*h);let m=0;for(let v=0;v<s;++v)for(let y=0;y<d;++y){const b=Math.floor(y/a),w=y%a;for(let x=0;x<f;++x){const $=Math.floor(x/a),C=x%a,E=(w*a+C)*h;for(let I=0;I<h;++I){const N=I+E+u*($+c*(b+l*v));g[m++]=p[N]}}}return n.makeTensorInfo([s,d,f,h],i.dtype,g)}const sHe={kernelName:I2,backendName:"cpu",kernelFunc:oHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:c}=r;Je([i,a],"depthwiseConv2DNative");const u=ot(i.shape),d=ot(a.shape);let f=l;f==null&&(f=[1,1]),j(hi(o,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${f}'`);const h=Gr(i.shape,a.shape,o,f,s,c,!0),{filterHeight:p,filterWidth:g,dilationHeight:m,dilationWidth:v,padInfo:y}=h,b=y.left,w=y.top,x=h.outChannels/h.inChannels,$=new pr(h.outShape,i.dtype),C=n.data.get(i.dataId).values,E=n.data.get(a.dataId).values,I=$.values;for(let T=0;T<h.batchSize;++T){const N=T*u[0],k=T*$.strides[0];for(let O=0;O<h.outHeight;++O){const _=k+O*$.strides[1],P=O*h.strideHeight-w;for(let D=0;D<p;++D){const L=P+D*m;if(L<0||L>=h.inHeight)continue;const R=D*d[0],F=N+L*u[1];for(let V=0;V<h.outWidth;++V){const H=_+V*$.strides[2],U=V*h.strideWidth-b;for(let W=0;W<g;++W){const G=U+W*v;if(G<0||G>=h.inWidth)continue;const q=R+W*d[1],X=F+G*h.inChannels;let re=H,ce=q;for(let ee=0;ee<h.inChannels;++ee){const se=C[X+ee];for(let ue=0;ue<x;++ue)I[re+ue]+=se*E[ce+ue];re+=x,ce+=x}}}}}}return n.makeTensorInfo($.shape,$.dtype,$.values)}const lHe={kernelName:bb,backendName:"cpu",kernelFunc:zJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:c,filterShape:u}=r;Je([i,a],"depthwiseConv2dNativeBackpropFilter");const d=Gr(i.shape,u,o,s,l,c,!0),{strideHeight:f,strideWidth:h,filterHeight:p,filterWidth:g}=d,m=new pr(d.filterShape,"float32"),v=d.padInfo.left,y=d.padInfo.top,b=d.outChannels/d.inChannels,w=n.data.get(i.dataId).values,x=new pr(i.shape,i.dtype,w),$=n.data.get(a.dataId).values,C=new pr(a.shape,a.dtype,$);for(let E=0;E<p;++E){const I=Math.max(0,Math.ceil((y-E)/f)),T=Math.min(d.outHeight,(d.inHeight+y-E)/f);for(let N=0;N<g;++N){const k=Math.max(0,Math.ceil((v-N)/h)),O=Math.min(d.outWidth,(d.inWidth+v-N)/h);for(let _=0;_<d.outChannels;++_){const P=Math.trunc(_/b),D=_%b;let L=0;for(let R=0;R<d.batchSize;++R)for(let F=I;F<T;++F){const V=E+F*f-y;for(let H=k;H<O;++H){const U=N+H*h-v;L+=x.get(R,V,U,P)*C.get(R,F,H,_)}}m.set(L,E,N,P,D)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const uHe={kernelName:N2,backendName:"cpu",kernelFunc:cHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dHe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:c,inputShape:u}=r;Je([i,a],"depthwiseConv2DNativeBackpropInput");const d=ot(i.shape),f=ot(a.shape),h=Gr(u,a.shape,o,s,l,c,!0),p=new pr(h.inShape,"float32"),g=p.values,[m,v,y]=p.strides,b=n.data.get(i.dataId).values,[w,x,$]=d,C=n.data.get(a.dataId).values,[E,I,T]=f,{batchSize:N,filterHeight:k,filterWidth:O,inChannels:_,inHeight:P,inWidth:D,outChannels:L,outHeight:R,outWidth:F,strideHeight:V,strideWidth:H}=h,U=k-1-h.padInfo.top,W=O-1-h.padInfo.left,G=L/_;for(let q=0;q<N;++q)for(let X=0;X<_;++X)for(let re=0;re<P;++re){const ce=re-U,ee=Math.max(0,Math.ceil(ce/V)),se=Math.min(R,(k+ce)/V);for(let ue=0;ue<D;++ue){const Q=ue-W,ye=Math.max(0,Math.ceil(Q/H)),le=Math.min(F,(O+Q)/H);let xe=0;for(let be=ee;be<se;++be){const $e=be*V-ce;for(let Ne=ye;Ne<le;++Ne){const Ve=Ne*H-Q,Pe=w*q+x*be+$*Ne,ke=E*(k-1-$e)+I*(O-1-Ve)+T*X;for(let fe=0;fe<G;++fe){const pe=X*G+fe,Me=b[Pe+pe],He=C[ke+fe];xe+=Me*He}}}g[m*q+v*re+y*ue+X]=xe}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const fHe={kernelName:k2,backendName:"cpu",kernelFunc:dHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hHe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=de(r.shape),a=n.data.get(r.dataId).values,o=wt([i,i],r.dtype),s=o.values;for(let c=0;c<a.length;c++)s[c*i+c]=a[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const pHe={kernelName:O2,backendName:"cpu",kernelFunc:hHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mHe={kernelName:xb,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i}=t,{strides:a,pad:o,dilations:s}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(i.dataId).values,f=i.shape.length,{batchSize:h,inHeight:p,inWidth:g,inChannels:m,outHeight:v,outWidth:y,padInfo:b,strideHeight:w,strideWidth:x,filterHeight:$,filterWidth:C,dilationHeight:E,dilationWidth:I,outShape:T}=cx(r.shape,i.shape,a,o,"NHWC",s),N=de(T),k=T.length,O=qn(r.dtype,N);for(let P=0;P<h;++P)for(let D=0;D<v;++D){const L=D*w-b.top;for(let R=0;R<y;++R){const F=R*x-b.left;for(let V=0;V<m;++V){let H=Number.MIN_SAFE_INTEGER;for(let W=0;W<$;++W){const G=L+W*E;if(G>=0&&G<p)for(let q=0;q<C;++q){const X=F+q*I;if(X>=0&&X<g){const re=ws([P,G,X,V],u,ot(r.shape)),ce=ws([W,q,V],f,ot(i.shape)),ee=c[re]+d[ce];ee>H&&(H=ee)}}}const U=ws([P,D,R,V],k,ot(T));O[U]=H}}}return{dataId:l.write(Fu(O,r.dtype),T,r.dtype),shape:T,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gHe={kernelName:m$,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:a}=t,{strides:o,pad:s,dilations:l}=n,c=e,u=lo(r.shape,c.data.get(r.dataId).values),d=lo(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:g,outHeight:m,outWidth:v,padInfo:y,strideHeight:b,strideWidth:w,filterHeight:x,filterWidth:$,dilationHeight:C,dilationWidth:E,outShape:I}=cx(r.shape,i.shape,o,s,"NHWC",l);j(a.rank===I.length,()=>`Error in ${m$}, dy must have the same rank as output ${I.length}, but got ${a.rank}`);const T=lo(I,c.data.get(a.dataId).values),N=BD(i.shape,i.dtype);for(let O=0;O<f;++O)for(let _=0;_<m;++_){const P=_*b-y.top;for(let D=0;D<v;++D){const L=D*w-y.left;for(let R=0;R<g;++R){let F=Number.MIN_SAFE_INTEGER,V=0,H=0;for(let U=0;U<x;++U){const W=P+U*C;if(W>=0&&W<h)for(let G=0;G<$;++G){const q=L+G*E;if(q>=0&&q<p){const X=u[O][W][q][R]+d[U][G][R];X>F&&(F=X,V=U,H=G)}}}N[V][H][R]+=T[O][_][D][R]}}}return{dataId:c.write(Fu(N,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vHe={kernelName:p$,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:i,dy:a}=t,{strides:o,pad:s,dilations:l}=n,c=e,u=lo(r.shape,c.data.get(r.dataId).values),d=lo(i.shape,c.data.get(i.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:g,outHeight:m,outWidth:v,padInfo:y,strideHeight:b,strideWidth:w,filterHeight:x,filterWidth:$,dilationHeight:C,dilationWidth:E,outShape:I}=cx(r.shape,i.shape,o,s,"NHWC",l);j(a.rank===I.length,()=>`Error in ${p$}, dy must have the same rank as output ${I.length}, but got ${a.rank}`);const T=lo(I,c.data.get(a.dataId).values),N=BD(r.shape,r.dtype);for(let O=0;O<f;++O)for(let _=0;_<m;++_){const P=_*b-y.top;for(let D=0;D<v;++D){const L=D*w-y.left;for(let R=0;R<g;++R){let F=Number.MIN_SAFE_INTEGER,V=P<0?0:P,H=L<0?0:L;for(let U=0;U<x;++U){const W=P+U*C;if(W>=0&&W<h)for(let G=0;G<$;++G){const q=L+G*E;if(q>=0&&q<p){const X=u[O][W][q][R]+d[U][G][R];X>F&&(F=X,V=W,H=q)}}}N[O][V][H][R]+=T[O][_][D][R]}}}return{dataId:c.write(Fu(N,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yHe(t){const{inputs:e,backend:n,attrs:r}=t,{image:i}=e,{canvas:a,options:o}=r,{contextOptions:s,imageOptions:l}=o||{},c=(l==null?void 0:l.alpha)||1,u=(s==null?void 0:s.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${s.contextType} is not supported by the CPU backend.`);const d=a.getContext(u,(s==null?void 0:s.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[f,h]=i.shape.slice(0,2),p=i.shape.length===2?1:i.shape[2],g=n.data.get(i.dataId).values,m=i.dtype==="float32"?255:1,v=new Uint8ClampedArray(h*f*4);for(let b=0;b<f*h;++b){const w=[0,0,0,255*c];for(let $=0;$<p;$++){const C=g[b*p+$];if(i.dtype==="float32"){if(C<0||C>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${C}.`)}else if(i.dtype==="int32"&&(C<0||C>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${C}.`);p===1?(w[0]=C*m,w[1]=C*m,w[2]=C*m):w[$]=C*m}const x=b*4;v[x+0]=Math.round(w[0]),v[x+1]=Math.round(w[1]),v[x+2]=Math.round(w[2]),v[x+3]=Math.round(w[3])}a.width=h,a.height=f;const y=new ImageData(v,h,f);return d.putImageData(y,0,0),i}const bHe={kernelName:A2,backendName:"cpu",kernelFunc:yHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lx(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Je(i,"sum");let s;i.dtype==="bool"?s=Eu({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):s=xl({inputs:{x:i},backend:n});const l=s.shape.length,c=Tt(a,s.shape),u=Un(c,l);let d=c,f=s;u!=null&&(f=pa({inputs:{x:s},backend:n,attrs:{perm:u}}),d=rr(d.length,l)),pi("sum",d,f.shape.length);const[h,p]=qr(f.shape,d),g=ca(f.dtype,"int32");let m=P$(n,h,g);const v=de(p),y=n.data.get(m.dataId).values,b=n.data.get(f.dataId).values;for(let w=0;w<y.length;++w){const x=w*v;let $=0;for(let C=0;C<v;++C)$+=b[x+C];y[w]=$}if(o){const w=nr(m.shape,c),x=m;m=xn({inputs:{x:m},backend:n,attrs:{shape:w}}),n.disposeIntermediateTensorInfo(x)}return n.disposeIntermediateTensorInfo(s),u!=null&&n.disposeIntermediateTensorInfo(f),m}const xHe={kernelName:Jb,backendName:"cpu",kernelFunc:Lx};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wHe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,a=e,{allDims:o,summedDims:s,idDims:l}=jM(i,a.length);BM(o.length,l,a);const{path:c,steps:u}=VM(s,l),d=u.length;let f=null,h=o.length;const p=[];for(let g=0;g<d;++g){for(const m of u[g]){const{permutationIndices:v,expandDims:y}=zM(h,l[m]);let b;WM(v)?b=a[m]:(b=pa({inputs:{x:a[m]},backend:n,attrs:{perm:v}}),p.push(b));const w=b.shape.slice();for(let x=0;x<y.length;++x)w.splice(y[x],0,1);Nt(b.shape,w)||(b=xn({inputs:{x:b},backend:n,attrs:{shape:w}}),p.push(b)),f===null?f=b:(f=xT({inputs:{a:b,b:f},backend:n}),p.push(f))}g<d-1&&(c[g]>=0&&(f=Lx({inputs:{x:f},backend:n,attrs:{axis:c[g]-(o.length-h),keepDims:!1}}),p.push(f)),h--)}for(const g of p)g!==f&&n.disposeIntermediateTensorInfo(g);return f}const SHe={kernelName:_2,backendName:"cpu",kernelFunc:wHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $He(t){const{inputs:e,backend:n}=t,{dy:r,y:i}=e;Je([r,i],"eluGrad");const a=new Float32Array(de(i.shape)),o=n.data.get(i.dataId).values,s=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];c>=0?a[l]=s[l]:a[l]=s[l]*(c+1)}return n.makeTensorInfo(i.shape,"float32",a)}const CHe={kernelName:P2,backendName:"cpu",kernelFunc:$He};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EHe=_M,THe=PM,IHe=RM,NHe=DM,kHe=FM,OHe=MM,AHe=nn(Mm,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+EHe*n);return e*(1-((((OHe*r+kHe)*r+NHe)*r+IHe)*r+THe)*r*Math.exp(-n*n))}),_He={kernelName:Mm,backendName:"cpu",kernelFunc:AHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$(t){const{inputs:e,backend:n,attrs:r}=t,{input:i}=e,{dim:a}=r,o=i.shape.length,s=i.shape.slice();let l=a;return a<0&&(j(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+a+1),s.splice(l,0,1),xn({inputs:{x:i},backend:n,attrs:{shape:s}})}const PHe={kernelName:Sb,backendName:"cpu",kernelFunc:F$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RHe=ar((t,e)=>t/e),C3=Ar(Dm,RHe),x_={kernelName:Dm,backendName:"cpu",kernelFunc:C3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BJ(t,e,n){const r=t.shape,i=r[0],a=r[1],o=n.data.get(t.dataId),s=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[i,a],u=de(c),d=Vr("float32",u),f=Vr("float32",u);for(let m=0;m<i;m++){const v=gf({inputs:{x:s},backend:n,attrs:{begin:[m,0],size:[1,a]}}),y=gf({inputs:{x:l},backend:n,attrs:{begin:[m,0],size:[1,a]}}),b=Ea({inputs:{real:v,imag:y},backend:n}),{real:w,imag:x}=DHe(b,e,n),$=ac(w,x);for(let C=0;C<a;C++){const E=LM($,C);d[m*a+C]=E.real,f[m*a+C]=E.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b)}const h=n.makeTensorInfo(c,"float32",d),p=n.makeTensorInfo(c,"float32",f),g=Ea({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),g}function DHe(t,e,n){const r=de(t.shape),i=n.data.get(t.dataId),a=n.data.get(i.complexTensorInfos.real.dataId).values,o=n.data.get(i.complexTensorInfos.imag.dataId).values;if(FHe(r)){const s=w_(a,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",s.real),u=n.makeTensorInfo(l,"float32",s.imag),d=n.makeTensorInfo([],"float32",hc(r,"float32")),f=xl({inputs:{x:d},backend:n}),h=x_.kernelFunc({inputs:{a:c,b:d},backend:n}),p=x_.kernelFunc({inputs:{a:u,b:f},backend:n}),g=n.data.get(h.dataId).values,m=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:g,imag:m}}return s}else{const s=ac(a,o),l=MHe(s,r,e);return YX(l)}}function FHe(t){return(t&t-1)===0}function w_(t,e,n,r,i){if(n===1)return{real:t,imag:e};const a=ac(t,e),o=n/2,s=ZX(a),l=s.real,c=s.imag,u=[l.length],d=i.makeTensorInfo(u,"float32",l),f=i.makeTensorInfo(u,"float32",c),h=Ea({inputs:{real:d,imag:f},backend:i}),p=QX(a),g=p.real,m=p.imag,v=[g.length],y=i.makeTensorInfo(v,"float32",g),b=i.makeTensorInfo(v,"float32",m),w=Ea({inputs:{real:y,imag:b},backend:i}),x=w_(l,c,o,r,i),$=x.real,C=x.imag,E=[$.length],I=i.makeTensorInfo(E,"float32",$),T=i.makeTensorInfo(E,"float32",C),N=Ea({inputs:{real:I,imag:T},backend:i}),k=w_(g,m,o,r,i),O=k.real,_=k.imag,P=[O.length],D=i.makeTensorInfo(P,"float32",O),L=i.makeTensorInfo(P,"float32",_),R=Ea({inputs:{real:D,imag:L},backend:i}),F=eY(n,r),V=[F.real.length],H=i.makeTensorInfo(V,"float32",F.real),U=i.makeTensorInfo(V,"float32",F.imag),W=Ea({inputs:{real:H,imag:U},backend:i}),G=xT({inputs:{a:W,b:R},backend:i}),q=Kp({inputs:{a:N,b:G},backend:i}),X=S3({inputs:{a:N,b:G},backend:i}),re=mf({inputs:{input:q},backend:i}),ce=mf({inputs:{input:X},backend:i}),ee=Xp({inputs:{input:q},backend:i}),se=Xp({inputs:{input:X},backend:i}),ue=Yp({inputs:[re,ce],backend:i,attrs:{axis:0}}),Q=Yp({inputs:[ee,se],backend:i,attrs:{axis:0}}),ye=i.data.get(ue.dataId).values,le=i.data.get(Q.dataId).values;return i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(h),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(b),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(I),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(N),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(R),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(re),i.disposeIntermediateTensorInfo(ee),i.disposeIntermediateTensorInfo(ce),i.disposeIntermediateTensorInfo(se),i.disposeIntermediateTensorInfo(ue),i.disposeIntermediateTensorInfo(Q),{real:ye,imag:le}}function MHe(t,e,n){const r=new Float32Array(e*2);for(let i=0;i<e;i++){let a=0,o=0;for(let s=0;s<e;s++){const l=tY(i*s,e,n),c=LM(t,s);a+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(a/=e,o/=e),JX(r,a,o,i)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LHe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=de(r.shape),a=r.shape[r.shape.length-1],o=i/a,s=xn({inputs:{x:r},backend:n,attrs:{shape:[o,a]}}),l=BJ(s,!1,n),c=xn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),c}const jHe={kernelName:R2,backendName:"cpu",kernelFunc:LHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3(t){const{backend:e,attrs:n}=t,{shape:r,value:i,dtype:a}=n,o=a||kf(i),s=qn(o,de(r));return BHe(s,i,o),e.makeTensorInfo(r,o,s)}const zHe={kernelName:D2,backendName:"cpu",kernelFunc:E3};function BHe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VHe={kernelName:F2,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,i=n,a=Vr(r.dtype,de(r.shape)),[o,s,l,c]=r.shape,u=i.data.get(r.dataId).values;for(let f=0;f<o;f++){const h=f*l*s*c;for(let p=0;p<s;p++){const g=p*(l*c);for(let m=0;m<l;m++){const v=m*c;for(let y=0;y<c;y++){const b=Math.round(l-m-1),w=h+g+v+y;let x=u[w];if(b>=0&&b<l){const $=b*c,C=h+g+$+y;x=u[C]}a[w]=x}}}}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let g=jJ({inputs:{x:i,filter:a},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(o){const m=g;if(u==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const v=xn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});g=Kp({inputs:{a:g,b:v},backend:n}),n.disposeIntermediateTensorInfo(v)}else g=Kp({inputs:{a:g,b:o},backend:n});n.disposeIntermediateTensorInfo(m)}if(h){const m=g;if(u==="NCHW"&&h==="prelu"&&s.shape.length===1&&s.shape[0]!==1){const v=xn({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});g=D$(n,g,h,v,p),n.disposeIntermediateTensorInfo(v)}else g=D$(n,g,h,s,p);n.disposeIntermediateTensorInfo(m)}return g}const UHe={kernelName:u0,backendName:"cpu",kernelFunc:WHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r;let g=zJ({inputs:{x:i,filter:a},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f}});if(o){const m=g;g=Kp({inputs:{a:g,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){const m=g;g=D$(n,g,h,s,p),n.disposeIntermediateTensorInfo(m)}return g}const GHe={kernelName:d0,backendName:"cpu",kernelFunc:HHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qHe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,a=de(r.shape),o=i.shape,s=o[o.length-1],[l,c,u,d]=iT(r,i);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const f=n.data.get(i.dataId).values,h=n.bufferSync(r),p=ZQ(f,h,r.dtype,c,s,u,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,p.values)}const KHe={kernelName:M2,backendName:"cpu",kernelFunc:qHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:a}=e,{axis:o,batchDims:s}=r;Je([i,a],"gatherV2");const l=Tt(o,i.shape)[0],c=n.data.get(a.dataId).values,u=i.shape[l];for(let w=0;w<c.length;++w){const x=c[w];j(x<=u-1&&x>=0,()=>`GatherV2: the index value ${x} is not in [0, ${u-1}]`)}let d=s;s==null&&(d=0);const f=de(a.shape),h=HM(i,a,l,d),p=xn({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),g=xn({inputs:{x:a},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),m=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],v=n.bufferSync(g),y=n.bufferSync(p),b=QQ(y,v,m);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(h.outputShape,b.dtype,b.values)}const YHe={kernelName:Cb,backendName:"cpu",kernelFunc:XHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZHe(t){const{inputs:e,backend:n}=t,{input:r}=e,i=de(r.shape),a=r.shape[r.shape.length-1],o=i/a,s=xn({inputs:{x:r},backend:n,attrs:{shape:[o,a]}}),l=BJ(s,!0,n),c=xn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),c}const QHe={kernelName:L2,backendName:"cpu",kernelFunc:ZHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JHe=nn(Um,t=>Number.isFinite(t)?1:0,"bool"),e8e={kernelName:Um,backendName:"cpu",kernelFunc:JHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t8e=nn(Hm,t=>Math.abs(t)===1/0?1:0,"bool"),n8e={kernelName:Hm,backendName:"cpu",kernelFunc:t8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r8e=nn(Gm,t=>Number.isNaN(t)?1:0,"bool"),i8e={kernelName:Gm,backendName:"cpu",kernelFunc:r8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a8e(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:a}=n,o=rJ(r,i,a);return e.makeTensorInfo([o.length],"float32",o)}const o8e={kernelName:z2,backendName:"cpu",kernelFunc:a8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s8e=nn(Km,t=>Math.log1p(t)),l8e={kernelName:Km,backendName:"cpu",kernelFunc:s8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c8e=ar((t,e)=>t&&e),u8e=Ar(kb,c8e,null,"bool"),d8e={kernelName:kb,backendName:"cpu",kernelFunc:u8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f8e=nn(Ob,t=>t?0:1,"bool"),h8e={kernelName:Ob,backendName:"cpu",kernelFunc:f8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p8e=ar((t,e)=>t||e),m8e=Ar(Ab,p8e,null,"bool"),g8e={kernelName:Ab,backendName:"cpu",kernelFunc:m8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:a,bias:o,alpha:s,beta:l}=r;Je(i,"LRN");const c=i.shape[3],u=c-1,d=n.data.get(i.dataId).values,f=de(i.shape),h=new Float32Array(f);function p(g){const m=g%c;let v=g-m+Math.max(0,m-a);const y=g-m+Math.min(m+a,u);let b=0;for(;v<=y;v++){const w=d[v];b+=w*w}return b}for(let g=0;g<f;g++){const m=p(g),v=d[g]*Math.pow(o+s*m,-l);h[g]=v}return n.makeTensorInfo(i.shape,i.dtype,h)}const y8e={kernelName:_b,backendName:"cpu",kernelFunc:v8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,y:a,dy:o}=e,{depthRadius:s,bias:l,alpha:c,beta:u}=r;Je(o,"LRNGrad");const d=de(o.shape),f=o.shape[3],h=n.data.get(o.dataId).values,p=n.data.get(i.dataId).values,g=n.data.get(a.dataId).values,m=new Float32Array(d),v=d;for(let y=0;y<v;y++){const b=y%f,w=y-b+Math.max(0,b-s),x=y-b+Math.min(f,b+s+1);let $=0;for(let C=w;C<x;C++)$+=Math.pow(p[C],2);$=c*$+l;for(let C=w;C<x;C++){let E=-2*c*u*p[C]*g[y]/$;y===C&&(E+=Math.pow($,-u)),E*=h[y],m[C]+=E}}return n.makeTensorInfo(o.shape,i.dtype,m)}const x8e={kernelName:B2,backendName:"cpu",kernelFunc:b8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VJ(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:a,keepDims:o}=r,s=n;let l=i.shape;const c=l.length,u=Tt(a,l);let d=u;const f=Un(d,c);let h=s.data.get(i.dataId).values;if(f!=null){const w=new Array(c);for(let x=0;x<w.length;x++)w[x]=l[f[x]];h=x3(h,l,i.dtype,f,w),d=rr(d.length,c),l=w}Je(i,"max"),pi("max",d,c);const[p,g]=qr(l,d),m=de(g),v=aJ(h,m,p,i.dtype),y=s.write(v,p,i.dtype);let b=p;return o&&(b=nr(p,u)),{dataId:y,shape:b,dtype:i.dtype}}const w8e={kernelName:Pb,backendName:"cpu",kernelFunc:VJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;Je(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r,c=1;j(hi(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Yo(i.shape,a,o,c,s,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&Nt(u.inShape,u.outShape))d=xl({inputs:{x:i},backend:n});else{const f=n.data.get(i.dataId).values,h=ot(i.shape),p=$3(f,i.shape,i.dtype,h,u,"max");d=n.makeTensorInfo(u.outShape,i.dtype,p.values)}return d}const $8e={kernelName:Rb,backendName:"cpu",kernelFunc:S8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:l,dataFormat:c}=r;Je(i,"maxPool3d");const u=pc(i.shape,a,o,1,s,l,c),d=n.data.get(i.dataId).values,f=LJ(d,i.shape,i.dtype,ot(i.shape),u,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const E8e={kernelName:Db,backendName:"cpu",kernelFunc:C8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,{filterSize:o,strides:s,pad:l,dimRoundingMode:c}=r;Je([i,a],"maxPool3DGrad");const u=pc(a.shape,o,s,1,l,c),d=n.bufferSync(a),f=pUe(d,u),h=u.strideDepth,p=u.strideHeight,g=u.strideWidth,m=u.dilationDepth,v=u.dilationHeight,y=u.dilationWidth,b=u.effectiveFilterDepth,w=u.effectiveFilterHeight,x=u.effectiveFilterWidth,$=b-1-u.padInfo.front,C=x-1-u.padInfo.left,E=w-1-u.padInfo.top,I=wt(a.shape,"float32"),T=n.bufferSync(i);for(let N=0;N<u.batchSize;++N)for(let k=0;k<u.inChannels;++k)for(let O=0;O<u.inDepth;++O)for(let _=0;_<u.inHeight;++_)for(let P=0;P<u.inWidth;++P){const D=O-$,L=_-E,R=P-C;let F=0;for(let V=0;V<b;V+=m){const H=(D+V)/h;if(!(H<0||H>=u.outDepth||Math.floor(H)!==H))for(let U=0;U<w;U+=v){const W=(L+U)/p;if(!(W<0||W>=u.outHeight||Math.floor(W)!==W))for(let G=0;G<x;G+=y){const q=(R+G)/g;if(q<0||q>=u.outWidth||Math.floor(q)!==q)continue;const X=b*w*x-1-f.get(N,H,W,q,k),re=V*w*x+U*x+G,ce=X===re?1:0;if(ce===0)continue;const ee=T.get(N,H,W,q,k);F+=ee*ce}}}I.set(F,N,O,_,P,k)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const I8e={kernelName:W2,backendName:"cpu",kernelFunc:T8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a,output:o}=e,s=a;Je([a,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=Yo(s.shape,l,c,1,u,d),h=n.data.get(s.dataId).values,p=wt(f.outShape,s.dtype,MJ(h,s.shape,s.dtype,f).values),g=f.strideHeight,m=f.strideWidth,v=f.dilationHeight,y=f.dilationWidth,b=f.effectiveFilterHeight,w=f.effectiveFilterWidth,x=w-1-f.padInfo.left,$=b-1-f.padInfo.top,C=wt(s.shape,"float32"),E=n.data.get(i.dataId).values,I=wt(i.shape,"float32",E);for(let T=0;T<f.batchSize;++T)for(let N=0;N<f.inChannels;++N)for(let k=0;k<f.inHeight;++k)for(let O=0;O<f.inWidth;++O){const _=k-$,P=O-x;let D=0;for(let L=0;L<b;L+=v){const R=(_+L)/g;if(!(R<0||R>=f.outHeight||Math.floor(R)!==R))for(let F=0;F<w;F+=y){const V=(P+F)/m;if(V<0||V>=f.outWidth||Math.floor(V)!==V)continue;const H=b*w-1-p.get(T,R,V,N),U=L*w+F,W=H===U?1:0;if(W===0)continue;const G=I.get(T,R,V,N);D+=G*W}}C.set(D,T,k,O,N)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const k8e={kernelName:V2,backendName:"cpu",kernelFunc:N8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O8e(t,e,n,r,i){const a=ot(e),o=$3(t,e,n,a,i,"max"),s=MJ(t,e,n,i,!0,r);return[o.values,s.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A8e={kernelName:U2,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=e,l=n;Je(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=Yo(r.shape,i,a,[1,1],o),[d,f]=O8e(c,r.shape,r.dtype,s,u),h=l.write(d,u.outShape,r.dtype),p=l.write(f,u.outShape,r.dtype);return[{dataId:h,shape:u.outShape,dtype:r.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=Tt(a,i.shape),c=qr(i.shape,s)[1],u=de(c),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(f);const h=Eu({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});d.push(h);const p=C3({inputs:{a:h,b:f},backend:n});d.push(p);const g=Lx({inputs:{x:p},backend:n,attrs:{axis:a,keepDims:o}});return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),g}const P8e={kernelName:Fb,backendName:"cpu",kernelFunc:_8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;Je(i,"min");const s=Tt(a,i.shape);let l=s;const c=Un(l,i.shape.length);let u=i;c!=null&&(u=pa({inputs:{x:i},backend:n,attrs:{perm:c}}),l=rr(l.length,i.shape.length)),pi("min",l,u.shape.length);const[d,f]=qr(u.shape,l),h=de(f),p=ui(de(d),u.dtype),g=n.data.get(u.dataId).values;for(let v=0;v<p.length;++v){const y=v*h;let b=g[y];for(let w=0;w<h;++w){const x=g[y+w];(Number.isNaN(x)||x<b)&&(b=x)}p[v]=b}c!=null&&n.disposeIntermediateTensorInfo(u);const m=n.makeTensorInfo(d,u.dtype,p);if(o){const v=nr(d,s),y=xn({inputs:{x:m},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(m),y}return m}const D8e={kernelName:Mb,backendName:"cpu",kernelFunc:R8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,mode:o}=r;Je(i,"mirrorPad");const s=a.map((b,w)=>b[0]+i.shape[w]+b[1]),l=a.map(b=>b[0]),c=a.map((b,w)=>b[0]+i.shape[w]),u=o==="reflect"?0:1,d=n.data.get(i.dataId).values,f=i.shape.length,h=ot(i.shape),p=de(s),g=s.length,m=ot(s),v=Vr(i.dtype,p);for(let b=0;b<p;b++){let w=Of(b,g,m);for(let $=0;$<g;$++)w[$]<l[$]?w[$]=l[$]*2-w[$]-u:w[$]>=c[$]&&(w[$]=(c[$]-1)*2-w[$]+u);w=w.map(($,C)=>$-l[C]);const x=ws(w,f,h);v[b]=d[x]}return{dataId:n.write(v,s,i.dtype),shape:s,dtype:i.dtype}}const M8e={kernelName:Lb,backendName:"cpu",kernelFunc:F8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L8e=ar((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),j8e=Ar(Zm,L8e),z8e={kernelName:Zm,backendName:"cpu",kernelFunc:j8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WJ(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:a}=r,o=i.shape.length;let s=a;if(s===-1&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);const l=Tt([s],i.shape),c=VJ({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=nr(c.shape,l),d=xn({inputs:{x:c},backend:n,attrs:{shape:u}}),f=S3({inputs:{a:i,b:d},backend:n}),h=qQ({inputs:{x:f},backend:n}),p=Lx({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),g=xn({inputs:{x:p},backend:n,attrs:{shape:u}}),m=C3({inputs:{a:h,b:g},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),m}const B8e={kernelName:nx,backendName:"cpu",kernelFunc:WJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V8e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:a,seed:o,normalized:s}=r;Je(i,"multinomial");const l=s?i:WJ({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,f=[c,a],h=ui(de(f),"int32");for(let p=0;p<c;++p){const g=p*u,m=new Float32Array(u-1);m[0]=d[g];for(let b=1;b<m.length;++b)m[b]=m[b-1]+d[g+b];const v=PE.alea(o.toString()),y=p*a;for(let b=0;b<a;++b){const w=v();h[y+b]=m.length;for(let x=0;x<m.length;x++)if(w<m[x]){h[y+b]=x;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",h)}const W8e={kernelName:H2,backendName:"cpu",kernelFunc:V8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U8e=eT;function H8e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r;Je(i,"NonMaxSuppression");const c=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,{selectedIndices:d}=U8e(c,u,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const G8e={kernelName:G2,backendName:"cpu",kernelFunc:H8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q8e=tT;function K8e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:c}=r;Je(i,"NonMaxSuppressionPadded");const u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,{selectedIndices:f,validOutputs:h}=q8e(u,d,o,s,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const X8e={kernelName:q2,backendName:"cpu",kernelFunc:K8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y8e=nT;function Z8e(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=r;Je(i,"NonMaxSuppressionWithScore");const u=n.data.get(i.dataId).values,d=n.data.get(a.dataId).values,f=o,h=s,p=l,g=c,{selectedIndices:m,selectedScores:v}=Y8e(u,d,f,h,p,g);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const Q8e={kernelName:K2,backendName:"cpu",kernelFunc:Z8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J8e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:a,depth:o,onValue:s,offValue:l}=r;Je(i,"oneHot");const c=de(i.shape),u=new Float32Array(c*o);u.fill(l);const d=n.data.get(i.dataId).values;for(let f=0;f<c;++f)d[f]>=0&&d[f]<o&&(u[f*o+d[f]]=s);return n.makeTensorInfo([...i.shape,o],a,u)}const eGe={kernelName:Vb,backendName:"cpu",kernelFunc:J8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M$(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const i=mf({inputs:{input:r},backend:n}),a=M$({inputs:{x:i},backend:n}),o=Xp({inputs:{input:r},backend:n}),s=M$({inputs:{x:o},backend:n}),l=Ea({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return E3({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const tGe={kernelName:ox,backendName:"cpu",kernelFunc:M$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UJ(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const i=mf({inputs:{input:r},backend:n}),a=UJ({inputs:{x:i},backend:n}),o=Xp({inputs:{input:r},backend:n}),s=M$({inputs:{x:o},backend:n}),l=Ea({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return E3({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const nGe={kernelName:Bb,backendName:"cpu",kernelFunc:UJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HJ(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return F$({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const a=e[0].shape,o=e[0].dtype;e.forEach(u=>{fi(a,u.shape,"All tensors passed to stack must have matching shapes"),j(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(u=>{const d=F$({inputs:{input:u},backend:n,attrs:{dim:i}});return s.push(d),d}),c=Yp({inputs:l,backend:n,attrs:{axis:i}});return s.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const rGe={kernelName:Wb,backendName:"cpu",kernelFunc:HJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,constantValue:o}=r;Je(i,"pad");const s=a.map((y,b)=>y[0]+i.shape[b]+y[1]),l=a.map(y=>y[0]),c=n.data.get(i.dataId).values,u=de(i.shape),d=i.shape.length,f=ot(i.shape),h=de(s),p=s.length,g=ot(s),m=Vr(i.dtype,h);o!==0&&m.fill(o);for(let y=0;y<u;y++){const w=Of(y,d,f).map(($,C)=>$+l[C]),x=ws(w,p,g);m[x]=c[y]}return{dataId:n.write(m,s,i.dtype),shape:s,dtype:i.dtype}}const GJ={kernelName:Ub,backendName:"cpu",kernelFunc:iGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aGe=ar((t,e)=>Math.pow(t,e)),oGe=Ar(Jm,aGe),sGe={kernelName:Jm,backendName:"cpu",kernelFunc:oGe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lGe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=e,{outputRaggedRank:s}=r,l=i.map(v=>n.data.get(v.dataId).values),c=i.map(v=>v.shape),u=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,[f,h,p]=dJ(l,c,u,a.shape,a.dtype,d,o.shape),g=f.map(v=>n.makeTensorInfo([v.length],"int32",v)),m=n.makeTensorInfo(p,a.dtype,h);return g.concat([m])}const cGe={kernelName:X2,backendName:"cpu",kernelFunc:lGe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uGe(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:a}=e,o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[c,u]=fJ(o,r.shape,r.dtype,s,i.shape,l,a.shape),d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const dGe={kernelName:Y2,backendName:"cpu",kernelFunc:uGe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fGe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,c=n.data.get(i.dataId).values,u=n.data.get(a.dataId).values,d=n.data.get(o.dataId).values,f=s.map(m=>n.data.get(m.dataId).values),h=s.map(m=>m.shape),[p,g]=hJ(c,i.shape,u,a.shape,a.dtype,d,o.shape,f,h,l);return n.makeTensorInfo(p,a.dtype,g)}const hGe={kernelName:Z2,backendName:"cpu",kernelFunc:fGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pGe(t){const{backend:e,attrs:n}=t,{start:r,stop:i,dtype:a,step:o}=n,s=pJ(r,i,o,a);return e.makeTensorInfo([s.length],a,s)}const mGe={kernelName:Q2,backendName:"cpu",kernelFunc:pGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gGe=nn(eg,t=>1/t),vGe={kernelName:eg,backendName:"cpu",kernelFunc:gGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yGe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r;Je(i,"resizeBilinear");const l=ot(i.shape),[c,u]=s,[d,f,h,p]=i.shape,g=n.data.get(i.dataId).values,m=new Float32Array(de([d,c,u,p])),v=[a&&c>1?f-1:f,a&&u>1?h-1:h],y=[a&&c>1?c-1:c,a&&u>1?u-1:u];let b=0;const w=v[0]/y[0],x=v[1]/y[1];for(let $=0;$<d;$++)for(let C=0;C<c;C++){let E;o?E=w*(C+.5)-.5:E=w*C;const I=Math.max(0,Math.floor(E)),T=E-I,N=Math.min(f-1,Math.ceil(E)),k=$*l[0]+I*l[1],O=$*l[0]+N*l[1];for(let _=0;_<u;_++){let P;o?P=x*(_+.5)-.5:P=x*_;const D=Math.max(0,Math.floor(P)),L=P-D,R=Math.min(h-1,Math.ceil(P)),F=k+D*l[2],V=O+D*l[2],H=k+R*l[2],U=O+R*l[2];for(let W=0;W<p;W++){const G=g[F+W],q=g[V+W],X=g[H+W],re=g[U+W],ce=G+(X-G)*L,ee=q+(re-q)*L,se=ce+(ee-ce)*T;m[b++]=se}}}return n.makeTensorInfo([d,c,u,p],"float32",m)}const bGe={kernelName:Xb,backendName:"cpu",kernelFunc:yGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xGe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r;Je([a,i],"resizeBilinearGrad");const s=ot(i.shape),[l,c,u,d]=i.shape,[,f,h]=a.shape,p=new Float32Array(l*c*u*d),g=[o&&f>1?c-1:c,o&&h>1?u-1:u],m=[o&&f>1?f-1:f,o&&h>1?h-1:h],v=g[0]/m[0],y=g[1]/m[1],b=n.data.get(a.dataId).values;let w=0;for(let x=0;x<l;x++){const $=x*s[0];for(let C=0;C<f;C++){const E=C*v,I=Math.floor(E),T=Math.min(Math.ceil(E),c-1),N=$+I*s[1],k=$+T*s[1],O=E-I,_=1-O;for(let P=0;P<h;P++){const D=P*y,L=Math.floor(D),R=Math.min(Math.ceil(D),u-1),F=D-L,V=1-F,H=N+L*s[2],U=N+R*s[2],W=k+L*s[2],G=k+R*s[2],q=_*V,X=_*F,re=O*V,ce=O*F;for(let ee=0;ee<d;ee++){const se=b[w++];p[H+ee]+=se*q,p[U+ee]+=se*X,p[W+ee]+=se*re,p[G+ee]+=se*ce}}}}return n.makeTensorInfo([l,u,c,d],"float32",p)}const wGe={kernelName:tE,backendName:"cpu",kernelFunc:xGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SGe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r;Je(i,"resizeNearestNeighbor");const l=ot(i.shape),[c,u]=s,[d,f,h,p]=i.shape,g=n.data.get(i.dataId).values,m=new Float32Array(d*c*u*p),v=[a&&c>1?f-1:f,a&&u>1?h-1:h],y=[a&&c>1?c-1:c,a&&u>1?u-1:u],b=v[0]/y[0],w=v[1]/y[1];let x=0;for(let $=0;$<d;$++){const C=$*l[0];for(let E=0;E<c;E++){const I=o?b*(E+.5):b*E;let T=Math.min(f-1,a?Math.round(I):Math.floor(I));o&&(T=Math.max(0,T));const N=C+T*l[1];for(let k=0;k<u;k++){const O=o?w*(k+.5):w*k;let _=Math.min(h-1,a?Math.round(O):Math.floor(O));o&&(_=Math.max(0,_));const P=N+_*l[2];for(let D=0;D<p;D++){const L=g[P+D];m[x++]=L}}}}return n.makeTensorInfo([d,c,u,p],i.dtype,m)}const $Ge={kernelName:Kb,backendName:"cpu",kernelFunc:SGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CGe(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r;Je([a,i],"resizeNearestNeighborGrad");const s=ot(i.shape),l=ot(a.shape),[c,u,d,f]=i.shape,[,h,p]=a.shape,g=new Float32Array(c*u*d*f),m=n.data.get(a.dataId).values,v=[o&&h>1?u-1:u,o&&p>1?d-1:d],y=[o&&h>1?h-1:h,o&&p>1?p-1:p],b=v[0]/y[0],w=v[1]/y[1],x=1/b,$=1/w,C=Math.ceil(x)*2+2,E=Math.ceil($)*2+2;for(let I=0;I<c;I++){const T=I*s[0];for(let N=0;N<u;N++){const k=T+N*s[1],O=Math.floor(N*x),_=Math.floor(O-C/2);for(let P=0;P<d;P++){const D=k+P*s[2],L=Math.floor(P*$),R=Math.floor(L-E/2);for(let F=0;F<f;F++){let V=0;for(let H=0;H<C;H++){const U=H+_;if(U<0||U>=h)continue;const W=T+U*l[1],G=U*b,q=Math.min(u-1,o?Math.round(G):Math.floor(G));if(N===q)for(let X=0;X<E;X++){const re=X+R;if(re<0||re>=p)continue;const ce=W+re*l[2],ee=re*w,se=Math.min(d-1,o?Math.round(ee):Math.floor(ee));P===se&&(V+=m[ce+F])}}g[D+F]=V}}}}return n.makeTensorInfo(i.shape,i.dtype,g)}const EGe={kernelName:eE,backendName:"cpu",kernelFunc:CGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:a}=r;Je(i,"reverse");const o=i.shape.length,s=Tt(a,i.shape);if(o===0)return xl({inputs:{x:i},backend:n});const l=new pr(i.shape,i.dtype),c=n.bufferSync(i);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),f=d.slice();s.forEach(h=>f[h]=i.shape[h]-1-f[h]),l.set(c.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const IGe={kernelName:Yb,backendName:"cpu",kernelFunc:TGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NGe={kernelName:yE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:a,center:o}=e,s=n,l=Vr(r.dtype,de(r.shape)),[c,u,d,f]=r.shape,[h,p]=kM(o,u,d),g=255,m=Math.sin(i),v=Math.cos(i),y=s.data.get(r.dataId).values;for(let w=0;w<c;w++){const x=w*d*u*f;for(let $=0;$<u;$++){const C=$*(d*f);for(let E=0;E<d;E++){const I=E*f;for(let T=0;T<f;T++){const N=[c,$,E,T],k=N[2],O=N[1];let _=(k-h)*v-(O-p)*m,P=(k-h)*m+(O-p)*v;_=Math.round(_+h),P=Math.round(P+p);let D=a;if(typeof a!="number"&&(T===3?D=g:D=a[T]),_>=0&&_<d&&P>=0&&P<u){const R=P*(d*f),F=_*f,V=x+R+F+T;D=y[V]}const L=x+C+I+T;l[L]=D}}}}return{dataId:s.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kGe=nn(rg,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),OGe={kernelName:rg,backendName:"cpu",kernelFunc:kGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AGe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:a}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Wu(a,i,o),f=!0,h=n.bufferSync(i),p=n.bufferSync(a),g=Ad(h,p,o,d,c,l,s,u,0,f);return n.makeTensorInfo(o,g.dtype,g.values)}const _Ge={kernelName:nE,backendName:"cpu",kernelFunc:AGe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PGe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<e?n=i+1:r=i;return r}function RGe(t,e){let n=0,r=t.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),t[i]<=e?n=i+1:r=i;return r}function DGe(t,e,n,r,i,a){const o=qn("int32",n*i);for(let s=0;s<n;++s){const l=t.slice(s*r,(s+1)*r),c=s*i;for(let u=0;u<i;++u)o[c+u]=a==="left"?PGe(l,e[u+c]):RGe(l,e[u+c])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FGe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:a}=e,{side:o}=r,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,c=DGe(s,l,i.shape[0],i.shape[1],a.shape[1],o);return n.makeTensorInfo(a.shape,"int32",c)}const MGe={kernelName:iE,backendName:"cpu",kernelFunc:FGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LGe(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:a}=e;Je([r,i,a],"select");const o=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,u=ca(i.dtype,a.dtype),d=ui(de(i.shape),u);let f=0;const h=o===0||o>1||i.shape.length===1?1:de(i.shape.slice(1));for(let p=0;p<s.length;p++)for(let g=0;g<h;g++)s[p]===1?d[f++]=l[p]:d[f++]=c[p];return n.makeTensorInfo(i.shape,u,d)}const jGe={kernelName:Zb,backendName:"cpu",kernelFunc:LGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zGe=sT,BGe=lT,VGe=nn(ag,t=>t>=0?BGe*t:zGe*(Math.exp(t)-1)),WGe={kernelName:ag,backendName:"cpu",kernelFunc:VGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UGe=nn(lg,t=>t<0?-1:t>0?1:0),HGe={kernelName:lg,backendName:"cpu",kernelFunc:UGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GGe=nn(og,t=>Math.sin(t)),qGe={kernelName:og,backendName:"cpu",kernelFunc:GGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KGe=nn(sg,t=>Math.sinh(t)),XGe={kernelName:sg,backendName:"cpu",kernelFunc:KGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YGe=11920928955078125e-23,zV=Math.log(YGe)+2,ZGe=nn(ug,t=>{const e=t>-zV,n=t<zV,r=Math.exp(t);let i;return n?i=r:e?i=t:i=Math.log(1+r),i}),QGe={kernelName:ug,backendName:"cpu",kernelFunc:ZGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,paddings:o}=r;Je([i],"spaceToBatchND");const s=de(a),l=[[0,0]];l.push(...o);for(let $=1+a.length;$<i.shape.length;++$)l.push([0,0]);const c=GJ.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),u=Ix(c.shape,a,s,!1),d=Nx(u.length,a.length,!1),f=kx(c.shape,a,s,!1),g=xn({inputs:{x:c},backend:n,attrs:{shape:u}}),y=pa({inputs:{x:g},backend:n,attrs:{perm:d}}),x=xn({inputs:{x:y},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),x}const e7e={kernelName:ex,backendName:"cpu",kernelFunc:JGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t7e(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:a,defaultValue:o}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(a.dataId).values,u=n.data.get(o.dataId).values[0],[d,f,h,p,g]=yJ(s,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],i.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}const n7e={kernelName:aE,backendName:"cpu",kernelFunc:t7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r7e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(n.data.get(i.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(a.dataId).values),[c,u,d]=bJ(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}const i7e={kernelName:oE,backendName:"cpu",kernelFunc:r7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a7e(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[c,u]=w3(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const o7e={kernelName:sE,backendName:"cpu",kernelFunc:a7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7e(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${a.shape}`);if(i.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(a.dataId).values,[c,u]=w3(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(u,r.dtype,c)}const l7e={kernelName:lE,backendName:"cpu",kernelFunc:s7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c7e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:a,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=Wu(a,i,s),h=!1,p=n.bufferSync(i);let g;switch(a.dtype){case"bool":{const m=n.bufferSync(a),v=!!n.data.get(o.dataId).values[0];g=Ad(p,m,s,f,u,c,l,d,v,h);break}case"float32":{const m=n.bufferSync(a),v=n.data.get(o.dataId).values[0];g=Ad(p,m,s,f,u,c,l,d,v,h);break}case"int32":{const m=n.bufferSync(a),v=n.data.get(o.dataId).values[0];g=Ad(p,m,s,f,u,c,l,d,v,h);break}case"string":{const m=n.bufferSync(a),v=nc(n.data.get(o.dataId).values[0]);g=Ad(p,m,s,f,u,c,l,d,v,h);break}default:throw new Error(`Unsupported type ${a.dtype}`)}return n.makeTensorInfo(s,g.dtype,g.values)}const u7e={kernelName:cE,backendName:"cpu",kernelFunc:c7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:a,axis:o}=r,s=Tt(o,i.shape)[0],l=UM(i,a,s),c=new Array(i.shape.length).fill(0),u=i.shape.slice();return l.map(d=>{const f=[...u];f[s]=d;const h=gf({inputs:{x:i},backend:n,attrs:{begin:c,size:f}});return c[s]+=d,h})}const f7e={kernelName:tx,backendName:"cpu",kernelFunc:d7e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h7e={kernelName:uE,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Je(n,"square");const i=r.data.get(n.dataId).values,a=new Float32Array(i.length);for(let s=0;s<i.length;++s){const l=i[s];a[s]=l*l}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p7e=nn(vg,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),m7e={kernelName:vg,backendName:"cpu",kernelFunc:p7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,end:o,strides:s,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r;Je(i,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:g,sliceDim0:m,isSimpleSlice:v,begin:y,end:b,strides:w}=EM(i.shape,a,o,s,l,c,u,d,f);let x;if(g)x=xn({inputs:{x:i},backend:n,attrs:{shape:p}});else if(m||v){j(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const $=SM(y,b,w),C=gf({inputs:{x:i},backend:n,attrs:{begin:y,size:$}});x=xn({inputs:{x:C},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(C)}else{const $=n.bufferSync(i),C=SJ(h,$,w,y);x=n.makeTensorInfo(p,C.dtype,C.values)}return x}const v7e={kernelName:dE,backendName:"cpu",kernelFunc:g7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y7e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.data.get(u.dataId).values,h=n.data.get(d.dataId).values,[p,g]=$J(f,h,i,a,o,s,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",g)]}const b7e={kernelName:fE,backendName:"cpu",kernelFunc:y7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x7e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:a,delimiter:o}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.data.get(a.dataId).values,l=n.data.get(o.dataId).values[0],[c,u,d]=CJ(s,l,i),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const w7e={kernelName:hE,backendName:"cpu",kernelFunc:x7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S7e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(a.dataId).values,s=EJ(o,i);return n.makeTensorInfo(a.shape,"int32",s)}const $7e={kernelName:pE,backendName:"cpu",kernelFunc:S7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C7e=nn(pg,t=>Math.tan(t)),E7e={kernelName:pg,backendName:"cpu",kernelFunc:C7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T7e=nn(mg,t=>Math.tanh(t)),I7e={kernelName:mg,backendName:"cpu",kernelFunc:T7e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N7e(t){const{inputs:e,backend:n}=t,{tensor:r,indices:i,updates:a}=e,{sliceRank:o,numUpdates:s,sliceSize:l,strides:c,outputSize:u}=Wu(a,i,r.shape),d=!1,f=n.bufferSync(i),h=n.bufferSync(a),p=n.bufferSync(r),g=Ad(f,h,r.shape,u,l,s,o,c,p,d);return n.makeTensorInfo(r.shape,g.dtype,g.values)}const k7e={kernelName:rE,backendName:"cpu",kernelFunc:N7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:a}=r;Je(i,"tile");const o=IJ(n.bufferSync(i),a);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const A7e={kernelName:gg,backendName:"cpu",kernelFunc:O7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:a,sorted:o}=r;Je(i,"topk");const s=n.data.get(i.dataId).values,[l,c]=kJ(s,i.shape,i.dtype,a,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const P7e={kernelName:mE,backendName:"cpu",kernelFunc:_7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R7e(t){const{inputs:e,attrs:n,backend:r}=t,{image:i,transforms:a}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:c}=n,[u,d,f,h]=i.shape,[p,g]=c??[d,f],m=[u,p,g,h],v=ot(i.shape),y=v[0],b=v[1],w=v[2],x=ot(m),$=x[0],C=x[1],E=x[2],I=Vr(i.dtype,de(m));I.fill(l);const T=r.data.get(i.dataId).values,N=r.data.get(a.dataId).values;for(let O=0;O<u;++O){const _=a.shape[0]===1?N:N.subarray(O*8,O*8+8);for(let P=0;P<p;++P)for(let D=0;D<g;++D)for(let L=0;L<h;++L){let R;const F=_[6]*D+_[7]*P+1;if(F===0)continue;const V=(_[0]*D+_[1]*P+_[2])/F,H=(_[3]*D+_[4]*P+_[5])/F,U=BV(V,f,s),W=BV(H,d,s);switch(o){case"nearest":R=z7e(T,d,f,y,b,w,O,W,U,L,l);break;case"bilinear":R=B7e(T,d,f,y,b,w,O,W,U,L,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const G=O*$+P*C+D*E+L;I[G]=R}return r.makeTensorInfo(m,i.dtype,I)}return{dataId:r.write(I,m,i.dtype),shape:i.shape,dtype:i.dtype}}const D7e={kernelName:gE,backendName:"cpu",kernelFunc:R7e};function BV(t,e,n){switch(n){case"reflect":return F7e(t,e);case"wrap":return M7e(t,e);case"nearest":return j7e(t,e);case"constant":default:return L7e(t)}}function F7e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return pu(0,n,e-1)}function M7e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return pu(0,n,e-1)}function L7e(t,e){return t}function j7e(t,e){return pu(0,t,e-1)}function Rv(t,e,n,r,i,a,o,s,l,c,u){const d=o*r+s*i+l*a+c;return 0<=s&&s<e&&0<=l&&l<n?t[d]:u}function z7e(t,e,n,r,i,a,o,s,l,c,u){const d=Math.round(s),f=Math.round(l);return Rv(t,e,n,r,i,a,o,d,f,c,u)}function B7e(t,e,n,r,i,a,o,s,l,c,u){const d=Math.floor(s),f=Math.floor(l),h=d+1,p=f+1,g=(p-l)*Rv(t,e,n,r,i,a,o,d,f,c,u)+(l-f)*Rv(t,e,n,r,i,a,o,d,p,c,u),m=(p-l)*Rv(t,e,n,r,i,a,o,h,f,c,u)+(l-f)*Rv(t,e,n,r,i,a,o,h,p,c,u);return(h-s)*g+(s-d)*m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V7e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:a}=e;Je(a,"unique");const o=r.data.get(a.dataId).values,{outputValues:s,outputShape:l,indices:c}=OJ(o,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}const W7e={kernelName:vE,backendName:"cpu",kernelFunc:V7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U7e(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:a}=r;a<0&&(a+=i.shape.length);const o=i.shape.length,s=i.shape[a],l=new Array(o-1);let c=0;for(let h=0;h<o;h++)h!==a&&(l[c++]=i.shape[h]);const u=new Array(o).fill(0),d=i.shape.slice();d[a]=1;const f=new Array(s);for(let h=0;h<f.length;h++){u[a]=h;const p=gf({inputs:{x:i},backend:n,attrs:{begin:u,size:d}});f[h]=xn({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return f}const H7e={kernelName:ix,backendName:"cpu",kernelFunc:U7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:a}=e,{numSegments:o}=r;Je(i,"unsortedSegmentSum");const s=i.shape.length,l=a.shape.length,c=[],u=[],d=s-l;let f=a;for(let p=0;p<d;++p){const g=F$({inputs:{input:f},backend:n,attrs:{dim:p+1}});f=g,u.push(g)}for(let p=0;p<o;++p){const g=hc(p,"int32"),m=n.makeTensorInfo([],"int32",g),v=HQ({inputs:{a:m,b:f},backend:n}),y=Eu({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),b=xT({inputs:{a:y,b:i},backend:n}),w=Lx({inputs:{x:b},backend:n,attrs:{axis:0,keepDims:!1}});c.push(w),u.push(m),u.push(v),u.push(y),u.push(b),u.push(w)}const h=HJ({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const q7e={kernelName:ax,backendName:"cpu",kernelFunc:G7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K7e=[V6e,SWe,U6e,G6e,NWe,K6e,Y6e,Q6e,eUe,nUe,iUe,oUe,lUe,dUe,hUe,gUe,yUe,xUe,SUe,z6e,CUe,TUe,NUe,OWe,OUe,TWe,_We,_Ue,$We,RUe,FUe,MUe,jUe,BUe,WUe,HUe,qUe,XUe,ZUe,JUe,tHe,rHe,aHe,sHe,lHe,uHe,fHe,pHe,mHe,gHe,vHe,bHe,SHe,P6e,CHe,PWe,_He,RWe,PHe,FWe,jHe,zHe,VHe,LWe,zWe,UHe,GHe,KHe,YHe,VWe,UWe,CWe,QHe,DUe,e8e,n8e,i8e,R6e,GWe,KWe,o8e,YWe,l8e,d8e,h8e,g8e,y8e,x8e,w8e,QWe,$8e,E8e,I8e,k8e,A8e,P8e,D8e,e6e,M8e,z8e,W8e,n6e,i6e,G8e,X8e,Q8e,o6e,eGe,nGe,rGe,GJ,sGe,F6e,c6e,cGe,dGe,hGe,mGe,EWe,x_,vGe,M6e,L6e,j6e,bGe,wGe,$Ge,EGe,IGe,NGe,OGe,v6e,_Ge,MGe,jGe,WGe,b6e,HGe,qGe,XGe,x6e,B8e,QGe,e7e,n7e,i7e,o7e,l7e,u7e,f7e,$6e,h7e,E6e,I6e,m7e,v7e,b7e,w7e,$7e,A6e,xHe,E7e,I7e,k7e,A7e,P7e,D7e,s6e,W7e,H7e,q7e,tGe];for(const t of K7e)bE(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bd={},V1={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function X7e(t,e){bd[t]=e}function As(t,e){if(!(t in bd)||e!=null){const r=Z7e(t,e);if(r!==null)bd[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=bd[t];return n==null||n.isContextLost()?(delete bd[t],As(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),bd[t])}function Y7e(t){if(!oe().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Z7e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??Y7e(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete bd[t]},!1),oe().getBool("SOFTWARE_WEBGL_ENABLED")&&(V1.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",V1)||n.getContext("experimental-webgl",V1):n.getContext("webgl2",V1)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var C0;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(C0||(C0={}));var no;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(no||(no={}));var oi;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(oi||(oi={}));function jx(t,e){return[e,t]}function Q7e(t,e){return t*e}function W1(t){const e=de(t),n=Math.ceil(e/4);return d$(n)}function Tg(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function J7e(t,e){const[n,r]=Tg(t,e);return n*r*4}function T3(t,e){const n=t;let r,i,a,o,s,l,c,u,d,f;return oe().getNumber("WEBGL_VERSION")===2?(r=n.R32F,i=n.R16F,a=n.RGBA16F,o=n.RGBA32F,s=n.RED,c=4,u=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(r=t.RGBA,i=t.RGBA,a=t.RGBA,o=n.RGBA,s=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,f=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ze(t,e){const n=e();return oe().getBool("DEBUG")&&e9e(t),n}function e9e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+i9e(t,e))}const t9e=596e-10,n9e=65504;function r9e(t){return!!(oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||t9e<Math.abs(t)&&Math.abs(t)<n9e)}function i9e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function U1(t,e){return xc(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function a9e(t,e){const n=xc(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(ze(t,()=>t.shaderSource(n,e)),ze(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function o9e(t,e){const n=xc(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(ze(t,()=>t.shaderSource(n,e)),ze(t,()=>t.compileShader(n)),oe().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw qJ(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const s9e=/ERROR: [0-9]+:([0-9]+):/g;function qJ(t,e){const n=s9e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],i=t.split(`
`),a=i.length.toString().length+2,o=i.map((d,f)=>Ld((f+1).toString(),a)+d);let s=0;for(let d=0;d<o.length;d++)s=Math.max(o[d].length,s);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Ld(c[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function l9e(t){return xc(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function c9e(t,e){if(ze(t,()=>t.linkProgram(e)),!oe().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function hN(t,e){if(ze(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function u9e(t,e){const n=xc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ze(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),ze(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function d9e(t,e){const n=xc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return ze(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),ze(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function f9e(t){return xc(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function h9e(t,e){const n=oe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,i=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+i+".")}}function p9e(t){return xc(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function VV(t,e,n,r,i,a,o){const s=t.getAttribLocation(e,n);return s===-1?!1:(ze(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),ze(t,()=>t.vertexAttribPointer(s,i,t.FLOAT,!1,a,o)),ze(t,()=>t.enableVertexAttribArray(s)),!0)}function m9e(t,e,n){x9e(t,n),ze(t,()=>t.activeTexture(t.TEXTURE0+n)),ze(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function g9e(t,e,n){return xc(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function v9e(t,e,n){return t.getUniformLocation(e,n)}function y9e(t,e,n,r){ze(t,()=>m9e(t,e,r)),ze(t,()=>t.uniform1i(n,r))}function pN(t,e,n){ze(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),ze(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function WV(t,e){ze(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),ze(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function H1(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+b9e(t,e))}function b9e(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function xc(t,e,n){const r=ze(t,()=>e());if(r==null)throw new Error(n);return r}function x9e(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const i=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${i}.`)}}function Zp(t,e=2){return de(t.slice(0,t.length-e))}function Qp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function G1(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Zp(t),...Qp(t)]),e}function w9e(t,e=!1){let n=oe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=oe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&oe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((s,l)=>l>=t.length-2?f2(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=fc(t).newShape);let i=de(t),a=null;t.length<=1&&i<=n?a=[1,i]:t.length===2&&t[0]<=n&&t[1]<=n?a=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?a=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?a=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?a=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(a=[t[0],t[1]*t[2]*t[3]]);const o=a!=null&&Math.max(...a)>r&&Math.min(...a)<=(e?2:1)&&Math.min(...a)>0;if(a==null||o)if(e){const s=Zp(t);let l=2,c=2;t.length&&([l,c]=Qp(t)),i=s*(l/2)*(c/2),a=d$(i).map(u=>u*2)}else a=d$(i);return a}function q1(t){return t%2===0}function L$(t,e){if(t=t.slice(-2),e=e.slice(-2),Nt(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||q1(n)&&q1(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&q1(t[0])&&q1(e[0])}let mN,gN;function S9e(t){if(mN==null){const e=As(t);mN=e.getParameter(e.MAX_TEXTURE_SIZE)}return mN}function $9e(t){if(gN==null){const e=As(t);gN=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,gN)}function C9e(t){if(t===0)return 0;let e;const n=As(t);return jo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:jo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function jo(t,e){return t.getExtension(e)!=null}function UV(t){try{if(As(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function E9e(t){if(t===0)return!1;const e=As(t);if(t===1){if(!jo(e,"OES_texture_float"))return!1}else if(!jo(e,"EXT_color_buffer_float"))return!1;return S_(e)}function T9e(t){if(t===0)return!1;const e=As(t);if(t===1){if(!jo(e,"OES_texture_float")||!jo(e,"WEBGL_color_buffer_float"))return!1}else{if(jo(e,"EXT_color_buffer_float"))return S_(e);const r="EXT_color_buffer_half_float";if(jo(e,r)){const i=e.getExtension(r);return I9e(e,i)}return!1}return S_(e)}function S_(t){const e=T3(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(a),o}function I9e(t,e){const n=T3(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),s}function N9e(t){return t!==2?!1:As(t).fenceSync!=null}function zx(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&j(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tt=oe();tt.registerFlag("HAS_WEBGL",()=>tt.getNumber("WEBGL_VERSION")>0);tt.registerFlag("WEBGL_VERSION",()=>UV(2)?2:UV(1)?1:0);tt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);tt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>tt.get("WEBGL_VERSION")===2);tt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);tt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);tt.registerFlag("WEBGL_PACK",()=>tt.getBool("HAS_WEBGL"));tt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_CLIP",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_REDUCE",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_LAZILY_UNPACK",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_CONV_IM2COL",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>tt.getBool("WEBGL_PACK"));tt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>S9e(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>$9e(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=tt.getNumber("WEBGL_VERSION");return t===0?0:C9e(t)});tt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>tt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!qD());tt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>E9e(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>tt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:tt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));tt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>T9e(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>N9e(tt.getNumber("WEBGL_VERSION")));tt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>tt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);tt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});tt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>qD()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});tt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);tt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);tt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);tt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);tt.registerFlag("WEBGL_EXP_CONV",()=>!1);tt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>tt.getBool("IS_TEST"));tt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);tt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);tt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);tt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qi(){let t,e,n,r,i,a,o,s,l,c;return oe().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",a="outputColor",o="out vec4 outputColor;",s=oe().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",a="gl_FragColor",o="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:a,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zf(t,e,n="index"){const r=ot(e);return r.map((i,a)=>{const o=`int ${t[a]} = ${n} / ${i}`,s=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${i}`:`index -= ${t[a]} * ${i}`;return`${o}; ${s};`}).join("")}function wT(t,e,n="index"){const r=ot(e);return r.map((i,a)=>{const o=`int ${t[a]} = ${n} / outShapeStrides[${a}]`,s=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * outShapeStrides[${a}]`:`index -= ${t[a]} * outShapeStrides[${a}]`;return`${o}; ${s};`}).join("")}function k9e(t,e){const n=t.length,r=t.map(a=>`${e}[${a}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let a=n-3;a>=0;--a)i[a]=`(${i[a+1]} * ${r[a+1]})`;return i}function O9e(t,e,n="index"){const r=t.map((a,o)=>o),i=k9e(r,e);return i.map((a,o)=>{const s=`int ${t[o]} = ${n} / ${i[o]}`,l=o===i.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${i[o]}`:`index -= ${t[o]} * ${i[o]}`;return`${s}; ${l};`}).join("")}function I3(t){const e=ot(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function N3(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const KJ=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:XJ}=gY;function A9e(t,e,n){const r=[];if(t.forEach(h=>{const p=de(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?r.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${h.name};`),r.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:g}=k3(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(g.length){case 1:r.push(`uniform int ${h.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${h.name}Shape;`);break}r.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{r.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const i=r.join(`
`),a=t.map(h=>_9e(h,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,s=qi(),l=D9e(s);let c,u,d=L9e(s);return e.isPacked?(c=P9e(e.logicalShape,o,n.enableShapeUniforms),u=M9e(s)):(c=R9e(e.logicalShape,o,n.enableShapeUniforms),u=F9e(s)),n.packedInputs&&(d+=V9e),[d,l,u,i,c,a,n.userCode].join(`
`)}function Ig(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return eqe(t,e);case 1:return nqe(t,e);case 2:return iqe(t,e);case 3:return oqe(t,e);case 4:return lqe(t,e);case 5:return cqe(t);case 6:return uqe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function YJ(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return J9e(t);case 1:return tqe(t,e);case 2:return rqe(t,e);case 3:return aqe(t,e);default:return sqe(t,e)}}function _9e(t,e,n=!1,r){let i="";n?i+=YJ(t,r):i+=Ig(t,r);const a=t.shapeInfo.logicalShape,o=e.logicalShape;return a.length<=o.length&&(n?i+=dqe(t,e):i+=fqe(t,e)),i}function P9e(t,e,n){switch(t.length){case 0:return ZJ();case 1:return W9e(t,e,n);case 2:return Z9e(t,e,n);case 3:return H9e(t,e,n);default:return q9e(t,e,n)}}function R9e(t,e,n){switch(t.length){case 0:return ZJ();case 1:return U9e(t,e,n);case 2:return Q9e(t,e,n);case 3:return G9e(t,e,n);case 4:return K9e(t,e,n);case 5:return X9e(t,e);case 6:return Y9e(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function D9e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function F9e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function M9e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function L9e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${j9e}
    ${z9e}
    ${B9e}
  `}const j9e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,z9e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,B9e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,V9e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ZJ(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function W9e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function U9e(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function H9e(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[2]/2),a=i*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec3(b, r, c);
    }
  `}function G9e(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${wT(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=zf(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function q9e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],i=Math.ceil(t[t.length-1]/2),a=i*Math.ceil(t[t.length-2]/2);let o=a,s="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],s=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+s,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${s}

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec${t.length}(${l});
    }
  `}function K9e(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${wT(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=zf(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function X9e(t,e){const n=zf(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Y9e(t,e){const n=zf(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Z9e(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Nt(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const i=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${i});
      int c = imod(index, ${i}) * 2;

      return ivec2(r, c);
    }
  `}function Q9e(t,e,n){return Nt(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Bf(t){return`offset${t}`}function J9e(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=qi();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function eqe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,a]=t.shapeInfo.texShape;if(i===1&&a===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Bf(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[s,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${s}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function tqe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape,a=qi();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${a.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${a.texture2D}(${n}, uv);
    }
  `}function nqe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${Ng(t)}
      }
    `;const i=t.shapeInfo.texShape,a=i[0],o=i[1];if(o===1&&a===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const s=Bf(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${a}.0);
        return sampleTexture(${n}, uv);
      }
    `:a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${a}, ${o}, index + ${s});
      return sampleTexture(${n}, uv);
    }
  `}function rqe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,o=a[0],s=a[1],l=qi();if(a!=null&&Nt(n,a))return e?`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${i}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${i}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function iqe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape;if(a!=null&&Nt(n,a)){if(e)return`
      float ${i}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const f=a[0],h=a[1];return`
    float ${i}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:s}=fc(n),l=o;if(l.length<n.length){const f=kg(t,l),h=["row","col"];return`
      ${Ig(f,e)}
      float ${i}(int row, int col) {
        return ${i}(${Og(h,s)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${Ng(t)}
      }
    `;const c=a[0],u=a[1],d=Bf(r);return u===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${i}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${i}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${i}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function aqe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],p=kg(t,f),g=["b","row","col"];return`
        ${YJ(p,e)}
        vec4 ${i}(int b, int row, int col) {
          return ${i}(${Og(g,h)});
        }
      `}const s=qi();if(e)return`
    vec4 ${i}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `;const l=o[0],c=o[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${i}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${s.texture2D}(${r}, uv);
    }
  `}function oqe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],o=n[2],{newShape:s,keptDims:l}=fc(n),c=s;if(c.length<n.length){const g=kg(t,c),m=["row","col","depth"];return`
        ${Ig(g,e)}
        float ${i}(int row, int col, int depth) {
          return ${i}(${Og(m,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${o}, 1)));
        ${Ng(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],f=u[1],h=t.shapeInfo.flatOffset;if(f===a&&h==null)return e?`
      float ${i}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${i}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(f===o&&h==null)return e?`
      float ${i}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${i}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=Bf(r);return e?`
    float ${i}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${i}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${r}, uv);
      }
  `}function sqe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=qi();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);
    }
  `;const a=t.shapeInfo.logicalShape,o=a.length,s=t.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=l[0],u=l[1],d=Math.ceil(a[o-1]/2);let f=d*Math.ceil(a[o-2]/2),h="int b, int row, int col",p=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<o-1;g++)h=`int b${g}, `+h,f*=a[o-g-1],p=`b${g} * ${f} + `+p;return`
    vec4 ${r}(${h}) {
      int index = ${p};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${i.texture2D}(${n}, uv);
    }
  `}function lqe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],o=n[2]*a,s=n[1]*o,{newShape:l,keptDims:c}=fc(n);if(l.length<n.length){const y=kg(t,l),b=["row","col","depth","depth2"];return`
      ${Ig(y,e)}
      float ${i}(int row, int col, int depth, int depth2) {
        return ${i}(${Og(b,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${s}, ${o}, ${a}, 1)));
        ${Ng(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1],p=`int stride2 = ${r}Shape[3];`,g=`int stride1 = ${r}Shape[2] * stride2;`,m=`int stride0 = ${r}Shape[1] * stride1;`;if(h===s&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        ${p}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(h===a&&u==null)return e?`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${i}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${r}, uv);
      }
    `;const v=Bf(r);return e?`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${g}
      ${m}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${v});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${i}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${v});
      return sampleTexture(${r}, uv);
    }
  `}function cqe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],a=e[3]*i,o=e[2]*a,s=e[1]*o,{newShape:l,keptDims:c}=fc(e);if(l.length<e.length){const g=kg(t,l),m=["row","col","depth","depth2","depth3"];return`
      ${Ig(g)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${Og(m,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${s}, ${o}, ${a}, ${i})) +
          depth3;
        ${Ng(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,f=d[0],h=d[1];if(h===s&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${a}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===i&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Bf(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${s} + col * ${o} + depth * ${a} +
          depth2 * ${i} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function uqe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:a}=fc(e);if(i.length<e.length){const m=kg(t,i),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${Ig(m)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${Og(v,a)});
      }
    `}const o=e[5],s=e[4]*o,l=e[3]*s,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${s})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${Ng(t)}
      }
    `;const d=t.shapeInfo.flatOffset,f=t.shapeInfo.texShape,h=f[0],p=f[1];if(p===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${s}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=Bf(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${s} + depth3 * ${o} + depth4 + ${g};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Ng(t){const e=t.name,n=de(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function dqe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,s=XJ(t.shapeInfo.logicalShape,e.logicalShape),l=on(o),c=o-a;let u;const d=["x","y","z","w","u","v"];a===0?u="":o<2&&s.length>=1?u="coords = 0;":u=s.map(y=>`coords.${d[y+c]} = 0;`).join(`
`);let f="";o<2&&a>0?f="coords":f=t.shapeInfo.logicalShape.map((y,b)=>`coords.${d[b+c]}`).join(", ");let h="return outputValue;";const g=de(t.shapeInfo.logicalShape)===1,v=de(e.logicalShape)===1;if(a===1&&!g&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!v)o===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(s.length){const y=a-2,b=a-1;s.indexOf(y)>-1&&s.indexOf(b)>-1?h="return vec4(outputValue.x);":s.indexOf(y)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(b)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${i}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${f});
      ${h}
    }
  `}function fqe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",a=e.texShape,o=t.shapeInfo.texShape,s=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&s===l&&t.shapeInfo.flatOffset==null&&Nt(o,a))return`
      float ${i}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=on(l),u=XJ(t.shapeInfo.logicalShape,e.logicalShape),d=l-s;let f;const h=["x","y","z","w","u","v"];s===0?f="":l<2&&u.length>=1?f="coords = 0;":f=u.map(g=>`coords.${h[g+d]} = 0;`).join(`
`);let p="";return l<2&&s>0?p="coords":p=t.shapeInfo.logicalShape.map((g,m)=>`coords.${h[m+d]}`).join(", "),`
    float ${i}() {
      ${c} coords = getOutputCoords();
      ${f}
      return get${r}(${p});
    }
  `}function on(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function k3(t,e,n){const{newShape:r,keptDims:i}=fc(e),a=e.length,o=t&&a===3&&e[0]===1,s=o?e.slice(1):r,l=!t&&a>1&&!Nt(e,n)&&r.length<a||o;return{useSqueezeShape:l,uniformShape:l?s:e,keptDims:i}}function kg(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Og(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hqe(t,e,n,r){const i=n.map((u,d)=>{const f={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(f.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:f}}),a=i.map(u=>u.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=A9e(i,o,e),l=o9e(t.gl,s),c=t.createProgram(l);return oe().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:a,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:a,outShapeInfo:o},QJ(t,e,c)))}function QJ(t,e,n){const r=[],i=[];let a,o,s,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),oe().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const f={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(f.shape=t.getUniformLocation(n,`${d}Shape`,u),f.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),r.push(f)}if(e.enableShapeUniforms&&(a=t.getUniformLocation(n,"outShape",u),s=t.getUniformLocation(n,"outShapeStrides",u),o=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)i.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:a,outShapeStridesLocation:s,outTexShapeLocation:o}}function HV(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const i=n.logicalShape,a=e[r],o=a.shape;if(!Nt(i,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${i} and ${o} must match`);if(n.isUniform&&a.isUniform)return;const s=n.texShape,l=a.isUniform?null:a.texData.texShape;if(!Nt(s,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${l} must match`)})}function pqe(t,e,n,r,i){e.program.enableShapeUniforms||(HV(e.inShapeInfos,n),HV([e.outShapeInfo],[r]));const a=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a.texture,o[0],o[1]):t.setOutputMatrixTexture(a.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),oe().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:f,texShape:h}=e.variablesLocations[l];if(f){const{uniformShape:p}=k3(e.program.packedInputs,c.shape,c.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(f,new Int32Array(p));break;case 2:t.gl.uniform2iv(f,new Int32Array(p));break;case 3:t.gl.uniform3iv(f,new Int32Array(p));break;case 4:t.gl.uniform4iv(f,new Int32Array(p));break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(de(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let p=c.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(u,p)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const s=e.outShapeLocation;if(s)switch(r.shape.length){case 1:t.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(s,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=ot(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&i)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=i[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function mqe(t,e,n){let r="";e.concat(n).forEach(o=>{const s=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=k3(t.packedInputs,o.shape,l);let f="",h="",p="";if(u.length===1&&t.packedInputs){const x=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${x[0]>1}_${x[1]>1}`}else if(u.length===2&&!t.packedInputs)h=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const x=ot(u);p=`${x[0]===l[1]}_${x[x.length-1]===l[1]}`}const g=o.shape.length,m=u.length===2&&Nt(o.shape,l),v=de(o.shape)===1,y=cf(o.shape,n.shape),b=!t.packedInputs&&g===n.shape.length&&Nt(l,n.texData.texShape),w=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${g}_${b}_${c?d:""}_${u.length}_${v}_${y}_${m}_${f}_${h}_${p}_${w}_${s}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${s}`}});const i=t.userCode;let a=t.constructor.name;return a+="_"+r+"_"+i+`${oe().getNumber("WEBGL_VERSION")}`,a}function Ii(t){return oe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gqe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=C0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=qi();this.outputShape=e,this.enableShapeUniforms=Ii(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?wT(["r","c","d"],e):zf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vqe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=C0.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=qi();this.outputShape=e,this.enableShapeUniforms=Ii(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?wT(["r","c","d"],e):zf(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yqe{constructor(e){this.variableNames=["A"],this.outTexUsage=no.DOWNLOAD;const n=qi();this.outputShape=e,this.userCode=`
      ${KJ}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bqe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=no.DOWNLOAD;const n=qi();this.outputShape=e,this.userCode=`
      ${KJ}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xqe={R:0,G:1,B:2,A:3};class GV{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const i=qi();this.outputShape=e,this.enableShapeUniforms=Ii(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)");let o="";for(let s=0;s<r.length;s++){const l=r[s];o+=`
          if(offset == ${s}) {
            result = values[${xqe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?N3():I3(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${i.texture2D}(A, uv);
          ${o}
        }
        ${i.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wqe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=qi();this.outputShape=e,this.enableShapeUniforms=Ii(this.outputShape.length);let i="",a="result";n&&(a="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let s=0;s<=1;s++){const l=o*2+s;i+=`
          localCoords = coords;
          if(localCoords[2] + ${s} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${s};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?N3():I3(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${i}

          ${r.output} = ${a};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sqe(t){const e=qi(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return a9e(t,n)}function $qe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return u9e(t,e)}function Cqe(t){const e=new Uint16Array([0,1,2,2,1,3]);return d9e(t,e)}function Bx(t,e,n,r,i,a){h9e(e,n);const o=f9e(t),s=t.TEXTURE_2D;return ze(t,()=>t.bindTexture(s,o)),ze(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),ze(t,()=>t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),ze(t,()=>t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)),ze(t,()=>t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)),oe().getNumber("WEBGL_VERSION")===1?ze(t,()=>t.texImage2D(s,0,r,e,n,0,i,a,null)):ze(t,()=>t.texStorage2D(s,1,r,e,n)),ze(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function JJ(t){return t.internalFormatFloat}function Eqe(t,e,n,r){const[i,a]=jx(e,n);return Bx(t,i,a,JJ(r),r.textureFormatFloat,t.FLOAT)}function eee(t){return t.internalFormatHalfFloat}function Tqe(t,e,n,r){const[i,a]=jx(e,n);return Bx(t,i,a,eee(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function tee(t){return t.downloadTextureFormat}function Iqe(t,e,n,r){const[i,a]=jx(e,n);return Bx(t,i,a,tee(r),t.RGBA,t.UNSIGNED_BYTE)}function nee(t){return t.internalFormatPackedFloat}function Nqe(t,e,n,r){const[i,a]=Tg(e,n);return Bx(t,i,a,nee(r),t.RGBA,t.FLOAT)}function ree(t){return t.internalFormatPackedHalfFloat}function kqe(t,e,n,r){const[i,a]=Tg(e,n);return Bx(t,i,a,ree(r),t.RGBA,r.textureTypeHalfFloat)}function Oqe(t,e,n){return ze(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),VV(t,e,"clipSpacePos",n,3,20,0)&&VV(t,e,"uv",n,2,20,12)}function Aqe(t,e,n,r,i,a){ze(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,s,l;i instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),s=t.FLOAT,l=a.internalFormatPackedFloat),o.set(i),oe().getNumber("WEBGL_VERSION")===2?ze(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,s,o)):ze(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,s,o)),ze(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function _qe(t,e,n){ze(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?oe().getNumber("WEBGL_VERSION")===2?ze(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):ze(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):oe().getNumber("WEBGL_VERSION")===2?ze(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):ze(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),ze(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Pqe(t,e,n,r){const i=t.createBuffer();ze(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,i));const s=4*4*e*n;return ze(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,s,t.STREAM_READ)),ze(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),ze(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),i}function Rqe(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function Dqe(t,e,n,r){const[i,a]=jx(e,n),o=4,s=new Uint8Array(Q7e(e*n,o));return ze(t,()=>t.readPixels(0,0,i,a,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function Fqe(t,e,n,r,i,a,o,s){const l=t,c=new Float32Array(J7e(a,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function Mqe(t,e,n){const r=new Float32Array(e*n*4);return ze(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vN{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=oe().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,X7e(n,e)):this.gl=As(n),e=this.gl,oe().getNumber("WEBGL_VERSION")===2){const a=e;this.createVertexArray=()=>ze(a,()=>a.createVertexArray()),this.bindVertexArray=o=>ze(a,()=>a.bindVertexArray(o)),this.deleteVertexArray=o=>ze(a,()=>a.deleteVertexArray(o)),this.getVertexArray=()=>ze(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(e!=null){const a=e.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>ze(e,()=>a.createVertexArrayOES()),this.bindVertexArray=o=>ze(e,()=>a.bindVertexArrayOES(o)),this.deleteVertexArray=o=>ze(e,()=>a.deleteVertexArrayOES(o)),this.getVertexArray=()=>ze(e,()=>e.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const i="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),oe().getNumber("WEBGL_VERSION")===1){const a="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=U1(this.gl,a),jo(this.gl,o))this.textureHalfFloatExtension=U1(this.gl,o);else if(oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),jo(this.gl,i))this.colorBufferHalfFloatExtension=U1(this.gl,i);else if(oe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",jo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(jo(this.gl,i))this.colorBufferHalfFloatExtension=this.gl.getExtension(i);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=$qe(this.gl),this.indexBuffer=Cqe(this.gl),this.framebuffer=p9e(this.gl),this.textureConfig=T3(this.gl,this.textureHalfFloatExtension)}get debug(){return oe().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;ze(e,()=>e.finish()),ze(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),ze(e,()=>e.deleteFramebuffer(this.framebuffer)),ze(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),ze(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),ze(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),Eqe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),Tqe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),Iqe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),_qe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,i){this.throwIfDisposed(),Aqe(this.gl,e,n,r,i,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),kqe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),Nqe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(WV(this.gl,this.framebuffer),this.outputTexture=null),ze(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Dqe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,i,a,o){return Fqe(this.gl,e,n,r,i,a,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return Rqe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const i=Pqe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(oe().getBool("WEBGL_FENCE_API_ENABLED")){const i=e,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=i.clientWaitSync(a,0,0);return o===i.ALREADY_SIGNALED||o===i.CONDITION_SATISFIED},n=a}else oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>Mqe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=Sqe(n));const r=l9e(n);ze(n,()=>n.attachShader(r,this.vertexShader)),ze(n,()=>n.attachShader(r,e)),c9e(n,r);const i=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&hN(n,i),i}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;ze(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),Oqe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(ze(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&hN(this.gl,this.program),ze(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?g9e(this.gl,e,n):v9e(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),ze(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),y9e(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[i,a]=Tg(n,r);this.setOutputMatrixTextureDriver(e,i,a)}setOutputMatrixWriteRegion(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)}setOutputPackedMatrixWriteRegion(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&hN(this.gl,this.program),H1(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}ze(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),ze(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=U1(this.gl,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.createQuery();return r.beginQuery(i.TIME_ELAPSED_EXT,a),a}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await AA(()=>this.disposed||this.isQueryAvailable(e,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,i=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),i=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=Lqe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in oe().platform&&(r=oe().platform.setTimeoutCustom.bind(oe().platform)),AA(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),pN(this.gl,e,this.framebuffer),this.debug&&H1(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(pN(this.gl,this.outputTexture,this.framebuffer),this.debug&&H1(this.gl)):WV(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const i=this.gl;pN(i,e,this.framebuffer),this.debug&&H1(i),this.outputTexture=e,ze(i,()=>i.viewport(0,0,n,r)),ze(i,()=>i.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,i){this.throwIfDisposed(),ze(this.gl,()=>this.gl.scissor(e,n,r,i))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function Lqe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:jqe,bincountImpl:iee,bincountReduceImpl:zqe,bitwiseAndImpl:Bqe,castImpl:Vqe,ceilImpl:Wqe,concatImpl:Uqe,equalImpl:Hqe,expImpl:Gqe,expm1Impl:qqe,floorImpl:Kqe,gatherNdImpl:Xqe,gatherV2Impl:Yqe,greaterImpl:Zqe,greaterEqualImpl:Qqe,lessImpl:Jqe,lessEqualImpl:eKe,linSpaceImpl:tKe,logImpl:nKe,maxImpl:rKe,maximumImpl:iKe,minimumImpl:aKe,multiplyImpl:oKe,negImpl:sKe,notEqualImpl:lKe,prodImpl:cKe,raggedGatherImpl:uKe,raggedRangeImpl:dKe,raggedTensorToTensorImpl:fKe,rangeImpl:hKe,rsqrtImpl:pKe,scatterImpl:mKe,sigmoidImpl:gKe,simpleAbsImpl:aee,sliceImpl:vKe,sparseFillEmptyRowsImpl:yKe,sparseReshapeImpl:bKe,sparseSegmentReductionImpl:oee,sqrtImpl:xKe,staticRegexReplaceImpl:wKe,stridedSliceImpl:SKe,stringNGramsImpl:$Ke,stringSplitImpl:CKe,stringToHashBucketFastImpl:EKe,subImpl:TKe,tileImpl:IKe,topKImpl:NKe,transposeImpl:O3,uniqueImpl:kKe}=_6e;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function see(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Vi(t,e){return e===1?[t]:see(t,e)}function OKe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AKe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=Ii(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Vi("rc",this.rank),r=on(this.rank),i=this.getOutOfBoundsCondition(n),a=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${i}) {
            setOutput(vec4(0));
          } else {
            ${a}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let a=`${r===0?"r":"rp1"}, ${i===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)a=`${e[e.length-1-o]},`+a;n.push(a)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],i=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${i};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lee{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=Ii(this.outputShape.length);let r="";for(let i=0;i<4;i++){let a="thisRC = rc;";i%2===1&&(a+="thisRC.z += 1;"),i>1&&(a+="thisRC.y += 1;"),r+=`
        ${a}
        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${i>0?"}":""}
      `}this.userCode=`
      ${_Ke(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?N3():I3(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function _Ke(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?O9e(["r","c","d"],"inputShape"):zf(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PKe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const i=KV(n,r),a=XV(e,i,r);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const o=qV(e,i,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[a].pop();return this.usedTextures[a].push(l),l}let s;return i===oi.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===oi.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===oi.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===oi.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===oi.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,n,r,i){if(this.freeTextures==null)return;const a=KV(r,i),o=XV(n,a,i);o in this.freeTextures||(this.freeTextures[o]=[]);const s=qV(n,a,this.gpgpu.gl,this.gpgpu.textureConfig,i),l=oe().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function RKe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function qV(t,e,n,r,i){const a=DKe(e,r);let o;if(i){const[l,c]=Tg(t[0],t[1]);o=l*c}else{const[l,c]=jx(t[0],t[1]);o=l*c}const s=RKe(n,a);return o*s}function DKe(t,e){switch(t){case oi.PACKED_2X2_FLOAT32:return nee(e);case oi.PACKED_2X2_FLOAT16:return ree(e);case oi.UNPACKED_FLOAT32:return JJ(e);case oi.UNPACKED_FLOAT16:return eee(e);case oi.PACKED_4X1_UNSIGNED_BYTE:return tee(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function FKe(t){return oe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?oi.PACKED_2X2_FLOAT32:oi.UNPACKED_FLOAT32:t?oi.PACKED_2X2_FLOAT16:oi.UNPACKED_FLOAT16}function KV(t,e){if(t===no.UPLOAD)return oi.PACKED_2X2_FLOAT32;if(t===no.RENDER||t==null)return FKe(e);if(t===no.DOWNLOAD||t===no.PIXELS)return oi.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function XV(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Js{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=Ii(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Qo="if (isnan(x)) return x;",MKe="return x;",YV="return abs(x);",LKe="return (x >= 0.0) ? x : (exp(x) - 1.0);",jKe=Qo+`
  return (x < 0.0) ? 0.0 : x;
`,zKe=Qo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Lc="return x;",BKe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VKe="return x;",WKe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,UKe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,HKe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,GKe="return 1.0 / (1.0 + exp(-1.0 * x));";class Kc{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=Ii(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qKe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=Ii(this.outputShape.length);const n=e.length,r=Vi("rc",n),i=on(n),a=OKe(n,r),o=r.slice(-2),s=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${i} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${s}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KKe=KE,XKe=1e-7,YKe=1e-4,K1={};function ZKe(t){return t in K1||(K1[t]={}),K1[t]}const QKe=oe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),JKe=600;function eXe(){return oe().global.screen==null?1024:oe().global.screen.height*oe().global.screen.width*window.devicePixelRatio*JKe/1024/1024}class ST extends d2{nextDataId(){return ST.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!oe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof vN)n=e;else{const r=As(oe().getNumber("WEBGL_VERSION"),e);n=new vN(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=As(oe().getNumber("WEBGL_VERSION"));n=new vN(r),this.binaryCache=ZKe(oe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new PKe(this.gpgpu),this.numMBBeforeWarning=eXe(),this.texData=new MD(this,os())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,i,a,o){const s=this.makeTensorInfo(n,r),l=this.texData.get(s.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[i,a]},l.texShape=[i,a];const c=G1(n),u=new GV(c,!1,o),d=this.runWebGLProgram(u,[s],r,[[i,a]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(s),d.dataId}write(e,n,r){if((oe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||oe().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const i={id:this.nextDataId()};return this.texData.set(i,{shape:n,dtype:r,values:e,usage:no.UPLOAD,refCount:1}),i}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,i,a){if(oe().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:i,values:n,usage:no.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:i,complexTensorInfos:a,slice:o,shape:s,isPacked:l}=n;if(o!=null){let f;l?f=new Kc(s,Lc):f=new Js(s,Lc);const h=this.runWebGLProgram(f,[{dataId:e,shape:s,dtype:i}],i),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=Di());let d;if(i==="complex64"){const f=this.readSync(a.real.dataId),h=this.readSync(a.imag.dataId);d=ac(f,h)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Di()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(g=>p.push(g))}const n=this.texData.get(e),{values:r,shape:i,slice:a,dtype:o,complexTensorInfos:s,isPacked:l}=n;if(a!=null){let p;l?p=new Kc(i,Lc):p=new Js(i,Lc);const g=this.runWebGLProgram(p,[{dataId:e,shape:i,dtype:o}],o),m=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),m}if(r!=null)return this.convertAndCacheOnCPU(e);if(oe().getBool("DEBUG")&&!oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&oe().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(o!=="complex64"&&oe().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const p=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(p.texture.texture,...W1(i))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const p=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),g=p[0],m=p[1];d=ac(g,m)}else if(c==null)d=this.getValuesFromTexture(e);else{const p=de(i);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,p)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const p=this.gpgpu.gl;ze(p,()=>p.deleteBuffer(c))}const f=this.convertAndCacheOnCPU(e,d),h=this.pendingRead.get(e);return this.pendingRead.delete(e),h.forEach(p=>p(f)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&os().removeDataId(e,this),this.pendingDeletes--),f}readToGPU(e,n={}){const r=this.texData.get(e),{values:i,shape:a,slice:o,dtype:s,isPacked:l,texture:c}=r;if(s==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let h;l?h=new Kc(a,Lc):h=new Js(a,Lc);const p=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:s}],s),g=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),g}if(c==null)throw i!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=os().makeTensorFromTensorInfo(u),f=this.texData.get(u.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(i=>nc(i));return wt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return wt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!r9e(r))throw oe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:i}=this.texData.get(e),a=de(n);if(oe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(e),h=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...W1(n)).subarray(0,a);return this.disposeIntermediateTensorInfo(f),p}const o=oe().getBool("WEBGL_PACK")&&i===!0,s=o?G1(n):n,l=o?new bqe(s):new yqe(s),c=this.runWebGLProgram(l,[{shape:s,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let i=!1;this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e();const a=ml(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=ml(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,i&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(a);s.kernelMs=Pq(l),s.getExtraProfileInfo=()=>l.map((c,u)=>({name:o[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Di(),endMs:null}}endTimer(e){return oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Di(),e)}async getQueryTime(e){if(oe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:i,usage:a,isPacked:o,slice:s}=this.texData.get(e),l=s&&s.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,a,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=QKe){return oe().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&de(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Qa("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return KKe(e.shape,n)}packedUnaryOp(e,n,r){const i=new Kc(e.shape,n),a=this.compileAndRun(i,[e],r);return os().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const i=aee(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,i)}if(oe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,YV,e.dtype);const n=new Js(e.shape,YV),r=this.compileAndRun(n,[e]);return os().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let i;if(n==="string"&&r!=null&&r.length>0&&Qs(r[0])){const a=r.map(o=>ll(o));i=this.write(a,e,n)}else i=this.write(r,e,n);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:n}}makeOutput(e,n,r){return os().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new qKe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new AKe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[Zp(e.shape),...Qp(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},a=[Zp(n),...Qp(n)],o=new lee(a,r),s=!0,l=[r],c=this.runWebGLProgram(o,[i],e.dtype,l,s);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:i,shape:a,dtype:o}=r;if(n!=null){const f=de(a),h=n[0]*n[1]*4;j(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const s=G1(a);let l;i?l=new vqe(s):l=new gqe(s);const c=!0,u=[n??W1(s)],d=this.runWebGLProgram(l,[{shape:s,dtype:o,dataId:e}],o,u,c,n);return{dtype:o,shape:a,dataId:d.dataId}}runWebGLProgram(e,n,r,i,a=!1,o){const s=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(s.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===C0.DENSE){const v=o??W1(e.outputShape);l.texShape=v.map(y=>y*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),de(s.shape)===0)return l.values=Vr(s.dtype,0),s;const c=[],u=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let y=this.texData.get(v.dataId);if(y.texture==null){if(!e.packedInputs&&de(v.shape)<=oe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:y.values};e.packedInputs&&(y.isPacked=!0,y.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!y.isPacked!=!!e.packedInputs)v=y.isPacked?this.unpackTensor(v):this.packTensor(v),c.push(v),y=this.texData.get(v.dataId);else if(y.isPacked&&!L$(y.shape,v.shape)){const b=v,w=v.shape;v.shape=y.shape,v=this.packedReshape(v,w),c.push(v),y=this.texData.get(v.dataId),b.shape=w}return{shape:v.shape,texData:y,isUniform:!1}});this.uploadToGPU(s.dataId);const d={shape:s.shape,texData:l,isUniform:!1},f=mqe(e,u,d),h=this.getAndSaveBinary(f,()=>hqe(this.gpgpu,e,u,d)),p=this.activeTimers!=null;let g;p&&(g=this.startTimer()),oe().get("ENGINE_COMPILE_ONLY")||pqe(this.gpgpu,h,u,d,i),c.forEach(v=>this.disposeIntermediateTensorInfo(v)),p&&(g=this.endTimer(g),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(g)}));const m=oe().getNumber("WEBGL_FLUSH_THRESHOLD");if(m>0){const v=Di();v-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!oe().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){const v=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),v}return s}compileAndRun(e,n,r,i,a=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,i,a)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(oe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ae(()=>{if(!oe().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=oe().getBool("DEBUG");oe().set("DEBUG",!1);const n=this.abs(ct(1e-8)).dataSync()[0];if(oe().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?XKe:YKe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:i,values:a,texture:o,usage:s,isPacked:l}=n;if(o!=null)return;const c=this.activeTimers!=null;let u;c&&(u=Di());let d=n.texShape;if(d==null&&(d=w9e(r,l),n.texShape=d),a!=null){const f=G1(r);let h,p=d[1],g=d[0];const m=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(l||!m)&&([p,g]=Tg(d[0],d[1])),l?h=new wqe(f,m):h=new GV(f,m);const v=m?[g,p]:d,y=this.makeTensorInfo(v,i),b=this.texData.get(y.dataId);m?b.usage=no.PIXELS:b.usage=no.UPLOAD,b.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),p,g,a);const w=[[g,p]],$=this.runWebGLProgram(h,[y],i,w,!0),C=this.texData.get($.dataId);n.texShape=C.texShape,n.isPacked=C.isPacked,n.usage=C.usage,oe().get("ENGINE_COMPILE_ONLY")?this.disposeData($.dataId):(n.texture=C.texture,n.values=null,this.texData.delete($.dataId)),this.disposeIntermediateTensorInfo(y),c&&(this.uploadWaitMs+=Di()-u)}else{const f=this.acquireTexture(d,s,i,l);n.texture=f}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:i}=r;return n!=null&&(r.values=tXe(n,i)),r.values}acquireTexture(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,i)}computeBytes(e,n){return e[0]*e[1]*l0(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(i=>{try{this.checkCompletion_(n),i(!0)}catch(a){throw a}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await TM(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(qJ(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:i,nanLoc:a,outShapeLocation:o,outShapeStridesLocation:s,outTexShapeLocation:l}=QJ(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=i,e.nanLoc=a,e.outShapeLocation=o,e.outShapeStridesLocation=s,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:i,height:a,width:o,channels:s}=e,l=os().backend;if(!l.gpgpu.gl.isTexture(i))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(i,n,r,a,o,s);return os().makeTensorFromDataId(c,n,r,l)}}ST.nextDataId=0;function tXe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */KD()&&YD("webgl",()=>new ST,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A3=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class vf{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=bt(n,r),this.enableShapeUniforms=Ii(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vf=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Ag{constructor(e,n,r,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=bt(n,r);const a=this.outputShape.length;this.enableShapeUniforms=Ii(a);let o="";if(i)if(a===0||de(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${on(a)} coords = getOutputCoords();
        `,a===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Vi("coords",a);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= outShape[${a} - 2];
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= outShape[${a} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Da(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const nXe={kernelName:Wm,backendName:"webgl",kernelFunc:Da};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gu(t){const{inputs:e,backend:n}=t,{real:r,imag:i}=e,a=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(a.dataId),s=Da({inputs:{x:r},backend:n}),l=Da({inputs:{x:i},backend:n});return o.complexTensorInfos={real:s,imag:l},a}const rXe={kernelName:x2,backendName:"webgl",kernelFunc:Gu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cee="return (a < 0.) ? b * a : a;",uee=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function iXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{alpha:a}=r,o=n.makeTensorInfo([],"float32",hc(a,"float32")),s=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ag(uee,i.shape,o.shape):new vf(cee,i.shape,o.shape),l=n.runWebGLProgram(s,[i,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const aXe={kernelName:Tb,backendName:"webgl",kernelFunc:iXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dee="return (a < 0.) ? b * a : a;",fee=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function oXe(t){const{inputs:e,backend:n}=t,{x:r,alpha:i}=e,a=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ag(fee,r.shape,i.shape):new vf(dee,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],"float32")}const sXe={kernelName:Hb,backendName:"webgl",kernelFunc:oXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _g="if (isnan(x)) return x;";function jt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:a})=>{const{x:o}=i,s=a,l=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&n!=null){const d=s.texData.get(o.dataId),f=n(d.values,l);return s.makeTensorInfo(o.shape,l,f)}const c=oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Kc(o.shape,e):u=new Js(o.shape,t),s.runWebGLProgram(u,[o],l)}}function gi({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:a}){return({inputs:o,backend:s})=>{const{a:l,b:c}=o,u=s;if(r&&l.dtype==="complex64"){const p=u.texData.get(l.dataId),g=u.texData.get(c.dataId),[m,v]=[[p.complexTensorInfos.real,g.complexTensorInfos.real],[p.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(b=>{const[w,x]=b,$={dataId:w.dataId,dtype:w.dtype,shape:l.shape},C={dataId:x.dataId,dtype:x.dtype,shape:c.shape},E=new vf(t,l.shape,c.shape);return u.runWebGLProgram(E,[$,C],ca(w.dtype,x.dtype))}),y=Gu({inputs:{real:m,imag:v},backend:u});return u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(v),y}const d=a||ca(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&i!=null){const p=u.texData.get(l.dataId).values,g=u.texData.get(c.dataId).values,m=l.dtype==="string"?oc(p):p,v=l.dtype==="string"?oc(g):g,[y,b]=i(l.shape,c.shape,m,v,d),w=u.makeTensorInfo(b,d),x=u.texData.get(w.dataId);return x.values=y,w}const f=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let h;return f?h=new Ag(e,l.shape,c.shape,n):h=new vf(t,l.shape,c.shape),u.runWebGLProgram(h,[l,c],d)}}function E0(t,e=!1){if(t==="linear")return e?VKe:MKe;if(t==="relu")return e?UKe:jKe;if(t==="elu")return e?WKe:LKe;if(t==="relu6")return e?HKe:zKe;if(t==="prelu")return e?fee:dee;if(t==="leakyrelu")return e?uee:cee;if(t==="sigmoid")return e?GKe:BKe;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hee{constructor(e,n,r,i=!1,a=!1,o=!1,s=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=Ii(this.outputShape.length);const u=i?e[1]:e[2],d=Math.ceil(u/2),f=i?"i * 2, rc.y":"rc.y, i * 2",h=a?"rc.z, i * 2":"i * 2, rc.z",p=i?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",v="";s&&(l?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:c?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:m=`vec4 activation(vec4 x) {
          ${s}
        }`,v="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let b="rc.x",w="rc.x";e[0]<n[0]?b=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(w=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${m}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${b};
        int batchB = ${w};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${g[0]});
          result += (${p[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${y}

        ${v}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZV={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class QV{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=bt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JV="return a * b;";function _3(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,a=ca(r.dtype,i.dtype);if(r.dtype==="complex64"){const s=n.texData.get(r.dataId),l=n.texData.get(i.dataId),c=new QV(ZV.REAL,r.shape,i.shape),u=new QV(ZV.IMAG,r.shape,i.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:r.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],f=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(u,d,"float32"),p=Gu({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([r,i])){const s=n.texData.get(r.dataId),l=n.texData.get(i.dataId),[c,u]=oKe(r.shape,i.shape,s.values,l.values,a),d=n.makeTensorInfo(u,a),f=n.texData.get(d.dataId);return f.values=c,d}let o;return oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new Ag(JV,r.shape,i.shape):o=new vf(JV,r.shape,i.shape),n.runWebGLProgram(o,[r,i],a)}const lXe={kernelName:Qm,backendName:"webgl",kernelFunc:_3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cXe(t,e,n){const r=[Zp(t.shape),...Qp(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},a=[Zp(e),...Qp(e)],o=new lee(a,r),s=!0,l=[r],c=n.runWebGLProgram(o,[i],t.dtype,l,s);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Re(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{shape:a}=r,o=n,s=de(i.shape),l=jD(a,s),c=de(l);j(s===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(i.dataId);return u.isPacked&&!L$(i.shape,l)&&!(u.texture!==null&&L$(u.shape,l))?cXe(i,l,o):(o.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype})}const uXe={kernelName:qb,backendName:"webgl",kernelFunc:Re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eW{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:a,outSize:o}=e;this.outputShape=[i,o];const s=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${nf(d)?d.toPrecision(2):d}, ones);`}let u="";a%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${s};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dXe{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:i,inSize:a,outSize:o}=e;this.outputShape=[i,o];let s="0.0",l="";n==="prod"?s="1.0":n==="min"?(s="1.0 / 1e-20",l="min"):n==="max"&&(s="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(s="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(s="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";a%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${s};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${s});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fXe(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=oT(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function Wf(t,e,n,r){const i=fXe(t.shape);let a=t;for(let o=0;o<i.length;o++){const{inSize:s,windowSize:l,outSize:c}=i[o];let u,d;n==="mean"?u=o===0?new eW({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:c},s):new eW({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:c}):u=new dXe({windowSize:l,inSize:s,batchSize:t.shape[0],outSize:c},n),d=a,a=r.runWebGLProgram(u,[a],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return a}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hXe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const i=on(this.rank),a=pXe(n);this.userCode=`
    void main() {
      ${i} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}function pXe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mXe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const i=on(this.rank),a=see("rc",this.rank),o=new Array(this.rank);for(let u=0;u<n.length;u++)o[n[u]]=a[u];const s=`vec2(${o.slice(-2).join()})`,l=`++${a[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`
    void main() {
      ${i} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $T(t,e,n){const r=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mXe(t.shape,e):new hXe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gXe(t,e,n,r){const i=e,a=t.shape.length,o=Tt(i,t.shape);let s=o;const l=Un(s,a),c=l!=null;let u=t;c&&(u=$T(t,l,r),s=rr(s.length,a)),pi("sum",s,a);const[d,f]=qr(u.shape,s);let h=d;n&&(h=nr(d,o));const p=de(f),m=de(t.shape)/p,v=Re({inputs:{x:u},attrs:{shape:[m,p]},backend:r}),y=xE(t.dtype),b=Wf(v,y,"sum",r),w=Re({inputs:{x:b},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(b),c&&r.disposeIntermediateTensorInfo(u),w}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CT(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r;return gXe(i,a,o,n)}const vXe={kernelName:Jb,backendName:"webgl",kernelFunc:CT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hi(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{perm:a}=r,o=n,s=i.shape.length,l=new Array(s);for(let u=0;u<l.length;u++)l[u]=i.shape[a[u]];let c;if(o.shouldExecuteOnCPU([i])){const d=o.texData.get(i.dataId).values,f=O3(d,i.shape,i.dtype,a,l);c=o.makeTensorInfo(l,i.dtype);const h=o.texData.get(c.dataId);h.values=f}else c=$T(i,a,o);return c}const yXe={kernelName:jd,backendName:"webgl",kernelFunc:Hi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pee=1e3;function j$({a:t,b:e,transposeA:n,transposeB:r,backend:i,bias:a=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],f=r?e.shape[u-1]:e.shape[u-2],h=n?t.shape[c-1]:t.shape[c-2],p=r?e.shape[u-2]:e.shape[u-1],g=t.shape.slice(0,-2),m=e.shape.slice(0,-2),v=de(g),y=de(m),w=bt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([h,p]);j(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const x=n?[v,d,h]:[v,h,d],$=r?[y,p,f]:[y,f,p],C=Re({inputs:{x:t},backend:i,attrs:{shape:x}}),E=Re({inputs:{x:e},backend:i,attrs:{shape:$}}),I=[C,E],T=Math.max(v,y),N=n?C.shape[1]:C.shape[2],k=a!=null,O=o!=null,_=l==="leakyrelu",P=l!=null?E0(l,!0):null,D=k||O||_||P!=null;let L;if((h===1||p===1)&&N>pee&&D===!1){let F=C,V=E;n&&(F=Hi({inputs:{x:C},backend:i,attrs:{perm:[0,2,1]}}),I.push(F)),r&&(V=Hi({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),I.push(V));const H=p!==1,U=p===1;let W=F;H&&(W=Re({inputs:{x:F},backend:i,attrs:{shape:[T,N,1]}}),I.push(W));const G=p===1?2:1;let q=V;U&&(q=Re({inputs:{x:V},backend:i,attrs:{shape:[T,1,N]}}),I.push(q));const X=_3({inputs:{a:W,b:q},backend:i});L=CT({inputs:{x:X},backend:i,attrs:{axis:G,keepDims:!0}}),I.push(X)}else{const F=ca(t.dtype,e.dtype),V=new hee(x,$,[T,h,p],n,r,k,P,O,_),H=[C,E];if(a!=null&&H.push(a),O&&H.push(o),_){const U=i.makeTensorInfo([],"float32",hc(s,"float32"));H.push(U),I.push(U)}L=i.runWebGLProgram(V,H,F)}const R=Re({inputs:{x:L},backend:i,attrs:{shape:w}});I.push(L);for(const F of I)i.disposeIntermediateTensorInfo(F);return R}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bXe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a,bias:o,preluActivationWeights:s}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return j$({a:i,b:a,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:d,activation:u})}const xXe={kernelName:c0,backendName:"webgl",kernelFunc:bXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tW="return abs(x);";function wXe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const a=n.texData.get(r.dataId),o=aee(a.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let i;return oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Kc(r.shape,tW):i=new Js(r.shape,tW),n.runWebGLProgram(i,[r],r.dtype)}const SXe={kernelName:ib,backendName:"webgl",kernelFunc:wXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Xe=Qo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,CXe=jt({opSnippet:$Xe}),EXe={kernelName:$m,backendName:"webgl",kernelFunc:CXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TXe=Qo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,IXe=jt({opSnippet:TXe}),NXe={kernelName:Cm,backendName:"webgl",kernelFunc:IXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nW="return a + b;",kXe=gi({opSnippet:nW,packedOpSnippet:nW,supportsComplex:!0,cpuKernelImpl:jqe}),OXe={kernelName:Af,backendName:"webgl",kernelFunc:kXe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AXe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((a,o)=>`T${o}`);const r=[];this.variableNames.forEach(a=>{r.push(`float v${a} = get${a}AtOutCoords();`)});const i=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Xe{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((a,o)=>`T${o}`);const r=[];this.variableNames.forEach(a=>{r.push(`vec4 v${a} = get${a}AtOutCoords();`)});const i=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iw(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Da({inputs:{x:r[0]},backend:n});if(r.length>oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=Iw({inputs:r.slice(0,l),backend:n}),u=Iw({inputs:r.slice(l),backend:n});return Iw({inputs:[c,u],backend:n})}const i=r.map(l=>l.dtype).reduce((l,c)=>ca(l,c)),a=r.map(l=>l.shape),s=oe().getBool("WEBGL_PACK")?new _Xe(r[0].shape,a):new AXe(r[0].shape,a);return n.runWebGLProgram(s,r,i)}const PXe={kernelName:ab,backendName:"webgl",kernelFunc:Iw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,l=Tt(a,i.shape);let c=l;const u=Un(c,s);let d=i;u!=null&&(d=Hi({inputs:{x:i},backend:n,attrs:{perm:u}}),c=rr(c.length,s)),pi("all",c,s);const[f,h]=qr(d.shape,c),p=de(h),g=Re({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),m=Wf(g,g.dtype,"all",n);let v;if(o){const y=nr(f,l);v=Re({inputs:{x:m},backend:n,attrs:{shape:y}})}else v=Re({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),u!=null&&n.disposeIntermediateTensorInfo(d),v}const DXe={kernelName:p2,backendName:"webgl",kernelFunc:RXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,l=Tt(a,i.shape);let c=l;const u=Un(c,s);let d=i;u!=null&&(d=Hi({inputs:{x:i},backend:n,attrs:{perm:u}}),c=rr(c.length,s)),pi("any",c,s);const[f,h]=qr(d.shape,c),p=de(h),g=Re({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),m=Wf(g,g.dtype,"any",n);let v;if(o){const y=nr(f,l);v=Re({inputs:{x:m},backend:n,attrs:{shape:y}})}else v=Re({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),u!=null&&n.disposeIntermediateTensorInfo(d),v}const MXe={kernelName:m2,backendName:"webgl",kernelFunc:FXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LXe{constructor(e,n,r){this.variableNames=["A"];const{windowSize:i,batchSize:a,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[a,o];const s=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${i}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${s} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jXe{constructor(e,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,j(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const a=e[e.length-1],o=Math.ceil(a/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),i||this.variableNames.push("bestIndicesA");const s=this.outputShape,l=s.length,c=on(l),u=Vi("coords",l);let d,f;if(o===1){f=l+1;const E=on(f);d=`
        ${E} sourceLocR = ${E}(${u.join()}, 0);
        ++${u[l-1]};
        ${E} sourceLocG = ${E}(${u.join()}, 0);
        ++${u[l-2]};
        ${E} sourceLocA = ${E}(${u.join()}, 0);
        --${u[l-1]};
        ${E} sourceLocB = ${E}(${u.join()}, 0);
        --${u[l-2]};`}else f=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),p="."+h[f-1],g=h.map(E=>"int "+E),m=Vi("sourceLocR",f-1).concat("inIdx.r"),v=Vi("sourceLocG",f-1).concat("inIdx.g"),y=Vi("sourceLocB",f-1).concat("inIdx.b"),b=Vi("sourceLocA",f-1).concat("inIdx.a"),w=r==="max"?"greaterThan":"lessThan",x=i?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()})));`,$=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${y.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,C=i?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${C}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${s[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${s[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${$};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${x}
          vec4 candidate = ${$};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mee(t,e,n,r=null){let i=e.shape[0],a=e.shape[1];r!=null&&(i=r.shape[0],a=r.shape[1]);const o=oT(a),s={windowSize:o,inSize:a,batchSize:i,outSize:Math.ceil(a/o)},l=new LXe(s,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=mee(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function gee(t,e,n,r=null){const i=r!=null?r.shape:e.shape,a=i[i.length-1],o=oT(a),s=new jXe(i,o,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(s,l,"int32");if(c.shape.length===e.shape.length){const u=gee(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function vee(t,e,n,r){const i=[n];if(pi("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.shape.length),!oe().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const a=[],o=t.texData.get(e.dataId),s=o!==null&&o.isPacked;let l=e;s&&(l=t.unpackTensor(e),a.push(l));const[c,u]=qr(l.shape,i),d=de(u),f=Re({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});a.push(f);const h=mee(t,f,r);a.push(h);const p=Re({inputs:{x:h},backend:t,attrs:{shape:c}});return a.forEach(g=>t.disposeIntermediateTensorInfo(g)),p}return gee(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;let o=Tt(a,i.shape);const s=Un(o,i.shape.length);let l=i;const c=[];s!=null&&(l=Hi({inputs:{x:i},backend:n,attrs:{perm:s}}),c.push(l),o=rr(o.length,l.shape.length)),pi("argMax",[o[0]],l.shape.length);const u=vee(n,l,o[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const BXe={kernelName:ob,backendName:"webgl",kernelFunc:zXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VXe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a}=r;let o=Tt(a,i.shape);const s=Un(o,i.shape.length);let l=i;const c=[];s!=null&&(l=Hi({inputs:{x:i},backend:n,attrs:{perm:s}}),c.push(l),o=rr(o.length,l.shape.length)),pi("argMin",[o[0]],l.shape.length);const u=vee(n,l,o[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const WXe={kernelName:sb,backendName:"webgl",kernelFunc:VXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UXe=Qo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,HXe=jt({opSnippet:UXe}),GXe={kernelName:Em,backendName:"webgl",kernelFunc:HXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qXe=Qo+"return log(x + sqrt(x * x + 1.0));",KXe=jt({opSnippet:qXe}),XXe={kernelName:Tm,backendName:"webgl",kernelFunc:KXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YXe=Qo+`
  return atan(x);
`,ZXe=jt({opSnippet:YXe}),QXe={kernelName:Im,backendName:"webgl",kernelFunc:ZXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JXe=A3+`
  return atan(a, b);
`,eYe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vf+`
  return result;
`,tYe=gi({opSnippet:JXe,packedOpSnippet:eYe}),nYe={kernelName:km,backendName:"webgl",kernelFunc:tYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rYe=Qo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,iYe=jt({opSnippet:rYe}),aYe={kernelName:Nm,backendName:"webgl",kernelFunc:iYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T0{constructor(e,n,r,i=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const g=n==="avg",m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,v=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let y="0.0";if(g||(y="-1.0 / 1e-20"),r){const E=">=";this.userCode=`
        const ivec2 strides = ivec2(${s}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${E} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${i?a?m:v:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const b="max";let w=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(w="avgValue / max(count, 1.0)");const x=Math.floor(o/4)*4,$=o%4,C=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${b}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${s}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${x}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${C}
          }

          int xC = xCCorner + ${x};
          if (${$===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${$===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${$===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${C}
          }
        }
        setOutput(${w});
      }
    `}}class P3{constructor(e,n,r,i=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,f=e.dilationWidth,h=e.effectiveFilterDepth,p=e.effectiveFilterHeight,g=e.effectiveFilterWidth,m=e.padInfo.front,v=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;const b=n==="avg";let w="0.0";if(b||(w="-1.0 / 1e-20"),r){const T=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${s}, ${l}, ${c});
        const ivec3 pads = ivec3(${m}, ${v}, ${y});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${T} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${i?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const x="max";let $=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&($="avgValue / max(count, 1.0)");const C=Math.floor(o/4)*4,E=o%4,I=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${s}, ${l}, ${c});
      const ivec3 pads = ivec3(${m}, ${v}, ${y});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${C}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${I}
            }

            int xC = xCCorner + ${C};
            if (${E===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${E===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${I}
            } else if (${E===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${I}
            }
          }
        }
        setOutput(${$});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;zx(i,"avgPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r,c=1;j(hi(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Yo(i.shape,a,o,c,s,l);if(u.filterWidth===1&&u.filterHeight===1&&Nt(u.inShape,u.outShape))return Da({inputs:{x:i},backend:n});const d=new T0(u,"avg",!1);return n.runWebGLProgram(d,[i],"float32")}const sYe={kernelName:lb,backendName:"webgl",kernelFunc:oYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=pc(i.shape,a,o,u,s,l,c),f=new P3(d,"avg",!1);return n.runWebGLProgram(f,[i],"float32")}const cYe={kernelName:cb,backendName:"webgl",kernelFunc:lYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uYe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,f=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${s}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class dYe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,f=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=d-1-e.padInfo.front,g=f-1-e.padInfo.top,m=h-1-e.padInfo.left,v=1/(n*r*i);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${g}, ${m});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fYe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a,{filterSize:s,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=pc(o.shape,s,l,d,c,u),h=new dYe(f);return n.runWebGLProgram(h,[i],o.dtype)}const hYe={kernelName:v2,backendName:"webgl",kernelFunc:fYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pYe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a;zx([i,a],"avgPoolGrad");const{filterSize:s,strides:l,pad:c}=r,u=Yo(o.shape,s,l,1,c),d=new uYe(u);return n.runWebGLProgram(d,[i],o.dtype)}const mYe={kernelName:g2,backendName:"webgl",kernelFunc:pYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gYe(t){const{inputs:e,backend:n,attrs:r}=t,{a:i,b:a}=e,{transposeA:o,transposeB:s}=r;return j$({a:i,b:a,transposeA:o,transposeB:s,backend:n})}const vYe={kernelName:ub,backendName:"webgl",kernelFunc:gYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yYe{constructor(e,n,r,i,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],bt(e,n),bt(e,r);let s="0.0";i!=null&&(bt(e,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="1.0";a!=null&&(bt(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${s};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bYe{constructor(e,n,r,i,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],bt(e,n),bt(e,r);let s="vec4(0.0)";i!=null&&(bt(e,i),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let l="vec4(1.0)";a!=null&&(bt(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${s};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xYe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:i,variance:a,offset:o,scale:s}=t;j(i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),j(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),j(s==null||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,i,a];let u=null;o!=null&&(u=o.shape,c.push(o));let d=null;s!=null&&(d=s.shape,c.push(s));const f=oe().getBool("WEBGL_PACK_NORMALIZATION")?new bYe(r.shape,i.shape,a.shape,u,d,l):new yYe(r.shape,i.shape,a.shape,u,d,l);return e.runWebGLProgram(f,c,c[0].dtype)},wYe={kernelName:$b,backendName:"webgl",kernelFunc:xYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SYe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=on(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=$Ye(this.rank);let i;const a=e.map((o,s)=>`sourceLoc.${$_[s]} = start[${s}] + coords.${$_[s]};`);i=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${a.join(`
`)}
      `,this.userCode=`
      void main() {
        ${i}
        setOutput(getSource(${r}));
      }
    `}}const $_=["x","y","z","w","u","v"];function $Ye(t){if(t===1)return"sourceLoc";if(t<=6)return $_.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CYe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=on(this.rank),r=Vi("coords",this.rank),i=Vi("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":`vec2(${i.slice(-2).join()})`,o=`getChannel(getSource(${i.join()}), ${a})`,s=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${i[this.rank-1]};
        result.y = ${o};
        --${i[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${i[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${i[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${i[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${s}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EYe(t,e,n,r){const i=r.texData.get(t.dataId),a=r.makeTensorInfo(n,t.dtype),o=r.texData.get(a.dataId);Object.assign(o,i),o.refCount=1,o.shape=n,o.dtype=t.dtype;let s=CM(e,ot(t.shape));i.slice&&(s+=i.slice.flatOffset),o.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),a}function Pg(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,size:o}=r,[s,l]=aT(i,a,o);if(wM(i,s,l),de(l)===0)return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||i.dtype==="string"){const d=n.texData.get(i.dataId),f=vKe(d.values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,f)}const{isPacked:c}=n.texData.get(i.dataId),u=$M(i.shape,s,l);if(c||!u){const d=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new CYe(l):new SYe(l),f=[s];return n.runWebGLProgram(d,[i],i.dtype,f)}return n.uploadToGPU(i.dataId),EYe(i,s,l,n)}const TYe={kernelName:Qb,backendName:"webgl",kernelFunc:Pg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IYe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,crops:o}=r;j(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const s=a.reduce((y,b)=>y*b),l=Ix(i.shape,a,s),c=Nx(l.length,a.length),u=kx(i.shape,a,s),d=OM(o,a.length),f=AM(u,o,a.length),h=[],p=Re({inputs:{x:i},backend:n,attrs:{shape:l}}),g=Hi({inputs:{x:p},backend:n,attrs:{perm:c}}),m=Re({inputs:{x:g},backend:n,attrs:{shape:u}}),v=Pg({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(g),h.push(m),h.forEach(y=>n.disposeIntermediateTensorInfo(y)),v},NYe={kernelName:db,backendName:"webgl",kernelFunc:IYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o}=r,s=n.readSync(i.dataId),l=n.readSync(a.dataId),c=iee(s,l,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,c)}const OYe={kernelName:y2,backendName:"webgl",kernelFunc:kYe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AYe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,_Ye=`
  return float(int(a.r) & int(b.r));
`;function PYe(t){const{inputs:e,backend:n}=t,{a:r,b:i}=e,a=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=oe().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,i])||o===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(i.dataId).values,[u,d]=Bqe(r.shape,i.shape,l,c,r.dtype),f=n.makeTensorInfo(d,r.dtype),h=n.texData.get(f.dataId);return h.values=u,f}let s;return a?s=new Ag(AYe,r.shape,i.shape,!1):s=new vf(_Ye,r.shape,i.shape),n.runWebGLProgram(s,[r,i],r.dtype)}const RYe={kernelName:fb,backendName:"webgl",kernelFunc:PYe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DYe(t){const{inputs:e,backend:n}=t,{s0:r,s1:i}=e,a=n.readSync(r.dataId),o=n.readSync(i.dataId),s=bt(Array.from(a),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}const FYe={kernelName:b2,backendName:"webgl",kernelFunc:DYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MYe="return float(a != b);",yee=gi({opSnippet:MYe,cpuKernelImpl:lKe,dtype:"bool"}),LYe={kernelName:zb,backendName:"webgl",kernelFunc:yee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vx(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Da({inputs:{x:i.complexTensorInfos.real},backend:n})}const jYe={kernelName:J2,backendName:"webgl",kernelFunc:Vx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zYe="return float(int(x));";function BYe(t,e){const n=new Js(t.shape,zYe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C_(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dtype:a}=r;if(a==="complex64"){if(i.dtype==="complex64")return Da({inputs:{x:i},backend:n});const o=hr(i.shape),s=C_({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),l=Gu({inputs:{real:s,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(s),l}if(i.dtype==="complex64"){const o=Vx({inputs:{input:i},backend:n}),s=C_({inputs:{x:o},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(o),s}if(!zD(i.dtype,a)){const o=Da({inputs:{x:i},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:a}}if(n.shouldExecuteOnCPU([i])){const o=n.texData.get(i.dataId).values,[s,l,c]=Vqe(o,i.shape,i.dtype,a);return n.makeTensorInfo(s,l,c)}if(a==="int32")return BYe(i,n);if(a==="bool"){const o=n.makeTensorInfo([],"bool",Vr("bool",1)),l=yee({inputs:{a:i,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${i.dtype} to ${a}`)}const VYe={kernelName:Om,backendName:"webgl",kernelFunc:C_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rW="return ceil(x);",WYe=jt({opSnippet:rW,packedOpSnippet:rW,cpuKernelImpl:Wqe}),UYe={kernelName:Am,backendName:"webgl",kernelFunc:WYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HYe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GYe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qYe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{clipValueMin:a,clipValueMax:o}=r;let s;oe().getBool("WEBGL_PACK_CLIP")?s=new GYe(i.shape):s=new HYe(i.shape);const l=[[a],[o]];return n.runWebGLProgram(s,[i],i.dtype,l)}const KYe={kernelName:_m,backendName:"webgl",kernelFunc:qYe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XYe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iW(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function YYe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=n.texData.get(r.dataId),a=new XYe(r.shape),o=[iW(r,i.complexTensorInfos.real),iW(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(a,o,o[0].dtype)}const ZYe={kernelName:hb,backendName:"webgl",kernelFunc:YYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QYe{constructor(e){this.outputShape=[],this.outputShape=ul(e,1),this.variableNames=e.map((o,s)=>`T${s}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const s=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${s}));`)}const i=n.length,a=n[n.length-1];r.push(`else setOutput(getT${i}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JYe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ul(e,n);const r=this.outputShape,i=r.length,a=on(i),o=Vi("coords",i),s=["x","y","z","w","u","v"].slice(0,i);this.variableNames=e.map((g,m)=>`T${m}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let g=1;g<l.length;g++)l[g]=l[g-1]+e[g][n];const c=s[n],u=s.slice(-2),d=s.join();let f=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let g=1;g<l.length;g++){const m=l[g-1];f+=`
        if (${c} < ${l[g]}  && ${c} >= ${l[g-1]}) {
          return getChannel(
            getT${g}(${X1(s,c,m)}),
            vec2(${X1(u,c,m)}));
        }`}const h=l.length,p=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${X1(s,c,p)}),
          vec2(${X1(u,c,p)}));`,this.userCode=`
      float getValue(${s.map(g=>"int "+g)}) {
        ${f}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[i-1]} = ${o[i-1]} + 1;
        if (${o[i-1]} < ${r[i-1]}) {
          result.g = getValue(${o});
        }

        ${o[i-2]} = ${o[i-2]} + 1;
        if (${o[i-2]} < ${r[i-2]}) {
          result.a = getValue(${o});
        }

        ${o[i-1]} = ${o[i-1]} - 1;
        if (${o[i-2]} < ${r[i-2]} &&
            ${o[i-1]} < ${r[i-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function X1(t,e,n){const r=t.indexOf(e);return t.map((a,o)=>o===r?`${a} - ${n}`:a).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ET(t){const{inputs:e,backend:n}=t,{input:r}=e,i=n.texData.get(r.dataId);return Da({inputs:{x:i.complexTensorInfos.imag},backend:n})}const eZe={kernelName:j2,backendName:"webgl",kernelFunc:ET};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dv(t,e,n){const r=t[0].dtype;if(r==="complex64"){const h=t.map(y=>Vx({inputs:{input:y},backend:n})),p=t.map(y=>ET({inputs:{input:y},backend:n})),g=Dv(h,e,n),m=Dv(p,e,n),v=Gu({inputs:{real:g,imag:m},backend:n});return h.forEach(y=>n.disposeIntermediateTensorInfo(y)),p.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),v}let i=n.shouldExecuteOnCPU(t);if(r==="string"&&(i=!0),i){const h=t.map(w=>{const $=[-1,de(w.shape.slice(e))];return Re({inputs:{x:w},backend:n,attrs:{shape:$}})}),p=h.map(w=>({vals:n.readSync(w.dataId),shape:w.shape})),g=ul(h.map(w=>w.shape),1),m=h[0].shape[0]===1,v=Uqe(p,g,r,m),y=ul(t.map(w=>w.shape),e),b=n.makeTensorInfo(y,r,v);return h.forEach(w=>n.disposeIntermediateTensorInfo(w)),b}const a=t.filter(h=>de(h.shape)>0),o=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(a.length===1){const h=o?new Js(t[0].shape,Lc):new Kc(t[0].shape,Lc);return n.runWebGLProgram(h,t,r)}const s=oe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>s){const h=[];for(let g=0;g<a.length;g+=s){const m=a.slice(g,g+s);h.push(Dv(m,e,n))}const p=Dv(h,e,n);for(const g of h)n.disposeIntermediateTensorInfo(g);return p}if(o){const h=new JYe(a.map(p=>p.shape),e);return n.runWebGLProgram(h,a,r)}const{tensors2D:l,outShape:c}=tZe(a,e,n),u=new QYe(l.map(h=>h.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(h=>n.disposeIntermediateTensorInfo(h));const f=Re({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),f}function tZe(t,e,n){const r=ul(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>Re({inputs:{x:a},attrs:{shape:[-1,de(a.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bee(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r,a=Tt(i,e[0].shape)[0],o=e.map(c=>c.shape);IM(o,a);const s=ul(e.map(c=>c.shape),a);if(de(s)===0)return n.makeTensorInfo(s,e[0].dtype,[]);const l=e.filter(c=>de(c.shape)>0);return l.length===1?Da({inputs:{x:l[0]},backend:n}):Dv(l,a,n)}const nZe={kernelName:pb,backendName:"webgl",kernelFunc:bee};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xee{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,g=e.inChannels%4,m=e.dataFormat==="channelsLast",v=m?1:2,y=m?2:3,b=m?3:1;let w="",x="";r&&(i?w=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?w=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:w=`
          float activation(float x) {
            ${r}
          }
        `,x="result = activation(result);");const $=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${b}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${y}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${$}
        ${x}
        setOutput(result);
      }
    `}}class rZe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,i=e.padInfo.left,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,f=e.filterHeight,h=e.filterWidth,p=Math.floor(e.inChannels/4)*4,g=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${o}, ${s});
      const ivec3 pads = ivec3(${n}, ${r}, ${i});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wee{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ii(this.outputShape.length);const o=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let f=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let m=0;m<u;m++)f+=`
           vec4 xTexelC${m*2};
           int xTexelC${m*2}Ready;
           vec4 xTexelC${m*2+1};
           int xTexelC${m*2+1}Ready;
           vec4 xC${m};`;f+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let m=0;m<u;m++)f+=`
           xTexelC${m*2} = vec4(0.0);
           xTexelC${m*2}Ready = 0;
           xTexelC${m*2+1} = vec4(0.0);
           xTexelC${m*2+1}Ready = 0;
           xC${m} = vec4(0.0);`;f+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let m=0;m<(d+1)/2;m++){const v=m*2;if(f+=`
           xC = xCCorner + ${v*l};
           `,s===1){if(v<u&&(o%2===1?(f+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }
               `,l===1&&v>0?f+=`
                 xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                 `:f+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                   } else {
                     xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                   }
                   `):f+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xC${v} = xTexelC${v};
                 `,v+1<u)){const y=o%2===0?f2(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(f+=`
                   xCOffset = xC + imod(pads[1], 2) + ${y};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                     xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${v+1}.zw = vec2(0.0);
                     }
                     xTexelC${v+1}Ready = 1;
                   }
                   `,l>1?f+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                     } else {
                      xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                     }
                     `:f+=`
                     xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                     `):y===1?f+=`
                     xC${v+1} = xTexelC${v};
                     `:f+=`
                     xCOffset = xC + ${y};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                       xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${v+1}.zw = vec2(0.0);
                       }
                       xTexelC${v+1}Ready = 1;
                     }

                     xC${v+1} = xTexelC${v+1};
                     `}}else v<u&&(o%2===1?(f+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.0);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
               `,v+1<u&&(f+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                 `)):(f+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                   xTexelC${v} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${v}.zw = vec2(0.0);
                   }
                   xTexelC${v}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                   xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${v+1}.zw = vec2(0.);
                   }
                   xTexelC${v+1}Ready = 1;
                 }

                 xC${v} = vec4(
                   xTexelC${v}.xy, xTexelC${v+1}.xy);
               `,v+1<u&&(f+=`
                   xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                 `)));v<u&&(f+=`
             wTexel = getW(r, ${v}, d1, d2);
             dotProd += xC${v}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${v}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,v+1<u&&(f+=`
               wTexel = getW(r, ${v+1}, d1, d2);
               dotProd += xC${v+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${v+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}f+=`
     }
   `,f+=`
     }
   `,f+=`
     }
   `;let h="",p="";r&&(i?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:a?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:h=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${f}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${g}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iZe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=Ii(this.outputShape.length);const{dataFormat:r}=n,i=qi(),a=r==="channelsLast",o=a?1:2,s=a?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${s}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${a}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${i.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z$(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function See({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,g=!1;let m;const v=[];if(a!=null){const w=z$(a.shape,h);w!=null&&(a=Re({inputs:{x:a},backend:r,attrs:{shape:w}}),v.push(a))}if(i!=null){const w=z$(i.shape,h);w!=null&&(i=Re({inputs:{x:i},backend:r,attrs:{shape:w}}),v.push(i))}if(!((d===1||f===1)&&u>pee)&&c.isPacked&&h&&c.texture!=null&&l[2]%2!==0&&Nt(c.shape.slice(-3),l.slice(-3))){const w=l[0]*l[1]*(l[2]+1),x={dataId:t.dataId,shape:[1,w,n.inChannels],dtype:t.dtype},$=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,j(L$(c.shape,x.shape),()=>`packed reshape ${c.shape} to ${x.shape} isn't free`);const C=Re({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(C);const E=j$({a:x,b:C,backend:r,transposeA:p,transposeB:g,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o}),I=r.texData.get(E.dataId);j(I.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=$,I.shape=n.outShape,m=Da({inputs:{x:E},backend:r}),m.shape=n.outShape,v.push(E)}else{const w=n.outHeight*n.outWidth,x=Re({inputs:{x:t},backend:r,attrs:{shape:h?[n.batchSize,w,n.inChannels]:[n.batchSize,n.inChannels,w]}}),$=Re({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=j$({a:h?x:$,b:h?$:x,transposeA:!h,transposeB:g,backend:r,bias:i,activation:s,preluActivationWeights:a,leakyreluAlpha:o});m=Re({inputs:{x:C},backend:r,attrs:{shape:n.outShape}}),v.push(x),v.push($),v.push(C)}for(const w of v)r.disposeIntermediateTensorInfo(w);return m}function $ee({x:t,filter:e,convInfo:n,backend:r,bias:i=null,preluActivationWeights:a=null,leakyreluAlpha:o=0,activation:s=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:f,dataFormat:h}=n,p=h==="channelsLast",g=l*c*u,m=f*d,v=[n.batchSize,g,m],y=!0,b=!1,w=[];if(a!=null){const R=z$(a.shape,p);R!=null&&(a=Re({inputs:{x:a},backend:r,attrs:{shape:R}}),w.push(a))}if(i!=null){const R=z$(i.shape,p);R!=null&&(i=Re({inputs:{x:i},backend:r,attrs:{shape:R}}),w.push(i))}const x=Re({inputs:{x:e},backend:r,attrs:{shape:[1,g,de(e.shape)/g]}});w.push(x);const $=new iZe(v,n),C=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],E=r.runWebGLProgram($,[t],"float32",C),I=Re({inputs:{x:E},backend:r,attrs:{shape:v}});w.push(E),w.push(I);const T=i!=null,N=a!=null,k=s==="leakyrelu",O=s?E0(s,!0):null,_=new hee(p?I.shape:x.shape,p?x.shape:I.shape,p?[n.batchSize,m,n.outChannels]:[n.batchSize,n.outChannels,m],y,b,T,O,N,k),P=p?[I,x]:[x,I];if(i&&P.push(i),N&&P.push(a),k){const R=r.makeTensorInfo([],"float32",hc(o,"float32"));P.push(R),w.push(R)}const D=r.runWebGLProgram(_,P,"float32"),L=Re({inputs:{x:D},backend:r,attrs:{shape:n.outShape}});w.push(D);for(const R of w)r.disposeIntermediateTensorInfo(R);return L}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=mc(l),f=Gr(i.shape,a.shape,o,c,s,u,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=See({x:i,filter:a,convInfo:f,backend:n});else if(f.strideWidth<=2&&d==="channelsLast"&&oe().getBool("WEBGL_EXP_CONV")){const g=new wee(f),m=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];h=n.runWebGLProgram(g,[i,a],"float32",m)}else if(oe().getBool("WEBGL_CONV_IM2COL"))h=$ee({x:i,filter:a,convInfo:f,backend:n});else{const g=new xee(f);h=n.runWebGLProgram(g,[i,a],"float32")}const p=Re({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),p}const oZe={kernelName:mb,backendName:"webgl",kernelFunc:aZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sZe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,a=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class lZe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=e.dataFormat==="channelsLast",s=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=o?1:2,u=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class cZe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,a=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${a};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${i} - ${s};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class uZe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,i=e.filterWidth,a=e.strideDepth,o=e.strideHeight,s=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=i-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${i}; wC++) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${i} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=mc(l),f=Gr(i.shape,u,o,1,s,c,!1,d),h=new sZe(f);return n.runWebGLProgram(h,[i,a],"float32")}const fZe={kernelName:w2,backendName:"webgl",kernelFunc:dZe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hZe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=Ii(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,i=n-1-e.padInfo.top,a=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pZe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{inputShape:o,strides:s,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=mc(c),f=Gr(o,a.shape,s,1,l,u,!1,d);if(oe().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const h=[[f.strideHeight,f.strideWidth]],p=new hZe(f);return n.runWebGLProgram(p,[i,a],"float32",h)}else{const h=new lZe(f);return n.runWebGLProgram(h,[i,a],"float32")}}const mZe={kernelName:gb,backendName:"webgl",kernelFunc:pZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l}=r,c=Lu(i.shape,a.shape,o,l,s),u=new rZe(c);return n.runWebGLProgram(u,[i,a],"float32")}const vZe={kernelName:vb,backendName:"webgl",kernelFunc:gZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,pad:s,filterShape:l}=r,c=Lu(i.shape,l,o,1,s),u=new cZe(c);return n.runWebGLProgram(u,[i,a],"float32")}const bZe={kernelName:S2,backendName:"webgl",kernelFunc:yZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xZe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{pad:o,strides:s,inputShape:l}=r,c=Lu(l,a.shape,s,1,o),u=new uZe(c);return n.runWebGLProgram(u,[i,a],"float32")}const wZe={kernelName:$2,backendName:"webgl",kernelFunc:xZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SZe=_g+`
  return cos(x);
`,$Ze=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Vf}
  return result;
`,CZe=jt({opSnippet:SZe,packedOpSnippet:$Ze}),EZe={kernelName:Pm,backendName:"webgl",kernelFunc:CZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TZe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,IZe=jt({opSnippet:TZe}),NZe={kernelName:Rm,backendName:"webgl",kernelFunc:IZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kZe{constructor(e,n,r,i,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,l,c]=e,[u]=n,[d,f]=r;this.outputShape=[u,d,f,c];const h=i==="bilinear"?1:0,[p,g]=[`${s-1}.0`,`${l-1}.0`],[m,v,y]=d>1?[`${(s-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[b,w,x]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${m});
      const float width_ratio = float(${b});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${w};

        float in_y = ${y};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${x};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OZe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:i,boxes:a,boxInd:o}=e,{cropSize:s,method:l,extrapolationValue:c}=r,u=new kZe(i.shape,a.shape,s,l,c);return n.runWebGLProgram(u,[i,a,o],"float32")},AZe={kernelName:E2,backendName:"webgl",kernelFunc:OZe};var I0;(function(t){t.Prod="*",t.Sum="+"})(I0||(I0={}));class aW{constructor(e,n,r,i){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,o=this.op===I0.Prod?"1.0":"0.0",s=r?o:`getX(${oW(a,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=i?`end != ${l-1}`:"end != 0",u=i?"end + 1":"end - 1"):(c=i?`end + pow2 < ${l}`:"end >= pow2",u=i?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${on(a)} coords = getOutputCoords();
        int end = ${sW(a,"coords",this.op)};
        float val = ${s};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${sW(a,"coords",this.op)} = idx;
          val ${this.op}= getX(${oW(a,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function oW(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function sW(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cee(t,e,n,r,i,a){const o=e.shape.length,s=Un([r],o);let l=e;s!=null&&(l=Hi({inputs:{x:e},backend:n,attrs:{perm:s}}));const c=rr(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=Da({inputs:{x:l},backend:n});for(let f=0;f<=Math.ceil(Math.log2(u))-1;f++){const h=new aW(t,l.shape,!1,a),p=[[f]],g=d;d=n.runWebGLProgram(h,[d],d.dtype,p),n.disposeIntermediateTensorInfo(g)}if(i){const f=new aW(t,l.shape,i,a),h=d;d=n.runWebGLProgram(f,[d],d.dtype),n.disposeIntermediateTensorInfo(h)}if(s!=null){const f=ju(s),h=Hi({inputs:{x:d},backend:n,attrs:{perm:f}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),h}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ze(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;return Cee(I0.Prod,i,n,a,o,s)}const PZe={kernelName:C2,backendName:"webgl",kernelFunc:_Ze};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,exclusive:o,reverse:s}=r;return Cee(I0.Sum,i,n,a,o,s)}const DZe={kernelName:yb,backendName:"webgl",kernelFunc:RZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,weights:a}=e,{size:o,binaryOutput:s}=r;if(i.shape.length===1){const l=n.readSync(i.dataId),c=n.readSync(a.dataId),u=iee(l,c,a.dtype,a.shape,o);return n.makeTensorInfo([o],a.dtype,u)}else if(i.shape.length===2){const l=n.bufferSync(i),c=n.bufferSync(a),u=zqe(l,c,o,s);return n.makeTensorInfo(u.shape,a.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}const MZe={kernelName:T2,backendName:"webgl",kernelFunc:FZe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LZe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockSize:a,dataFormat:o}=r,s=i.shape[0],l=o==="NHWC"?i.shape[1]:i.shape[2],c=o==="NHWC"?i.shape[2]:i.shape[3],u=o==="NHWC"?i.shape[3]:i.shape[1],d=l*a,f=c*a,h=u/(a*a),p=o==="NHWC"?[s,d,f,h]:[s,h,d,f],g=new LZe(p,a,o);return n.runWebGLProgram(g,[i],i.dtype)}const zZe={kernelName:I2,backendName:"webgl",kernelFunc:jZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eee{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ii(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(i?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${s}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Tee{constructor(e,n=!1,r=null,i=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=Ii(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)h+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;h+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let v=0;v<d;v++)h+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(f+1)/2;v++){const y=v*2;if(h+=`
          xC = xCCorner + ${y*c};
          `,l===1){if(y<d&&(s%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }
              `,c===1&&y>0?h+=`
                xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                  } else {
                    xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                xC${y} = xTexelC${y};
                `,y+1<d)){const b=s%2===0?f2(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${b};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                    xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${y+1}.zw = vec2(0.0);
                    }
                    xTexelC${y+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                    } else {
                     xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                    }
                    `:h+=`
                    xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                    `):b===1?h+=`
                    xC${y+1} = xTexelC${y};
                    `:h+=`
                    xCOffset = xC + ${b};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                      xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${y+1}.zw = vec2(0.0);
                      }
                      xTexelC${y+1}Ready = 1;
                    }

                    xC${y+1} = xTexelC${y+1};
                    `}}else y<d&&(s%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                  xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${y+1}.zw = vec2(0.0);
                  }
                  xTexelC${y+1}Ready = 1;
                }

                xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
              `,y+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                  xTexelC${y} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${y}.zw = vec2(0.0);
                  }
                  xTexelC${y}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                  xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${y+1}.zw = vec2(0.);
                  }
                  xTexelC${y+1}Ready = 1;
                }

                xC${y} = vec4(
                  xTexelC${y}.xy, xTexelC${y+1}.xy);
              `,y+1<d&&(h+=`
                  xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                `)));y<d&&(h+=`
            wTexel = getW(r, ${y}, d1, q);
            dotProd += xC${y} * vec4(wTexel.xz, wTexel.xz);
          `,y+1<d&&(h+=`
              wTexel = getW(r, ${y+1}, d1, q);
              dotProd += xC${y+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",g="";r&&(i?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,g="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${m}
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),j(hi(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const d=Gr(i.shape,a.shape,o,u,s,c,!0);let f;oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new Tee(d):f=new Eee(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[i,a],"float32",h)}const VZe={kernelName:bb,backendName:"webgl",kernelFunc:BZe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WZe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,i=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${i};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class UZe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,i=e.strideHeight,a=e.strideWidth,o=n-1-e.padInfo.top,s=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${i}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,dy:a}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:c,filterShape:u}=r,d=Gr(i.shape,u,o,s,l,c,!0),f=new WZe(d);return n.runWebGLProgram(f,[i,a],"float32")}const GZe={kernelName:N2,backendName:"webgl",kernelFunc:HZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qZe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,filter:a}=e,{strides:o,dilations:s,pad:l,dimRoundingMode:c,inputShape:u}=r,d=Gr(u,a.shape,o,s,l,c,!0),f=new UZe(d);return n.runWebGLProgram(f,[i,a],"float32")}const KZe={kernelName:k2,backendName:"webgl",kernelFunc:qZe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XZe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YZe(t){const{inputs:e,backend:n}=t,{x:r}=e,i=[...r.shape,...r.shape],a=de(r.shape),o=Re({inputs:{x:r},backend:n,attrs:{shape:[a]}}),s=new XZe(a),l=n.runWebGLProgram(s,[o],o.dtype),c=Re({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const ZZe={kernelName:O2,backendName:"webgl",kernelFunc:YZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QZe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:i,strideHeight:a,strideWidth:o,filterHeight:s,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:f}=i;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${o});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${s}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JZe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a}=e,{strides:o,pad:s,dilations:l}=r,c=cx(i.shape,a.shape,o,s,"NHWC",l);let u;const d=new QZe(c);u=n.runWebGLProgram(d,[i,a],"float32");const f=Re({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),f}const eQe={kernelName:xb,backendName:"webgl",kernelFunc:JZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tQe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:i}=r,a=e,{allDims:o,summedDims:s,idDims:l}=jM(i,a.length);BM(o.length,l,a);const{path:c,steps:u}=VM(s,l),d=u.length;let f=null,h=o.length;const p=[];for(let g=0;g<d;++g){for(const m of u[g]){const{permutationIndices:v,expandDims:y}=zM(h,l[m]);let b;WM(v)?b=a[m]:(b=Hi({inputs:{x:a[m]},backend:n,attrs:{perm:v}}),p.push(b));const w=b.shape.slice();for(let x=0;x<y.length;++x)w.splice(y[x],0,1);Nt(b.shape,w)||(b=Re({inputs:{x:b},backend:n,attrs:{shape:w}}),p.push(b)),f===null?f=b:(f=_3({inputs:{a:b,b:f},backend:n}),p.push(f))}g<d-1&&(c[g]>=0&&(f=CT({inputs:{x:f},backend:n,attrs:{axis:c[g]-(o.length-h),keepDims:!1}}),p.push(f)),h--)}for(const g of p)g!==f&&n.disposeIntermediateTensorInfo(g);return f}const nQe={kernelName:_2,backendName:"webgl",kernelFunc:tQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rQe="return (x >= 0.0) ? x : (exp(x) - 1.0);",iQe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,aQe=jt({opSnippet:rQe,packedOpSnippet:iQe}),oQe={kernelName:Fm,backendName:"webgl",kernelFunc:aQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sQe="return (b >= 0.0) ? a : a * (b + 1.0);",lQe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,cQe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:i}=e,a=oe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ag(lQe,r.shape,i.shape):new vf(sQe,r.shape,i.shape);return n.runWebGLProgram(a,[r,i],r.dtype)},uQe={kernelName:P2,backendName:"webgl",kernelFunc:cQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dQe=`
  return vec4(equal(a, b));
`,fQe="return float(a == b);",hQe=gi({opSnippet:fQe,packedOpSnippet:dQe,dtype:"bool",cpuKernelImpl:Hqe}),pQe={kernelName:wb,backendName:"webgl",kernelFunc:hQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mQe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${_M};
  float a1 = ${PM};
  float a2 = ${RM};
  float a3 = ${DM};
  float a4 = ${FM};
  float a5 = ${MM};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,gQe=jt({opSnippet:mQe}),vQe={kernelName:Mm,backendName:"webgl",kernelFunc:gQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yQe=_g+`
  return exp(x);
`,bQe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Iee=jt({opSnippet:yQe,packedOpSnippet:bQe,cpuKernelImpl:Gqe,dtype:"float32"}),xQe={kernelName:Lm,backendName:"webgl",kernelFunc:Iee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E_(t){const{inputs:e,attrs:n,backend:r}=t,{dim:i}=n,{input:a}=e,o=a.shape.length,s=a.shape.slice();let l=i;return i<0&&(j(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),s.splice(l,0,1),Re({inputs:{x:a},backend:r,attrs:{shape:s}})}const wQe={kernelName:Sb,backendName:"webgl",kernelFunc:E_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lW="return exp(x) - 1.0;",SQe=jt({opSnippet:lW,packedOpSnippet:lW,cpuKernelImpl:qqe}),$Qe={kernelName:jm,backendName:"webgl",kernelFunc:SQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cW{constructor(e,n,r){this.variableNames=["real","imag"];const i=n[1];this.outputShape=n;const a=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${i}.0`:"1.0";let s;if(e==="real")s="return real * expR - imag * expI;";else if(e==="imag")s="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${s}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${i});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${i}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nee(t,e,n){const r=n.texData.get(t.dataId),i=de(t.shape),a=t.shape[t.shape.length-1],o=i/a,s=Re({inputs:{x:t},backend:n,attrs:{shape:[o,a]}}),l=s.shape,c=new cW("real",l,e),u=new cW("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(c,d,"float32"),h=n.runWebGLProgram(u,d,"float32"),p=Gu({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const g=Re({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(p),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CQe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Nee(r,!1,n)}const EQe={kernelName:R2,backendName:"webgl",kernelFunc:CQe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TQe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wx(t){const{backend:e,attrs:n}=t,{shape:r,value:i}=n;let{dtype:a}=n;if(a=a||kf(i),a==="string"){const o=qn(a,de(r));return o.fill(i),e.makeTensorInfo(r,a,o)}else{const o=new TQe(r,i),s=[[i]];return e.runWebGLProgram(o,[],a,s)}}const IQe={kernelName:D2,backendName:"webgl",kernelFunc:Wx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NQe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kQe={kernelName:F2,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,i=new NQe(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uW="return floor(x);",OQe=jt({opSnippet:uW,packedOpSnippet:uW,cpuKernelImpl:Kqe}),AQe={kernelName:zm,backendName:"webgl",kernelFunc:OQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Qe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,PQe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,RQe=gi({opSnippet:_Qe,packedOpSnippet:PQe,dtype:"int32"}),DQe={kernelName:Bm,backendName:"webgl",kernelFunc:RQe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FQe{constructor(e){this.variableNames=["A"];const n=qi(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MQe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=qi(),[r,i]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${i}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LQe={kernelName:g$,backendName:"webgl",kernelFunc:jQe};let ah,yN=oe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function jQe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:a}=r,o=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,[l,c]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],u=[c,l],d=[c,l,a];if(s||o){const g=oe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(ah==null||g!==yN)&&(yN=g,ah=document.createElement("canvas").getContext("2d",{willReadFrequently:yN})),ah.canvas.width=l,ah.canvas.height=c,ah.drawImage(i,0,0,l,c),i=ah.canvas}const f=n.makeTensorInfo(u,"int32");n.texData.get(f.dataId).usage=no.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),i);const h=oe().getBool("WEBGL_PACK")?new MQe(d):new FQe(d),p=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=r,g=mc(u),m=Gr(i.shape,a.shape,l,d,c,f,!1,g);let v;const y=[],b=o!=null,w=s!=null,x=h==="leakyrelu",$=()=>{const E=[i,a],I=(T,N)=>{if(N==="NCHW"&&T.shape.length===1&&T.shape[0]!==1){const k=Re({inputs:{x:T},backend:n,attrs:{shape:[T.shape[0],1,1]}});return y.push(k),k}return T};if(b&&E.push(I(o,u)),w&&E.push(I(s,u)),x){const T=n.makeTensorInfo([],"float32",hc(p,"float32"));E.push(T),y.push(T)}return E};if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))v=See({x:i,filter:a,convInfo:m,backend:n,bias:o,activation:h,preluActivationWeights:s,leakyreluAlpha:p});else if(m.strideWidth<=2&&g==="channelsLast"&&oe().getBool("WEBGL_EXP_CONV")){const E=h?E0(h,!0):null,I=new wee(m,b,E,w,x),T=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],N=$();v=n.runWebGLProgram(I,N,"float32",T)}else if(oe().getBool("WEBGL_CONV_IM2COL"))v=$ee({x:i,filter:a,convInfo:m,backend:n,bias:o,activation:h,preluActivationWeights:s,leakyreluAlpha:p});else{const E=h?E0(h,!1):null,I=new xee(m,b,E,w,x),T=$();v=n.runWebGLProgram(I,T,"float32")}const C=Re({inputs:{x:v},backend:n,attrs:{shape:m.outShape}});return y.push(v),y.forEach(E=>n.disposeIntermediateTensorInfo(E)),C}const BQe={kernelName:u0,backendName:"webgl",kernelFunc:zQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VQe(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,filter:a,bias:o,preluActivationWeights:s}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=r,p=[];let g=u;g==null&&(g=[1,1]),j(hi(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);const m=Gr(i.shape,a.shape,l,g,c,d,!0),v=oe().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,y=f?E0(f,v):null,b=[i,a],w=o!=null,x=s!=null,$=f==="leakyrelu";if(w&&b.push(o),x&&b.push(s),$){const T=n.makeTensorInfo([],"float32",hc(h,"float32"));b.push(T),p.push(T)}let C;v?C=new Tee(m,w,y,x,$):C=new Eee(m,w,y,x,$);const E=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],I=n.runWebGLProgram(C,b,"float32",E);return p.forEach(T=>n.disposeIntermediateTensorInfo(T)),I}const WQe={kernelName:d0,backendName:"webgl",kernelFunc:VQe};class UQe{constructor(e,n,r,i){this.sliceDim=e,this.strides=n,this.paramsShape=i,this.variableNames=["x","indices"],this.outputShape=r;const a=on(r.length);let o=`
    int index;`;for(let s=0;s<this.sliceDim;s++)o+=`
          index = round(getIndices(coords[0], ${s}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[s]};
          flattenIndex += index * ${this.strides[s]};`;this.userCode=`
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HQe(t){const{inputs:e,backend:n}=t,{params:r,indices:i}=e,a=i.shape,o=a[a.length-1],s=de(r.shape),[l,c,u,d]=iT(r,i),f=Re({inputs:{x:i},backend:n,attrs:{shape:[c,o]}}),h=Re({inputs:{x:r},backend:n,attrs:{shape:[de(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,i])||r.dtype==="string"){const v=n.readSync(i.dataId),y=n.bufferSync(r),b=Xqe(v,y,r.dtype,c,o,u,d,r.shape,s);return n.makeTensorInfo(l,r.dtype,b.values)}const p=new UQe(o,d,[c,u],r.shape),g=n.runWebGLProgram(p,[h,f],h.dtype),m=Re({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),m}const GQe={kernelName:M2,backendName:"webgl",kernelFunc:HQe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qQe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=on(this.rank),i=KQe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${i}));
      }
    `}}function KQe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let i=0;i<t.length;i++)i===2?r.push("index"):r.push(`${n[i]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kee(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,indices:a}=e,{axis:o,batchDims:s}=r,l=Tt(o,i.shape)[0];if(oe().get("DEBUG")){const y=n.readSync(a.dataId),b=i.shape[l];for(let w=0;w<y.length;++w){const x=y[w];j(x<=b-1&&x>=0,()=>`GatherV2: the index value ${x} is not in [0, ${b-1}]`)}}const c=HM(i,a,l,s),u=de(a.shape),d=[],f=Re({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=Re({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(f),d.push(h);const p=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,a])||i.dtype==="string"){const y=n.bufferSync(h),b=n.bufferSync(f),w=Yqe(b,y,p);return d.forEach(x=>n.disposeIntermediateTensorInfo(x)),n.makeTensorInfo(c.outputShape,w.dtype,w.values)}const g=new qQe(f.shape,p),m=n.runWebGLProgram(g,[f,h],f.dtype);d.push(m);const v=Re({inputs:{x:m},backend:n,attrs:{shape:c.outputShape}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),v}const XQe={kernelName:Cb,backendName:"webgl",kernelFunc:kee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YQe="return float(a > b);",ZQe=`
  return vec4(greaterThan(a, b));
`,QQe=gi({opSnippet:YQe,packedOpSnippet:ZQe,cpuKernelImpl:Zqe,dtype:"bool"}),JQe={kernelName:Eb,backendName:"webgl",kernelFunc:QQe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eJe="return float(a >= b);",tJe=`
  return vec4(greaterThanEqual(a, b));
`,nJe=gi({opSnippet:eJe,packedOpSnippet:tJe,dtype:"bool",cpuKernelImpl:Qqe}),rJe={kernelName:Vm,backendName:"webgl",kernelFunc:nJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iJe(t){const{inputs:e,backend:n}=t,{input:r}=e;return Nee(r,!0,n)}const aJe={kernelName:L2,backendName:"webgl",kernelFunc:iJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oJe="return float(!isnan(x) && !isinf(x));",sJe=jt({opSnippet:oJe,dtype:"bool"}),lJe={kernelName:Um,backendName:"webgl",kernelFunc:sJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cJe="return float(isinf(x));",uJe=jt({opSnippet:cJe,dtype:"bool"}),dJe={kernelName:Hm,backendName:"webgl",kernelFunc:uJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fJe="return float(isnan(x));",hJe=jt({opSnippet:fJe,dtype:"bool"}),pJe={kernelName:Gm,backendName:"webgl",kernelFunc:hJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mJe="return float(a < b);",gJe=`
  return vec4(lessThan(a, b));
`,vJe=gi({opSnippet:mJe,packedOpSnippet:gJe,cpuKernelImpl:Jqe,dtype:"bool"}),yJe={kernelName:Ib,backendName:"webgl",kernelFunc:vJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bJe="return float(a <= b);",xJe=`
  return vec4(lessThanEqual(a, b));
`,wJe=gi({opSnippet:bJe,packedOpSnippet:xJe,cpuKernelImpl:eKe,dtype:"bool"}),SJe={kernelName:Nb,backendName:"webgl",kernelFunc:wJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Je(t){const{backend:e,attrs:n}=t,{start:r,stop:i,num:a}=n,o=tKe(r,i,a);return e.makeTensorInfo([o.length],"float32",o)}const CJe={kernelName:z2,backendName:"webgl",kernelFunc:$Je};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EJe=_g+`
  return x < 0.0 ? 0./0. : log(x);
`,TJe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,IJe=jt({opSnippet:EJe,packedOpSnippet:TJe,cpuKernelImpl:nKe}),NJe={kernelName:qm,backendName:"webgl",kernelFunc:IJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kJe=_g+`
  return log(1.0 + x);
`,OJe=jt({opSnippet:kJe}),AJe={kernelName:Km,backendName:"webgl",kernelFunc:OJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Je="return float(a >= 1.0 && b >= 1.0);",PJe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,RJe=gi({opSnippet:_Je,packedOpSnippet:PJe,dtype:"bool"}),DJe={kernelName:kb,backendName:"webgl",kernelFunc:RJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FJe="return float(!(x >= 1.0));",MJe=jt({opSnippet:FJe}),LJe={kernelName:Ob,backendName:"webgl",kernelFunc:MJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jJe="return float(a >= 1.0 || b >= 1.0);",zJe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,BJe=gi({opSnippet:jJe,packedOpSnippet:zJe,dtype:"bool"}),VJe={kernelName:Ab,backendName:"webgl",kernelFunc:BJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WJe{constructor(e,n,r,i,a){this.variableNames=["x"],this.outputShape=[];const o=n,s=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;a===.5?l=`inversesqrt(${c})`:a===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${s}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UJe{constructor(e,n,r,i,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,s=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${i}) * sum`;a===.5?l=`inversesqrt(${c})`:a===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HJe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{depthRadius:a,bias:o,alpha:s,beta:l}=r,c=oe().getBool("WEBGL_PACK_NORMALIZATION")?new UJe(i.shape,a,o,s,l):new WJe(i.shape,a,o,s,l);return n.runWebGLProgram(c,[i],i.dtype)},GJe={kernelName:_b,backendName:"webgl",kernelFunc:HJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qJe{constructor(e,n,r,i,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=i,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${i}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${i})
                * float(${a})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KJe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i,y:a,dy:o}=e,{depthRadius:s,bias:l,alpha:c,beta:u}=r,d=new qJe(i.shape,s,l,c,u);return n.runWebGLProgram(d,[i,a,o],i.dtype)},XJe={kernelName:B2,backendName:"webgl",kernelFunc:KJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YJe(t,e,n,r){const i=de(e),o=de(t.shape)/i,s=Re({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=Wf(s,t.dtype,"max",r),c=Re({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oee(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reductionIndices:a,keepDims:o}=r,s=i.shape.length,l=Tt(a,i.shape);let c=l;const u=Un(c,s),d=u!=null,f=n.shouldExecuteOnCPU([i]);let h=i;if(d){if(f){const b=n.texData.get(h.dataId).values,w=new Array(s);for(let C=0;C<w.length;C++)w[C]=i.shape[u[C]];const x=O3(b,i.shape,i.dtype,u,w);h=n.makeTensorInfo(w,i.dtype);const $=n.texData.get(h.dataId);$.values=x}else h=$T(i,u,n);c=rr(c.length,s)}pi("max",c,s);const[p,g]=qr(h.shape,c);let m=p;o&&(m=nr(p,l));let v;if(f){const b=n.texData.get(h.dataId).values,w=rKe(b,de(g),m,i.dtype);v=n.makeTensorInfo(m,i.dtype);const x=n.texData.get(v.dataId);x.values=w}else v=YJe(h,g,m,n);return d&&n.disposeIntermediateTensorInfo(h),v}const ZJe={kernelName:Pb,backendName:"webgl",kernelFunc:Oee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QJe=A3+`
  return max(a, b);
`,JJe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vf+`
  return result;
`,eet=gi({opSnippet:QJe,packedOpSnippet:JJe,cpuKernelImpl:iKe}),tet={kernelName:Xm,backendName:"webgl",kernelFunc:eet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function net(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;zx(i,"maxPool");const{filterSize:a,strides:o,pad:s,dimRoundingMode:l}=r,c=1;j(hi(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=Yo(i.shape,a,o,c,s,l);if(u.filterWidth===1&&u.filterHeight===1&&Nt(u.inShape,u.outShape))return Da({inputs:{x:i},backend:n});const d=new T0(u,"max",!1);return n.runWebGLProgram(d,[i],i.dtype)}const ret={kernelName:Rb,backendName:"webgl",kernelFunc:net};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iet(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{filterSize:a,strides:o,pad:s,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=pc(i.shape,a,o,u,s,c,l),f=new P3(d,"max",!1);return n.runWebGLProgram(f,[i],i.dtype)}const aet={kernelName:Db,backendName:"webgl",kernelFunc:iet};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oet{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,i=e.dilationHeight,a=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=a-1-e.padInfo.top,l=o-1-e.padInfo.left,c=a*o-1;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class set{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,i=e.strideWidth,a=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,f=c-1-e.padInfo.top,h=u-1-e.padInfo.left,p=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${s}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cet(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a}=e,o=a,{filterSize:s,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],f=pc(o.shape,s,l,d,c,u),h=new P3(f,"max",!0),p=n.runWebGLProgram(h,[o],o.dtype),g=new set(f),m=n.runWebGLProgram(g,[i,p],o.dtype);return n.disposeIntermediateTensorInfo(p),m}const uet={kernelName:W2,backendName:"webgl",kernelFunc:cet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function det(t){const{inputs:e,backend:n,attrs:r}=t,{dy:i,input:a,output:o}=e,s=a;zx([a,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,f=Yo(s.shape,l,c,1,u,d),h=!0,p=new T0(f,"max",h),g=n.runWebGLProgram(p,[s],s.dtype),m=new oet(f),v=n.runWebGLProgram(m,[i,g],s.dtype);return n.disposeIntermediateTensorInfo(g),v}const fet={kernelName:V2,backendName:"webgl",kernelFunc:det};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function het(t,e,n,r){let i=new T0(n,"max",!1);const a=r.runWebGLProgram(i,[t],"float32");i=new T0(n,"max",!0,!0,e);const o=r.runWebGLProgram(i,[t],"float32");return[a,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pet={kernelName:U2,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:i,strides:a,pad:o,includeBatchInIndex:s}=e,l=n;j(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];j(hi(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const u=Yo(r.shape,i,a,c,o),[d,f]=het(r,s,u,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function met(t,e,n,r){const i=de(e),o=de(t.shape)/i,s=Re({inputs:{x:t},attrs:{shape:[o,i]},backend:r}),l=Wf(s,"float32","mean",r),c=Re({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const get={kernelName:Fb,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:i,axis:a}=e,o=n,s=r.shape.length,l=Tt(a,r.shape);let c=l;const u=Un(c,s),d=u!=null,f=o.shouldExecuteOnCPU([r]),h=[];let p=r;if(d){if(f){const w=o.texData.get(p.dataId).values,x=new Array(s);for(let E=0;E<x.length;E++)x[E]=r.shape[u[E]];const $=O3(w,r.shape,r.dtype,u,x);p=o.makeTensorInfo(x,r.dtype);const C=o.texData.get(p.dataId);C.values=$}else p=$T(r,u,o);h.push(p),c=rr(c.length,s)}pi("sum",c,s);const[g,m]=qr(p.shape,c);let v=g;i&&(v=nr(g,l));const y=met(p,m,v,o);for(const b of h)o.disposeIntermediateTensorInfo(b);return y}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vet(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,l=Tt(a,i.shape);let c=l;const u=Un(c,s);let d=i;u!=null&&(d=Hi({inputs:{x:i},backend:n,attrs:{perm:u}}),c=rr(c.length,i.shape.length)),pi("min",c,s);const[f,h]=qr(d.shape,c),p=de(h),g=Re({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),m=Wf(g,g.dtype,"min",n);let v;if(o){const y=nr(f,l);v=Re({inputs:{x:m},backend:n,attrs:{shape:y}})}else v=Re({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),u!=null&&n.disposeIntermediateTensorInfo(d),v}const yet={kernelName:Mb,backendName:"webgl",kernelFunc:vet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bet=A3+`
  return min(a, b);
`,xet=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Vf+`
  return result;
`,wet=gi({opSnippet:bet,packedOpSnippet:xet,cpuKernelImpl:aKe}),$et={kernelName:Ym,backendName:"webgl",kernelFunc:wet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cet{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const i=e.length,a=on(i),o=n.map(u=>u[0]).join(","),s=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i),c=r==="reflect"?0:1;if(i===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${s});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${i}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eet{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,g)=>p[0]+e[g]+p[1]);const i=e.length,a=on(i),o=n.map(p=>p[0]).join(","),s=n.map((p,g)=>p[0]+e[g]).join(","),l=Vi("rc",i),c=Vi("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,f=r==="reflect"?0:1;let h="";if(i===1){const p=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${a} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const p=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${a} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[i-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[i-2]} += 1;
        if(${l[i-2]} < ${this.outputShape[i-2]}) {
          ${p}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[i-1]} += 1;
          if(${u}) {
            ${p}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${s});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tet=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:i,mode:a}=n,o=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Eet(r.shape,i,a):new Cet(r.shape,i,a);return e.runWebGLProgram(o,[r],r.dtype)},Iet={kernelName:Lb,backendName:"webgl",kernelFunc:Tet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Net=`if (b == 0.0) return NAN;
  return mod(a, b);`,ket=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Vf+`
  return result;
`,Oet=gi({opSnippet:Net,packedOpSnippet:ket}),Aet={kernelName:Zm,backendName:"webgl",kernelFunc:Oet};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _et{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pet=`
if (a == b) {
  return 1.0;
};
return a / b;`,Ret=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Aee=gi({opSnippet:Pet,packedOpSnippet:Ret,checkOutOfBounds:!0}),Det={kernelName:Dm,backendName:"webgl",kernelFunc:Aee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dW="return a - b;",_ee=gi({opSnippet:dW,packedOpSnippet:dW,supportsComplex:!0,cpuKernelImpl:TKe}),Fet={kernelName:hg,backendName:"webgl",kernelFunc:_ee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pee(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{dim:a}=r,o=Tt([a],i.shape),s=Oee({inputs:{x:i},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=nr(s.shape,o),c=Re({inputs:{x:s},backend:n,attrs:{shape:l}}),u=_ee({inputs:{a:i,b:c},backend:n}),d=Iee({inputs:{x:u},backend:n}),f=CT({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),h=Re({inputs:{x:f},backend:n,attrs:{shape:l}}),p=Aee({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}const Met={kernelName:nx,backendName:"webgl",kernelFunc:Pee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Let(t){const{inputs:e,backend:n,attrs:r}=t,{logits:i}=e,{numSamples:a,seed:o,normalized:s}=r,l=s?i:Pee({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new _et(c,u,a),f=[[o]],h=n.runWebGLProgram(d,[l],"int32",f);return s||n.disposeIntermediateTensorInfo(l),h}const jet={kernelName:H2,backendName:"webgl",kernelFunc:Let};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zet=Qo+`
  return -x;
`,Bet=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function Vet(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const a=n.texData.get(r.dataId),[o,s]=sKe(a.values,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,o)}let i;return oe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?i=new Kc(r.shape,Bet):i=new Js(r.shape,zet),n.runWebGLProgram(i,[r],r.dtype)}const Wet={kernelName:jb,backendName:"webgl",kernelFunc:Vet};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uet=eT;function Het(t){Qa("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l}=r,c=n.readSync(i.dataId),u=n.readSync(a.dataId),{selectedIndices:d}=Uet(c,u,o,s,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Get={kernelName:G2,backendName:"webgl",kernelFunc:Het};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qet=tT;function Ket(t){Qa("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(i.dataId),d=n.readSync(a.dataId),{selectedIndices:f,validOutputs:h}=qet(u,d,o,s,l,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const Xet={kernelName:q2,backendName:"webgl",kernelFunc:Ket};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yet=nT;function Zet(t){Qa("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:i,scores:a}=e,{maxOutputSize:o,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(i.dataId),d=n.readSync(a.dataId),f=o,h=s,p=l,g=c,{selectedIndices:m,selectedScores:v}=Yet(u,d,f,h,p,g);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const Qet={kernelName:K2,backendName:"webgl",kernelFunc:Zet};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Jet{constructor(e,n,r,i){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${i}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ett=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:i}=e,{dtype:a,depth:o,onValue:s,offValue:l}=r,c=de(i.shape),u=new Jet(c,o,s,l),d=Re({inputs:{x:i},backend:n,attrs:{shape:[c]}}),f=n.runWebGLProgram(u,[d],a);n.disposeIntermediateTensorInfo(d);const h=[...i.shape,o],p=Re({inputs:{x:f},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),p},ttt={kernelName:Vb,backendName:"webgl",kernelFunc:ett};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B$(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const i=Vx({inputs:{input:r},backend:n}),a=B$({inputs:{x:i},backend:n}),o=ET({inputs:{input:r},backend:n}),s=B$({inputs:{x:o},backend:n}),l=Gu({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return Wx({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const ntt={kernelName:ox,backendName:"webgl",kernelFunc:B$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ree(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const i=Vx({inputs:{input:r},backend:n}),a=Ree({inputs:{x:i},backend:n}),o=ET({inputs:{input:r},backend:n}),s=B$({inputs:{x:o},backend:n}),l=Gu({inputs:{real:a,imag:s},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}else return Wx({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const rtt={kernelName:Bb,backendName:"webgl",kernelFunc:Ree};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function itt(t){const{inputs:e,backend:n,attrs:r}=t,{axis:i}=r;if(e.length===1)return E_({inputs:{input:e[0]},backend:n,attrs:{dim:i}});const a=e[0].shape,o=e[0].dtype;e.forEach(u=>{fi(a,u.shape,"All tensors passed to stack must have matching shapes"),j(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=[],l=e.map(u=>{const d=E_({inputs:{input:u},backend:n,attrs:{dim:i}});return s.push(d),d}),c=bee({inputs:l,backend:n,attrs:{axis:i}});return s.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const att={kernelName:Wb,backendName:"webgl",kernelFunc:itt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ott{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const i=e.length,a=on(i),o=n.map(c=>c[0]).join(","),s=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,i);if(i===1){this.userCode=`
        int start = ${o};
        int end = ${s};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${o});
      ${a} end = ${a}(${s});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class stt{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((g,m)=>g[0]+e[m]+g[1]);const i=e.length,a=on(i),o=n.map(g=>g[0]).join(","),s=n.map((g,m)=>g[0]+e[m]).join(","),l=Vi("rc",i),c=Vi("source",i),u=`${l[i-1]} < ${this.outputShape[i-1]}`,d=i===1?"source":`vec2(${c.slice(-2).join()})`,f=[`${a} rc = outputLoc;`,`${l[i-1]} += 1;
       if(${u}) {
      `,i===1?"":`}
       rc = outputLoc;
       ${l[i-2]} += 1;
       if(${l[i-2]} < ${this.outputShape[i-2]}) {`,i===1?"":`  ${l[i-1]} += 1;
         if(${u}) {`],h=i===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let g=0,m=i===1?2:4;g<m;g++)p+=`
        ${f[g]}
        if (${h}) {
          result[${g}] = float(value);
        } else {
          ${a} source = rc - start;
          result[${g}] = getChannel(getX(${c.join()}), ${d});
        }
      `;p+=i===1?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${o});
      const ${a} end = ${a}(${s});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dee=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{paddings:a,constantValue:o}=r;if(de(i.shape)===0){const c=a.map((u,d)=>u[0]+i.shape[d]+u[1]);return Wx({backend:n,attrs:{shape:c,value:o,dtype:i.dtype}})}const s=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new stt(i.shape,a,o):new ott(i.shape,a,o),l=[[o]];return n.runWebGLProgram(s,[i],i.dtype,l)},ltt={kernelName:Ub,backendName:"webgl",kernelFunc:Dee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ctt=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,utt=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Vf+`
  return result;
`,dtt=gi({opSnippet:ctt,packedOpSnippet:utt}),ftt={kernelName:Jm,backendName:"webgl",kernelFunc:dtt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function htt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{axis:a,keepDims:o}=r,s=i.shape.length,l=[],c=Tt(a,i.shape);let u=c;const d=Un(u,s);let f=i;d!=null&&(f=Hi({inputs:{x:i},backend:n,attrs:{perm:d}}),u=rr(u.length,s),l.push(f)),pi("prod",u,s);let h;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:g,outShape:m,outDtype:v}=cKe(f.shape,f.dtype,p,u);h=n.makeTensorInfo(m,v,g)}else{const[p,g]=qr(f.shape,u),m=de(g),v=Re({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),y=xE(i.dtype),b=Wf(v,y,"prod",n);h=Re({inputs:{x:b},backend:n,attrs:{shape:p}}),l.push(v),l.push(b)}if(o){l.push(h);const p=nr(h.shape,c);h=Re({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const ptt={kernelName:Gb,backendName:"webgl",kernelFunc:htt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mtt(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:i,paramsDenseValues:a,indices:o}=e,{outputRaggedRank:s}=r,l=i.map(v=>n.readSync(v.dataId)),c=i.map(v=>v.shape),u=n.readSync(a.dataId),d=n.readSync(o.dataId),[f,h,p]=uKe(l,c,u,a.shape,a.dtype,d,o.shape,s),g=f.map(v=>n.makeTensorInfo([v.length],"int32",v)),m=n.makeTensorInfo(p,a.dtype,h);return g.concat([m])}const gtt={kernelName:X2,backendName:"webgl",kernelFunc:mtt};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vtt(t){const{inputs:e,backend:n}=t,{starts:r,limits:i,deltas:a}=e,o=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(a.dataId),[c,u]=dKe(o,r.shape,r.dtype,s,i.shape,l,a.shape),d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([u.length],r.dtype,u);return[d,f]}const ytt={kernelName:Y2,backendName:"webgl",kernelFunc:vtt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function btt(t){const{inputs:e,backend:n,attrs:r}=t,{shape:i,values:a,defaultValue:o,rowPartitionTensors:s}=e,{rowPartitionTypes:l}=r,c=n.readSync(i.dataId),u=n.readSync(a.dataId),d=n.readSync(o.dataId),f=s.map(m=>n.readSync(m.dataId)),h=s.map(m=>m.shape),[p,g]=fKe(c,i.shape,u,a.shape,a.dtype,d,o.shape,f,h,l);return n.makeTensorInfo(p,a.dtype,g)}const xtt={kernelName:Z2,backendName:"webgl",kernelFunc:btt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fee=t=>{const{backend:e,attrs:n}=t,{start:r,stop:i,step:a,dtype:o}=n,s=hKe(r,i,a,o);return e.makeTensorInfo([s.length],o,s)},wtt={kernelName:Q2,backendName:"webgl",kernelFunc:Fee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Stt="return 1.0 / x;",$tt=jt({opSnippet:Stt}),Ctt={kernelName:eg,backendName:"webgl",kernelFunc:$tt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ett=Qo+`
  return (x < 0.0) ? 0.0 : x;
`,Ttt=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Itt=jt({opSnippet:Ett,packedOpSnippet:Ttt}),Ntt={kernelName:tg,backendName:"webgl",kernelFunc:Itt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ktt=Qo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Ott=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Att=jt({opSnippet:ktt,packedOpSnippet:Ott}),_tt={kernelName:ng,backendName:"webgl",kernelFunc:Att};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ptt{constructor(e,n,r,i,a){this.variableNames=["A"],this.outputShape=[];const[o,s,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?s-1:s,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let f;a?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rtt{constructor(e,n,r,i,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?s-1:s,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r];let f;a?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dtt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r,[l,c]=s,u=oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Rtt(i.shape,l,c,a,o):new Ptt(i.shape,l,c,a,o);return n.runWebGLProgram(u,[i],"float32")}const Ftt={kernelName:Xb,backendName:"webgl",kernelFunc:Dtt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mtt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,a]=n,[,o,s]=e,l=[r&&o>1?i-1:i,r&&s>1?a-1:a],c=[r&&o>1?o-1:o,r&&s>1?s-1:s],u=l[0]/c[0],d=l[1]/c[1],f=1/u,h=1/d,p=Math.ceil(f)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${i-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ltt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r,s=new Mtt(a.shape,i.shape,o);return n.runWebGLProgram(s,[a],a.dtype)}const jtt={kernelName:tE,backendName:"webgl",kernelFunc:Ltt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ztt{constructor(e,n,r,i,a){this.variableNames=["A"],this.outputShape=[];const[o,s,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?s-1:s,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],f=i?"0.5":"0.0";let h;a?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${s}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Btt{constructor(e,n,r,i,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,l,c]=e;this.outputShape=[o,n,r,c];const u=[i&&n>1?s-1:s,i&&r>1?l-1:l],d=[i&&n>1?n-1:n,i&&r>1?r-1:r],f=i?"0.5":"0.0";let h;a?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${s}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vtt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i}=e,{alignCorners:a,halfPixelCenters:o,size:s}=r,[l,c]=s,u=oe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Btt(i.shape,l,c,a,o):new ztt(i.shape,l,c,a,o);return n.runWebGLProgram(u,[i],i.dtype)}const Wtt={kernelName:Kb,backendName:"webgl",kernelFunc:Vtt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Utt{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,i,a]=n,[,o,s]=e,l=[r&&o>1?i-1:i,r&&s>1?a-1:a],c=[r&&o>1?o-1:o,r&&s>1?s-1:s],u=l[0]/c[0],d=l[1]/c[1],f=1/u,h=1/d,p=Math.ceil(f)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${s}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Htt(t){const{inputs:e,backend:n,attrs:r}=t,{images:i,dy:a}=e,{alignCorners:o}=r,s=new Utt(a.shape,i.shape,o);return n.runWebGLProgram(s,[a],a.dtype)}const Gtt={kernelName:eE,backendName:"webgl",kernelFunc:Htt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qtt{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const i=s=>n.indexOf(s)!==-1&&e[s]!==1?`${e[s]} - coords[${s}] - 1`:`coords[${s}]`,a=e.map((s,l)=>i(l)).join(","),o=on(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ktt{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const i=Vi("rc",r),a=`${i[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${i[r-2]} + 1 < ${this.outputShape[r-2]}`,s=on(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${a}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(i.slice())};
          if(${a}){
            result.g = ${c(i.slice())};
          }
          if(${o}) {
            result.b = ${u(i.slice())};
            if(${a}) {
              result.a = ${d(i.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return f(p)}function c(p){return p[r-1]="("+p[r-1]+" + 1)",f(p)}function u(p){return p[r-2]="("+p[r-2]+" + 1)",f(p)}function d(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",f(p)}function f(p){const g=e.map((y,b)=>h(b,p)),m=g.join(","),v=g.slice(-2).join(",");return`getChannel(getX(${m}), vec2(${v}))`}function h(p,g){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${g[p]} - 1`:`${g[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xtt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{dims:a}=r,o=i.shape.length,s=Tt(a,i.shape);if(o===0)return Da({inputs:{x:i},backend:n});const l=oe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ktt(i.shape,s):new qtt(i.shape,s);return n.runWebGLProgram(l,[i],i.dtype)}const Ytt={kernelName:Yb,backendName:"webgl",kernelFunc:Xtt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ztt{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],i=e[2];this.outputShape=e;let a="";typeof n=="number"?a=`float outputValue = ${n.toFixed(2)};`:a=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${a}
          if(coordX >= 0 && coordX < ${i} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qtt={kernelName:yE,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:i,fillValue:a,center:o}=e,s=n,l=new Ztt(r.shape,a),[c,u]=kM(o,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(i),Math.cos(i)]];return s.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jtt=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,ent=jt({opSnippet:Jtt}),tnt={kernelName:rg,backendName:"webgl",kernelFunc:ent};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nnt="return inversesqrt(x);",rnt=jt({opSnippet:nnt,cpuKernelImpl:pKe}),int={kernelName:ig,backendName:"webgl",kernelFunc:rnt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R3{constructor(e,n,r,i,a,o,s=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=on(a.length),u=on(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let g="";l&&(g="coords[0], coords[1]");const m=`getDefaultValue(${g})`,v=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${a});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${f});
              flattenedIndex += index * ${v};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${m}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ant{constructor(e,n,r,i,a,o,s=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=on(a.length),u=on(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const f=`getIndices(${d})`;let h="";i===1?h="i":i===2&&(h="i, coords[1]");const p=`getUpdates(${h})`;let g="";l&&(g="coords[0], coords[1]");const m=`getDefaultValue(${g})`,v=n>1?"strides[j]":"strides",y=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${a});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${f});
              flattenedIndex += index.xz * ${v};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${y};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${m}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ont(t){const{inputs:e,backend:n,attrs:r}=t,{indices:i,updates:a}=e,{shape:o}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Wu(a,i,o),f=[d/c,c];if(d===0)return n.makeTensorInfo(o,i.dtype);const h=Re({inputs:{x:i},backend:n,attrs:{shape:[l,s]}}),p=Re({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0]));let m;oe().getBool("WEBGL_PACK")?m=new ant(l,s,h.shape.length,p.shape.length,u,f):m=new R3(l,s,h.shape.length,p.shape.length,u,f);const v=n.runWebGLProgram(m,[p,h,g],p.dtype),y=Re({inputs:{x:v},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),y}const snt={kernelName:nE,backendName:"webgl",kernelFunc:ont};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lnt{constructor(e,n,r,i){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const a="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,s=oe().getNumber("WEBGL_VERSION")===2?a:o,l=i==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${s}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cnt(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:i,values:a}=e,{side:o}=r,s=new lnt(i.shape[0],i.shape[1],a.shape[1],o),l=[[i.shape[1]]];return n.runWebGLProgram(s,[i,a],"int32",l)}const unt={kernelName:iE,backendName:"webgl",kernelFunc:cnt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dnt{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let i,a;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)a="resRC",i="resRC";else{const s=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${s[u]}`),u<e&&l.push(`${s[u]}`);i=l.join(),a=c.join()}const o=on(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${i});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fnt(t){const{inputs:e,backend:n}=t,{condition:r,t:i,e:a}=e,o=new dnt(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(o,[r,i,a],ca(i.dtype,a.dtype))}const hnt={kernelName:Zb,backendName:"webgl",kernelFunc:fnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pnt=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${sT};
  float scale = ${lT};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,mnt=jt({opSnippet:pnt}),gnt={kernelName:ag,backendName:"webgl",kernelFunc:mnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vnt=_g+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,ynt=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,bnt=jt({opSnippet:vnt,packedOpSnippet:ynt,cpuKernelImpl:gKe}),xnt={kernelName:cg,backendName:"webgl",kernelFunc:bnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wnt=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,Snt=jt({opSnippet:wnt}),$nt={kernelName:lg,backendName:"webgl",kernelFunc:Snt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cnt=_g+`
  return sin(x);
`,Ent=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Vf}
  return result;
`,Tnt=jt({opSnippet:Cnt,packedOpSnippet:Ent}),Int={kernelName:og,backendName:"webgl",kernelFunc:Tnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nnt=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,knt=jt({opSnippet:Nnt}),Ont={kernelName:sg,backendName:"webgl",kernelFunc:knt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ant=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,_nt=jt({opSnippet:Ant}),Pnt={kernelName:ug,backendName:"webgl",kernelFunc:_nt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rnt=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{blockShape:a,paddings:o}=r;j(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const s=a.reduce((v,y)=>v*y),l=[[0,0]];l.push(...o);for(let v=1+a.length;v<i.shape.length;++v)l.push([0,0]);const c=[],u=Dee({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),d=Ix(u.shape,a,s,!1),f=Nx(d.length,a.length,!1),h=kx(u.shape,a,s,!1),p=Re({inputs:{x:u},backend:n,attrs:{shape:d}}),g=Hi({inputs:{x:p},backend:n,attrs:{perm:f}}),m=Re({inputs:{x:g},backend:n,attrs:{shape:h}});return c.push(u),c.push(p),c.push(g),c.forEach(v=>n.disposeIntermediateTensorInfo(v)),m},Dnt={kernelName:ex,backendName:"webgl",kernelFunc:Rnt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fnt(t){const{inputs:e,backend:n}=t,{indices:r,values:i,denseShape:a,defaultValue:o}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(i.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${i.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const s=n.readSync(r.dataId),l=n.readSync(i.dataId),c=n.readSync(a.dataId),u=n.readSync(o.dataId)[0],[d,f,h,p,g]=yKe(s,r.shape,r.dtype,l,i.dtype,c,u);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],i.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}const Mnt={kernelName:aE,backendName:"webgl",kernelFunc:Fnt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lnt(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:i,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(i.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${i.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const o=Array.from(n.readSync(i.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(a.dataId)),[c,u,d]=bKe(s,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}const jnt={kernelName:oE,backendName:"webgl",kernelFunc:Lnt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function znt(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${a.shape}`);const o=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(a.dataId),[c,u]=oee(o,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const Bnt={kernelName:sE,backendName:"webgl",kernelFunc:znt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vnt(t){const{inputs:e,backend:n}=t,{data:r,indices:i,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(i.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${i.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${a.shape}`);const o=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(a.dataId),[c,u]=oee(o,r.shape,r.dtype,s,l);return n.makeTensorInfo(u,r.dtype,c)}const Wnt={kernelName:lE,backendName:"webgl",kernelFunc:Vnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Unt(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:i,sparseValues:a,defaultValue:o}=e,{outputShape:s}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:f}=Wu(a,i,s),h=!1;if(a.dtype==="string"){const v=n.bufferSync(i),y=n.bufferSync(a),b=nc(n.readSync(o.dataId)[0]),w=mKe(v,y,s,f,u,c,l,d,b,h);return n.makeTensorInfo(s,w.dtype,w.values)}const p=new R3(c,l,i.shape.length,a.shape.length,d,[f,1],h),g=n.runWebGLProgram(p,[a,i,o],a.dtype),m=Re({inputs:{x:g},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(g),m}const Hnt={kernelName:cE,backendName:"webgl",kernelFunc:Unt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gnt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{numOrSizeSplits:a,axis:o}=r,s=Tt(o,i.shape)[0],l=UM(i,a,s),c=i.shape.length,u=new Array(c).fill(0),d=i.shape.slice();return l.map(f=>{const h=[...d];h[s]=f;const p=Pg({inputs:{x:i},backend:n,attrs:{begin:u,size:h}});return u[s]+=f,p})}const qnt={kernelName:tx,backendName:"webgl",kernelFunc:Gnt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fW="return sqrt(x);",Knt=jt({opSnippet:fW,packedOpSnippet:fW,cpuKernelImpl:xKe}),Xnt={kernelName:dg,backendName:"webgl",kernelFunc:Knt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ynt="return x * x;",Znt=jt({opSnippet:Ynt}),Qnt={kernelName:uE,backendName:"webgl",kernelFunc:Znt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hW="return (a - b) * (a - b);",Jnt=gi({opSnippet:hW,packedOpSnippet:hW}),ert={kernelName:fg,backendName:"webgl",kernelFunc:Jnt};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function trt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");const a=n.readSync(i.dataId),o=oc(a),s=wKe(o,"string",r);return n.makeTensorInfo(i.shape,"string",s)}const nrt={kernelName:rx,backendName:"webgl",kernelFunc:trt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rrt({inputs:t,attrs:e,backend:n}){const{x:r}=t,i=Qo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,a=new Js(r.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const irt={kernelName:vg,backendName:"webgl",kernelFunc:rrt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class art{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const i=r.length,a=on(r.length),o=on(r.length);let s="";if(i===1)s="coords * strides + begin";else{let l=0;s=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${e});
      ${a} strides = ${a}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ort(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{begin:a,end:o,strides:s,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:h,finalShape:p,isIdentity:g,sliceDim0:m,isSimpleSlice:v,begin:y,end:b,strides:w}=EM(i.shape,a,o,s,l,c,u,d,f);let x;if(g)x=Re({inputs:{x:i},backend:n,attrs:{shape:p}});else if(m||v){j(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);const C=SM(y,b,w),E=Pg({inputs:{x:i},backend:n,attrs:{begin:y,size:C}});x=Re({inputs:{x:E},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(E)}else if(n.shouldExecuteOnCPU([i])){const E=n.readSync(i.dataId),I=wt(i.shape,i.dtype,E),T=SKe(h,I,w,y);x=n.makeTensorInfo(p,i.dtype,T.values)}else{const E=new art(y,w,h);x=n.runWebGLProgram(E,[i],i.dtype)}const $=Re({inputs:{x},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),$}const srt={kernelName:dE,backendName:"webgl",kernelFunc:ort};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lrt(t){const{inputs:e,backend:n,attrs:r}=t,{separator:i,nGramWidths:a,leftPad:o,rightPad:s,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,f=n.readSync(u.dataId),h=n.readSync(d.dataId),[p,g]=$Ke(f,h,i,a,o,s,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",g)]}const crt={kernelName:fE,backendName:"webgl",kernelFunc:lrt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function urt(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:i}=r,{input:a,delimiter:o}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const s=n.readSync(a.dataId),l=n.readSync(o.dataId)[0],[c,u,d]=CKe(s,l,i),f=u.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const drt={kernelName:hE,backendName:"webgl",kernelFunc:urt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function frt(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:i}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(a.dataId),s=EKe(o,i);return n.makeTensorInfo(a.shape,"int32",s)}const hrt={kernelName:pE,backendName:"webgl",kernelFunc:frt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const prt="return tan(x);",mrt=jt({opSnippet:prt}),grt={kernelName:pg,backendName:"webgl",kernelFunc:mrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vrt=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,yrt=jt({opSnippet:vrt}),brt={kernelName:mg,backendName:"webgl",kernelFunc:yrt};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xrt(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:i,indices:a,updates:o}=e,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=Wu(o,a,i.shape),f=[d/c,c];if(d===0)return n.makeTensorInfo(i.shape,a.dtype);const h=Re({inputs:{x:a},backend:n,attrs:{shape:[l,s]}}),p=Re({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),g=Re({inputs:{x:i},backend:n,attrs:{shape:f}}),m=new R3(l,s,h.shape.length,p.shape.length,u,f,!1,!0),v=n.runWebGLProgram(m,[p,h,g],g.dtype),y=Re({inputs:{x:v},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),y}const wrt={kernelName:rE,backendName:"webgl",kernelFunc:xrt};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Srt{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const i=on(this.rank),a=$rt(e);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}function $rt(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mee(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{reps:a}=r;if(i.dtype==="string"||i.shape.length>5){const l=n.readSync(i.dataId),c=i.dtype==="string"?l.map(f=>nc(f)):l,u=wt(i.shape,i.dtype,c),d=IKe(u,a);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new Srt(i.shape,a);return n.runWebGLProgram(o,[i],i.dtype)}const Crt={kernelName:gg,backendName:"webgl",kernelFunc:Mee};class Ert{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class Trt{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rd(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function pW(t){let e=1;for(;e<t;)e*=2;return e}function Irt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i}=e,{k:a,sorted:o}=r,s=oe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=oe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=i.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([i])||u<s||a>l){const T=n.readSync(i.dataId),[N,k]=NKe(T,c,i.dtype,a,o);return[n.makeTensorInfo(N.shape,N.dtype,N.values),n.makeTensorInfo(k.shape,k.dtype,k.values)]}if(a===0)return c[c.length-1]=0,[n.makeTensorInfo(c,i.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[i,Wx({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(i.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(i):i,g=de(c)/u,m=Re({inputs:{x:h},attrs:{shape:[g,u]},backend:n});f&&rd(n,h);const v=pW(a),y=pW(u);let b=null;const w=()=>b===null?[m,m]:[m,b],x=(T,N,k)=>{const O=w(),_=new Ert(k),D=[[u],[b===null?1:0],[Number.NEGATIVE_INFINITY],[T],[N]],L=b;b=n.runWebGLProgram(_,O,"int32",D),rd(n,L)};for(let T=1;T<v;T*=2){const N=T*2;for(let k=T;k>=1;k/=2)x(N,k,[g,y])}for(let T=y;T>v;T/=2){const N=w(),k=new Trt([g,T/2]),_=[[u],[b===null?1:0],[v]],P=b;b=n.runWebGLProgram(k,N,"int32",_),rd(n,P);const D=v/2,L=D*2;for(let R=D;R>=1;R/=2)x(L,R,b.shape)}let $=b;b=Pg({inputs:{x:b},backend:n,attrs:{begin:0,size:[g,a]}}),rd(n,$);let C=kee({inputs:{x:m,indices:b},backend:n,attrs:{axis:1,batchDims:1}});rd(n,m);const E=c.slice(0,-1);E.push(a),$=b,b=Re({inputs:{x:b},attrs:{shape:E},backend:n}),rd(n,$);const I=C;return C=Re({inputs:{x:C},attrs:{shape:E},backend:n}),rd(n,I),[C,b]}const Nrt={kernelName:mE,backendName:"webgl",kernelFunc:Irt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class krt{constructor(e,n,r,i,a,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s=r==="nearest"?1:2;let l;switch(i){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${a});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${a});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${s} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ort(t){const{inputs:e,backend:n,attrs:r}=t,{image:i,transforms:a}=e,{interpolation:o,fillMode:s,fillValue:l,outputShape:c}=r,[u,d,f,h]=i.shape,[p,g]=c??[d,f],m=[u,p,g,h],v=new krt(d,f,o,s,l,m);return n.runWebGLProgram(v,[i,a],"float32")}const Art={kernelName:gE,backendName:"webgl",kernelFunc:Ort};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _rt(t){const{inputs:e,attrs:n,backend:r}=t,{axis:i}=n,{x:a}=e;zx(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(a.dataId),{outputValues:s,outputShape:l,indices:c}=kKe(o,i,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}const Prt={kernelName:vE,backendName:"webgl",kernelFunc:_rt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rrt(t){const{inputs:e,backend:n,attrs:r}=t,{value:i}=e;let{axis:a}=r;a<0&&(a+=i.shape.length);const o=i,s=o.shape.length,l=i.shape[a],c=new Array(s-1);let u=0;for(let g=0;g<s;g++)g!==a&&(c[u++]=o.shape[g]);const d=[],f=new Array(s).fill(0),h=o.shape.slice();h[a]=1;const p=new Array(l);for(let g=0;g<p.length;g++){f[a]=g;const m=Pg({inputs:{x:o},backend:n,attrs:{begin:f,size:h}}),v=Re({inputs:{x:m},backend:n,attrs:{shape:c}});p[g]=v,d.push(m)}return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),p}const Drt={kernelName:ix,backendName:"webgl",kernelFunc:Rrt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Frt{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,i=e.batchSize,a=e.inSize,o=e.numSegments,s=o*Math.ceil(a/r);this.outputShape=[i,s];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";a%r>0&&(h=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let p="";a%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mrt(t){const{inputs:e,backend:n,attrs:r}=t,{x:i,segmentIds:a}=e,{numSegments:o}=r,s=i.shape.length,l=[];let c=0;const u=Un([c],s);let d=i;u!=null&&(d=Hi({inputs:{x:i},backend:n,attrs:{perm:u}}),l.push(d),c=rr(1,s)[0]);const f=pY(d.shape,c,o),h=de([d.shape[c]]),p=Re({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(p);const g=xE(i.dtype),m=(w,x,$,C,E)=>{const I=w.shape[0],T=w.shape[1],N=hY(T,E),k={windowSize:N,inSize:T,batchSize:I,numSegments:E},O=new Frt(k,x),_=n.compileAndRun(O,[w,$],C);if(l.push(_),_.shape[1]===E)return _;const P=Fee({backend:n,attrs:{start:0,stop:E,step:1,dtype:"float32"}}),D=Mee({inputs:{x:P},backend:n,attrs:{reps:[T/N]}});return l.push(P),l.push(D),m(_,x,D,C,E)},v=m(p,"unsortedSegmentSum",a,g,o),y=Re({inputs:{x:v},backend:n,attrs:{shape:f}});let b=y;if(u!=null){l.push(y);const w=ju(u);b=Hi({inputs:{x:b},backend:n,attrs:{perm:w}})}return l.forEach(w=>n.disposeIntermediateTensorInfo(w)),b}const Lrt={kernelName:ax,backendName:"webgl",kernelFunc:Mrt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jrt=[xXe,SXe,EXe,NXe,OXe,PXe,DXe,MXe,BXe,WXe,GXe,XXe,QXe,nYe,aYe,sYe,cYe,hYe,mYe,vYe,wYe,NYe,OYe,RYe,FYe,VYe,UYe,KYe,rXe,ZYe,nZe,oZe,fZe,mZe,vZe,bZe,wZe,EZe,NZe,AZe,PZe,DZe,MZe,zZe,VZe,GZe,KZe,ZZe,eQe,nQe,oQe,uQe,pQe,vQe,xQe,wQe,$Qe,EQe,IQe,kQe,AQe,DQe,LQe,BQe,WQe,GQe,XQe,JQe,rJe,nXe,aJe,eZe,lJe,dJe,pJe,aXe,yJe,SJe,CJe,NJe,AJe,DJe,LJe,VJe,GJe,XJe,ZJe,tet,ret,aet,uet,fet,pet,get,yet,$et,Iet,Aet,jet,lXe,Wet,Get,Xet,Qet,LYe,ttt,rtt,att,ltt,ftt,sXe,ptt,gtt,ytt,xtt,wtt,jYe,Det,Ctt,Ntt,_tt,uXe,Ftt,jtt,Wtt,Gtt,Ytt,Qtt,tnt,int,snt,unt,hnt,gnt,xnt,$nt,Int,Ont,TYe,Met,Pnt,Dnt,Mnt,jnt,Bnt,Wnt,Hnt,qnt,Xnt,Qnt,ert,nrt,irt,srt,crt,drt,hrt,Fet,vXe,grt,brt,wrt,Crt,Nrt,Art,yXe,Prt,Drt,Lrt,ntt];for(const t of jrt)bE(t);var T_={exports:{}};const zrt=PP(bWe),Brt=PP(Wje);/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(function(t,e){(function(n,r){r(e,zrt,Brt)})(_o,function(n,r,i){const a={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class o{constructor(l,c){this.modelPath=c||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(l)}/model.json`}getPrefix(l){return l==="lite_mobilenet_v2"?`ssd${l}`:`ssd_${l}`}async load(){this.model=await r.loadGraphModel(this.modelPath);const l=i.zeros([1,300,300,3],"int32"),c=await this.model.executeAsync(l);await Promise.all(c.map(u=>u.data())),c.map(u=>u.dispose()),l.dispose()}async infer(l,c,u){const d=i.tidy(()=>(l instanceof i.Tensor||(l=i.browser.fromPixels(l)),i.expandDims(l))),f=d.shape[1],h=d.shape[2],p=await this.model.executeAsync(d),g=p[0].dataSync(),m=p[1].dataSync();d.dispose(),i.dispose(p);const[v,y]=this.calculateMaxScores(g,p[0].shape[1],p[0].shape[2]),b=i.getBackend();i.getBackend()==="webgl"&&i.setBackend("cpu");const w=i.tidy(()=>{const $=i.tensor2d(m,[p[1].shape[1],p[1].shape[3]]);return i.image.nonMaxSuppression($,v,c,u,u)}),x=w.dataSync();return w.dispose(),b!==i.getBackend()&&i.setBackend(b),this.buildDetectedObjects(h,f,m,v,x,y)}buildDetectedObjects(l,c,u,d,f,h){const p=f.length,g=[];for(let m=0;m<p;m++){const v=[];for(let $=0;$<4;$++)v[$]=u[4*f[m]+$];const y=v[0]*c,b=v[1]*l,w=v[2]*c,x=v[3]*l;v[0]=b,v[1]=y,v[2]=x-b,v[3]=w-y,g.push({bbox:v,class:a[h[f[m]]+1].displayName,score:d[f[m]]})}return g}calculateMaxScores(l,c,u){const d=[],f=[];for(let h=0;h<c;h++){let p=Number.MIN_VALUE,g=-1;for(let m=0;m<u;m++)l[h*u+m]>p&&(p=l[h*u+m],g=m);d[h]=p,f[h]=g}return[d,f]}async detect(l,c=20,u=.5){return this.infer(l,c,u)}dispose(){this.model!=null&&this.model.dispose()}}n.ObjectDetection=o,n.load=async function(s={}){if(i==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");const l=s.base||"lite_mobilenet_v2",c=s.modelUrl;if(["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(l)===-1)throw new Error(`ObjectDetection constructed with invalid base model ${l}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);const u=new o(l,c);return await u.load(),u},n.version="2.2.3",Object.defineProperty(n,"__esModule",{value:!0})})})(T_,T_.exports);var Vrt=T_.exports,Lee={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var s=arguments[o];s&&(a=i(a,r(s)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var s in a)e.call(a,s)&&a[s]&&(o=i(o,s));return o}function i(a,o){return o?a?a+" "+o:a+o:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Lee);var Wrt=Lee.exports;const ve=Gt(Wrt);function at(t){"@babel/helpers - typeof";return at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(t)}var Urt=Symbol.for("react.element"),Hrt=Symbol.for("react.transitional.element"),Grt=Symbol.for("react.fragment");function jee(t){return t&&at(t)==="object"&&(t.$$typeof===Urt||t.$$typeof===Hrt)&&t.type===Grt}function wl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return B.Children.forEach(t,function(r){r==null&&!e.keepEmpty||(Array.isArray(r)?n=n.concat(wl(r)):jee(r)&&r.props?n=n.concat(wl(r.props.children,e)):n.push(r))}),n}var I_={},qrt=function(e){};function Krt(t,e){}function Xrt(t,e){}function Yrt(){I_={}}function zee(t,e,n){!e&&!I_[n]&&(t(!1,n),I_[n]=!0)}function Wi(t,e){zee(Krt,t,e)}function Zrt(t,e){zee(Xrt,t,e)}Wi.preMessage=qrt;Wi.resetWarned=Yrt;Wi.noteOnce=Zrt;function Qrt(t,e){if(at(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(at(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bee(t){var e=Qrt(t,"string");return at(e)=="symbol"?e:e+""}function Y(t,e,n){return(e=Bee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mW(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mW(Object(n),!0).forEach(function(r){Y(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mW(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N0(t){return t instanceof HTMLElement||t instanceof SVGElement}function Jrt(t){return t&&at(t)==="object"&&N0(t.nativeElement)?t.nativeElement:N0(t)?t:null}function Nw(t){var e=Jrt(t);if(e)return e;if(t instanceof B.Component){var n;return(n=tO.findDOMNode)===null||n===void 0?void 0:n.call(tO,t)}return null}function TT(t,e,n){var r=S.useRef({});return(!("value"in r.current)||n(r.current.condition,e))&&(r.current.value=t(),r.current.condition=e),r.current.value}var eit=Number(S.version.split(".")[0]),D3=function(e,n){typeof e=="function"?e(n):at(e)==="object"&&e&&"current"in e&&(e.current=n)},qu=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);return i.length<=1?i[0]:function(a){n.forEach(function(o){D3(o,a)})}},Rg=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return TT(function(){return qu.apply(void 0,n)},n,function(i,a){return i.length!==a.length||i.every(function(o,s){return o!==a[s]})})},Uf=function(e){var n,r;if(!e)return!1;if(Vee(e)&&eit>=19)return!0;var i=Sw.isMemo(e)?e.type.type:e.type;return!(typeof i=="function"&&!((n=i.prototype)!==null&&n!==void 0&&n.render)&&i.$$typeof!==Sw.ForwardRef||typeof e=="function"&&!((r=e.prototype)!==null&&r!==void 0&&r.render)&&e.$$typeof!==Sw.ForwardRef)};function Vee(t){return S.isValidElement(t)&&!jee(t)}var Dg=function(e){if(e&&Vee(e)){var n=e;return n.props.propertyIsEnumerable("ref")?n.props.ref:n.ref}return null},N_=S.createContext(null);function tit(t){var e=t.children,n=t.onBatchResize,r=S.useRef(0),i=S.useRef([]),a=S.useContext(N_),o=S.useCallback(function(s,l,c){r.current+=1;var u=r.current;i.current.push({size:s,element:l,data:c}),Promise.resolve().then(function(){u===r.current&&(n==null||n(i.current),i.current=[])}),a==null||a(s,l,c)},[n,a]);return S.createElement(N_.Provider,{value:o},e)}var Wee=function(){if(typeof Map<"u")return Map;function t(e,n){var r=-1;return e.some(function(i,a){return i[0]===n?(r=a,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,a=this.__entries__;i<a.length;i++){var o=a[i];n.call(r,o[1],o[0])}},e}()}(),k_=typeof window<"u"&&typeof document<"u"&&window.document===document,V$=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),nit=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(V$):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),rit=2;function iit(t,e){var n=!1,r=!1,i=0;function a(){n&&(n=!1,t()),r&&s()}function o(){nit(a)}function s(){var l=Date.now();if(n){if(l-i<rit)return;r=!0}else n=!0,r=!1,setTimeout(o,e);i=l}return s}var ait=20,oit=["top","right","bottom","left","width","height","size","weight"],sit=typeof MutationObserver<"u",lit=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=iit(this.refresh.bind(this),ait)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!k_||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),sit?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!k_||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,i=oit.some(function(a){return!!~r.indexOf(a)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Uee=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},Jp=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||V$},Hee=IT(0,0,0,0);function W$(t){return parseFloat(t)||0}function gW(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){var a=t["border-"+i+"-width"];return r+W$(a)},0)}function cit(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var a=i[r],o=t["padding-"+a];n[a]=W$(o)}return n}function uit(t){var e=t.getBBox();return IT(0,0,e.width,e.height)}function dit(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Hee;var r=Jp(t).getComputedStyle(t),i=cit(r),a=i.left+i.right,o=i.top+i.bottom,s=W$(r.width),l=W$(r.height);if(r.boxSizing==="border-box"&&(Math.round(s+a)!==e&&(s-=gW(r,"left","right")+a),Math.round(l+o)!==n&&(l-=gW(r,"top","bottom")+o)),!hit(t)){var c=Math.round(s+a)-e,u=Math.round(l+o)-n;Math.abs(c)!==1&&(s-=c),Math.abs(u)!==1&&(l-=u)}return IT(i.left,i.top,s,l)}var fit=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof Jp(t).SVGGraphicsElement}:function(t){return t instanceof Jp(t).SVGElement&&typeof t.getBBox=="function"}}();function hit(t){return t===Jp(t).document.documentElement}function pit(t){return k_?fit(t)?uit(t):dit(t):Hee}function mit(t){var e=t.x,n=t.y,r=t.width,i=t.height,a=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return Uee(o,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),o}function IT(t,e,n,r){return{x:t,y:e,width:n,height:r}}var git=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=IT(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=pit(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),vit=function(){function t(e,n){var r=mit(n);Uee(this,{target:e,contentRect:r})}return t}(),yit=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new Wee,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Jp(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new git(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Jp(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new vit(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),Gee=typeof WeakMap<"u"?new WeakMap:new Wee,qee=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=lit.getInstance(),r=new yit(e,n,this);Gee.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){qee.prototype[t]=function(){var e;return(e=Gee.get(this))[t].apply(e,arguments)}});var bit=function(){return typeof V$.ResizeObserver<"u"?V$.ResizeObserver:qee}(),Xc=new Map;function xit(t){t.forEach(function(e){var n,r=e.target;(n=Xc.get(r))===null||n===void 0||n.forEach(function(i){return i(r)})})}var Kee=new bit(xit);function wit(t,e){Xc.has(t)||(Xc.set(t,new Set),Kee.observe(t)),Xc.get(t).add(e)}function Sit(t,e){Xc.has(t)&&(Xc.get(t).delete(e),Xc.get(t).size||(Kee.unobserve(t),Xc.delete(t)))}function gr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vW(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bee(r.key),r)}}function vr(t,e,n){return e&&vW(t.prototype,e),n&&vW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ls(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yy(t,e)}function k0(t){return k0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k0(t)}function F3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F3=function(){return!!t})()}function $it(t,e){if(e&&(at(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ht(t)}function js(t){var e=F3();return function(){var n,r=k0(t);if(e){var i=k0(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $it(this,n)}}var Cit=function(t){Ls(n,t);var e=js(n);function n(){return gr(this,n),e.apply(this,arguments)}return vr(n,[{key:"render",value:function(){return this.props.children}}]),n}(S.Component);function Eit(t,e){var n=t.children,r=t.disabled,i=S.useRef(null),a=S.useRef(null),o=S.useContext(N_),s=typeof n=="function",l=s?n(i):n,c=S.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),u=!s&&S.isValidElement(l)&&Uf(l),d=u?Dg(l):null,f=Rg(d,i),h=function(){var v;return Nw(i.current)||(i.current&&at(i.current)==="object"?Nw((v=i.current)===null||v===void 0?void 0:v.nativeElement):null)||Nw(a.current)};S.useImperativeHandle(e,function(){return h()});var p=S.useRef(t);p.current=t;var g=S.useCallback(function(m){var v=p.current,y=v.onResize,b=v.data,w=m.getBoundingClientRect(),x=w.width,$=w.height,C=m.offsetWidth,E=m.offsetHeight,I=Math.floor(x),T=Math.floor($);if(c.current.width!==I||c.current.height!==T||c.current.offsetWidth!==C||c.current.offsetHeight!==E){var N={width:I,height:T,offsetWidth:C,offsetHeight:E};c.current=N;var k=C===Math.round(x)?x:C,O=E===Math.round($)?$:E,_=ie(ie({},N),{},{offsetWidth:k,offsetHeight:O});o==null||o(_,m,b),y&&Promise.resolve().then(function(){y(_,m)})}},[]);return S.useEffect(function(){var m=h();return m&&!r&&wit(m,g),function(){return Sit(m,g)}},[i.current,r]),S.createElement(Cit,{ref:a},u?S.cloneElement(l,{ref:f}):l)}var Tit=S.forwardRef(Eit),Iit="rc-observer-key";function Nit(t,e){var n=t.children,r=typeof n=="function"?[n]:wl(n);return r.map(function(i,a){var o=(i==null?void 0:i.key)||"".concat(Iit,"-").concat(a);return S.createElement(Tit,Qe({},t,{key:o,ref:a===0?e:void 0}),i)})}var hl=S.forwardRef(Nit);hl.Collection=tit;function O_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function kit(t){if(Array.isArray(t))return O_(t)}function Xee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function M3(t,e){if(t){if(typeof t=="string")return O_(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O_(t,e):void 0}}function Oit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Be(t){return kit(t)||Xee(t)||M3(t)||Oit()}var Yee=function(e){return+setTimeout(e,16)},Zee=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(Yee=function(e){return window.requestAnimationFrame(e)},Zee=function(e){return window.cancelAnimationFrame(e)});var yW=0,L3=new Map;function Qee(t){L3.delete(t)}var ci=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;yW+=1;var r=yW;function i(a){if(a===0)Qee(r),e();else{var o=Yee(function(){i(a-1)});L3.set(r,o)}}return i(n),r};ci.cancel=function(t){var e=L3.get(t);return Qee(t),Zee(e)};function Jee(t){if(Array.isArray(t))return t}function Ait(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function ete(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ge(t,e){return Jee(t)||Ait(t,e)||M3(t,e)||ete()}function O0(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function ma(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function _it(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}var bW="data-rc-order",xW="data-rc-priority",Pit="rc-util-key",A_=new Map;function tte(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.mark;return e?e.startsWith("data-")?e:"data-".concat(e):Pit}function NT(t){if(t.attachTo)return t.attachTo;var e=document.querySelector("head");return e||document.body}function Rit(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function j3(t){return Array.from((A_.get(t)||t).children).filter(function(e){return e.tagName==="STYLE"})}function nte(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ma())return null;var n=e.csp,r=e.prepend,i=e.priority,a=i===void 0?0:i,o=Rit(r),s=o==="prependQueue",l=document.createElement("style");l.setAttribute(bW,o),s&&a&&l.setAttribute(xW,"".concat(a)),n!=null&&n.nonce&&(l.nonce=n==null?void 0:n.nonce),l.innerHTML=t;var c=NT(e),u=c.firstChild;if(r){if(s){var d=(e.styles||j3(c)).filter(function(f){if(!["prepend","prependQueue"].includes(f.getAttribute(bW)))return!1;var h=Number(f.getAttribute(xW)||0);return a>=h});if(d.length)return c.insertBefore(l,d[d.length-1].nextSibling),l}c.insertBefore(l,u)}else c.appendChild(l);return l}function rte(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=NT(e);return(e.styles||j3(n)).find(function(r){return r.getAttribute(tte(e))===t})}function A0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=rte(t,e);if(n){var r=NT(e);r.removeChild(n)}}function Dit(t,e){var n=A_.get(t);if(!n||!_it(document,n)){var r=nte("",e),i=r.parentNode;A_.set(t,i),t.removeChild(r)}}function ql(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=NT(n),i=j3(r),a=ie(ie({},n),{},{styles:i});Dit(r,a);var o=rte(e,a);if(o){var s,l;if((s=a.csp)!==null&&s!==void 0&&s.nonce&&o.nonce!==((l=a.csp)===null||l===void 0?void 0:l.nonce)){var c;o.nonce=(c=a.csp)===null||c===void 0?void 0:c.nonce}return o.innerHTML!==t&&(o.innerHTML=t),o}var u=nte(t,a);return u.setAttribute(tte(a),e),u}function Ot(t,e){if(t==null)return{};var n,r,i=G2e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _0(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function i(a,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=r.has(a);if(Wi(!l,"Warning: There may be circular references"),l)return!1;if(a===o)return!0;if(n&&s>1)return!1;r.add(a);var c=s+1;if(Array.isArray(a)){if(!Array.isArray(o)||a.length!==o.length)return!1;for(var u=0;u<a.length;u++)if(!i(a[u],o[u],c))return!1;return!0}if(a&&o&&at(a)==="object"&&at(o)==="object"){var d=Object.keys(a);return d.length!==Object.keys(o).length?!1:d.every(function(f){return i(a[f],o[f],c)})}return!1}return i(t,e)}var Fit="%";function __(t){return t.join(Fit)}var Mit=function(){function t(e){gr(this,t),Y(this,"instanceId",void 0),Y(this,"cache",new Map),this.instanceId=e}return vr(t,[{key:"get",value:function(n){return this.opGet(__(n))}},{key:"opGet",value:function(n){return this.cache.get(n)||null}},{key:"update",value:function(n,r){return this.opUpdate(__(n),r)}},{key:"opUpdate",value:function(n,r){var i=this.cache.get(n),a=r(i);a===null?this.cache.delete(n):this.cache.set(n,a)}}]),t}(),em="data-token-hash",Cs="data-css-hash",Yc="__cssinjs_instance__";function Lit(){var t=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(Cs,"]"))||[],n=document.head.firstChild;Array.from(e).forEach(function(i){i[Yc]=i[Yc]||t,i[Yc]===t&&document.head.insertBefore(i,n)});var r={};Array.from(document.querySelectorAll("style[".concat(Cs,"]"))).forEach(function(i){var a=i.getAttribute(Cs);if(r[a]){if(i[Yc]===t){var o;(o=i.parentNode)===null||o===void 0||o.removeChild(i)}}else r[a]=!0})}return new Mit(t)}var Ux=S.createContext({hashPriority:"low",cache:Lit(),defaultCache:!0});function jit(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var z3=function(){function t(){gr(this,t),Y(this,"cache",void 0),Y(this,"keys",void 0),Y(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return vr(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(n){var r,i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o={map:this.cache};return n.forEach(function(s){if(!o)o=void 0;else{var l;o=(l=o)===null||l===void 0||(l=l.map)===null||l===void 0?void 0:l.get(s)}}),(r=o)!==null&&r!==void 0&&r.value&&a&&(o.value[1]=this.cacheCallTimes++),(i=o)===null||i===void 0?void 0:i.value}},{key:"get",value:function(n){var r;return(r=this.internalGet(n,!0))===null||r===void 0?void 0:r[0]}},{key:"has",value:function(n){return!!this.internalGet(n)}},{key:"set",value:function(n,r){var i=this;if(!this.has(n)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var a=this.keys.reduce(function(c,u){var d=ge(c,2),f=d[1];return i.internalGet(u)[1]<f?[u,i.internalGet(u)[1]]:c},[this.keys[0],this.cacheCallTimes]),o=ge(a,1),s=o[0];this.delete(s)}this.keys.push(n)}var l=this.cache;n.forEach(function(c,u){if(u===n.length-1)l.set(c,{value:[r,i.cacheCallTimes++]});else{var d=l.get(c);d?d.map||(d.map=new Map):l.set(c,{map:new Map}),l=l.get(c).map}})}},{key:"deleteByPath",value:function(n,r){var i=n.get(r[0]);if(r.length===1){var a;return i.map?n.set(r[0],{map:i.map}):n.delete(r[0]),(a=i.value)===null||a===void 0?void 0:a[0]}var o=this.deleteByPath(i.map,r.slice(1));return(!i.map||i.map.size===0)&&!i.value&&n.delete(r[0]),o}},{key:"delete",value:function(n){if(this.has(n))return this.keys=this.keys.filter(function(r){return!jit(r,n)}),this.deleteByPath(this.cache,n)}}]),t}();Y(z3,"MAX_CACHE_SIZE",20);Y(z3,"MAX_CACHE_OFFSET",5);var wW=0,ite=function(){function t(e){gr(this,t),Y(this,"derivatives",void 0),Y(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=wW,e.length===0&&(e.length>0,void 0),wW+=1}return vr(t,[{key:"getDerivativeToken",value:function(n){return this.derivatives.reduce(function(r,i){return i(n,r)},void 0)}}]),t}(),bN=new z3;function P_(t){var e=Array.isArray(t)?t:[t];return bN.has(e)||bN.set(e,new ite(e)),bN.get(e)}var zit=new WeakMap,xN={};function Bit(t,e){for(var n=zit,r=0;r<e.length;r+=1){var i=e[r];n.has(i)||n.set(i,new WeakMap),n=n.get(i)}return n.has(xN)||n.set(xN,t()),n.get(xN)}var SW=new WeakMap;function iy(t){var e=SW.get(t)||"";return e||(Object.keys(t).forEach(function(n){var r=t[n];e+=n,r instanceof ite?e+=r.id:r&&at(r)==="object"?e+=iy(r):e+=r}),e=O0(e),SW.set(t,e)),e}function $W(t,e){return O0("".concat(e,"_").concat(iy(t)))}var R_=ma();function Ce(t){return typeof t=="number"?"".concat(t,"px"):t}function U$(t,e,n){var r,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(a)return t;var o=ie(ie({},i),{},(r={},Y(r,em,e),Y(r,Cs,n),r)),s=Object.keys(o).map(function(l){var c=o[l];return c?"".concat(l,'="').concat(c,'"'):null}).filter(function(l){return l}).join(" ");return"<style ".concat(s,">").concat(t,"</style>")}var kw=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(n?"".concat(n,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},Vit=function(e,n,r){return Object.keys(e).length?".".concat(n).concat(r!=null&&r.scope?".".concat(r.scope):"","{").concat(Object.entries(e).map(function(i){var a=ge(i,2),o=a[0],s=a[1];return"".concat(o,":").concat(s,";")}).join(""),"}"):""},ate=function(e,n,r){var i={},a={};return Object.entries(e).forEach(function(o){var s,l,c=ge(o,2),u=c[0],d=c[1];if(r!=null&&(s=r.preserve)!==null&&s!==void 0&&s[u])a[u]=d;else if((typeof d=="string"||typeof d=="number")&&!(r!=null&&(l=r.ignore)!==null&&l!==void 0&&l[u])){var f,h=kw(u,r==null?void 0:r.prefix);i[h]=typeof d=="number"&&!(r!=null&&(f=r.unitless)!==null&&f!==void 0&&f[u])?"".concat(d,"px"):String(d),a[u]="var(".concat(h,")")}}),[a,Vit(i,n,{scope:r==null?void 0:r.scope})]},CW=ma()?S.useLayoutEffect:S.useEffect,An=function(e,n){var r=S.useRef(!0);CW(function(){return e(r.current)},n),CW(function(){return r.current=!1,function(){r.current=!0}},[])},D_=function(e,n){An(function(r){if(!r)return e()},n)},Wit=ie({},nC),EW=Wit.useInsertionEffect,Uit=function(e,n,r){S.useMemo(e,r),An(function(){return n(!0)},r)},Hit=EW?function(t,e,n){return EW(function(){return t(),e()},n)}:Uit,Git=ie({},nC),qit=Git.useInsertionEffect,Kit=function(e){var n=[],r=!1;function i(a){r||n.push(a)}return S.useEffect(function(){return r=!1,function(){r=!0,n.length&&n.forEach(function(a){return a()})}},e),i},Xit=function(){return function(e){e()}},Yit=typeof qit<"u"?Kit:Xit;function B3(t,e,n,r,i){var a=S.useContext(Ux),o=a.cache,s=[t].concat(Be(e)),l=__(s),c=Yit([l]),u=function(p){o.opUpdate(l,function(g){var m=g||[void 0,void 0],v=ge(m,2),y=v[0],b=y===void 0?0:y,w=v[1],x=w,$=x||n(),C=[b,$];return p?p(C):C})};S.useMemo(function(){u()},[l]);var d=o.opGet(l),f=d[1];return Hit(function(){i==null||i(f)},function(h){return u(function(p){var g=ge(p,2),m=g[0],v=g[1];return h&&m===0&&(i==null||i(f)),[m+1,v]}),function(){o.opUpdate(l,function(p){var g=p||[],m=ge(g,2),v=m[0],y=v===void 0?0:v,b=m[1],w=y-1;return w===0?(c(function(){(h||!o.opGet(l))&&(r==null||r(b,!1))}),null):[y-1,b]})}},[l]),f}var Zit={},Qit="css",xd=new Map;function Jit(t){xd.set(t,(xd.get(t)||0)+1)}function eat(t,e){if(typeof document<"u"){var n=document.querySelectorAll("style[".concat(em,'="').concat(t,'"]'));n.forEach(function(r){if(r[Yc]===e){var i;(i=r.parentNode)===null||i===void 0||i.removeChild(r)}})}}var tat=0;function nat(t,e){xd.set(t,(xd.get(t)||0)-1);var n=Array.from(xd.keys()),r=n.filter(function(i){var a=xd.get(i)||0;return a<=0});n.length-r.length>tat&&r.forEach(function(i){eat(i,e),xd.delete(i)})}var rat=function(e,n,r,i){var a=r.getDerivativeToken(e),o=ie(ie({},a),n);return i&&(o=i(o)),o},ote="token";function iat(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=S.useContext(Ux),i=r.cache.instanceId,a=r.container,o=n.salt,s=o===void 0?"":o,l=n.override,c=l===void 0?Zit:l,u=n.formatToken,d=n.getComputedToken,f=n.cssVar,h=Bit(function(){return Object.assign.apply(Object,[{}].concat(Be(e)))},e),p=iy(h),g=iy(c),m=f?iy(f):"",v=B3(ote,[s,t.id,p,g,m],function(){var y,b=d?d(h,c,t):rat(h,c,t,u),w=ie({},b),x="";if(f){var $=ate(b,f.key,{prefix:f.prefix,ignore:f.ignore,unitless:f.unitless,preserve:f.preserve}),C=ge($,2);b=C[0],x=C[1]}var E=$W(b,s);b._tokenKey=E,w._tokenKey=$W(w,s);var I=(y=f==null?void 0:f.key)!==null&&y!==void 0?y:E;b._themeKey=I,Jit(I);var T="".concat(Qit,"-").concat(O0(E));return b._hashId=T,[b,T,w,x,(f==null?void 0:f.key)||""]},function(y){nat(y[0]._themeKey,i)},function(y){var b=ge(y,4),w=b[0],x=b[3];if(f&&x){var $=ql(x,O0("css-variables-".concat(w._themeKey)),{mark:Cs,prepend:"queue",attachTo:a,priority:-999});$[Yc]=i,$.setAttribute(em,w._themeKey)}});return v}var aat=function(e,n,r){var i=ge(e,5),a=i[2],o=i[3],s=i[4],l=r||{},c=l.plain;if(!o)return null;var u=a._tokenKey,d=-999,f={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)},h=U$(o,s,u,f,c);return[d,u,h]},oat={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ste="comm",lte="rule",cte="decl",sat="@import",lat="@namespace",cat="@keyframes",uat="@layer",ute=Math.abs,V3=String.fromCharCode;function dte(t){return t.trim()}function Ow(t,e,n){return t.replace(e,n)}function dat(t,e,n){return t.indexOf(e,n)}function tp(t,e){return t.charCodeAt(e)|0}function tm(t,e,n){return t.slice(e,n)}function Hs(t){return t.length}function fat(t){return t.length}function Y1(t,e){return e.push(t),t}var kT=1,nm=1,fte=0,qo=0,Sr=0,Fg="";function W3(t,e,n,r,i,a,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:kT,column:nm,length:o,return:"",siblings:s}}function hat(){return Sr}function pat(){return Sr=qo>0?tp(Fg,--qo):0,nm--,Sr===10&&(nm=1,kT--),Sr}function Es(){return Sr=qo<fte?tp(Fg,qo++):0,nm++,Sr===10&&(nm=1,kT++),Sr}function Zc(){return tp(Fg,qo)}function Aw(){return qo}function OT(t,e){return tm(Fg,t,e)}function P0(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function mat(t){return kT=nm=1,fte=Hs(Fg=t),qo=0,[]}function gat(t){return Fg="",t}function wN(t){return dte(OT(qo-1,F_(t===91?t+2:t===40?t+1:t)))}function vat(t){for(;(Sr=Zc())&&Sr<33;)Es();return P0(t)>2||P0(Sr)>3?"":" "}function yat(t,e){for(;--e&&Es()&&!(Sr<48||Sr>102||Sr>57&&Sr<65||Sr>70&&Sr<97););return OT(t,Aw()+(e<6&&Zc()==32&&Es()==32))}function F_(t){for(;Es();)switch(Sr){case t:return qo;case 34:case 39:t!==34&&t!==39&&F_(Sr);break;case 40:t===41&&F_(t);break;case 92:Es();break}return qo}function bat(t,e){for(;Es()&&t+Sr!==57;)if(t+Sr===84&&Zc()===47)break;return"/*"+OT(e,qo-1)+"*"+V3(t===47?t:Es())}function xat(t){for(;!P0(Zc());)Es();return OT(t,qo)}function wat(t){return gat(_w("",null,null,null,[""],t=mat(t),0,[0],t))}function _w(t,e,n,r,i,a,o,s,l){for(var c=0,u=0,d=o,f=0,h=0,p=0,g=1,m=1,v=1,y=0,b="",w=i,x=a,$=r,C=b;m;)switch(p=y,y=Es()){case 40:if(p!=108&&tp(C,d-1)==58){dat(C+=Ow(wN(y),"&","&\f"),"&\f",ute(c?s[c-1]:0))!=-1&&(v=-1);break}case 34:case 39:case 91:C+=wN(y);break;case 9:case 10:case 13:case 32:C+=vat(p);break;case 92:C+=yat(Aw()-1,7);continue;case 47:switch(Zc()){case 42:case 47:Y1(Sat(bat(Es(),Aw()),e,n,l),l),(P0(p||1)==5||P0(Zc()||1)==5)&&Hs(C)&&tm(C,-1,void 0)!==" "&&(C+=" ");break;default:C+="/"}break;case 123*g:s[c++]=Hs(C)*v;case 125*g:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+u:v==-1&&(C=Ow(C,/\f/g,"")),h>0&&(Hs(C)-d||g===0&&p===47)&&Y1(h>32?IW(C+";",r,n,d-1,l):IW(Ow(C," ","")+";",r,n,d-2,l),l);break;case 59:C+=";";default:if(Y1($=TW(C,e,n,c,u,i,s,b,w=[],x=[],d,a),a),y===123)if(u===0)_w(C,e,$,$,w,a,d,s,x);else{switch(f){case 99:if(tp(C,3)===110)break;case 108:if(tp(C,2)===97)break;default:u=0;case 100:case 109:case 115:}u?_w(t,$,$,r&&Y1(TW(t,$,$,0,0,i,s,b,i,w=[],d,x),x),i,x,d,s,r?w:x):_w(C,$,$,$,[""],x,0,s,x)}}c=u=h=0,g=v=1,b=C="",d=o;break;case 58:d=1+Hs(C),h=p;default:if(g<1){if(y==123)--g;else if(y==125&&g++==0&&pat()==125)continue}switch(C+=V3(y),y*g){case 38:v=u>0?1:(C+="\f",-1);break;case 44:s[c++]=(Hs(C)-1)*v,v=1;break;case 64:Zc()===45&&(C+=wN(Es())),f=Zc(),u=d=Hs(b=C+=xat(Aw())),y++;break;case 45:p===45&&Hs(C)==2&&(g=0)}}return a}function TW(t,e,n,r,i,a,o,s,l,c,u,d){for(var f=i-1,h=i===0?a:[""],p=fat(h),g=0,m=0,v=0;g<r;++g)for(var y=0,b=tm(t,f+1,f=ute(m=o[g])),w=t;y<p;++y)(w=dte(m>0?h[y]+" "+b:Ow(b,/&\f/g,h[y])))&&(l[v++]=w);return W3(t,e,n,i===0?lte:s,l,c,u,d)}function Sat(t,e,n,r){return W3(t,e,n,ste,V3(hat()),tm(t,2,-2),0,r)}function IW(t,e,n,r,i){return W3(t,e,n,cte,tm(t,0,r),tm(t,r+1,-1),r,i)}function M_(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function $at(t,e,n,r){switch(t.type){case uat:if(t.children.length)break;case sat:case lat:case cte:return t.return=t.return||t.value;case ste:return"";case cat:return t.return=t.value+"{"+M_(t.children,r)+"}";case lte:if(!Hs(t.value=t.props.join(",")))return""}return Hs(n=M_(t.children,r))?t.return=t.value+"{"+n+"}":""}var NW="data-ant-cssinjs-cache-path",hte="_FILE_STYLE__",Wd,pte=!0;function Cat(){if(!Wd&&(Wd={},ma())){var t=document.createElement("div");t.className=NW,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var e=getComputedStyle(t).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(function(i){var a=i.split(":"),o=ge(a,2),s=o[0],l=o[1];Wd[s]=l});var n=document.querySelector("style[".concat(NW,"]"));if(n){var r;pte=!1,(r=n.parentNode)===null||r===void 0||r.removeChild(n)}document.body.removeChild(t)}}function Eat(t){return Cat(),!!Wd[t]}function Tat(t){var e=Wd[t],n=null;if(e&&ma())if(pte)n=hte;else{var r=document.querySelector("style[".concat(Cs,'="').concat(Wd[t],'"]'));r?n=r.innerHTML:delete Wd[t]}return[n,e]}var Iat="_skip_check_",mte="_multi_value_";function Pw(t){var e=M_(wat(t),$at);return e.replace(/\{%%%\:[^;];}/g,";")}function Nat(t){return at(t)==="object"&&t&&(Iat in t||mte in t)}function kW(t,e,n){if(!e)return t;var r=".".concat(e),i=n==="low"?":where(".concat(r,")"):r,a=t.split(",").map(function(o){var s,l=o.trim().split(/\s+/),c=l[0]||"",u=((s=c.match(/^\w+/))===null||s===void 0?void 0:s[0])||"";return c="".concat(u).concat(i).concat(c.slice(u.length)),[c].concat(Be(l.slice(1))).join(" ")});return a.join(",")}var kat=function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},i=r.root,a=r.injectHash,o=r.parentSelectors,s=n.hashId,l=n.layer;n.path;var c=n.hashPriority,u=n.transformers,d=u===void 0?[]:u;n.linters;var f="",h={};function p(v){var y=v.getName(s);if(!h[y]){var b=t(v.style,n,{root:!1,parentSelectors:o}),w=ge(b,1),x=w[0];h[y]="@keyframes ".concat(v.getName(s)).concat(x)}}function g(v){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return v.forEach(function(b){Array.isArray(b)?g(b,y):b&&y.push(b)}),y}var m=g(Array.isArray(e)?e:[e]);return m.forEach(function(v){var y=typeof v=="string"&&!i?{}:v;if(typeof y=="string")f+="".concat(y,`
`);else if(y._keyframe)p(y);else{var b=d.reduce(function(w,x){var $;return(x==null||($=x.visit)===null||$===void 0?void 0:$.call(x,w))||w},y);Object.keys(b).forEach(function(w){var x=b[w];if(at(x)==="object"&&x&&(w!=="animationName"||!x._keyframe)&&!Nat(x)){var $=!1,C=w.trim(),E=!1;(i||a)&&s?C.startsWith("@")?$=!0:C==="&"?C=kW("",s,c):C=kW(w,s,c):i&&!s&&(C==="&"||C==="")&&(C="",E=!0);var I=t(x,n,{root:E,injectHash:$,parentSelectors:[].concat(Be(o),[C])}),T=ge(I,2),N=T[0],k=T[1];h=ie(ie({},h),k),f+="".concat(C).concat(N)}else{let P=function(D,L){var R=D.replace(/[A-Z]/g,function(V){return"-".concat(V.toLowerCase())}),F=L;!oat[D]&&typeof F=="number"&&F!==0&&(F="".concat(F,"px")),D==="animationName"&&L!==null&&L!==void 0&&L._keyframe&&(p(L),F=L.getName(s)),f+="".concat(R,":").concat(F,";")};var O,_=(O=x==null?void 0:x.value)!==null&&O!==void 0?O:x;at(x)==="object"&&x!==null&&x!==void 0&&x[mte]&&Array.isArray(_)?_.forEach(function(D){P(w,D)}):P(w,_)}})}}),i?l&&(f&&(f="@layer ".concat(l.name," {").concat(f,"}")),l.dependencies&&(h["@layer ".concat(l.name)]=l.dependencies.map(function(v){return"@layer ".concat(v,", ").concat(l.name,";")}).join(`
`))):f="{".concat(f,"}"),[f,h]};function gte(t,e){return O0("".concat(t.join("%")).concat(e))}function Oat(){return null}var vte="style";function L_(t,e){var n=t.token,r=t.path,i=t.hashId,a=t.layer,o=t.nonce,s=t.clientOnly,l=t.order,c=l===void 0?0:l,u=S.useContext(Ux),d=u.autoClear;u.mock;var f=u.defaultCache,h=u.hashPriority,p=u.container,g=u.ssrInline,m=u.transformers,v=u.linters,y=u.cache,b=u.layer,w=n._tokenKey,x=[w];b&&x.push("layer"),x.push.apply(x,Be(r));var $=R_,C=B3(vte,x,function(){var k=x.join("|");if(Eat(k)){var O=Tat(k),_=ge(O,2),P=_[0],D=_[1];if(P)return[P,w,D,{},s,c]}var L=e(),R=kat(L,{hashId:i,hashPriority:h,layer:b?a:void 0,path:r.join("-"),transformers:m,linters:v}),F=ge(R,2),V=F[0],H=F[1],U=Pw(V),W=gte(x,U);return[U,w,W,H,s,c]},function(k,O){var _=ge(k,3),P=_[2];(O||d)&&R_&&A0(P,{mark:Cs})},function(k){var O=ge(k,4),_=O[0];O[1];var P=O[2],D=O[3];if($&&_!==hte){var L={mark:Cs,prepend:b?!1:"queue",attachTo:p,priority:c},R=typeof o=="function"?o():o;R&&(L.csp={nonce:R});var F=[],V=[];Object.keys(D).forEach(function(U){U.startsWith("@layer")?F.push(U):V.push(U)}),F.forEach(function(U){ql(Pw(D[U]),"_layer-".concat(U),ie(ie({},L),{},{prepend:!0}))});var H=ql(_,P,L);H[Yc]=y.instanceId,H.setAttribute(em,w),V.forEach(function(U){ql(Pw(D[U]),"_effect-".concat(U),L)})}}),E=ge(C,3),I=E[0],T=E[1],N=E[2];return function(k){var O;if(!g||$||!f)O=S.createElement(Oat,null);else{var _;O=S.createElement("style",Qe({},(_={},Y(_,em,T),Y(_,Cs,N),_),{dangerouslySetInnerHTML:{__html:I}}))}return S.createElement(S.Fragment,null,O,k)}}var Aat=function(e,n,r){var i=ge(e,6),a=i[0],o=i[1],s=i[2],l=i[3],c=i[4],u=i[5],d=r||{},f=d.plain;if(c)return null;var h=a,p={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)};return h=U$(a,o,s,p,f),l&&Object.keys(l).forEach(function(g){if(!n[g]){n[g]=!0;var m=Pw(l[g]),v=U$(m,o,"_effect-".concat(g),p,f);g.startsWith("@layer")?h=v+h:h+=v}}),[u,s,h]},yte="cssVar",_at=function(e,n){var r=e.key,i=e.prefix,a=e.unitless,o=e.ignore,s=e.token,l=e.scope,c=l===void 0?"":l,u=S.useContext(Ux),d=u.cache.instanceId,f=u.container,h=s._tokenKey,p=[].concat(Be(e.path),[r,c,h]),g=B3(yte,p,function(){var m=n(),v=ate(m,r,{prefix:i,unitless:a,ignore:o,scope:c}),y=ge(v,2),b=y[0],w=y[1],x=gte(p,w);return[b,w,x,r]},function(m){var v=ge(m,3),y=v[2];R_&&A0(y,{mark:Cs})},function(m){var v=ge(m,3),y=v[1],b=v[2];if(y){var w=ql(y,b,{mark:Cs,prepend:"queue",attachTo:f,priority:-999});w[Yc]=d,w.setAttribute(em,r)}});return g},Pat=function(e,n,r){var i=ge(e,4),a=i[1],o=i[2],s=i[3],l=r||{},c=l.plain;if(!a)return null;var u=-999,d={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)},f=U$(a,s,o,d,c);return[u,o,f]},hv;hv={},Y(hv,vte,Aat),Y(hv,ote,aat),Y(hv,yte,Pat);var hn=function(){function t(e,n){gr(this,t),Y(this,"name",void 0),Y(this,"style",void 0),Y(this,"_keyframe",!0),this.name=e,this.style=n}return vr(t,[{key:"getName",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n?"".concat(n,"-").concat(this.name):this.name}}]),t}();function oh(t){return t.notSplit=!0,t}oh(["borderTop","borderBottom"]),oh(["borderTop"]),oh(["borderBottom"]),oh(["borderLeft","borderRight"]),oh(["borderLeft"]),oh(["borderRight"]);var U3=S.createContext({});function Rat(t){return Jee(t)||Xee(t)||M3(t)||ete()}function el(t,e){for(var n=t,r=0;r<e.length;r+=1){if(n==null)return;n=n[e[r]]}return n}function bte(t,e,n,r){if(!e.length)return n;var i=Rat(e),a=i[0],o=i.slice(1),s;return!t&&typeof a=="number"?s=[]:Array.isArray(t)?s=Be(t):s=ie({},t),r&&n===void 0&&o.length===1?delete s[a][o[0]]:s[a]=bte(s[a],o,n,r),s}function us(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&r&&n===void 0&&!el(t,e.slice(0,-1))?t:bte(t,e,n,r)}function Dat(t){return at(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function OW(t){return Array.isArray(t)?[]:{}}var Fat=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function Mh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=OW(e[0]);return e.forEach(function(i){function a(o,s){var l=new Set(s),c=el(i,o),u=Array.isArray(c);if(u||Dat(c)){if(!l.has(c)){l.add(c);var d=el(r,o);u?r=us(r,o,[]):(!d||at(d)!=="object")&&(r=us(r,o,OW(c))),Fat(c).forEach(function(f){a([].concat(Be(o),[f]),l)})}}else r=us(r,o,c)}a([])}),r}function Mat(){}const Lat=S.createContext({}),xte=()=>{const t=()=>{};return t.deprecated=Mat,t},jat=S.createContext(void 0);var zat={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},Bat={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},Vat=ie(ie({},Bat),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const wte={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},AW={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Vat),timePickerLocale:Object.assign({},wte)},Va="${label} is not a valid ${type}",yf={locale:"en",Pagination:zat,DatePicker:AW,TimePicker:wte,Calendar:AW,global:{placeholder:"Please select",close:"Close"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Va,method:Va,array:Va,object:Va,number:Va,date:Va,boolean:Va,integer:Va,float:Va,regexp:Va,email:Va,url:Va,hex:Va},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};Object.assign({},yf.Modal);let Rw=[];const _W=()=>Rw.reduce((t,e)=>Object.assign(Object.assign({},t),e),yf.Modal);function Wat(t){if(t){const e=Object.assign({},t);return Rw.push(e),_W(),()=>{Rw=Rw.filter(n=>n!==e),_W()}}Object.assign({},yf.Modal)}const H3=S.createContext(void 0),Ste=(t,e)=>{const n=S.useContext(H3),r=S.useMemo(()=>{var a;const o=e||yf[t],s=(a=n==null?void 0:n[t])!==null&&a!==void 0?a:{};return Object.assign(Object.assign({},typeof o=="function"?o():o),s||{})},[t,e,n]),i=S.useMemo(()=>{const a=n==null?void 0:n.locale;return n!=null&&n.exist&&!a?yf.locale:a},[n]);return[r,i]},Uat="internalMark",Hat=t=>{const{locale:e={},children:n,_ANT_MARK__:r}=t;S.useEffect(()=>Wat(e==null?void 0:e.Modal),[e]);const i=S.useMemo(()=>Object.assign(Object.assign({},e),{exist:!0}),[e]);return S.createElement(H3.Provider,{value:i},n)},$te={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},R0=Object.assign(Object.assign({},$te),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Jr=Math.round;function SN(t,e){const n=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map(i=>parseFloat(i));for(let i=0;i<3;i+=1)r[i]=e(r[i]||0,n[i]||"",i);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const PW=(t,e,n)=>n===0?t:t/100;function pv(t,e){const n=e||255;return t>n?n:t<0?0:t}let Ir=class Cte{constructor(e){Y(this,"isValid",!0),Y(this,"r",0),Y(this,"g",0),Y(this,"b",0),Y(this,"a",1),Y(this,"_h",void 0),Y(this,"_s",void 0),Y(this,"_l",void 0),Y(this,"_v",void 0),Y(this,"_max",void 0),Y(this,"_min",void 0),Y(this,"_brightness",void 0);function n(i){return i[0]in e&&i[1]in e&&i[2]in e}if(e)if(typeof e=="string"){let a=function(o){return i.startsWith(o)};var r=a;const i=e.trim();/^#?[A-F\d]{3,8}$/i.test(i)?this.fromHexString(i):a("rgb")?this.fromRgbString(i):a("hsl")?this.fromHslString(i):(a("hsv")||a("hsb"))&&this.fromHsvString(i)}else if(e instanceof Cte)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(n("rgb"))this.r=pv(e.r),this.g=pv(e.g),this.b=pv(e.b),this.a=typeof e.a=="number"?pv(e.a,1):1;else if(n("hsl"))this.fromHsl(e);else if(n("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const n=this.toHsv();return n.h=e,this._c(n)}getLuminance(){function e(a){const o=a/255;return o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)}const n=e(this.r),r=e(this.g),i=e(this.b);return .2126*n+.7152*r+.0722*i}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=Jr(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()-e/100;return i<0&&(i=0),this._c({h:n,s:r,l:i,a:this.a})}lighten(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()+e/100;return i>1&&(i=1),this._c({h:n,s:r,l:i,a:this.a})}mix(e,n=50){const r=this._c(e),i=n/100,a=s=>(r[s]-this[s])*i+this[s],o={r:Jr(a("r")),g:Jr(a("g")),b:Jr(a("b")),a:Jr(a("a")*100)/100};return this._c(o)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const n=this._c(e),r=this.a+n.a*(1-this.a),i=a=>Jr((this[a]*this.a+n[a]*n.a*(1-this.a))/r);return this._c({r:i("r"),g:i("g"),b:i("b"),a:r})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const n=(this.r||0).toString(16);e+=n.length===2?n:"0"+n;const r=(this.g||0).toString(16);e+=r.length===2?r:"0"+r;const i=(this.b||0).toString(16);if(e+=i.length===2?i:"0"+i,typeof this.a=="number"&&this.a>=0&&this.a<1){const a=Jr(this.a*255).toString(16);e+=a.length===2?a:"0"+a}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),n=Jr(this.getSaturation()*100),r=Jr(this.getLightness()*100);return this.a!==1?`hsla(${e},${n}%,${r}%,${this.a})`:`hsl(${e},${n}%,${r}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,n,r){const i=this.clone();return i[e]=pv(n,r),i}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const n=e.replace("#","");function r(i,a){return parseInt(n[i]+n[a||i],16)}n.length<6?(this.r=r(0),this.g=r(1),this.b=r(2),this.a=n[3]?r(3)/255:1):(this.r=r(0,1),this.g=r(2,3),this.b=r(4,5),this.a=n[6]?r(6,7)/255:1)}fromHsl({h:e,s:n,l:r,a:i}){if(this._h=e%360,this._s=n,this._l=r,this.a=typeof i=="number"?i:1,n<=0){const f=Jr(r*255);this.r=f,this.g=f,this.b=f}let a=0,o=0,s=0;const l=e/60,c=(1-Math.abs(2*r-1))*n,u=c*(1-Math.abs(l%2-1));l>=0&&l<1?(a=c,o=u):l>=1&&l<2?(a=u,o=c):l>=2&&l<3?(o=c,s=u):l>=3&&l<4?(o=u,s=c):l>=4&&l<5?(a=u,s=c):l>=5&&l<6&&(a=c,s=u);const d=r-c/2;this.r=Jr((a+d)*255),this.g=Jr((o+d)*255),this.b=Jr((s+d)*255)}fromHsv({h:e,s:n,v:r,a:i}){this._h=e%360,this._s=n,this._v=r,this.a=typeof i=="number"?i:1;const a=Jr(r*255);if(this.r=a,this.g=a,this.b=a,n<=0)return;const o=e/60,s=Math.floor(o),l=o-s,c=Jr(r*(1-n)*255),u=Jr(r*(1-n*l)*255),d=Jr(r*(1-n*(1-l))*255);switch(s){case 0:this.g=d,this.b=c;break;case 1:this.r=u,this.b=c;break;case 2:this.r=c,this.b=d;break;case 3:this.r=c,this.g=u;break;case 4:this.r=d,this.g=c;break;case 5:default:this.g=c,this.b=u;break}}fromHsvString(e){const n=SN(e,PW);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(e){const n=SN(e,PW);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(e){const n=SN(e,(r,i)=>i.includes("%")?Jr(r/100*255):r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}};var Z1=2,RW=.16,Gat=.05,qat=.05,Kat=.15,Ete=5,Tte=4,Xat=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function DW(t,e,n){var r;return Math.round(t.h)>=60&&Math.round(t.h)<=240?r=n?Math.round(t.h)-Z1*e:Math.round(t.h)+Z1*e:r=n?Math.round(t.h)+Z1*e:Math.round(t.h)-Z1*e,r<0?r+=360:r>=360&&(r-=360),r}function FW(t,e,n){if(t.h===0&&t.s===0)return t.s;var r;return n?r=t.s-RW*e:e===Tte?r=t.s+RW:r=t.s+Gat*e,r>1&&(r=1),n&&e===Ete&&r>.1&&(r=.1),r<.06&&(r=.06),Math.round(r*100)/100}function MW(t,e,n){var r;return n?r=t.v+qat*e:r=t.v-Kat*e,r=Math.max(0,Math.min(1,r)),Math.round(r*100)/100}function D0(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=new Ir(t),i=r.toHsv(),a=Ete;a>0;a-=1){var o=new Ir({h:DW(i,a,!0),s:FW(i,a,!0),v:MW(i,a,!0)});n.push(o)}n.push(r);for(var s=1;s<=Tte;s+=1){var l=new Ir({h:DW(i,s),s:FW(i,s),v:MW(i,s)});n.push(l)}return e.theme==="dark"?Xat.map(function(c){var u=c.index,d=c.amount;return new Ir(e.backgroundColor||"#141414").mix(n[u],d).toHexString()}):n.map(function(c){return c.toHexString()})}var np={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},j_=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];j_.primary=j_[5];var z_=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];z_.primary=z_[5];var B_=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];B_.primary=B_[5];var H$=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];H$.primary=H$[5];var V_=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];V_.primary=V_[5];var W_=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];W_.primary=W_[5];var U_=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];U_.primary=U_[5];var H_=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];H_.primary=H_[5];var rm=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];rm.primary=rm[5];var G_=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];G_.primary=G_[5];var q_=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];q_.primary=q_[5];var K_=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];K_.primary=K_[5];var X_=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];X_.primary=X_[5];var $N={red:j_,volcano:z_,orange:B_,gold:H$,yellow:V_,lime:W_,green:U_,cyan:H_,blue:rm,geekblue:G_,purple:q_,magenta:K_,grey:X_};function Yat(t,{generateColorPalettes:e,generateNeutralColorPalettes:n}){const{colorSuccess:r,colorWarning:i,colorError:a,colorInfo:o,colorPrimary:s,colorBgBase:l,colorTextBase:c}=t,u=e(s),d=e(r),f=e(i),h=e(a),p=e(o),g=n(l,c),m=t.colorLink||t.colorInfo,v=e(m),y=new Ir(h[1]).mix(new Ir(h[3]),50).toHexString();return Object.assign(Object.assign({},g),{colorPrimaryBg:u[1],colorPrimaryBgHover:u[2],colorPrimaryBorder:u[3],colorPrimaryBorderHover:u[4],colorPrimaryHover:u[5],colorPrimary:u[6],colorPrimaryActive:u[7],colorPrimaryTextHover:u[8],colorPrimaryText:u[9],colorPrimaryTextActive:u[10],colorSuccessBg:d[1],colorSuccessBgHover:d[2],colorSuccessBorder:d[3],colorSuccessBorderHover:d[4],colorSuccessHover:d[4],colorSuccess:d[6],colorSuccessActive:d[7],colorSuccessTextHover:d[8],colorSuccessText:d[9],colorSuccessTextActive:d[10],colorErrorBg:h[1],colorErrorBgHover:h[2],colorErrorBgFilledHover:y,colorErrorBgActive:h[3],colorErrorBorder:h[3],colorErrorBorderHover:h[4],colorErrorHover:h[5],colorError:h[6],colorErrorActive:h[7],colorErrorTextHover:h[8],colorErrorText:h[9],colorErrorTextActive:h[10],colorWarningBg:f[1],colorWarningBgHover:f[2],colorWarningBorder:f[3],colorWarningBorderHover:f[4],colorWarningHover:f[4],colorWarning:f[6],colorWarningActive:f[7],colorWarningTextHover:f[8],colorWarningText:f[9],colorWarningTextActive:f[10],colorInfoBg:p[1],colorInfoBgHover:p[2],colorInfoBorder:p[3],colorInfoBorderHover:p[4],colorInfoHover:p[4],colorInfo:p[6],colorInfoActive:p[7],colorInfoTextHover:p[8],colorInfoText:p[9],colorInfoTextActive:p[10],colorLinkHover:v[4],colorLink:v[6],colorLinkActive:v[7],colorBgMask:new Ir("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const Zat=t=>{let e=t,n=t,r=t,i=t;return t<6&&t>=5?e=t+1:t<16&&t>=6?e=t+2:t>=16&&(e=16),t<7&&t>=5?n=4:t<8&&t>=7?n=5:t<14&&t>=8?n=6:t<16&&t>=14?n=7:t>=16&&(n=8),t<6&&t>=2?r=1:t>=6&&(r=2),t>4&&t<8?i=4:t>=8&&(i=6),{borderRadius:t,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:e,borderRadiusOuter:i}};function Qat(t){const{motionUnit:e,motionBase:n,borderRadius:r,lineWidth:i}=t;return Object.assign({motionDurationFast:`${(n+e).toFixed(1)}s`,motionDurationMid:`${(n+e*2).toFixed(1)}s`,motionDurationSlow:`${(n+e*3).toFixed(1)}s`,lineWidthBold:i+1},Zat(r))}const Jat=t=>{const{controlHeight:e}=t;return{controlHeightSM:e*.75,controlHeightXS:e*.5,controlHeightLG:e*1.25}};function Dw(t){return(t+8)/t}function eot(t){const e=Array.from({length:10}).map((n,r)=>{const i=r-1,a=t*Math.pow(Math.E,i/5),o=r>1?Math.floor(a):Math.ceil(a);return Math.floor(o/2)*2});return e[1]=t,e.map(n=>({size:n,lineHeight:Dw(n)}))}const tot=t=>{const e=eot(t),n=e.map(u=>u.size),r=e.map(u=>u.lineHeight),i=n[1],a=n[0],o=n[2],s=r[1],l=r[0],c=r[2];return{fontSizeSM:a,fontSize:i,fontSizeLG:o,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:s,lineHeightLG:c,lineHeightSM:l,fontHeight:Math.round(s*i),fontHeightLG:Math.round(c*o),fontHeightSM:Math.round(l*a),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}};function not(t){const{sizeUnit:e,sizeStep:n}=t;return{sizeXXL:e*(n+8),sizeXL:e*(n+4),sizeLG:e*(n+2),sizeMD:e*(n+1),sizeMS:e*n,size:e*n,sizeSM:e*(n-1),sizeXS:e*(n-2),sizeXXS:e*(n-3)}}const Co=(t,e)=>new Ir(t).setA(e).toRgbString(),mv=(t,e)=>new Ir(t).darken(e).toHexString(),rot=t=>{const e=D0(t);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},iot=(t,e)=>{const n=t||"#fff",r=e||"#000";return{colorBgBase:n,colorTextBase:r,colorText:Co(r,.88),colorTextSecondary:Co(r,.65),colorTextTertiary:Co(r,.45),colorTextQuaternary:Co(r,.25),colorFill:Co(r,.15),colorFillSecondary:Co(r,.06),colorFillTertiary:Co(r,.04),colorFillQuaternary:Co(r,.02),colorBgSolid:Co(r,1),colorBgSolidHover:Co(r,.75),colorBgSolidActive:Co(r,.95),colorBgLayout:mv(n,4),colorBgContainer:mv(n,0),colorBgElevated:mv(n,0),colorBgSpotlight:Co(r,.85),colorBgBlur:"transparent",colorBorder:mv(n,15),colorBorderSecondary:mv(n,6)}};function aot(t){np.pink=np.magenta,$N.pink=$N.magenta;const e=Object.keys($te).map(n=>{const r=t[n]===np[n]?$N[n]:D0(t[n]);return Array.from({length:10},()=>1).reduce((i,a,o)=>(i[`${n}-${o+1}`]=r[o],i[`${n}${o+1}`]=r[o],i),{})}).reduce((n,r)=>(n=Object.assign(Object.assign({},n),r),n),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),e),Yat(t,{generateColorPalettes:rot,generateNeutralColorPalettes:iot})),tot(t.fontSize)),not(t)),Jat(t)),Qat(t))}const Ite=P_(aot),Y_={token:R0,override:{override:R0},hashed:!0},Nte=B.createContext(Y_),F0="ant",G3="anticon",oot=["outlined","borderless","filled","underlined"],sot=(t,e)=>e||(t?`${F0}-${t}`:F0),pn=S.createContext({getPrefixCls:sot,iconPrefixCls:G3}),{Consumer:Wvt}=pn,LW={};function Hf(t){const e=S.useContext(pn),{getPrefixCls:n,direction:r,getPopupContainer:i}=e,a=e[t];return Object.assign(Object.assign({classNames:LW,styles:LW},a),{getPrefixCls:n,direction:r,getPopupContainer:i})}const lot=`-ant-${Date.now()}-${Math.random()}`;function cot(t,e){const n={},r=(o,s)=>{let l=o.clone();return l=(s==null?void 0:s(l))||l,l.toRgbString()},i=(o,s)=>{const l=new Ir(o),c=D0(l.toRgbString());n[`${s}-color`]=r(l),n[`${s}-color-disabled`]=c[1],n[`${s}-color-hover`]=c[4],n[`${s}-color-active`]=c[6],n[`${s}-color-outline`]=l.clone().setA(.2).toRgbString(),n[`${s}-color-deprecated-bg`]=c[0],n[`${s}-color-deprecated-border`]=c[2]};if(e.primaryColor){i(e.primaryColor,"primary");const o=new Ir(e.primaryColor),s=D0(o.toRgbString());s.forEach((c,u)=>{n[`primary-${u+1}`]=c}),n["primary-color-deprecated-l-35"]=r(o,c=>c.lighten(35)),n["primary-color-deprecated-l-20"]=r(o,c=>c.lighten(20)),n["primary-color-deprecated-t-20"]=r(o,c=>c.tint(20)),n["primary-color-deprecated-t-50"]=r(o,c=>c.tint(50)),n["primary-color-deprecated-f-12"]=r(o,c=>c.setA(c.a*.12));const l=new Ir(s[0]);n["primary-color-active-deprecated-f-30"]=r(l,c=>c.setA(c.a*.3)),n["primary-color-active-deprecated-d-02"]=r(l,c=>c.darken(2))}return e.successColor&&i(e.successColor,"success"),e.warningColor&&i(e.warningColor,"warning"),e.errorColor&&i(e.errorColor,"error"),e.infoColor&&i(e.infoColor,"info"),`
  :root {
    ${Object.keys(n).map(o=>`--${t}-${o}: ${n[o]};`).join(`
`)}
  }
  `.trim()}function uot(t,e){const n=cot(t,e);ma()&&ql(n,`${lot}-dynamic-theme`)}const im=S.createContext(!1),dot=({children:t,disabled:e})=>{const n=S.useContext(im);return S.createElement(im.Provider,{value:e??n},t)},am=S.createContext(void 0),fot=({children:t,size:e})=>{const n=S.useContext(am);return S.createElement(am.Provider,{value:e||n},t)};function hot(){const t=S.useContext(im),e=S.useContext(am);return{componentDisabled:t,componentSize:e}}var kte=vr(function t(){gr(this,t)}),Ote="CALC_UNIT",pot=new RegExp(Ote,"g");function CN(t){return typeof t=="number"?"".concat(t).concat(Ote):t}var mot=function(t){Ls(n,t);var e=js(n);function n(r,i){var a;gr(this,n),a=e.call(this),Y(ht(a),"result",""),Y(ht(a),"unitlessCssVar",void 0),Y(ht(a),"lowPriority",void 0);var o=at(r);return a.unitlessCssVar=i,r instanceof n?a.result="(".concat(r.result,")"):o==="number"?a.result=CN(r):o==="string"&&(a.result=r),a}return vr(n,[{key:"add",value:function(i){return i instanceof n?this.result="".concat(this.result," + ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," + ").concat(CN(i))),this.lowPriority=!0,this}},{key:"sub",value:function(i){return i instanceof n?this.result="".concat(this.result," - ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," - ").concat(CN(i))),this.lowPriority=!0,this}},{key:"mul",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof n?this.result="".concat(this.result," * ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," * ").concat(i)),this.lowPriority=!1,this}},{key:"div",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof n?this.result="".concat(this.result," / ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," / ").concat(i)),this.lowPriority=!1,this}},{key:"getResult",value:function(i){return this.lowPriority||i?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(i){var a=this,o=i||{},s=o.unit,l=!0;return typeof s=="boolean"?l=s:Array.from(this.unitlessCssVar).some(function(c){return a.result.includes(c)})&&(l=!1),this.result=this.result.replace(pot,l?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),n}(kte),got=function(t){Ls(n,t);var e=js(n);function n(r){var i;return gr(this,n),i=e.call(this),Y(ht(i),"result",0),r instanceof n?i.result=r.result:typeof r=="number"&&(i.result=r),i}return vr(n,[{key:"add",value:function(i){return i instanceof n?this.result+=i.result:typeof i=="number"&&(this.result+=i),this}},{key:"sub",value:function(i){return i instanceof n?this.result-=i.result:typeof i=="number"&&(this.result-=i),this}},{key:"mul",value:function(i){return i instanceof n?this.result*=i.result:typeof i=="number"&&(this.result*=i),this}},{key:"div",value:function(i){return i instanceof n?this.result/=i.result:typeof i=="number"&&(this.result/=i),this}},{key:"equal",value:function(){return this.result}}]),n}(kte),vot=function(e,n){var r=e==="css"?mot:got;return function(i){return new r(i,n)}},jW=function(e,n){return"".concat([n,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function zi(t){var e=S.useRef();e.current=t;var n=S.useCallback(function(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(r=e.current)===null||r===void 0?void 0:r.call.apply(r,[e].concat(a))},[]);return n}function M0(t){var e=S.useRef(!1),n=S.useState(t),r=ge(n,2),i=r[0],a=r[1];S.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function o(s,l){l&&e.current||a(s)}return[i,o]}function EN(t){return t!==void 0}function Vo(t,e){var n=e||{},r=n.defaultValue,i=n.value,a=n.onChange,o=n.postState,s=M0(function(){return EN(i)?i:EN(r)?typeof r=="function"?r():r:typeof t=="function"?t():t}),l=ge(s,2),c=l[0],u=l[1],d=i!==void 0?i:c,f=o?o(d):d,h=zi(a),p=M0([d]),g=ge(p,2),m=g[0],v=g[1];D_(function(){var b=m[0];c!==b&&h(c,b)},[m]),D_(function(){EN(i)||u(i)},[i]);var y=zi(function(b,w){u(b,w),v([d],w)});return[f,y]}function zW(t,e,n,r){var i=ie({},e[t]);if(r!=null&&r.deprecatedTokens){var a=r.deprecatedTokens;a.forEach(function(s){var l=ge(s,2),c=l[0],u=l[1];if(i!=null&&i[c]||i!=null&&i[u]){var d;(d=i[u])!==null&&d!==void 0||(i[u]=i==null?void 0:i[c])}})}var o=ie(ie({},n),i);return Object.keys(o).forEach(function(s){o[s]===e[s]&&delete o[s]}),o}var Ate=typeof CSSINJS_STATISTIC<"u",Z_=!0;function _r(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!Ate)return Object.assign.apply(Object,[{}].concat(e));Z_=!1;var r={};return e.forEach(function(i){if(at(i)==="object"){var a=Object.keys(i);a.forEach(function(o){Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return i[o]}})})}}),Z_=!0,r}var BW={};function yot(){}var bot=function(e){var n,r=e,i=yot;return Ate&&typeof Proxy<"u"&&(n=new Set,r=new Proxy(e,{get:function(o,s){if(Z_){var l;(l=n)===null||l===void 0||l.add(s)}return o[s]}}),i=function(o,s){var l;BW[o]={global:Array.from(n),component:ie(ie({},(l=BW[o])===null||l===void 0?void 0:l.component),s)}}),{token:r,keys:n,flush:i}};function VW(t,e,n){if(typeof n=="function"){var r;return n(_r(e,(r=e[t])!==null&&r!==void 0?r:{}))}return n??{}}function xot(t){return t==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return"max(".concat(r.map(function(a){return Ce(a)}).join(","),")")},min:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return"min(".concat(r.map(function(a){return Ce(a)}).join(","),")")}}}var wot=1e3*60*10,Sot=function(){function t(){gr(this,t),Y(this,"map",new Map),Y(this,"objectIDMap",new WeakMap),Y(this,"nextID",0),Y(this,"lastAccessBeat",new Map),Y(this,"accessBeat",0)}return vr(t,[{key:"set",value:function(n,r){this.clear();var i=this.getCompositeKey(n);this.map.set(i,r),this.lastAccessBeat.set(i,Date.now())}},{key:"get",value:function(n){var r=this.getCompositeKey(n),i=this.map.get(r);return this.lastAccessBeat.set(r,Date.now()),this.accessBeat+=1,i}},{key:"getCompositeKey",value:function(n){var r=this,i=n.map(function(a){return a&&at(a)==="object"?"obj_".concat(r.getObjectID(a)):"".concat(at(a),"_").concat(a)});return i.join("|")}},{key:"getObjectID",value:function(n){if(this.objectIDMap.has(n))return this.objectIDMap.get(n);var r=this.nextID;return this.objectIDMap.set(n,r),this.nextID+=1,r}},{key:"clear",value:function(){var n=this;if(this.accessBeat>1e4){var r=Date.now();this.lastAccessBeat.forEach(function(i,a){r-i>wot&&(n.map.delete(a),n.lastAccessBeat.delete(a))}),this.accessBeat=0}}}]),t}(),WW=new Sot;function $ot(t,e){return B.useMemo(function(){var n=WW.get(e);if(n)return n;var r=t();return WW.set(e,r),r},e)}var Cot=function(){return{}};function Eot(t){var e=t.useCSP,n=e===void 0?Cot:e,r=t.useToken,i=t.usePrefix,a=t.getResetStyles,o=t.getCommonStyle,s=t.getCompUnitless;function l(f,h,p,g){var m=Array.isArray(f)?f[0]:f;function v(E){return"".concat(String(m)).concat(E.slice(0,1).toUpperCase()).concat(E.slice(1))}var y=(g==null?void 0:g.unitless)||{},b=typeof s=="function"?s(f):{},w=ie(ie({},b),{},Y({},v("zIndexPopup"),!0));Object.keys(y).forEach(function(E){w[v(E)]=y[E]});var x=ie(ie({},g),{},{unitless:w,prefixToken:v}),$=u(f,h,p,x),C=c(m,p,x);return function(E){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:E,T=$(E,I),N=ge(T,2),k=N[1],O=C(I),_=ge(O,2),P=_[0],D=_[1];return[P,k,D]}}function c(f,h,p){var g=p.unitless,m=p.injectStyle,v=m===void 0?!0:m,y=p.prefixToken,b=p.ignore,w=function(C){var E=C.rootCls,I=C.cssVar,T=I===void 0?{}:I,N=r(),k=N.realToken;return _at({path:[f],prefix:T.prefix,key:T.key,unitless:g,ignore:b,token:k,scope:E},function(){var O=VW(f,k,h),_=zW(f,k,O,{deprecatedTokens:p==null?void 0:p.deprecatedTokens});return Object.keys(O).forEach(function(P){_[y(P)]=_[P],delete _[P]}),_}),null},x=function(C){var E=r(),I=E.cssVar;return[function(T){return v&&I?B.createElement(B.Fragment,null,B.createElement(w,{rootCls:C,cssVar:I,component:f}),T):T},I==null?void 0:I.key]};return x}function u(f,h,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},m=Array.isArray(f)?f:[f,f],v=ge(m,1),y=v[0],b=m.join("-"),w=t.layer||{name:"antd"};return function(x){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x,C=r(),E=C.theme,I=C.realToken,T=C.hashId,N=C.token,k=C.cssVar,O=i(),_=O.rootPrefixCls,P=O.iconPrefixCls,D=n(),L=k?"css":"js",R=$ot(function(){var G=new Set;return k&&Object.keys(g.unitless||{}).forEach(function(q){G.add(kw(q,k.prefix)),G.add(kw(q,jW(y,k.prefix)))}),vot(L,G)},[L,y,k==null?void 0:k.prefix]),F=xot(L),V=F.max,H=F.min,U={theme:E,token:N,hashId:T,nonce:function(){return D.nonce},clientOnly:g.clientOnly,layer:w,order:g.order||-999};typeof a=="function"&&L_(ie(ie({},U),{},{clientOnly:!1,path:["Shared",_]}),function(){return a(N,{prefix:{rootPrefixCls:_,iconPrefixCls:P},csp:D})});var W=L_(ie(ie({},U),{},{path:[b,x,P]}),function(){if(g.injectStyle===!1)return[];var G=bot(N),q=G.token,X=G.flush,re=VW(y,I,p),ce=".".concat(x),ee=zW(y,I,re,{deprecatedTokens:g.deprecatedTokens});k&&re&&at(re)==="object"&&Object.keys(re).forEach(function(ye){re[ye]="var(".concat(kw(ye,jW(y,k.prefix)),")")});var se=_r(q,{componentCls:ce,prefixCls:x,iconCls:".".concat(P),antCls:".".concat(_),calc:R,max:V,min:H},k?re:ee),ue=h(se,{hashId:T,prefixCls:x,rootPrefixCls:_,iconPrefixCls:P});X(y,ee);var Q=typeof o=="function"?o(se,x,$,g.resetFont):null;return[g.resetStyle===!1?null:Q,ue]});return[W,T]}}function d(f,h,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},m=u(f,h,p,ie({resetStyle:!1,order:-998},g)),v=function(b){var w=b.prefixCls,x=b.rootCls,$=x===void 0?w:x;return m(w,$),null};return v}return{genStyleHooks:l,genSubStyleComponent:d,genComponentStyleHook:u}}const bf=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],Tot="5.25.2";function TN(t){return t>=0&&t<=255}function Fv(t,e){const{r:n,g:r,b:i,a}=new Ir(t).toRgb();if(a<1)return t;const{r:o,g:s,b:l}=new Ir(e).toRgb();for(let c=.01;c<=1;c+=.01){const u=Math.round((n-o*(1-c))/c),d=Math.round((r-s*(1-c))/c),f=Math.round((i-l*(1-c))/c);if(TN(u)&&TN(d)&&TN(f))return new Ir({r:u,g:d,b:f,a:Math.round(c*100)/100}).toRgbString()}return new Ir({r:n,g:r,b:i,a:1}).toRgbString()}var Iot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function _te(t){const{override:e}=t,n=Iot(t,["override"]),r=Object.assign({},e);Object.keys(R0).forEach(f=>{delete r[f]});const i=Object.assign(Object.assign({},n),r),a=480,o=576,s=768,l=992,c=1200,u=1600;if(i.motion===!1){const f="0s";i.motionDurationFast=f,i.motionDurationMid=f,i.motionDurationSlow=f}return Object.assign(Object.assign(Object.assign({},i),{colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:Fv(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:Fv(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:Fv(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:i.lineWidth*3,lineWidth:i.lineWidth,controlOutlineWidth:i.lineWidth*2,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:Fv(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:a,screenXSMin:a,screenXSMax:o-1,screenSM:o,screenSMMin:o,screenSMMax:s-1,screenMD:s,screenMDMin:s,screenMDMax:l-1,screenLG:l,screenLGMin:l,screenLGMax:c-1,screenXL:c,screenXLMin:c,screenXLMax:u-1,screenXXL:u,screenXXLMin:u,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Ir("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Ir("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Ir("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var UW=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Pte={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},Not={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},kot={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},Rte=(t,e,n)=>{const r=n.getDerivativeToken(t),{override:i}=e,a=UW(e,["override"]);let o=Object.assign(Object.assign({},r),{override:i});return o=_te(o),a&&Object.entries(a).forEach(([s,l])=>{const{theme:c}=l,u=UW(l,["theme"]);let d=u;c&&(d=Rte(Object.assign(Object.assign({},o),u),{override:u},c)),o[s]=d}),o};function Ku(){const{token:t,hashed:e,theme:n,override:r,cssVar:i}=B.useContext(Nte),a=`${Tot}-${e||""}`,o=n||Ite,[s,l,c]=iat(o,[R0,t],{salt:a,override:r,getComputedToken:Rte,formatToken:_te,cssVar:i&&{prefix:i.prefix,key:i.key,unitless:Pte,ignore:Not,preserve:kot}});return[o,c,e?l:"",s,i]}const Hx={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},wc=(t,e=!1)=>({boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:e?"inherit":t.fontFamily}),Dte=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),Gf=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),Oot=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active, &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),Aot=(t,e,n,r)=>{const i=`[class^="${e}"], [class*=" ${e}"]`,a=n?`.${n}`:i,o={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let s={};return r!==!1&&(s={fontFamily:t.fontFamily,fontSize:t.fontSize}),{[a]:Object.assign(Object.assign(Object.assign({},s),o),{[i]:o})}},q3=(t,e)=>({outline:`${Ce(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`,outlineOffset:e??1,transition:"outline-offset 0s, outline 0s"}),L0=(t,e)=>({"&:focus-visible":Object.assign({},q3(t,e))}),Fte=t=>({[`.${t}`]:Object.assign(Object.assign({},Dte()),{[`.${t} .${t}-icon`]:{display:"block"}})}),Mte=t=>Object.assign(Object.assign({color:t.colorLink,textDecoration:t.linkDecoration,outline:"none",cursor:"pointer",transition:`all ${t.motionDurationSlow}`,border:0,padding:0,background:"none",userSelect:"none"},L0(t)),{"&:focus, &:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive}}),{genStyleHooks:vo,genComponentStyleHook:_ot,genSubStyleComponent:Pot}=Eot({usePrefix:()=>{const{getPrefixCls:t,iconPrefixCls:e}=S.useContext(pn);return{rootPrefixCls:t(),iconPrefixCls:e}},useToken:()=>{const[t,e,n,r,i]=Ku();return{theme:t,realToken:e,hashId:n,token:r,cssVar:i}},useCSP:()=>{const{csp:t}=S.useContext(pn);return t??{}},getResetStyles:(t,e)=>{var n;const r=Oot(t);return[r,{"&":r},Fte((n=e==null?void 0:e.prefix.iconPrefixCls)!==null&&n!==void 0?n:G3)]},getCommonStyle:Aot,getCompUnitless:()=>Pte});function Rot(t,e){return bf.reduce((n,r)=>{const i=t[`${r}1`],a=t[`${r}3`],o=t[`${r}6`],s=t[`${r}7`];return Object.assign(Object.assign({},n),e(r,{lightColor:i,lightBorderColor:a,darkColor:o,textColor:s}))},{})}const Dot=(t,e)=>{const[n,r]=Ku();return L_({token:r,hashId:"",path:["ant-design-icons",t],nonce:()=>e==null?void 0:e.nonce,layer:{name:"antd"}},()=>[Fte(t)])},Fot=Object.assign({},nC),{useId:HW}=Fot,Mot=()=>"",Lot=typeof HW>"u"?Mot:HW;function jot(t,e,n){var r;xte();const i=t||{},a=i.inherit===!1||!e?Object.assign(Object.assign({},Y_),{hashed:(r=e==null?void 0:e.hashed)!==null&&r!==void 0?r:Y_.hashed,cssVar:e==null?void 0:e.cssVar}):e,o=Lot();return TT(()=>{var s,l;if(!t)return e;const c=Object.assign({},a.components);Object.keys(t.components||{}).forEach(f=>{c[f]=Object.assign(Object.assign({},c[f]),t.components[f])});const u=`css-var-${o.replace(/:/g,"")}`,d=((s=i.cssVar)!==null&&s!==void 0?s:a.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:n==null?void 0:n.prefixCls},typeof a.cssVar=="object"?a.cssVar:{}),typeof i.cssVar=="object"?i.cssVar:{}),{key:typeof i.cssVar=="object"&&((l=i.cssVar)===null||l===void 0?void 0:l.key)||u});return Object.assign(Object.assign(Object.assign({},a),i),{token:Object.assign(Object.assign({},a.token),i.token),components:c,cssVar:d})},[i,a],(s,l)=>s.some((c,u)=>{const d=l[u];return!_0(c,d,!0)}))}var zot=["children"],Lte=S.createContext({});function Bot(t){var e=t.children,n=Ot(t,zot);return S.createElement(Lte.Provider,{value:n},e)}var Vot=function(t){Ls(n,t);var e=js(n);function n(){return gr(this,n),e.apply(this,arguments)}return vr(n,[{key:"render",value:function(){return this.props.children}}]),n}(S.Component);function Wot(t){var e=S.useReducer(function(s){return s+1},0),n=ge(e,2),r=n[1],i=S.useRef(t),a=zi(function(){return i.current}),o=zi(function(s){i.current=typeof s=="function"?s(i.current):s,r()});return[a,o]}var Rc="none",Q1="appear",J1="enter",ew="leave",GW="none",ds="prepare",Lh="start",jh="active",K3="end",jte="prepared";function qW(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function Uot(t,e){var n={animationend:qW("Animation","AnimationEnd"),transitionend:qW("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var Hot=Uot(ma(),typeof window<"u"?window:{}),zte={};if(ma()){var Got=document.createElement("div");zte=Got.style}var tw={};function Bte(t){if(tw[t])return tw[t];var e=Hot[t];if(e)for(var n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var a=n[i];if(Object.prototype.hasOwnProperty.call(e,a)&&a in zte)return tw[t]=e[a],tw[t]}return""}var Vte=Bte("animationend"),Wte=Bte("transitionend"),Ute=!!(Vte&&Wte),KW=Vte||"animationend",XW=Wte||"transitionend";function YW(t,e){if(!t)return null;if(at(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}const qot=function(t){var e=S.useRef();function n(i){i&&(i.removeEventListener(XW,t),i.removeEventListener(KW,t))}function r(i){e.current&&e.current!==i&&n(e.current),i&&i!==e.current&&(i.addEventListener(XW,t),i.addEventListener(KW,t),e.current=i)}return S.useEffect(function(){return function(){n(e.current)}},[]),[r,n]};var Hte=ma()?S.useLayoutEffect:S.useEffect;const Kot=function(){var t=S.useRef(null);function e(){ci.cancel(t.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var a=ci(function(){i<=1?r({isCanceled:function(){return a!==t.current}}):n(r,i-1)});t.current=a}return S.useEffect(function(){return function(){e()}},[]),[n,e]};var Xot=[ds,Lh,jh,K3],Yot=[ds,jte],Gte=!1,Zot=!0;function qte(t){return t===jh||t===K3}const Qot=function(t,e,n){var r=M0(GW),i=ge(r,2),a=i[0],o=i[1],s=Kot(),l=ge(s,2),c=l[0],u=l[1];function d(){o(ds,!0)}var f=e?Yot:Xot;return Hte(function(){if(a!==GW&&a!==K3){var h=f.indexOf(a),p=f[h+1],g=n(a);g===Gte?o(p,!0):p&&c(function(m){function v(){m.isCanceled()||o(p,!0)}g===!0?v():Promise.resolve(g).then(v)})}},[t,a]),S.useEffect(function(){return function(){u()}},[]),[d,a]};function Jot(t,e,n,r){var i=r.motionEnter,a=i===void 0?!0:i,o=r.motionAppear,s=o===void 0?!0:o,l=r.motionLeave,c=l===void 0?!0:l,u=r.motionDeadline,d=r.motionLeaveImmediately,f=r.onAppearPrepare,h=r.onEnterPrepare,p=r.onLeavePrepare,g=r.onAppearStart,m=r.onEnterStart,v=r.onLeaveStart,y=r.onAppearActive,b=r.onEnterActive,w=r.onLeaveActive,x=r.onAppearEnd,$=r.onEnterEnd,C=r.onLeaveEnd,E=r.onVisibleChanged,I=M0(),T=ge(I,2),N=T[0],k=T[1],O=Wot(Rc),_=ge(O,2),P=_[0],D=_[1],L=M0(null),R=ge(L,2),F=R[0],V=R[1],H=P(),U=S.useRef(!1),W=S.useRef(null);function G(){return n()}var q=S.useRef(!1);function X(){D(Rc),V(null,!0)}var re=zi(function(ke){var fe=P();if(fe!==Rc){var pe=G();if(!(ke&&!ke.deadline&&ke.target!==pe)){var Me=q.current,He;fe===Q1&&Me?He=x==null?void 0:x(pe,ke):fe===J1&&Me?He=$==null?void 0:$(pe,ke):fe===ew&&Me&&(He=C==null?void 0:C(pe,ke)),Me&&He!==!1&&X()}}}),ce=qot(re),ee=ge(ce,1),se=ee[0],ue=function(fe){switch(fe){case Q1:return Y(Y(Y({},ds,f),Lh,g),jh,y);case J1:return Y(Y(Y({},ds,h),Lh,m),jh,b);case ew:return Y(Y(Y({},ds,p),Lh,v),jh,w);default:return{}}},Q=S.useMemo(function(){return ue(H)},[H]),ye=Qot(H,!t,function(ke){if(ke===ds){var fe=Q[ds];return fe?fe(G()):Gte}if(be in Q){var pe;V(((pe=Q[be])===null||pe===void 0?void 0:pe.call(Q,G(),null))||null)}return be===jh&&H!==Rc&&(se(G()),u>0&&(clearTimeout(W.current),W.current=setTimeout(function(){re({deadline:!0})},u))),be===jte&&X(),Zot}),le=ge(ye,2),xe=le[0],be=le[1],$e=qte(be);q.current=$e;var Ne=S.useRef(null);Hte(function(){if(!(U.current&&Ne.current===e)){k(e);var ke=U.current;U.current=!0;var fe;!ke&&e&&s&&(fe=Q1),ke&&e&&a&&(fe=J1),(ke&&!e&&c||!ke&&d&&!e&&c)&&(fe=ew);var pe=ue(fe);fe&&(t||pe[ds])?(D(fe),xe()):D(Rc),Ne.current=e}},[e]),S.useEffect(function(){(H===Q1&&!s||H===J1&&!a||H===ew&&!c)&&D(Rc)},[s,a,c]),S.useEffect(function(){return function(){U.current=!1,clearTimeout(W.current)}},[]);var Ve=S.useRef(!1);S.useEffect(function(){N&&(Ve.current=!0),N!==void 0&&H===Rc&&((Ve.current||N)&&(E==null||E(N)),Ve.current=!0)},[N,H]);var Pe=F;return Q[ds]&&be===Lh&&(Pe=ie({transition:"none"},Pe)),[H,be,Pe,N??e]}function est(t){var e=t;at(t)==="object"&&(e=t.transitionSupport);function n(i,a){return!!(i.motionName&&e&&a!==!1)}var r=S.forwardRef(function(i,a){var o=i.visible,s=o===void 0?!0:o,l=i.removeOnLeave,c=l===void 0?!0:l,u=i.forceRender,d=i.children,f=i.motionName,h=i.leavedClassName,p=i.eventProps,g=S.useContext(Lte),m=g.motion,v=n(i,m),y=S.useRef(),b=S.useRef();function w(){try{return y.current instanceof HTMLElement?y.current:Nw(b.current)}catch{return null}}var x=Jot(v,s,w,i),$=ge(x,4),C=$[0],E=$[1],I=$[2],T=$[3],N=S.useRef(T);T&&(N.current=!0);var k=S.useCallback(function(R){y.current=R,D3(a,R)},[a]),O,_=ie(ie({},p),{},{visible:s});if(!d)O=null;else if(C===Rc)T?O=d(ie({},_),k):!c&&N.current&&h?O=d(ie(ie({},_),{},{className:h}),k):u||!c&&!h?O=d(ie(ie({},_),{},{style:{display:"none"}}),k):O=null;else{var P;E===ds?P="prepare":qte(E)?P="active":E===Lh&&(P="start");var D=YW(f,"".concat(C,"-").concat(P));O=d(ie(ie({},_),{},{className:ve(YW(f,C),Y(Y({},D,D&&P),f,typeof f=="string")),style:I}),k)}if(S.isValidElement(O)&&Uf(O)){var L=Dg(O);L||(O=S.cloneElement(O,{ref:k}))}return S.createElement(Vot,{ref:b},O)});return r.displayName="CSSMotion",r}const Sc=est(Ute);var Q_="add",J_="keep",eP="remove",IN="removed";function tst(t){var e;return t&&at(t)==="object"&&"key"in t?e=t:e={key:t},ie(ie({},e),{},{key:String(e.key)})}function tP(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(tst)}function nst(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,i=e.length,a=tP(t),o=tP(e);a.forEach(function(c){for(var u=!1,d=r;d<i;d+=1){var f=o[d];if(f.key===c.key){r<d&&(n=n.concat(o.slice(r,d).map(function(h){return ie(ie({},h),{},{status:Q_})})),r=d),n.push(ie(ie({},f),{},{status:J_})),r+=1,u=!0;break}}u||n.push(ie(ie({},c),{},{status:eP}))}),r<i&&(n=n.concat(o.slice(r).map(function(c){return ie(ie({},c),{},{status:Q_})})));var s={};n.forEach(function(c){var u=c.key;s[u]=(s[u]||0)+1});var l=Object.keys(s).filter(function(c){return s[c]>1});return l.forEach(function(c){n=n.filter(function(u){var d=u.key,f=u.status;return d!==c||f!==eP}),n.forEach(function(u){u.key===c&&(u.status=J_)})}),n}var rst=["component","children","onVisibleChanged","onAllRemoved"],ist=["status"],ast=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function ost(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sc,n=function(r){Ls(a,r);var i=js(a);function a(){var o;gr(this,a);for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return o=i.call.apply(i,[this].concat(l)),Y(ht(o),"state",{keyEntities:[]}),Y(ht(o),"removeKey",function(u){o.setState(function(d){var f=d.keyEntities.map(function(h){return h.key!==u?h:ie(ie({},h),{},{status:IN})});return{keyEntities:f}},function(){var d=o.state.keyEntities,f=d.filter(function(h){var p=h.status;return p!==IN}).length;f===0&&o.props.onAllRemoved&&o.props.onAllRemoved()})}),o}return vr(a,[{key:"render",value:function(){var s=this,l=this.state.keyEntities,c=this.props,u=c.component,d=c.children,f=c.onVisibleChanged;c.onAllRemoved;var h=Ot(c,rst),p=u||S.Fragment,g={};return ast.forEach(function(m){g[m]=h[m],delete h[m]}),delete h.keys,S.createElement(p,h,l.map(function(m,v){var y=m.status,b=Ot(m,ist),w=y===Q_||y===J_;return S.createElement(e,Qe({},g,{key:b.key,visible:w,eventProps:b,onVisibleChanged:function($){f==null||f($,{key:b.key}),$||s.removeKey(b.key)}}),function(x,$){return d(ie(ie({},x),{},{index:v}),$)})}))}}],[{key:"getDerivedStateFromProps",value:function(s,l){var c=s.keys,u=l.keyEntities,d=tP(c),f=nst(u,d);return{keyEntities:f.filter(function(h){var p=u.find(function(g){var m=g.key;return h.key===m});return!(p&&p.status===IN&&h.status===eP)})}}}]),a}(S.Component);return Y(n,"defaultProps",{component:"div"}),n}const sst=ost(Ute);function lst(t){const{children:e}=t,[,n]=Ku(),{motion:r}=n,i=S.useRef(!1);return i.current=i.current||r===!1,i.current?S.createElement(Bot,{motion:r},e):e}const cst=()=>null;var ust=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const dst=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let Kte;function fst(){return Kte||F0}function hst(t){return Object.keys(t).some(e=>e.endsWith("Color"))}const pst=t=>{const{prefixCls:e,iconPrefixCls:n,theme:r,holderRender:i}=t;e!==void 0&&(Kte=e),r&&hst(r)&&uot(fst(),r)},mst=t=>{const{children:e,csp:n,autoInsertSpaceInButton:r,alert:i,anchor:a,form:o,locale:s,componentSize:l,direction:c,space:u,splitter:d,virtual:f,dropdownMatchSelectWidth:h,popupMatchSelectWidth:p,popupOverflow:g,legacyLocale:m,parentContext:v,iconPrefixCls:y,theme:b,componentDisabled:w,segmented:x,statistic:$,spin:C,calendar:E,carousel:I,cascader:T,collapse:N,typography:k,checkbox:O,descriptions:_,divider:P,drawer:D,skeleton:L,steps:R,image:F,layout:V,list:H,mentions:U,modal:W,progress:G,result:q,slider:X,breadcrumb:re,menu:ce,pagination:ee,input:se,textArea:ue,empty:Q,badge:ye,radio:le,rate:xe,switch:be,transfer:$e,avatar:Ne,message:Ve,tag:Pe,table:ke,card:fe,tabs:pe,timeline:Me,timePicker:He,upload:je,notification:pt,tree:ut,colorPicker:rt,datePicker:ft,rangePicker:We,flex:Xe,wave:Le,dropdown:Se,warning:Fe,tour:me,tooltip:Ie,popover:Ye,popconfirm:Lt,floatButtonGroup:Hn,variant:Dn,inputNumber:yr,treeSelect:or}=t,ln=S.useCallback((Vt,Kt)=>{const{prefixCls:Xr}=t;if(Kt)return Kt;const Yn=Xr||v.getPrefixCls("");return Vt?`${Yn}-${Vt}`:Yn},[v.getPrefixCls,t.prefixCls]),In=y||v.iconPrefixCls||G3,qt=n||v.csp;Dot(In,qt);const dt=jot(b,v.theme,{prefixCls:ln("")}),Ze={csp:qt,autoInsertSpaceInButton:r,alert:i,anchor:a,locale:s||m,direction:c,space:u,splitter:d,virtual:f,popupMatchSelectWidth:p??h,popupOverflow:g,getPrefixCls:ln,iconPrefixCls:In,theme:dt,segmented:x,statistic:$,spin:C,calendar:E,carousel:I,cascader:T,collapse:N,typography:k,checkbox:O,descriptions:_,divider:P,drawer:D,skeleton:L,steps:R,image:F,input:se,textArea:ue,layout:V,list:H,mentions:U,modal:W,progress:G,result:q,slider:X,breadcrumb:re,menu:ce,pagination:ee,empty:Q,badge:ye,radio:le,rate:xe,switch:be,transfer:$e,avatar:Ne,message:Ve,tag:Pe,table:ke,card:fe,tabs:pe,timeline:Me,timePicker:He,upload:je,notification:pt,tree:ut,colorPicker:rt,datePicker:ft,rangePicker:We,flex:Xe,wave:Le,dropdown:Se,warning:Fe,tour:me,tooltip:Ie,popover:Ye,popconfirm:Lt,floatButtonGroup:Hn,variant:Dn,inputNumber:yr,treeSelect:or},it=Object.assign({},v);Object.keys(Ze).forEach(Vt=>{Ze[Vt]!==void 0&&(it[Vt]=Ze[Vt])}),dst.forEach(Vt=>{const Kt=t[Vt];Kt&&(it[Vt]=Kt)}),typeof r<"u"&&(it.button=Object.assign({autoInsertSpace:r},it.button));const zt=TT(()=>it,it,(Vt,Kt)=>{const Xr=Object.keys(Vt),Yn=Object.keys(Kt);return Xr.length!==Yn.length||Xr.some(Zn=>Vt[Zn]!==Kt[Zn])}),{layer:cn}=S.useContext(Ux),vi=S.useMemo(()=>({prefixCls:In,csp:qt,layer:cn?"antd":void 0}),[In,qt,cn]);let Bt=S.createElement(S.Fragment,null,S.createElement(cst,{dropdownMatchSelectWidth:h}),e);const ba=S.useMemo(()=>{var Vt,Kt,Xr,Yn;return Mh(((Vt=yf.Form)===null||Vt===void 0?void 0:Vt.defaultValidateMessages)||{},((Xr=(Kt=zt.locale)===null||Kt===void 0?void 0:Kt.Form)===null||Xr===void 0?void 0:Xr.defaultValidateMessages)||{},((Yn=zt.form)===null||Yn===void 0?void 0:Yn.validateMessages)||{},(o==null?void 0:o.validateMessages)||{})},[zt,o==null?void 0:o.validateMessages]);Object.keys(ba).length>0&&(Bt=S.createElement(jat.Provider,{value:ba},Bt)),s&&(Bt=S.createElement(Hat,{locale:s,_ANT_MARK__:Uat},Bt)),Bt=S.createElement(U3.Provider,{value:vi},Bt),l&&(Bt=S.createElement(fot,{size:l},Bt)),Bt=S.createElement(lst,null,Bt);const yo=S.useMemo(()=>{const Vt=dt||{},{algorithm:Kt,token:Xr,components:Yn,cssVar:Zn}=Vt,ja=ust(Vt,["algorithm","token","components","cssVar"]),Ki=Kt&&(!Array.isArray(Kt)||Kt.length>0)?P_(Kt):Ite,Xi={};Object.entries(Yn||{}).forEach(([Ni,ki])=>{const br=Object.assign({},ki);"algorithm"in br&&(br.algorithm===!0?br.theme=Ki:(Array.isArray(br.algorithm)||typeof br.algorithm=="function")&&(br.theme=P_(br.algorithm)),delete br.algorithm),Xi[Ni]=br});const Yr=Object.assign(Object.assign({},R0),Xr);return Object.assign(Object.assign({},ja),{theme:Ki,token:Yr,components:Xi,override:Object.assign({override:Yr},Xi),cssVar:Zn})},[dt]);return b&&(Bt=S.createElement(Nte.Provider,{value:yo},Bt)),zt.warning&&(Bt=S.createElement(Lat.Provider,{value:zt.warning},Bt)),w!==void 0&&(Bt=S.createElement(dot,{disabled:w},Bt)),S.createElement(pn.Provider,{value:zt},Bt)},Gx=t=>{const e=S.useContext(pn),n=S.useContext(H3);return S.createElement(mst,Object.assign({parentContext:e,legacyLocale:n},t))};Gx.ConfigContext=pn;Gx.SizeContext=am;Gx.config=pst;Gx.useConfig=hot;Object.defineProperty(Gx,"SizeContext",{get:()=>am});var gst={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function Xte(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}function vst(t){return Xte(t)instanceof ShadowRoot}function G$(t){return vst(t)?Xte(t):null}function yst(t){return t.replace(/-(.)/g,function(e,n){return n.toUpperCase()})}function bst(t,e){Wi(t,"[@ant-design/icons] ".concat(e))}function ZW(t){return at(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(at(t.icon)==="object"||typeof t.icon=="function")}function QW(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(e,n){var r=t[n];switch(n){case"class":e.className=r,delete e.class;break;default:delete e[n],e[yst(n)]=r}return e},{})}function nP(t,e,n){return n?B.createElement(t.tag,ie(ie({key:e},QW(t.attrs)),n),(t.children||[]).map(function(r,i){return nP(r,"".concat(e,"-").concat(t.tag,"-").concat(i))})):B.createElement(t.tag,ie({key:e},QW(t.attrs)),(t.children||[]).map(function(r,i){return nP(r,"".concat(e,"-").concat(t.tag,"-").concat(i))}))}function Yte(t){return D0(t)[0]}function Zte(t){return t?Array.isArray(t)?t:[t]:[]}var xst=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,wst=function(e){var n=S.useContext(U3),r=n.csp,i=n.prefixCls,a=n.layer,o=xst;i&&(o=o.replace(/anticon/g,i)),a&&(o="@layer ".concat(a,` {
`).concat(o,`
}`)),S.useEffect(function(){var s=e.current,l=G$(s);ql(o,"@ant-design-icons",{prepend:!a,csp:r,attachTo:l})},[])},Sst=["icon","className","onClick","style","primaryColor","secondaryColor"],ay={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function $st(t){var e=t.primaryColor,n=t.secondaryColor;ay.primaryColor=e,ay.secondaryColor=n||Yte(e),ay.calculated=!!n}function Cst(){return ie({},ay)}var Mg=function(e){var n=e.icon,r=e.className,i=e.onClick,a=e.style,o=e.primaryColor,s=e.secondaryColor,l=Ot(e,Sst),c=S.useRef(),u=ay;if(o&&(u={primaryColor:o,secondaryColor:s||Yte(o)}),wst(c),bst(ZW(n),"icon should be icon definiton, but got ".concat(n)),!ZW(n))return null;var d=n;return d&&typeof d.icon=="function"&&(d=ie(ie({},d),{},{icon:d.icon(u.primaryColor,u.secondaryColor)})),nP(d.icon,"svg-".concat(d.name),ie(ie({className:r,onClick:i,style:a,"data-icon":d.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l),{},{ref:c}))};Mg.displayName="IconReact";Mg.getTwoToneColors=Cst;Mg.setTwoToneColors=$st;function Qte(t){var e=Zte(t),n=ge(e,2),r=n[0],i=n[1];return Mg.setTwoToneColors({primaryColor:r,secondaryColor:i})}function Est(){var t=Mg.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var Tst=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Qte(rm.primary);var Kr=S.forwardRef(function(t,e){var n=t.className,r=t.icon,i=t.spin,a=t.rotate,o=t.tabIndex,s=t.onClick,l=t.twoToneColor,c=Ot(t,Tst),u=S.useContext(U3),d=u.prefixCls,f=d===void 0?"anticon":d,h=u.rootClassName,p=ve(h,f,Y(Y({},"".concat(f,"-").concat(r.name),!!r.name),"".concat(f,"-spin"),!!i||r.name==="loading"),n),g=o;g===void 0&&s&&(g=-1);var m=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,v=Zte(l),y=ge(v,2),b=y[0],w=y[1];return S.createElement("span",Qe({role:"img","aria-label":r.name},c,{ref:e,tabIndex:g,onClick:s,className:p}),S.createElement(Mg,{icon:r,primaryColor:b,secondaryColor:w,style:m}))});Kr.displayName="AntdIcon";Kr.getTwoToneColor=Est;Kr.setTwoToneColor=Qte;var Ist=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:gst}))},Nst=S.forwardRef(Ist),kst={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},Ost=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:kst}))},Jte=S.forwardRef(Ost),Ast={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},_st=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:Ast}))},ene=S.forwardRef(_st),Pst=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,Rst=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,Dst="".concat(Pst," ").concat(Rst).split(/[\s\n]+/),Fst="aria-",Mst="data-";function JW(t,e){return t.indexOf(e)===0}function Lst(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;e===!1?n={aria:!0,data:!0,attr:!0}:e===!0?n={aria:!0}:n=ie({},e);var r={};return Object.keys(t).forEach(function(i){(n.aria&&(i==="role"||JW(i,Fst))||n.data&&JW(i,Mst)||n.attr&&Dst.includes(i))&&(r[i]=t[i])}),r}function tne(t){return t&&B.isValidElement(t)&&t.type===B.Fragment}const jst=(t,e,n)=>B.isValidElement(t)?B.cloneElement(t,typeof n=="function"?n(t.props||{}):n):e;function xf(t,e){return jst(t,t,e)}const nne=t=>{const[,,,,e]=Ku();return e?`${t}-css-var`:""};var ur={TAB:9,ENTER:13,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40},zst={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},Bst=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:zst}))},q$=S.forwardRef(Bst);const rne=B.createContext(void 0),id=100,ine={Modal:id,Drawer:id,Popover:id,Popconfirm:id,Tooltip:id,Tour:id,FloatButton:id},Vst={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function Wst(t){return t in ine}const Ust=(t,e)=>{const[,n]=Ku(),r=B.useContext(rne),i=Wst(t);let a;if(e!==void 0)a=[e,e];else{let o=r??0;i?o+=(r?0:n.zIndexPopupBase)+ine[t]:o+=Vst[t],a=[r===void 0?e:o,o]}return a};function vn(){vn=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(T,N,k,O){return Object.defineProperty(T,N,{value:k,enumerable:!O,configurable:!O,writable:!O})}try{l({},"")}catch{l=function(k,O,_){return k[O]=_}}function c(T,N,k,O){var _=N&&N.prototype instanceof f?N:f,P=Object.create(_.prototype);return l(P,"_invoke",function(D,L,R){var F=1;return function(V,H){if(F===3)throw Error("Generator is already running");if(F===4){if(V==="throw")throw H;return{value:t,done:!0}}for(R.method=V,R.arg=H;;){var U=R.delegate;if(U){var W=x(U,R);if(W){if(W===d)continue;return W}}if(R.method==="next")R.sent=R._sent=R.arg;else if(R.method==="throw"){if(F===1)throw F=4,R.arg;R.dispatchException(R.arg)}else R.method==="return"&&R.abrupt("return",R.arg);F=3;var G=u(D,L,R);if(G.type==="normal"){if(F=R.done?4:2,G.arg===d)continue;return{value:G.arg,done:R.done}}G.type==="throw"&&(F=4,R.method="throw",R.arg=G.arg)}}}(T,k,new E(O||[])),!0),P}function u(T,N,k){try{return{type:"normal",arg:T.call(N,k)}}catch(O){return{type:"throw",arg:O}}}e.wrap=c;var d={};function f(){}function h(){}function p(){}var g={};l(g,a,function(){return this});var m=Object.getPrototypeOf,v=m&&m(m(I([])));v&&v!==n&&r.call(v,a)&&(g=v);var y=p.prototype=f.prototype=Object.create(g);function b(T){["next","throw","return"].forEach(function(N){l(T,N,function(k){return this._invoke(N,k)})})}function w(T,N){function k(_,P,D,L){var R=u(T[_],T,P);if(R.type!=="throw"){var F=R.arg,V=F.value;return V&&at(V)=="object"&&r.call(V,"__await")?N.resolve(V.__await).then(function(H){k("next",H,D,L)},function(H){k("throw",H,D,L)}):N.resolve(V).then(function(H){F.value=H,D(F)},function(H){return k("throw",H,D,L)})}L(R.arg)}var O;l(this,"_invoke",function(_,P){function D(){return new N(function(L,R){k(_,P,L,R)})}return O=O?O.then(D,D):D()},!0)}function x(T,N){var k=N.method,O=T.i[k];if(O===t)return N.delegate=null,k==="throw"&&T.i.return&&(N.method="return",N.arg=t,x(T,N),N.method==="throw")||k!=="return"&&(N.method="throw",N.arg=new TypeError("The iterator does not provide a '"+k+"' method")),d;var _=u(O,T.i,N.arg);if(_.type==="throw")return N.method="throw",N.arg=_.arg,N.delegate=null,d;var P=_.arg;return P?P.done?(N[T.r]=P.value,N.next=T.n,N.method!=="return"&&(N.method="next",N.arg=t),N.delegate=null,d):P:(N.method="throw",N.arg=new TypeError("iterator result is not an object"),N.delegate=null,d)}function $(T){this.tryEntries.push(T)}function C(T){var N=T[4]||{};N.type="normal",N.arg=t,T[4]=N}function E(T){this.tryEntries=[[-1]],T.forEach($,this),this.reset(!0)}function I(T){if(T!=null){var N=T[a];if(N)return N.call(T);if(typeof T.next=="function")return T;if(!isNaN(T.length)){var k=-1,O=function _(){for(;++k<T.length;)if(r.call(T,k))return _.value=T[k],_.done=!1,_;return _.value=t,_.done=!0,_};return O.next=O}}throw new TypeError(at(T)+" is not iterable")}return h.prototype=p,l(y,"constructor",p),l(p,"constructor",h),h.displayName=l(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(T){var N=typeof T=="function"&&T.constructor;return!!N&&(N===h||(N.displayName||N.name)==="GeneratorFunction")},e.mark=function(T){return Object.setPrototypeOf?Object.setPrototypeOf(T,p):(T.__proto__=p,l(T,s,"GeneratorFunction")),T.prototype=Object.create(y),T},e.awrap=function(T){return{__await:T}},b(w.prototype),l(w.prototype,o,function(){return this}),e.AsyncIterator=w,e.async=function(T,N,k,O,_){_===void 0&&(_=Promise);var P=new w(c(T,N,k,O),_);return e.isGeneratorFunction(N)?P:P.next().then(function(D){return D.done?D.value:P.next()})},b(y),l(y,s,"Generator"),l(y,a,function(){return this}),l(y,"toString",function(){return"[object Generator]"}),e.keys=function(T){var N=Object(T),k=[];for(var O in N)k.unshift(O);return function _(){for(;k.length;)if((O=k.pop())in N)return _.value=O,_.done=!1,_;return _.done=!0,_}},e.values=I,E.prototype={constructor:E,reset:function(N){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!N)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=t)},stop:function(){this.done=!0;var N=this.tryEntries[0][4];if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var k=this;function O(V){D.type="throw",D.arg=N,k.next=V}for(var _=k.tryEntries.length-1;_>=0;--_){var P=this.tryEntries[_],D=P[4],L=this.prev,R=P[1],F=P[2];if(P[0]===-1)return O("end"),!1;if(!R&&!F)throw Error("try statement without catch or finally");if(P[0]!=null&&P[0]<=L){if(L<R)return this.method="next",this.arg=t,O(R),!0;if(L<F)return O(F),!1}}},abrupt:function(N,k){for(var O=this.tryEntries.length-1;O>=0;--O){var _=this.tryEntries[O];if(_[0]>-1&&_[0]<=this.prev&&this.prev<_[2]){var P=_;break}}P&&(N==="break"||N==="continue")&&P[0]<=k&&k<=P[2]&&(P=null);var D=P?P[4]:{};return D.type=N,D.arg=k,P?(this.method="next",this.next=P[2],d):this.complete(D)},complete:function(N,k){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&k&&(this.next=k),d},finish:function(N){for(var k=this.tryEntries.length-1;k>=0;--k){var O=this.tryEntries[k];if(O[2]===N)return this.complete(O[4],O[3]),C(O),d}},catch:function(N){for(var k=this.tryEntries.length-1;k>=0;--k){var O=this.tryEntries[k];if(O[0]===N){var _=O[4];if(_.type==="throw"){var P=_.arg;C(O)}return P}}throw Error("illegal catch attempt")},delegateYield:function(N,k,O){return this.delegate={i:I(N),r:k,n:O},this.method==="next"&&(this.arg=t),d}},e}function e6(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(c){return void n(c)}s.done?e(l):Promise.resolve(l).then(r,i)}function ro(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(l){e6(a,r,i,o,s,"next",l)}function s(l){e6(a,r,i,o,s,"throw",l)}o(void 0)})}}var qx=ie({},roe),Hst=qx.version,NN=qx.render,Gst=qx.unmountComponentAtNode,AT;try{var qst=Number((Hst||"").split(".")[0]);qst>=18&&(AT=qx.createRoot)}catch{}function t6(t){var e=qx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&at(e)==="object"&&(e.usingClientEntryPoint=t)}var K$="__rc_react_root__";function Kst(t,e){t6(!0);var n=e[K$]||AT(e);t6(!1),n.render(t),e[K$]=n}function Xst(t,e){NN==null||NN(t,e)}function Yst(t,e){if(AT){Kst(t,e);return}Xst(t,e)}function Zst(t){return rP.apply(this,arguments)}function rP(){return rP=ro(vn().mark(function t(e){return vn().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.resolve().then(function(){var i;(i=e[K$])===null||i===void 0||i.unmount(),delete e[K$]}));case 1:case"end":return r.stop()}},t)})),rP.apply(this,arguments)}function Qst(t){Gst(t)}function Jst(t){return iP.apply(this,arguments)}function iP(){return iP=ro(vn().mark(function t(e){return vn().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(AT===void 0){r.next=2;break}return r.abrupt("return",Zst(e));case 2:Qst(e);case 3:case"end":return r.stop()}},t)})),iP.apply(this,arguments)}const elt=(t,e)=>(Yst(t,e),()=>Jst(e));let tlt=elt;function nlt(t){return tlt}const kN=()=>({height:0,opacity:0}),n6=t=>{const{scrollHeight:e}=t;return{height:e,opacity:1}},rlt=t=>({height:t?t.offsetHeight:0}),ON=(t,e)=>(e==null?void 0:e.deadline)===!0||e.propertyName==="height",ilt=(t=F0)=>({motionName:`${t}-motion-collapse`,onAppearStart:kN,onEnterStart:kN,onAppearActive:n6,onEnterActive:n6,onLeaveStart:rlt,onLeaveActive:kN,onAppearEnd:ON,onEnterEnd:ON,onLeaveEnd:ON,motionDeadline:500}),ane=(t,e,n)=>n!==void 0?n:`${t}-${e}`;function Jo(t,e){var n=Object.assign({},t);return Array.isArray(e)&&e.forEach(function(r){delete n[r]}),n}const X3=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox(),n=e.width,r=e.height;if(n||r)return!0}if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),a=i.width,o=i.height;if(a||o)return!0}}return!1},alt=t=>{const{componentCls:e,colorPrimary:n}=t;return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${t.motionEaseOutCirc}`,`opacity 2s ${t.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${t.motionDurationSlow} ${t.motionEaseInOut}`,`opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`].join(",")}}}}},olt=_ot("Wave",t=>[alt(t)]),one=`${F0}-wave-target`;function AN(t){return t&&t!=="#fff"&&t!=="#ffffff"&&t!=="rgb(255, 255, 255)"&&t!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(t)&&t!=="transparent"}function slt(t){const{borderTopColor:e,borderColor:n,backgroundColor:r}=getComputedStyle(t);return AN(e)?e:AN(n)?n:AN(r)?r:null}function _N(t){return Number.isNaN(t)?0:t}const llt=t=>{const{className:e,target:n,component:r,registerUnmount:i}=t,a=S.useRef(null),o=S.useRef(null);S.useEffect(()=>{o.current=i()},[]);const[s,l]=S.useState(null),[c,u]=S.useState([]),[d,f]=S.useState(0),[h,p]=S.useState(0),[g,m]=S.useState(0),[v,y]=S.useState(0),[b,w]=S.useState(!1),x={left:d,top:h,width:g,height:v,borderRadius:c.map(E=>`${E}px`).join(" ")};s&&(x["--wave-color"]=s);function $(){const E=getComputedStyle(n);l(slt(n));const I=E.position==="static",{borderLeftWidth:T,borderTopWidth:N}=E;f(I?n.offsetLeft:_N(-parseFloat(T))),p(I?n.offsetTop:_N(-parseFloat(N))),m(n.offsetWidth),y(n.offsetHeight);const{borderTopLeftRadius:k,borderTopRightRadius:O,borderBottomLeftRadius:_,borderBottomRightRadius:P}=E;u([k,O,P,_].map(D=>_N(parseFloat(D))))}if(S.useEffect(()=>{if(n){const E=ci(()=>{$(),w(!0)});let I;return typeof ResizeObserver<"u"&&(I=new ResizeObserver($),I.observe(n)),()=>{ci.cancel(E),I==null||I.disconnect()}}},[]),!b)return null;const C=(r==="Checkbox"||r==="Radio")&&(n==null?void 0:n.classList.contains(one));return S.createElement(Sc,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(E,I)=>{var T,N;if(I.deadline||I.propertyName==="opacity"){const k=(T=a.current)===null||T===void 0?void 0:T.parentElement;(N=o.current)===null||N===void 0||N.call(o).then(()=>{k==null||k.remove()})}return!1}},({className:E},I)=>S.createElement("div",{ref:qu(a,I),className:ve(e,E,{"wave-quick":C}),style:x}))},clt=(t,e)=>{var n;const{component:r}=e;if(r==="Checkbox"&&!(!((n=t.querySelector("input"))===null||n===void 0)&&n.checked))return;const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",t==null||t.insertBefore(i,t==null?void 0:t.firstChild);const a=nlt();let o=null;function s(){return o}o=a(S.createElement(llt,Object.assign({},e,{target:t,registerUnmount:s})),i)},ult=(t,e,n)=>{const{wave:r}=S.useContext(pn),[,i,a]=Ku(),o=zi(c=>{const u=t.current;if(r!=null&&r.disabled||!u)return;const d=u.querySelector(`.${one}`)||u,{showEffect:f}=r||{};(f||clt)(d,{className:e,token:i,component:n,event:c,hashId:a})}),s=S.useRef(null);return c=>{ci.cancel(s.current),s.current=ci(()=>{o(c)})}},dlt=t=>{const{children:e,disabled:n,component:r}=t,{getPrefixCls:i}=S.useContext(pn),a=S.useRef(null),o=i("wave"),[,s]=olt(o),l=ult(a,ve(o,s),r);if(B.useEffect(()=>{const u=a.current;if(!u||u.nodeType!==1||n)return;const d=f=>{!X3(f.target)||!u.getAttribute||u.getAttribute("disabled")||u.disabled||u.className.includes("disabled")||u.className.includes("-leave")||l(f)};return u.addEventListener("click",d,!0),()=>{u.removeEventListener("click",d,!0)}},[n]),!B.isValidElement(e))return e??null;const c=Uf(e)?qu(Dg(e),a):a;return xf(e,{ref:c})},Kx=t=>{const e=B.useContext(am);return B.useMemo(()=>t?typeof t=="string"?t??e:typeof t=="function"?t(e):e:e,[t,e])},flt=t=>{const{componentCls:e}=t;return{[e]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},hlt=t=>{const{componentCls:e,antCls:n}=t;return{[e]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${e}-item:empty`]:{display:"none"},[`${e}-item > ${n}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},plt=t=>{const{componentCls:e}=t;return{[e]:{"&-gap-row-small":{rowGap:t.spaceGapSmallSize},"&-gap-row-middle":{rowGap:t.spaceGapMiddleSize},"&-gap-row-large":{rowGap:t.spaceGapLargeSize},"&-gap-col-small":{columnGap:t.spaceGapSmallSize},"&-gap-col-middle":{columnGap:t.spaceGapMiddleSize},"&-gap-col-large":{columnGap:t.spaceGapLargeSize}}}},sne=vo("Space",t=>{const e=_r(t,{spaceGapSmallSize:t.paddingXS,spaceGapMiddleSize:t.padding,spaceGapLargeSize:t.paddingLG});return[hlt(e),plt(e),flt(e)]},()=>({}),{resetStyle:!1});var lne=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const _T=S.createContext(null),cne=(t,e)=>{const n=S.useContext(_T),r=S.useMemo(()=>{if(!n)return"";const{compactDirection:i,isFirstItem:a,isLastItem:o}=n,s=i==="vertical"?"-vertical-":"-";return ve(`${t}-compact${s}item`,{[`${t}-compact${s}first-item`]:a,[`${t}-compact${s}last-item`]:o,[`${t}-compact${s}item-rtl`]:e==="rtl"})},[t,e,n]);return{compactSize:n==null?void 0:n.compactSize,compactDirection:n==null?void 0:n.compactDirection,compactItemClassnames:r}},mlt=t=>{const{children:e}=t;return S.createElement(_T.Provider,{value:null},e)},glt=t=>{const{children:e}=t,n=lne(t,["children"]);return S.createElement(_T.Provider,{value:S.useMemo(()=>n,[n])},e)},vlt=t=>{const{getPrefixCls:e,direction:n}=S.useContext(pn),{size:r,direction:i,block:a,prefixCls:o,className:s,rootClassName:l,children:c}=t,u=lne(t,["size","direction","block","prefixCls","className","rootClassName","children"]),d=Kx(b=>r??b),f=e("space-compact",o),[h,p]=sne(f),g=ve(f,p,{[`${f}-rtl`]:n==="rtl",[`${f}-block`]:a,[`${f}-vertical`]:i==="vertical"},s,l),m=S.useContext(_T),v=wl(c),y=S.useMemo(()=>v.map((b,w)=>{const x=(b==null?void 0:b.key)||`${f}-item-${w}`;return S.createElement(glt,{key:x,compactSize:d,compactDirection:i,isFirstItem:w===0&&(!m||(m==null?void 0:m.isFirstItem)),isLastItem:w===v.length-1&&(!m||(m==null?void 0:m.isLastItem))},b)}),[r,v,m]);return v.length===0?null:h(S.createElement("div",Object.assign({className:g},u),y))};var ylt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const une=S.createContext(void 0),blt=t=>{const{getPrefixCls:e,direction:n}=S.useContext(pn),{prefixCls:r,size:i,className:a}=t,o=ylt(t,["prefixCls","size","className"]),s=e("btn-group",r),[,,l]=Ku(),c=S.useMemo(()=>{switch(i){case"large":return"lg";case"small":return"sm";default:return""}},[i]),u=ve(s,{[`${s}-${c}`]:c,[`${s}-rtl`]:n==="rtl"},a,l);return S.createElement(une.Provider,{value:i},S.createElement("div",Object.assign({},o,{className:u})))},r6=/^[\u4E00-\u9FA5]{2}$/,aP=r6.test.bind(r6);function i6(t){return typeof t=="string"}function PN(t){return t==="text"||t==="link"}function xlt(t,e){if(t==null)return;const n=e?" ":"";return typeof t!="string"&&typeof t!="number"&&i6(t.type)&&aP(t.props.children)?xf(t,{children:t.props.children.split("").join(n)}):i6(t)?aP(t)?B.createElement("span",null,t.split("").join(n)):B.createElement("span",null,t):tne(t)?B.createElement("span",null,t):t}function wlt(t,e){let n=!1;const r=[];return B.Children.forEach(t,i=>{const a=typeof i,o=a==="string"||a==="number";if(n&&o){const s=r.length-1,l=r[s];r[s]=`${l}${i}`}else r.push(i);n=o}),B.Children.map(r,i=>xlt(i,e))}["default","primary","danger"].concat(Be(bf));const oP=S.forwardRef((t,e)=>{const{className:n,style:r,children:i,prefixCls:a}=t,o=ve(`${a}-icon`,n);return B.createElement("span",{ref:e,className:o,style:r},i)}),a6=S.forwardRef((t,e)=>{const{prefixCls:n,className:r,style:i,iconClassName:a}=t,o=ve(`${n}-loading-icon`,r);return B.createElement(oP,{prefixCls:n,className:o,style:i,ref:e},B.createElement(q$,{className:a}))}),RN=()=>({width:0,opacity:0,transform:"scale(0)"}),DN=t=>({width:t.scrollWidth,opacity:1,transform:"scale(1)"}),Slt=t=>{const{prefixCls:e,loading:n,existIcon:r,className:i,style:a,mount:o}=t,s=!!n;return r?B.createElement(a6,{prefixCls:e,className:i,style:a}):B.createElement(Sc,{visible:s,motionName:`${e}-loading-icon-motion`,motionAppear:!o,motionEnter:!o,motionLeave:!o,removeOnLeave:!0,onAppearStart:RN,onAppearActive:DN,onEnterStart:RN,onEnterActive:DN,onLeaveStart:DN,onLeaveActive:RN},({className:l,style:c},u)=>{const d=Object.assign(Object.assign({},a),c);return B.createElement(a6,{prefixCls:e,className:ve(i,l),style:d,ref:u})})},o6=(t,e)=>({[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineEndColor:e}}},"&:not(:first-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineStartColor:e}}}}}),$lt=t=>{const{componentCls:e,fontSize:n,lineWidth:r,groupBorderColor:i,colorErrorHover:a}=t;return{[`${e}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:t.calc(r).mul(-1).equal(),[`&, & > ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[e]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${e}-icon-only`]:{fontSize:n}},o6(`${e}-primary`,i),o6(`${e}-danger`,a)]}},ei=Math.round;function FN(t,e){const n=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map(i=>parseFloat(i));for(let i=0;i<3;i+=1)r[i]=e(r[i]||0,n[i]||"",i);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const s6=(t,e,n)=>n===0?t:t/100;function gv(t,e){const n=e||255;return t>n?n:t<0?0:t}let dne=class fne{constructor(e){Y(this,"isValid",!0),Y(this,"r",0),Y(this,"g",0),Y(this,"b",0),Y(this,"a",1),Y(this,"_h",void 0),Y(this,"_s",void 0),Y(this,"_l",void 0),Y(this,"_v",void 0),Y(this,"_max",void 0),Y(this,"_min",void 0),Y(this,"_brightness",void 0);function n(i){return i[0]in e&&i[1]in e&&i[2]in e}if(e)if(typeof e=="string"){let a=function(o){return i.startsWith(o)};var r=a;const i=e.trim();/^#?[A-F\d]{3,8}$/i.test(i)?this.fromHexString(i):a("rgb")?this.fromRgbString(i):a("hsl")?this.fromHslString(i):(a("hsv")||a("hsb"))&&this.fromHsvString(i)}else if(e instanceof fne)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(n("rgb"))this.r=gv(e.r),this.g=gv(e.g),this.b=gv(e.b),this.a=typeof e.a=="number"?gv(e.a,1):1;else if(n("hsl"))this.fromHsl(e);else if(n("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const n=this.toHsv();return n.h=e,this._c(n)}getLuminance(){function e(a){const o=a/255;return o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)}const n=e(this.r),r=e(this.g),i=e(this.b);return .2126*n+.7152*r+.0722*i}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=ei(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()-e/100;return i<0&&(i=0),this._c({h:n,s:r,l:i,a:this.a})}lighten(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()+e/100;return i>1&&(i=1),this._c({h:n,s:r,l:i,a:this.a})}mix(e,n=50){const r=this._c(e),i=n/100,a=s=>(r[s]-this[s])*i+this[s],o={r:ei(a("r")),g:ei(a("g")),b:ei(a("b")),a:ei(a("a")*100)/100};return this._c(o)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const n=this._c(e),r=this.a+n.a*(1-this.a),i=a=>ei((this[a]*this.a+n[a]*n.a*(1-this.a))/r);return this._c({r:i("r"),g:i("g"),b:i("b"),a:r})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const n=(this.r||0).toString(16);e+=n.length===2?n:"0"+n;const r=(this.g||0).toString(16);e+=r.length===2?r:"0"+r;const i=(this.b||0).toString(16);if(e+=i.length===2?i:"0"+i,typeof this.a=="number"&&this.a>=0&&this.a<1){const a=ei(this.a*255).toString(16);e+=a.length===2?a:"0"+a}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),n=ei(this.getSaturation()*100),r=ei(this.getLightness()*100);return this.a!==1?`hsla(${e},${n}%,${r}%,${this.a})`:`hsl(${e},${n}%,${r}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,n,r){const i=this.clone();return i[e]=gv(n,r),i}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const n=e.replace("#","");function r(i,a){return parseInt(n[i]+n[a||i],16)}n.length<6?(this.r=r(0),this.g=r(1),this.b=r(2),this.a=n[3]?r(3)/255:1):(this.r=r(0,1),this.g=r(2,3),this.b=r(4,5),this.a=n[6]?r(6,7)/255:1)}fromHsl({h:e,s:n,l:r,a:i}){if(this._h=e%360,this._s=n,this._l=r,this.a=typeof i=="number"?i:1,n<=0){const f=ei(r*255);this.r=f,this.g=f,this.b=f}let a=0,o=0,s=0;const l=e/60,c=(1-Math.abs(2*r-1))*n,u=c*(1-Math.abs(l%2-1));l>=0&&l<1?(a=c,o=u):l>=1&&l<2?(a=u,o=c):l>=2&&l<3?(o=c,s=u):l>=3&&l<4?(o=u,s=c):l>=4&&l<5?(a=u,s=c):l>=5&&l<6&&(a=c,s=u);const d=r-c/2;this.r=ei((a+d)*255),this.g=ei((o+d)*255),this.b=ei((s+d)*255)}fromHsv({h:e,s:n,v:r,a:i}){this._h=e%360,this._s=n,this._v=r,this.a=typeof i=="number"?i:1;const a=ei(r*255);if(this.r=a,this.g=a,this.b=a,n<=0)return;const o=e/60,s=Math.floor(o),l=o-s,c=ei(r*(1-n)*255),u=ei(r*(1-n*l)*255),d=ei(r*(1-n*(1-l))*255);switch(s){case 0:this.g=d,this.b=c;break;case 1:this.r=u,this.b=c;break;case 2:this.r=c,this.b=d;break;case 3:this.r=c,this.g=u;break;case 4:this.r=d,this.g=c;break;case 5:default:this.g=c,this.b=u;break}}fromHsvString(e){const n=FN(e,s6);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(e){const n=FN(e,s6);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(e){const n=FN(e,(r,i)=>i.includes("%")?ei(r/100*255):r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}};var Clt=["b"],Elt=["v"],MN=function(e){return Math.round(Number(e||0))},Tlt=function(e){if(e instanceof dne)return e;if(e&&at(e)==="object"&&"h"in e&&"b"in e){var n=e,r=n.b,i=Ot(n,Clt);return ie(ie({},i),{},{v:r})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},j0=function(t){Ls(n,t);var e=js(n);function n(r){return gr(this,n),e.call(this,Tlt(r))}return vr(n,[{key:"toHsbString",value:function(){var i=this.toHsb(),a=MN(i.s*100),o=MN(i.b*100),s=MN(i.h),l=i.a,c="hsb(".concat(s,", ").concat(a,"%, ").concat(o,"%)"),u="hsba(".concat(s,", ").concat(a,"%, ").concat(o,"%, ").concat(l.toFixed(l===0?0:2),")");return l===1?c:u}},{key:"toHsb",value:function(){var i=this.toHsv(),a=i.v,o=Ot(i,Elt);return ie(ie({},o),{},{b:a,a:this.a})}}]),n}(dne),Ilt=function(e){return e instanceof j0?e:new j0(e)};Ilt("#1677ff");const Nlt=(t,e)=>(t==null?void 0:t.replace(/[^\w/]/g,"").slice(0,e?8:6))||"",klt=(t,e)=>t?Nlt(t,e):"";let Olt=function(){function t(e){gr(this,t);var n;if(this.cleared=!1,e instanceof t){this.metaColor=e.metaColor.clone(),this.colors=(n=e.colors)===null||n===void 0?void 0:n.map(i=>({color:new t(i.color),percent:i.percent})),this.cleared=e.cleared;return}const r=Array.isArray(e);r&&e.length?(this.colors=e.map(({color:i,percent:a})=>({color:new t(i),percent:a})),this.metaColor=new j0(this.colors[0].color.metaColor)):this.metaColor=new j0(r?"":e),(!e||r&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return vr(t,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return klt(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:n}=this;return n?`linear-gradient(90deg, ${n.map(i=>`${i.color.toRgbString()} ${i.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(n){return!n||this.isGradient()!==n.isGradient()?!1:this.isGradient()?this.colors.length===n.colors.length&&this.colors.every((r,i)=>{const a=n.colors[i];return r.percent===a.percent&&r.color.equals(a.color)}):this.toHexString()===n.toHexString()}}])}();const Alt=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}}),_lt=t=>({animationDuration:t,animationFillMode:"both"}),Plt=t=>({animationDuration:t,animationFillMode:"both"}),Y3=(t,e,n,r,i=!1)=>{const a=i?"&":"";return{[`
      ${a}${t}-enter,
      ${a}${t}-appear
    `]:Object.assign(Object.assign({},_lt(r)),{animationPlayState:"paused"}),[`${a}${t}-leave`]:Object.assign(Object.assign({},Plt(r)),{animationPlayState:"paused"}),[`
      ${a}${t}-enter${t}-enter-active,
      ${a}${t}-appear${t}-appear-active
    `]:{animationName:e,animationPlayState:"running"},[`${a}${t}-leave${t}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},Rlt=new hn("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),Dlt=new hn("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),Flt=(t,e=!1)=>{const{antCls:n}=t,r=`${n}-fade`,i=e?"&":"";return[Y3(r,Rlt,Dlt,t.motionDurationMid,e),{[`
        ${i}${r}-enter,
        ${i}${r}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${i}${r}-leave`]:{animationTimingFunction:"linear"}}]},Mlt=new hn("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),Llt=new hn("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),jlt=new hn("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),zlt=new hn("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),Blt=new hn("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),Vlt=new hn("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),Wlt=new hn("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),Ult=new hn("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),Hlt={"slide-up":{inKeyframes:Mlt,outKeyframes:Llt},"slide-down":{inKeyframes:jlt,outKeyframes:zlt},"slide-left":{inKeyframes:Blt,outKeyframes:Vlt},"slide-right":{inKeyframes:Wlt,outKeyframes:Ult}},l6=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:i,outKeyframes:a}=Hlt[e];return[Y3(r,i,a,t.motionDurationMid),{[`
      ${r}-enter,
      ${r}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:t.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInQuint}}]},Glt=new hn("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),qlt=new hn("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),c6=new hn("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),u6=new hn("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),Klt=new hn("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),Xlt=new hn("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),Ylt=new hn("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),Zlt=new hn("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),Qlt=new hn("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),Jlt=new hn("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),ect=new hn("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),tct=new hn("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),nct={zoom:{inKeyframes:Glt,outKeyframes:qlt},"zoom-big":{inKeyframes:c6,outKeyframes:u6},"zoom-big-fast":{inKeyframes:c6,outKeyframes:u6},"zoom-left":{inKeyframes:Ylt,outKeyframes:Zlt},"zoom-right":{inKeyframes:Qlt,outKeyframes:Jlt},"zoom-up":{inKeyframes:Klt,outKeyframes:Xlt},"zoom-down":{inKeyframes:ect,outKeyframes:tct}},rct=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:i,outKeyframes:a}=nct[e];return[Y3(r,i,a,t.motionDurationFast),{[`
        ${r}-enter,
        ${r}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},ict=(t,e)=>{const{r:n,g:r,b:i,a}=t.toRgb(),o=new j0(t.toRgbString()).onBackground(e).toHsv();return a<=.5?o.v>.5:n*.299+r*.587+i*.114>192},hne=t=>{const{paddingInline:e,onlyIconSize:n}=t;return _r(t,{buttonPaddingHorizontal:e,buttonPaddingVertical:0,buttonIconOnlyFontSize:n})},pne=t=>{var e,n,r,i,a,o;const s=(e=t.contentFontSize)!==null&&e!==void 0?e:t.fontSize,l=(n=t.contentFontSizeSM)!==null&&n!==void 0?n:t.fontSize,c=(r=t.contentFontSizeLG)!==null&&r!==void 0?r:t.fontSizeLG,u=(i=t.contentLineHeight)!==null&&i!==void 0?i:Dw(s),d=(a=t.contentLineHeightSM)!==null&&a!==void 0?a:Dw(l),f=(o=t.contentLineHeightLG)!==null&&o!==void 0?o:Dw(c),h=ict(new Olt(t.colorBgSolid),"#fff")?"#000":"#fff",p=bf.reduce((g,m)=>Object.assign(Object.assign({},g),{[`${m}ShadowColor`]:`0 ${Ce(t.controlOutlineWidth)} 0 ${Fv(t[`${m}1`],t.colorBgContainer)}`}),{});return Object.assign(Object.assign({},p),{fontWeight:400,defaultShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlTmpOutline}`,primaryShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlOutline}`,dangerShadow:`0 ${t.controlOutlineWidth}px 0 ${t.colorErrorOutline}`,primaryColor:t.colorTextLightSolid,dangerColor:t.colorTextLightSolid,borderColorDisabled:t.colorBorder,defaultGhostColor:t.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:t.colorBgContainer,paddingInline:t.paddingContentHorizontal-t.lineWidth,paddingInlineLG:t.paddingContentHorizontal-t.lineWidth,paddingInlineSM:8-t.lineWidth,onlyIconSize:"inherit",onlyIconSizeSM:"inherit",onlyIconSizeLG:"inherit",groupBorderColor:t.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:t.colorText,textTextHoverColor:t.colorText,textTextActiveColor:t.colorText,textHoverBg:t.colorFillTertiary,defaultColor:t.colorText,defaultBg:t.colorBgContainer,defaultBorderColor:t.colorBorder,defaultBorderColorDisabled:t.colorBorder,defaultHoverBg:t.colorBgContainer,defaultHoverColor:t.colorPrimaryHover,defaultHoverBorderColor:t.colorPrimaryHover,defaultActiveBg:t.colorBgContainer,defaultActiveColor:t.colorPrimaryActive,defaultActiveBorderColor:t.colorPrimaryActive,solidTextColor:h,contentFontSize:s,contentFontSizeSM:l,contentFontSizeLG:c,contentLineHeight:u,contentLineHeightSM:d,contentLineHeightLG:f,paddingBlock:Math.max((t.controlHeight-s*u)/2-t.lineWidth,0),paddingBlockSM:Math.max((t.controlHeightSM-l*d)/2-t.lineWidth,0),paddingBlockLG:Math.max((t.controlHeightLG-c*f)/2-t.lineWidth,0)})},act=t=>{const{componentCls:e,iconCls:n,fontWeight:r,opacityLoading:i,motionDurationSlow:a,motionEaseInOut:o,marginXS:s,calc:l}=t;return{[e]:{outline:"none",position:"relative",display:"inline-flex",gap:t.marginXS,alignItems:"center",justifyContent:"center",fontWeight:r,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${Ce(t.lineWidth)} ${t.lineType} transparent`,cursor:"pointer",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:t.colorText,"&:disabled > *":{pointerEvents:"none"},[`${e}-icon > svg`]:Dte(),"> a":{color:"currentColor"},"&:not(:disabled)":L0(t),[`&${e}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${e}-two-chinese-chars > *:not(${n})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${e}-icon-only`]:{paddingInline:0,[`&${e}-compact-item`]:{flex:"none"},[`&${e}-round`]:{width:"auto"}},[`&${e}-loading`]:{opacity:i,cursor:"default"},[`${e}-loading-icon`]:{transition:["width","opacity","margin"].map(c=>`${c} ${a} ${o}`).join(",")},[`&:not(${e}-icon-end)`]:{[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:l(s).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:l(s).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:l(s).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:l(s).mul(-1).equal()}}}}}},mne=(t,e,n)=>({[`&:not(:disabled):not(${t}-disabled)`]:{"&:hover":e,"&:active":n}}),oct=t=>({minWidth:t.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),sct=t=>({borderRadius:t.controlHeight,paddingInlineStart:t.calc(t.controlHeight).div(2).equal(),paddingInlineEnd:t.calc(t.controlHeight).div(2).equal()}),lct=t=>({cursor:"not-allowed",borderColor:t.borderColorDisabled,color:t.colorTextDisabled,background:t.colorBgContainerDisabled,boxShadow:"none"}),PT=(t,e,n,r,i,a,o,s)=>({[`&${t}-background-ghost`]:Object.assign(Object.assign({color:n||void 0,background:e,borderColor:r||void 0,boxShadow:"none"},mne(t,Object.assign({background:e},o),Object.assign({background:e},s))),{"&:disabled":{cursor:"not-allowed",color:i||void 0,borderColor:a||void 0}})}),cct=t=>({[`&:disabled, &${t.componentCls}-disabled`]:Object.assign({},lct(t))}),uct=t=>({[`&:disabled, &${t.componentCls}-disabled`]:{cursor:"not-allowed",color:t.colorTextDisabled}}),RT=(t,e,n,r)=>{const a=r&&["link","text"].includes(r)?uct:cct;return Object.assign(Object.assign({},a(t)),mne(t.componentCls,e,n))},DT=(t,e,n,r,i)=>({[`&${t.componentCls}-variant-solid`]:Object.assign({color:e,background:n},RT(t,r,i))}),FT=(t,e,n,r,i)=>({[`&${t.componentCls}-variant-outlined, &${t.componentCls}-variant-dashed`]:Object.assign({borderColor:e,background:n},RT(t,r,i))}),MT=t=>({[`&${t.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),LT=(t,e,n,r)=>({[`&${t.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:e},RT(t,n,r))}),Sl=(t,e,n,r,i)=>({[`&${t.componentCls}-variant-${n}`]:Object.assign({color:e,boxShadow:"none"},RT(t,r,i,n))}),dct=t=>{const{componentCls:e}=t;return bf.reduce((n,r)=>{const i=t[`${r}6`],a=t[`${r}1`],o=t[`${r}5`],s=t[`${r}2`],l=t[`${r}3`],c=t[`${r}7`];return Object.assign(Object.assign({},n),{[`&${e}-color-${r}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:i,boxShadow:t[`${r}ShadowColor`]},DT(t,t.colorTextLightSolid,i,{background:o},{background:c})),FT(t,i,t.colorBgContainer,{color:o,borderColor:o,background:t.colorBgContainer},{color:c,borderColor:c,background:t.colorBgContainer})),MT(t)),LT(t,a,{background:s},{background:l})),Sl(t,i,"link",{color:o},{color:c})),Sl(t,i,"text",{color:o,background:a},{color:c,background:l}))})},{})},fct=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.defaultColor,boxShadow:t.defaultShadow},DT(t,t.solidTextColor,t.colorBgSolid,{color:t.solidTextColor,background:t.colorBgSolidHover},{color:t.solidTextColor,background:t.colorBgSolidActive})),MT(t)),LT(t,t.colorFillTertiary,{background:t.colorFillSecondary},{background:t.colorFill})),PT(t.componentCls,t.ghostBg,t.defaultGhostColor,t.defaultGhostBorderColor,t.colorTextDisabled,t.colorBorder)),Sl(t,t.textTextColor,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),hct=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorPrimary,boxShadow:t.primaryShadow},FT(t,t.colorPrimary,t.colorBgContainer,{color:t.colorPrimaryTextHover,borderColor:t.colorPrimaryHover,background:t.colorBgContainer},{color:t.colorPrimaryTextActive,borderColor:t.colorPrimaryActive,background:t.colorBgContainer})),MT(t)),LT(t,t.colorPrimaryBg,{background:t.colorPrimaryBgHover},{background:t.colorPrimaryBorder})),Sl(t,t.colorPrimaryText,"text",{color:t.colorPrimaryTextHover,background:t.colorPrimaryBg},{color:t.colorPrimaryTextActive,background:t.colorPrimaryBorder})),Sl(t,t.colorPrimaryText,"link",{color:t.colorPrimaryTextHover,background:t.linkHoverBg},{color:t.colorPrimaryTextActive})),PT(t.componentCls,t.ghostBg,t.colorPrimary,t.colorPrimary,t.colorTextDisabled,t.colorBorder,{color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),pct=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorError,boxShadow:t.dangerShadow},DT(t,t.dangerColor,t.colorError,{background:t.colorErrorHover},{background:t.colorErrorActive})),FT(t,t.colorError,t.colorBgContainer,{color:t.colorErrorHover,borderColor:t.colorErrorBorderHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),MT(t)),LT(t,t.colorErrorBg,{background:t.colorErrorBgFilledHover},{background:t.colorErrorBgActive})),Sl(t,t.colorError,"text",{color:t.colorErrorHover,background:t.colorErrorBg},{color:t.colorErrorHover,background:t.colorErrorBgActive})),Sl(t,t.colorError,"link",{color:t.colorErrorHover},{color:t.colorErrorActive})),PT(t.componentCls,t.ghostBg,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder,{color:t.colorErrorHover,borderColor:t.colorErrorHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),mct=t=>Object.assign(Object.assign({},Sl(t,t.colorLink,"link",{color:t.colorLinkHover},{color:t.colorLinkActive})),PT(t.componentCls,t.ghostBg,t.colorInfo,t.colorInfo,t.colorTextDisabled,t.colorBorder,{color:t.colorInfoHover,borderColor:t.colorInfoHover},{color:t.colorInfoActive,borderColor:t.colorInfoActive})),gct=t=>{const{componentCls:e}=t;return Object.assign({[`${e}-color-default`]:fct(t),[`${e}-color-primary`]:hct(t),[`${e}-color-dangerous`]:pct(t),[`${e}-color-link`]:mct(t)},dct(t))},vct=t=>Object.assign(Object.assign(Object.assign(Object.assign({},FT(t,t.defaultBorderColor,t.defaultBg,{color:t.defaultHoverColor,borderColor:t.defaultHoverBorderColor,background:t.defaultHoverBg},{color:t.defaultActiveColor,borderColor:t.defaultActiveBorderColor,background:t.defaultActiveBg})),Sl(t,t.textTextColor,"text",{color:t.textTextHoverColor,background:t.textHoverBg},{color:t.textTextActiveColor,background:t.colorBgTextActive})),DT(t,t.primaryColor,t.colorPrimary,{background:t.colorPrimaryHover,color:t.primaryColor},{background:t.colorPrimaryActive,color:t.primaryColor})),Sl(t,t.colorLink,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),Z3=(t,e="")=>{const{componentCls:n,controlHeight:r,fontSize:i,borderRadius:a,buttonPaddingHorizontal:o,iconCls:s,buttonPaddingVertical:l,buttonIconOnlyFontSize:c}=t;return[{[e]:{fontSize:i,height:r,padding:`${Ce(l)} ${Ce(o)}`,borderRadius:a,[`&${n}-icon-only`]:{width:r,[s]:{fontSize:c}}}},{[`${n}${n}-circle${e}`]:oct(t)},{[`${n}${n}-round${e}`]:sct(t)}]},yct=t=>{const e=_r(t,{fontSize:t.contentFontSize});return Z3(e,t.componentCls)},bct=t=>{const e=_r(t,{controlHeight:t.controlHeightSM,fontSize:t.contentFontSizeSM,padding:t.paddingXS,buttonPaddingHorizontal:t.paddingInlineSM,buttonPaddingVertical:0,borderRadius:t.borderRadiusSM,buttonIconOnlyFontSize:t.onlyIconSizeSM});return Z3(e,`${t.componentCls}-sm`)},xct=t=>{const e=_r(t,{controlHeight:t.controlHeightLG,fontSize:t.contentFontSizeLG,buttonPaddingHorizontal:t.paddingInlineLG,buttonPaddingVertical:0,borderRadius:t.borderRadiusLG,buttonIconOnlyFontSize:t.onlyIconSizeLG});return Z3(e,`${t.componentCls}-lg`)},wct=t=>{const{componentCls:e}=t;return{[e]:{[`&${e}-block`]:{width:"100%"}}}},Sct=vo("Button",t=>{const e=hne(t);return[act(e),yct(e),bct(e),xct(e),wct(e),gct(e),vct(e),$lt(e)]},pne,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function $ct(t,e,n){const{focusElCls:r,focus:i,borderElCls:a}=n,o=a?"> *":"",s=["hover",i?"focus":null,"active"].filter(Boolean).map(l=>`&:${l} ${o}`).join(",");return{[`&-item:not(${e}-last-item)`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[s]:{zIndex:2}},r?{[`&${r}`]:{zIndex:2}}:{}),{[`&[disabled] ${o}`]:{zIndex:0}})}}function Cct(t,e,n){const{borderElCls:r}=n,i=r?`> ${r}`:"";return{[`&-item:not(${e}-first-item):not(${e}-last-item) ${i}`]:{borderRadius:0},[`&-item:not(${e}-last-item)${e}-first-item`]:{[`& ${i}, &${t}-sm ${i}, &${t}-lg ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${e}-first-item)${e}-last-item`]:{[`& ${i}, &${t}-sm ${i}, &${t}-lg ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function gne(t,e={focus:!0}){const{componentCls:n}=t,r=`${n}-compact`;return{[r]:Object.assign(Object.assign({},$ct(t,r,e)),Cct(n,r,e))}}function Ect(t,e){return{[`&-item:not(${e}-last-item)`]:{marginBottom:t.calc(t.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function Tct(t,e){return{[`&-item:not(${e}-first-item):not(${e}-last-item)`]:{borderRadius:0},[`&-item${e}-first-item:not(${e}-last-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${e}-last-item:not(${e}-first-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function Ict(t){const e=`${t.componentCls}-compact-vertical`;return{[e]:Object.assign(Object.assign({},Ect(t,e)),Tct(t.componentCls,e))}}const Nct=t=>{const{componentCls:e,colorPrimaryHover:n,lineWidth:r,calc:i}=t,a=i(r).mul(-1).equal(),o=s=>{const l=`${e}-compact${s?"-vertical":""}-item${e}-primary:not([disabled])`;return{[`${l} + ${l}::before`]:{position:"absolute",top:s?a:0,insetInlineStart:s?0:a,backgroundColor:n,content:'""',width:s?"100%":r,height:s?r:"100%"}}};return Object.assign(Object.assign({},o()),o(!0))},kct=Pot(["Button","compact"],t=>{const e=hne(t);return[gne(e),Ict(e),Nct(e)]},pne);var Oct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Act(t){if(typeof t=="object"&&t){let e=t==null?void 0:t.delay;return e=!Number.isNaN(e)&&typeof e=="number"?e:0,{loading:e<=0,delay:e}}return{loading:!!t,delay:0}}const _ct={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["link","link"],text:["default","text"]},Pct=B.forwardRef((t,e)=>{var n,r;const{loading:i=!1,prefixCls:a,color:o,variant:s,type:l,danger:c=!1,shape:u="default",size:d,styles:f,disabled:h,className:p,rootClassName:g,children:m,icon:v,iconPosition:y="start",ghost:b=!1,block:w=!1,htmlType:x="button",classNames:$,style:C={},autoInsertSpace:E,autoFocus:I}=t,T=Oct(t,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),N=l||"default",{button:k}=B.useContext(pn),[O,_]=S.useMemo(()=>{if(o&&s)return[o,s];if(l||c){const me=_ct[N]||[];return c?["danger",me[1]]:me}return k!=null&&k.color&&(k!=null&&k.variant)?[k.color,k.variant]:["default","outlined"]},[l,o,s,c,k==null?void 0:k.variant,k==null?void 0:k.color]),D=O==="danger"?"dangerous":O,{getPrefixCls:L,direction:R,autoInsertSpace:F,className:V,style:H,classNames:U,styles:W}=Hf("button"),G=(n=E??F)!==null&&n!==void 0?n:!0,q=L("btn",a),[X,re,ce]=Sct(q),ee=S.useContext(im),se=h??ee,ue=S.useContext(une),Q=S.useMemo(()=>Act(i),[i]),[ye,le]=S.useState(Q.loading),[xe,be]=S.useState(!1),$e=S.useRef(null),Ne=Rg(e,$e),Ve=S.Children.count(m)===1&&!v&&!PN(_),Pe=S.useRef(!0);B.useEffect(()=>(Pe.current=!1,()=>{Pe.current=!0}),[]),S.useEffect(()=>{let me=null;Q.delay>0?me=setTimeout(()=>{me=null,le(!0)},Q.delay):le(Q.loading);function Ie(){me&&(clearTimeout(me),me=null)}return Ie},[Q]),S.useEffect(()=>{if(!$e.current||!G)return;const me=$e.current.textContent||"";Ve&&aP(me)?xe||be(!0):xe&&be(!1)}),S.useEffect(()=>{I&&$e.current&&$e.current.focus()},[]);const ke=B.useCallback(me=>{var Ie;if(ye||se){me.preventDefault();return}(Ie=t.onClick)===null||Ie===void 0||Ie.call(t,("href"in t,me))},[t.onClick,ye,se]),{compactSize:fe,compactItemClassnames:pe}=cne(q,R),Me={large:"lg",small:"sm",middle:void 0},He=Kx(me=>{var Ie,Ye;return(Ye=(Ie=d??fe)!==null&&Ie!==void 0?Ie:ue)!==null&&Ye!==void 0?Ye:me}),je=He&&(r=Me[He])!==null&&r!==void 0?r:"",pt=ye?"loading":v,ut=Jo(T,["navigate"]),rt=ve(q,re,ce,{[`${q}-${u}`]:u!=="default"&&u,[`${q}-${N}`]:N,[`${q}-dangerous`]:c,[`${q}-color-${D}`]:D,[`${q}-variant-${_}`]:_,[`${q}-${je}`]:je,[`${q}-icon-only`]:!m&&m!==0&&!!pt,[`${q}-background-ghost`]:b&&!PN(_),[`${q}-loading`]:ye,[`${q}-two-chinese-chars`]:xe&&G&&!ye,[`${q}-block`]:w,[`${q}-rtl`]:R==="rtl",[`${q}-icon-end`]:y==="end"},pe,p,g,V),ft=Object.assign(Object.assign({},H),C),We=ve($==null?void 0:$.icon,U.icon),Xe=Object.assign(Object.assign({},(f==null?void 0:f.icon)||{}),W.icon||{}),Le=v&&!ye?B.createElement(oP,{prefixCls:q,className:We,style:Xe},v):i&&typeof i=="object"&&i.icon?B.createElement(oP,{prefixCls:q,className:We,style:Xe},i.icon):B.createElement(Slt,{existIcon:!!v,prefixCls:q,loading:ye,mount:Pe.current}),Se=m||m===0?wlt(m,Ve&&G):null;if(ut.href!==void 0)return X(B.createElement("a",Object.assign({},ut,{className:ve(rt,{[`${q}-disabled`]:se}),href:se?void 0:ut.href,style:ft,onClick:ke,ref:Ne,tabIndex:se?-1:0}),Le,Se));let Fe=B.createElement("button",Object.assign({},T,{type:x,className:rt,style:ft,onClick:ke,disabled:se,ref:Ne}),Le,Se,pe&&B.createElement(kct,{prefixCls:q}));return PN(_)||(Fe=B.createElement(dlt,{component:"Button",disabled:ye},Fe)),X(Fe)}),z0=Pct;z0.Group=blt;z0.__ANT_BUTTON=!0;var vne=S.createContext(null),d6=[];function Rct(t,e){var n=S.useState(function(){if(!ma())return null;var p=document.createElement("div");return p}),r=ge(n,1),i=r[0],a=S.useRef(!1),o=S.useContext(vne),s=S.useState(d6),l=ge(s,2),c=l[0],u=l[1],d=o||(a.current?void 0:function(p){u(function(g){var m=[p].concat(Be(g));return m})});function f(){i.parentElement||document.body.appendChild(i),a.current=!0}function h(){var p;(p=i.parentElement)===null||p===void 0||p.removeChild(i),a.current=!1}return An(function(){return t?o?o(f):f():h(),h},[t]),An(function(){c.length&&(c.forEach(function(p){return p()}),u(d6))},[c]),[i,d]}function Dct(t){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=e;var r=n.style;r.position="absolute",r.left="0",r.top="0",r.width="100px",r.height="100px",r.overflow="scroll";var i,a;if(t){var o=getComputedStyle(t);r.scrollbarColor=o.scrollbarColor,r.scrollbarWidth=o.scrollbarWidth;var s=getComputedStyle(t,"::-webkit-scrollbar"),l=parseInt(s.width,10),c=parseInt(s.height,10);try{var u=l?"width: ".concat(s.width,";"):"",d=c?"height: ".concat(s.height,";"):"";ql(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(u,`
`).concat(d,`
}`),e)}catch(p){console.error(p),i=l,a=c}}document.body.appendChild(n);var f=t&&i&&!isNaN(i)?i:n.offsetWidth-n.clientWidth,h=t&&a&&!isNaN(a)?a:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),A0(e),{width:f,height:h}}function Fct(t){return typeof document>"u"||!t||!(t instanceof Element)?{width:0,height:0}:Dct(t)}function Mct(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Lct="rc-util-locker-".concat(Date.now()),f6=0;function jct(t){var e=!!t,n=S.useState(function(){return f6+=1,"".concat(Lct,"_").concat(f6)}),r=ge(n,1),i=r[0];An(function(){if(e){var a=Fct(document.body).width,o=Mct();ql(`
html body {
  overflow-y: hidden;
  `.concat(o?"width: calc(100% - ".concat(a,"px);"):"",`
}`),i)}else A0(i);return function(){A0(i)}},[e,i])}var zct=!1;function Bct(t){return zct}var h6=function(e){return e===!1?!1:!ma()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},yne=S.forwardRef(function(t,e){var n=t.open,r=t.autoLock,i=t.getContainer;t.debug;var a=t.autoDestroy,o=a===void 0?!0:a,s=t.children,l=S.useState(n),c=ge(l,2),u=c[0],d=c[1],f=u||n;S.useEffect(function(){(o||n)&&d(n)},[n,o]);var h=S.useState(function(){return h6(i)}),p=ge(h,2),g=p[0],m=p[1];S.useEffect(function(){var N=h6(i);m(N??null)});var v=Rct(f&&!g),y=ge(v,2),b=y[0],w=y[1],x=g??b;jct(r&&n&&ma()&&(x===b||x===document.body));var $=null;if(s&&Uf(s)&&e){var C=s;$=C.ref}var E=Rg($,e);if(!f||!ma()||g===void 0)return null;var I=x===!1||Bct(),T=s;return e&&(T=S.cloneElement(s,{ref:E})),S.createElement(vne.Provider,{value:w},I?T:hu.createPortal(T,x))});function Vct(){var t=ie({},nC);return t.useId}var p6=0,m6=Vct();const bne=m6?function(e){var n=m6();return e||n}:function(e){var n=S.useState("ssr-id"),r=ge(n,2),i=r[0],a=r[1];return S.useEffect(function(){var o=p6;p6+=1,a("rc_unique_".concat(o))},[]),e||i};var _d="RC_FORM_INTERNAL_HOOKS",un=function(){Wi(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},om=S.createContext({getFieldValue:un,getFieldsValue:un,getFieldError:un,getFieldWarning:un,getFieldsError:un,isFieldsTouched:un,isFieldTouched:un,isFieldValidating:un,isFieldsValidating:un,resetFields:un,setFields:un,setFieldValue:un,setFieldsValue:un,validateFields:un,submit:un,getInternalHooks:function(){return un(),{dispatch:un,initEntityValue:un,registerField:un,useSubscribe:un,setInitialValues:un,destroyForm:un,setCallbacks:un,registerWatch:un,getFields:un,setValidateMessages:un,setPreserve:un,getInitialValue:un}}}),X$=S.createContext(null);function sP(t){return t==null?[]:Array.isArray(t)?t:[t]}function Wct(t){return t&&!!t._init}function lP(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var cP=lP();function Uct(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function Hct(t,e,n){if(F3())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&Yy(i,n.prototype),i}function uP(t){var e=typeof Map=="function"?new Map:void 0;return uP=function(r){if(r===null||!Uct(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return Hct(r,arguments,k0(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Yy(i,r)},uP(t)}var Gct=/%[sdj%]/g,qct=function(){};function dP(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var r=n.field;e[r]=e[r]||[],e[r].push(n)}),e}function io(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=0,a=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var o=t.replace(Gct,function(s){if(s==="%%")return"%";if(i>=a)return s;switch(s){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch{return"[Circular]"}break;default:return s}});return o}return t}function Kct(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Ur(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||Kct(e)&&typeof t=="string"&&!t)}function Xct(t,e,n){var r=[],i=0,a=t.length;function o(s){r.push.apply(r,Be(s||[])),i++,i===a&&n(r)}t.forEach(function(s){e(s,o)})}function g6(t,e,n){var r=0,i=t.length;function a(o){if(o&&o.length){n(o);return}var s=r;r=r+1,s<i?e(t[s],a):n([])}a([])}function Yct(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,Be(t[n]||[]))}),e}var v6=function(t){Ls(n,t);var e=js(n);function n(r,i){var a;return gr(this,n),a=e.call(this,"Async Validation Error"),Y(ht(a),"errors",void 0),Y(ht(a),"fields",void 0),a.errors=r,a.fields=i,a}return vr(n)}(uP(Error));function Zct(t,e,n,r,i){if(e.first){var a=new Promise(function(f,h){var p=function(v){return r(v),v.length?h(new v6(v,dP(v))):f(i)},g=Yct(t);g6(g,n,p)});return a.catch(function(f){return f}),a}var o=e.firstFields===!0?Object.keys(t):e.firstFields||[],s=Object.keys(t),l=s.length,c=0,u=[],d=new Promise(function(f,h){var p=function(m){if(u.push.apply(u,m),c++,c===l)return r(u),u.length?h(new v6(u,dP(u))):f(i)};s.length||(r(u),f(i)),s.forEach(function(g){var m=t[g];o.indexOf(g)!==-1?g6(m,n,p):Xct(m,n,p)})});return d.catch(function(f){return f}),d}function Qct(t){return!!(t&&t.message!==void 0)}function Jct(t,e){for(var n=t,r=0;r<e.length;r++){if(n==null)return n;n=n[e[r]]}return n}function y6(t,e){return function(n){var r;return t.fullFields?r=Jct(e,t.fullFields):r=e[n.field||t.fullField],Qct(n)?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||t.fullField}}}function b6(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];at(r)==="object"&&at(t[n])==="object"?t[n]=ie(ie({},t[n]),r):t[n]=r}}return t}var sh="enum",eut=function(e,n,r,i,a){e[sh]=Array.isArray(e[sh])?e[sh]:[],e[sh].indexOf(n)===-1&&i.push(io(a.messages[sh],e.fullField,e[sh].join(", ")))},tut=function(e,n,r,i,a){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||i.push(io(a.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(n)||i.push(io(a.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},nut=function(e,n,r,i,a){var o=typeof e.len=="number",s=typeof e.min=="number",l=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=n,d=null,f=typeof n=="number",h=typeof n=="string",p=Array.isArray(n);if(f?d="number":h?d="string":p&&(d="array"),!d)return!1;p&&(u=n.length),h&&(u=n.replace(c,"_").length),o?u!==e.len&&i.push(io(a.messages[d].len,e.fullField,e.len)):s&&!l&&u<e.min?i.push(io(a.messages[d].min,e.fullField,e.min)):l&&!s&&u>e.max?i.push(io(a.messages[d].max,e.fullField,e.max)):s&&l&&(u<e.min||u>e.max)&&i.push(io(a.messages[d].range,e.fullField,e.min,e.max))},xne=function(e,n,r,i,a,o){e.required&&(!r.hasOwnProperty(e.field)||Ur(n,o||e.type))&&i.push(io(a.messages.required,e.fullField))},nw;const rut=function(){if(nw)return nw;var t="[a-fA-F\\d:]",e=function($){return $&&$.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=["(?:".concat(r,":){7}(?:").concat(r,"|:)"),"(?:".concat(r,":){6}(?:").concat(n,"|:").concat(r,"|:)"),"(?:".concat(r,":){5}(?::").concat(n,"|(?::").concat(r,"){1,2}|:)"),"(?:".concat(r,":){4}(?:(?::").concat(r,"){0,1}:").concat(n,"|(?::").concat(r,"){1,3}|:)"),"(?:".concat(r,":){3}(?:(?::").concat(r,"){0,2}:").concat(n,"|(?::").concat(r,"){1,4}|:)"),"(?:".concat(r,":){2}(?:(?::").concat(r,"){0,3}:").concat(n,"|(?::").concat(r,"){1,5}|:)"),"(?:".concat(r,":){1}(?:(?::").concat(r,"){0,4}:").concat(n,"|(?::").concat(r,"){1,6}|:)"),"(?::(?:(?::".concat(r,"){0,5}:").concat(n,"|(?::").concat(r,"){1,7}|:))")],a="(?:%[0-9a-zA-Z]{1,})?",o="(?:".concat(i.join("|"),")").concat(a),s=new RegExp("(?:^".concat(n,"$)|(?:^").concat(o,"$)")),l=new RegExp("^".concat(n,"$")),c=new RegExp("^".concat(o,"$")),u=function($){return $&&$.exact?s:new RegExp("(?:".concat(e($)).concat(n).concat(e($),")|(?:").concat(e($)).concat(o).concat(e($),")"),"g")};u.v4=function(x){return x&&x.exact?l:new RegExp("".concat(e(x)).concat(n).concat(e(x)),"g")},u.v6=function(x){return x&&x.exact?c:new RegExp("".concat(e(x)).concat(o).concat(e(x)),"g")};var d="(?:(?:[a-z]+:)?//)",f="(?:\\S+(?::\\S*)?@)?",h=u.v4().source,p=u.v6().source,g="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",v="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",y="(?::\\d{2,5})?",b='(?:[/?#][^\\s"]*)?',w="(?:".concat(d,"|www\\.)").concat(f,"(?:localhost|").concat(h,"|").concat(p,"|").concat(g).concat(m).concat(v,")").concat(y).concat(b);return nw=new RegExp("(?:^".concat(w,"$)"),"i"),nw};var x6={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Mv={integer:function(e){return Mv.number(e)&&parseInt(e,10)===e},float:function(e){return Mv.number(e)&&!Mv.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return at(e)==="object"&&!Mv.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(x6.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(rut())},hex:function(e){return typeof e=="string"&&!!e.match(x6.hex)}},iut=function(e,n,r,i,a){if(e.required&&n===void 0){xne(e,n,r,i,a);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=e.type;o.indexOf(s)>-1?Mv[s](n)||i.push(io(a.messages.types[s],e.fullField,e.type)):s&&at(n)!==e.type&&i.push(io(a.messages.types[s],e.fullField,e.type))},aut=function(e,n,r,i,a){(/^\s+$/.test(n)||n==="")&&i.push(io(a.messages.whitespace,e.fullField))};const Mt={required:xne,whitespace:aut,type:iut,range:nut,enum:eut,pattern:tut};var out=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Ur(n)&&!e.required)return r();Mt.required(e,n,i,o,a)}r(o)},sut=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(n==null&&!e.required)return r();Mt.required(e,n,i,o,a,"array"),n!=null&&(Mt.type(e,n,i,o,a),Mt.range(e,n,i,o,a))}r(o)},lut=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Ur(n)&&!e.required)return r();Mt.required(e,n,i,o,a),n!==void 0&&Mt.type(e,n,i,o,a)}r(o)},cut=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Ur(n,"date")&&!e.required)return r();if(Mt.required(e,n,i,o,a),!Ur(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),Mt.type(e,l,i,o,a),l&&Mt.range(e,l.getTime(),i,o,a)}}r(o)},uut="enum",dut=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Ur(n)&&!e.required)return r();Mt.required(e,n,i,o,a),n!==void 0&&Mt[uut](e,n,i,o,a)}r(o)},fut=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Ur(n)&&!e.required)return r();Mt.required(e,n,i,o,a),n!==void 0&&(Mt.type(e,n,i,o,a),Mt.range(e,n,i,o,a))}r(o)},hut=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Ur(n)&&!e.required)return r();Mt.required(e,n,i,o,a),n!==void 0&&(Mt.type(e,n,i,o,a),Mt.range(e,n,i,o,a))}r(o)},put=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Ur(n)&&!e.required)return r();Mt.required(e,n,i,o,a),n!==void 0&&Mt.type(e,n,i,o,a)}r(o)},mut=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(n===""&&(n=void 0),Ur(n)&&!e.required)return r();Mt.required(e,n,i,o,a),n!==void 0&&(Mt.type(e,n,i,o,a),Mt.range(e,n,i,o,a))}r(o)},gut=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Ur(n)&&!e.required)return r();Mt.required(e,n,i,o,a),n!==void 0&&Mt.type(e,n,i,o,a)}r(o)},vut=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Ur(n,"string")&&!e.required)return r();Mt.required(e,n,i,o,a),Ur(n,"string")||Mt.pattern(e,n,i,o,a)}r(o)},yut=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Ur(n)&&!e.required)return r();Mt.required(e,n,i,o,a),Ur(n)||Mt.type(e,n,i,o,a)}r(o)},but=function(e,n,r,i,a){var o=[],s=Array.isArray(n)?"array":at(n);Mt.required(e,n,i,o,a,s),r(o)},xut=function(e,n,r,i,a){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(Ur(n,"string")&&!e.required)return r();Mt.required(e,n,i,o,a,"string"),Ur(n,"string")||(Mt.type(e,n,i,o,a),Mt.range(e,n,i,o,a),Mt.pattern(e,n,i,o,a),e.whitespace===!0&&Mt.whitespace(e,n,i,o,a))}r(o)},LN=function(e,n,r,i,a){var o=e.type,s=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(Ur(n,o)&&!e.required)return r();Mt.required(e,n,i,s,a,o),Ur(n,o)||Mt.type(e,n,i,s,a)}r(s)};const oy={string:xut,method:put,number:mut,boolean:lut,regexp:yut,integer:hut,float:fut,array:sut,object:gut,enum:dut,pattern:vut,date:cut,url:LN,hex:LN,email:LN,required:but,any:out};var Xx=function(){function t(e){gr(this,t),Y(this,"rules",null),Y(this,"_messages",cP),this.define(e)}return vr(t,[{key:"define",value:function(n){var r=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(at(n)!=="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(i){var a=n[i];r.rules[i]=Array.isArray(a)?a:[a]})}},{key:"messages",value:function(n){return n&&(this._messages=b6(lP(),n)),this._messages}},{key:"validate",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},o=n,s=i,l=a;if(typeof s=="function"&&(l=s,s={}),!this.rules||Object.keys(this.rules).length===0)return l&&l(null,o),Promise.resolve(o);function c(p){var g=[],m={};function v(b){if(Array.isArray(b)){var w;g=(w=g).concat.apply(w,Be(b))}else g.push(b)}for(var y=0;y<p.length;y++)v(p[y]);g.length?(m=dP(g),l(g,m)):l(null,o)}if(s.messages){var u=this.messages();u===cP&&(u=lP()),b6(u,s.messages),s.messages=u}else s.messages=this.messages();var d={},f=s.keys||Object.keys(this.rules);f.forEach(function(p){var g=r.rules[p],m=o[p];g.forEach(function(v){var y=v;typeof y.transform=="function"&&(o===n&&(o=ie({},o)),m=o[p]=y.transform(m),m!=null&&(y.type=y.type||(Array.isArray(m)?"array":at(m)))),typeof y=="function"?y={validator:y}:y=ie({},y),y.validator=r.getValidationMethod(y),y.validator&&(y.field=p,y.fullField=y.fullField||p,y.type=r.getType(y),d[p]=d[p]||[],d[p].push({rule:y,value:m,source:o,field:p}))})});var h={};return Zct(d,s,function(p,g){var m=p.rule,v=(m.type==="object"||m.type==="array")&&(at(m.fields)==="object"||at(m.defaultField)==="object");v=v&&(m.required||!m.required&&p.value),m.field=p.field;function y(C,E){return ie(ie({},E),{},{fullField:"".concat(m.fullField,".").concat(C),fullFields:m.fullFields?[].concat(Be(m.fullFields),[C]):[C]})}function b(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=Array.isArray(C)?C:[C];!s.suppressWarning&&E.length&&t.warning("async-validator:",E),E.length&&m.message!==void 0&&(E=[].concat(m.message));var I=E.map(y6(m,o));if(s.first&&I.length)return h[m.field]=1,g(I);if(!v)g(I);else{if(m.required&&!p.value)return m.message!==void 0?I=[].concat(m.message).map(y6(m,o)):s.error&&(I=[s.error(m,io(s.messages.required,m.field))]),g(I);var T={};m.defaultField&&Object.keys(p.value).map(function(O){T[O]=m.defaultField}),T=ie(ie({},T),p.rule.fields);var N={};Object.keys(T).forEach(function(O){var _=T[O],P=Array.isArray(_)?_:[_];N[O]=P.map(y.bind(null,O))});var k=new t(N);k.messages(s.messages),p.rule.options&&(p.rule.options.messages=s.messages,p.rule.options.error=s.error),k.validate(p.value,p.rule.options||s,function(O){var _=[];I&&I.length&&_.push.apply(_,Be(I)),O&&O.length&&_.push.apply(_,Be(O)),g(_.length?_:null)})}}var w;if(m.asyncValidator)w=m.asyncValidator(m,p.value,b,p.source,s);else if(m.validator){try{w=m.validator(m,p.value,b,p.source,s)}catch(C){var x,$;(x=($=console).error)===null||x===void 0||x.call($,C),s.suppressValidatorError||setTimeout(function(){throw C},0),b(C.message)}w===!0?b():w===!1?b(typeof m.message=="function"?m.message(m.fullField||m.field):m.message||"".concat(m.fullField||m.field," fails")):w instanceof Array?b(w):w instanceof Error&&b(w.message)}w&&w.then&&w.then(function(){return b()},function(C){return b(C)})},function(p){c(p)},o)}},{key:"getType",value:function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!oy.hasOwnProperty(n.type))throw new Error(io("Unknown rule type %s",n.type));return n.type||"string"}},{key:"getValidationMethod",value:function(n){if(typeof n.validator=="function")return n.validator;var r=Object.keys(n),i=r.indexOf("message");return i!==-1&&r.splice(i,1),r.length===1&&r[0]==="required"?oy.required:oy[this.getType(n)]||void 0}}]),t}();Y(Xx,"register",function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");oy[e]=n});Y(Xx,"warning",qct);Y(Xx,"messages",cP);Y(Xx,"validators",oy);var Wa="'${name}' is not a valid ${type}",wne={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Wa,method:Wa,array:Wa,object:Wa,number:Wa,date:Wa,boolean:Wa,integer:Wa,float:Wa,regexp:Wa,email:Wa,url:Wa,hex:Wa},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},w6=Xx;function wut(t,e){return t.replace(/\\?\$\{\w+\}/g,function(n){if(n.startsWith("\\"))return n.slice(1);var r=n.slice(2,-1);return e[r]})}var S6="CODE_LOGIC_ERROR";function fP(t,e,n,r,i){return hP.apply(this,arguments)}function hP(){return hP=ro(vn().mark(function t(e,n,r,i,a){var o,s,l,c,u,d,f,h,p;return vn().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return o=ie({},r),delete o.ruleIndex,w6.warning=function(){},o.validator&&(s=o.validator,o.validator=function(){try{return s.apply(void 0,arguments)}catch(v){return console.error(v),Promise.reject(S6)}}),l=null,o&&o.type==="array"&&o.defaultField&&(l=o.defaultField,delete o.defaultField),c=new w6(Y({},e,[o])),u=Mh(wne,i.validateMessages),c.messages(u),d=[],m.prev=10,m.next=13,Promise.resolve(c.validate(Y({},e,n),ie({},i)));case 13:m.next=18;break;case 15:m.prev=15,m.t0=m.catch(10),m.t0.errors&&(d=m.t0.errors.map(function(v,y){var b=v.message,w=b===S6?u.default:b;return S.isValidElement(w)?S.cloneElement(w,{key:"error_".concat(y)}):w}));case 18:if(!(!d.length&&l)){m.next=23;break}return m.next=21,Promise.all(n.map(function(v,y){return fP("".concat(e,".").concat(y),v,l,i,a)}));case 21:return f=m.sent,m.abrupt("return",f.reduce(function(v,y){return[].concat(Be(v),Be(y))},[]));case 23:return h=ie(ie({},r),{},{name:e,enum:(r.enum||[]).join(", ")},a),p=d.map(function(v){return typeof v=="string"?wut(v,h):v}),m.abrupt("return",p);case 26:case"end":return m.stop()}},t,null,[[10,15]])})),hP.apply(this,arguments)}function Sut(t,e,n,r,i,a){var o=t.join("."),s=n.map(function(u,d){var f=u.validator,h=ie(ie({},u),{},{ruleIndex:d});return f&&(h.validator=function(p,g,m){var v=!1,y=function(){for(var x=arguments.length,$=new Array(x),C=0;C<x;C++)$[C]=arguments[C];Promise.resolve().then(function(){Wi(!v,"Your validator function has already return a promise. `callback` will be ignored."),v||m.apply(void 0,$)})},b=f(p,g,y);v=b&&typeof b.then=="function"&&typeof b.catch=="function",Wi(v,"`callback` is deprecated. Please return a promise instead."),v&&b.then(function(){m()}).catch(function(w){m(w||" ")})}),h}).sort(function(u,d){var f=u.warningOnly,h=u.ruleIndex,p=d.warningOnly,g=d.ruleIndex;return!!f==!!p?h-g:f?1:-1}),l;if(i===!0)l=new Promise(function(){var u=ro(vn().mark(function d(f,h){var p,g,m;return vn().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:p=0;case 1:if(!(p<s.length)){y.next=12;break}return g=s[p],y.next=5,fP(o,e,g,r,a);case 5:if(m=y.sent,!m.length){y.next=9;break}return h([{errors:m,rule:g}]),y.abrupt("return");case 9:p+=1,y.next=1;break;case 12:f([]);case 13:case"end":return y.stop()}},d)}));return function(d,f){return u.apply(this,arguments)}}());else{var c=s.map(function(u){return fP(o,e,u,r,a).then(function(d){return{errors:d,rule:u}})});l=(i?Cut(c):$ut(c)).then(function(u){return Promise.reject(u)})}return l.catch(function(u){return u}),l}function $ut(t){return pP.apply(this,arguments)}function pP(){return pP=ro(vn().mark(function t(e){return vn().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.all(e).then(function(i){var a,o=(a=[]).concat.apply(a,Be(i));return o}));case 1:case"end":return r.stop()}},t)})),pP.apply(this,arguments)}function Cut(t){return mP.apply(this,arguments)}function mP(){return mP=ro(vn().mark(function t(e){var n;return vn().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=0,i.abrupt("return",new Promise(function(a){e.forEach(function(o){o.then(function(s){s.errors.length&&a([s]),n+=1,n===e.length&&a([])})})}));case 2:case"end":return i.stop()}},t)})),mP.apply(this,arguments)}function lr(t){return sP(t)}function $6(t,e){var n={};return e.forEach(function(r){var i=el(t,r);n=us(n,r,i)}),n}function rp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t&&t.some(function(r){return Sne(e,r,n)})}function Sne(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!t||!e||!n&&t.length!==e.length?!1:e.every(function(r,i){return t[i]===r})}function Eut(t,e){if(t===e)return!0;if(!t&&e||t&&!e||!t||!e||at(t)!=="object"||at(e)!=="object")return!1;var n=Object.keys(t),r=Object.keys(e),i=new Set([].concat(n,r));return Be(i).every(function(a){var o=t[a],s=e[a];return typeof o=="function"&&typeof s=="function"?!0:o===s})}function Tut(t){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&at(e.target)==="object"&&t in e.target?e.target[t]:e}function C6(t,e,n){var r=t.length;if(e<0||e>=r||n<0||n>=r)return t;var i=t[e],a=e-n;return a>0?[].concat(Be(t.slice(0,n)),[i],Be(t.slice(n,e)),Be(t.slice(e+1,r))):a<0?[].concat(Be(t.slice(0,e)),Be(t.slice(e+1,n+1)),[i],Be(t.slice(n+1,r))):t}var Iut=["name"],Eo=[];function jN(t,e,n,r,i,a){return typeof t=="function"?t(e,n,"source"in a?{source:a.source}:{}):r!==i}var Q3=function(t){Ls(n,t);var e=js(n);function n(r){var i;if(gr(this,n),i=e.call(this,r),Y(ht(i),"state",{resetCount:0}),Y(ht(i),"cancelRegisterFunc",null),Y(ht(i),"mounted",!1),Y(ht(i),"touched",!1),Y(ht(i),"dirty",!1),Y(ht(i),"validatePromise",void 0),Y(ht(i),"prevValidating",void 0),Y(ht(i),"errors",Eo),Y(ht(i),"warnings",Eo),Y(ht(i),"cancelRegister",function(){var l=i.props,c=l.preserve,u=l.isListField,d=l.name;i.cancelRegisterFunc&&i.cancelRegisterFunc(u,c,lr(d)),i.cancelRegisterFunc=null}),Y(ht(i),"getNamePath",function(){var l=i.props,c=l.name,u=l.fieldContext,d=u.prefixName,f=d===void 0?[]:d;return c!==void 0?[].concat(Be(f),Be(c)):[]}),Y(ht(i),"getRules",function(){var l=i.props,c=l.rules,u=c===void 0?[]:c,d=l.fieldContext;return u.map(function(f){return typeof f=="function"?f(d):f})}),Y(ht(i),"refresh",function(){i.mounted&&i.setState(function(l){var c=l.resetCount;return{resetCount:c+1}})}),Y(ht(i),"metaCache",null),Y(ht(i),"triggerMetaEvent",function(l){var c=i.props.onMetaChange;if(c){var u=ie(ie({},i.getMeta()),{},{destroy:l});_0(i.metaCache,u)||c(u),i.metaCache=u}else i.metaCache=null}),Y(ht(i),"onStoreChange",function(l,c,u){var d=i.props,f=d.shouldUpdate,h=d.dependencies,p=h===void 0?[]:h,g=d.onReset,m=u.store,v=i.getNamePath(),y=i.getValue(l),b=i.getValue(m),w=c&&rp(c,v);switch(u.type==="valueUpdate"&&u.source==="external"&&!_0(y,b)&&(i.touched=!0,i.dirty=!0,i.validatePromise=null,i.errors=Eo,i.warnings=Eo,i.triggerMetaEvent()),u.type){case"reset":if(!c||w){i.touched=!1,i.dirty=!1,i.validatePromise=void 0,i.errors=Eo,i.warnings=Eo,i.triggerMetaEvent(),g==null||g(),i.refresh();return}break;case"remove":{if(f&&jN(f,l,m,y,b,u)){i.reRender();return}break}case"setField":{var x=u.data;if(w){"touched"in x&&(i.touched=x.touched),"validating"in x&&!("originRCField"in x)&&(i.validatePromise=x.validating?Promise.resolve([]):null),"errors"in x&&(i.errors=x.errors||Eo),"warnings"in x&&(i.warnings=x.warnings||Eo),i.dirty=!0,i.triggerMetaEvent(),i.reRender();return}else if("value"in x&&rp(c,v,!0)){i.reRender();return}if(f&&!v.length&&jN(f,l,m,y,b,u)){i.reRender();return}break}case"dependenciesUpdate":{var $=p.map(lr);if($.some(function(C){return rp(u.relatedFields,C)})){i.reRender();return}break}default:if(w||(!p.length||v.length||f)&&jN(f,l,m,y,b,u)){i.reRender();return}break}f===!0&&i.reRender()}),Y(ht(i),"validateRules",function(l){var c=i.getNamePath(),u=i.getValue(),d=l||{},f=d.triggerName,h=d.validateOnly,p=h===void 0?!1:h,g=Promise.resolve().then(ro(vn().mark(function m(){var v,y,b,w,x,$,C;return vn().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(i.mounted){I.next=2;break}return I.abrupt("return",[]);case 2:if(v=i.props,y=v.validateFirst,b=y===void 0?!1:y,w=v.messageVariables,x=v.validateDebounce,$=i.getRules(),f&&($=$.filter(function(T){return T}).filter(function(T){var N=T.validateTrigger;if(!N)return!0;var k=sP(N);return k.includes(f)})),!(x&&f)){I.next=10;break}return I.next=8,new Promise(function(T){setTimeout(T,x)});case 8:if(i.validatePromise===g){I.next=10;break}return I.abrupt("return",[]);case 10:return C=Sut(c,u,$,l,b,w),C.catch(function(T){return T}).then(function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Eo;if(i.validatePromise===g){var N;i.validatePromise=null;var k=[],O=[];(N=T.forEach)===null||N===void 0||N.call(T,function(_){var P=_.rule.warningOnly,D=_.errors,L=D===void 0?Eo:D;P?O.push.apply(O,Be(L)):k.push.apply(k,Be(L))}),i.errors=k,i.warnings=O,i.triggerMetaEvent(),i.reRender()}}),I.abrupt("return",C);case 13:case"end":return I.stop()}},m)})));return p||(i.validatePromise=g,i.dirty=!0,i.errors=Eo,i.warnings=Eo,i.triggerMetaEvent(),i.reRender()),g}),Y(ht(i),"isFieldValidating",function(){return!!i.validatePromise}),Y(ht(i),"isFieldTouched",function(){return i.touched}),Y(ht(i),"isFieldDirty",function(){if(i.dirty||i.props.initialValue!==void 0)return!0;var l=i.props.fieldContext,c=l.getInternalHooks(_d),u=c.getInitialValue;return u(i.getNamePath())!==void 0}),Y(ht(i),"getErrors",function(){return i.errors}),Y(ht(i),"getWarnings",function(){return i.warnings}),Y(ht(i),"isListField",function(){return i.props.isListField}),Y(ht(i),"isList",function(){return i.props.isList}),Y(ht(i),"isPreserve",function(){return i.props.preserve}),Y(ht(i),"getMeta",function(){i.prevValidating=i.isFieldValidating();var l={touched:i.isFieldTouched(),validating:i.prevValidating,errors:i.errors,warnings:i.warnings,name:i.getNamePath(),validated:i.validatePromise===null};return l}),Y(ht(i),"getOnlyChild",function(l){if(typeof l=="function"){var c=i.getMeta();return ie(ie({},i.getOnlyChild(l(i.getControlled(),c,i.props.fieldContext))),{},{isFunction:!0})}var u=wl(l);return u.length!==1||!S.isValidElement(u[0])?{child:u,isFunction:!1}:{child:u[0],isFunction:!1}}),Y(ht(i),"getValue",function(l){var c=i.props.fieldContext.getFieldsValue,u=i.getNamePath();return el(l||c(!0),u)}),Y(ht(i),"getControlled",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=i.props,u=c.name,d=c.trigger,f=c.validateTrigger,h=c.getValueFromEvent,p=c.normalize,g=c.valuePropName,m=c.getValueProps,v=c.fieldContext,y=f!==void 0?f:v.validateTrigger,b=i.getNamePath(),w=v.getInternalHooks,x=v.getFieldsValue,$=w(_d),C=$.dispatch,E=i.getValue(),I=m||function(_){return Y({},g,_)},T=l[d],N=u!==void 0?I(E):{},k=ie(ie({},l),N);k[d]=function(){i.touched=!0,i.dirty=!0,i.triggerMetaEvent();for(var _,P=arguments.length,D=new Array(P),L=0;L<P;L++)D[L]=arguments[L];h?_=h.apply(void 0,D):_=Tut.apply(void 0,[g].concat(D)),p&&(_=p(_,E,x(!0))),_!==E&&C({type:"updateValue",namePath:b,value:_}),T&&T.apply(void 0,D)};var O=sP(y||[]);return O.forEach(function(_){var P=k[_];k[_]=function(){P&&P.apply(void 0,arguments);var D=i.props.rules;D&&D.length&&C({type:"validateField",namePath:b,triggerName:_})}}),k}),r.fieldContext){var a=r.fieldContext.getInternalHooks,o=a(_d),s=o.initEntityValue;s(ht(i))}return i}return vr(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.shouldUpdate,o=i.fieldContext;if(this.mounted=!0,o){var s=o.getInternalHooks,l=s(_d),c=l.registerField;this.cancelRegisterFunc=c(this)}a===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var i=this.state.resetCount,a=this.props.children,o=this.getOnlyChild(a),s=o.child,l=o.isFunction,c;return l?c=s:S.isValidElement(s)?c=S.cloneElement(s,this.getControlled(s.props)):(Wi(!s,"`children` of Field is not validate ReactElement."),c=s),S.createElement(S.Fragment,{key:i},c)}}]),n}(S.Component);Y(Q3,"contextType",om);Y(Q3,"defaultProps",{trigger:"onChange",valuePropName:"value"});function $ne(t){var e,n=t.name,r=Ot(t,Iut),i=S.useContext(om),a=S.useContext(X$),o=n!==void 0?lr(n):void 0,s=(e=r.isListField)!==null&&e!==void 0?e:!!a,l="keep";return s||(l="_".concat((o||[]).join("_"))),S.createElement(Q3,Qe({key:l,name:o,isListField:s},r,{fieldContext:i}))}function Nut(t){var e=t.name,n=t.initialValue,r=t.children,i=t.rules,a=t.validateTrigger,o=t.isListField,s=S.useContext(om),l=S.useContext(X$),c=S.useRef({keys:[],id:0}),u=c.current,d=S.useMemo(function(){var g=lr(s.prefixName)||[];return[].concat(Be(g),Be(lr(e)))},[s.prefixName,e]),f=S.useMemo(function(){return ie(ie({},s),{},{prefixName:d})},[s,d]),h=S.useMemo(function(){return{getKey:function(m){var v=d.length,y=m[v];return[u.keys[y],m.slice(v+1)]}}},[d]);if(typeof r!="function")return Wi(!1,"Form.List only accepts function as children."),null;var p=function(m,v,y){var b=y.source;return b==="internal"?!1:m!==v};return S.createElement(X$.Provider,{value:h},S.createElement(om.Provider,{value:f},S.createElement($ne,{name:[],shouldUpdate:p,rules:i,validateTrigger:a,initialValue:n,isList:!0,isListField:o??!!l},function(g,m){var v=g.value,y=v===void 0?[]:v,b=g.onChange,w=s.getFieldValue,x=function(){var I=w(d||[]);return I||[]},$={add:function(I,T){var N=x();T>=0&&T<=N.length?(u.keys=[].concat(Be(u.keys.slice(0,T)),[u.id],Be(u.keys.slice(T))),b([].concat(Be(N.slice(0,T)),[I],Be(N.slice(T))))):(u.keys=[].concat(Be(u.keys),[u.id]),b([].concat(Be(N),[I]))),u.id+=1},remove:function(I){var T=x(),N=new Set(Array.isArray(I)?I:[I]);N.size<=0||(u.keys=u.keys.filter(function(k,O){return!N.has(O)}),b(T.filter(function(k,O){return!N.has(O)})))},move:function(I,T){if(I!==T){var N=x();I<0||I>=N.length||T<0||T>=N.length||(u.keys=C6(u.keys,I,T),b(C6(N,I,T)))}}},C=y||[];return Array.isArray(C)||(C=[]),r(C.map(function(E,I){var T=u.keys[I];return T===void 0&&(u.keys[I]=u.id,T=u.keys[I],u.id+=1),{name:I,key:T,isListField:!0}}),$,m)})))}function kut(t){var e=!1,n=t.length,r=[];return t.length?new Promise(function(i,a){t.forEach(function(o,s){o.catch(function(l){return e=!0,l}).then(function(l){n-=1,r[s]=l,!(n>0)&&(e&&a(r),i(r))})})}):Promise.resolve([])}var Cne="__@field_split__";function zN(t){return t.map(function(e){return"".concat(at(e),":").concat(e)}).join(Cne)}var lh=function(){function t(){gr(this,t),Y(this,"kvs",new Map)}return vr(t,[{key:"set",value:function(n,r){this.kvs.set(zN(n),r)}},{key:"get",value:function(n){return this.kvs.get(zN(n))}},{key:"update",value:function(n,r){var i=this.get(n),a=r(i);a?this.set(n,a):this.delete(n)}},{key:"delete",value:function(n){this.kvs.delete(zN(n))}},{key:"map",value:function(n){return Be(this.kvs.entries()).map(function(r){var i=ge(r,2),a=i[0],o=i[1],s=a.split(Cne);return n({key:s.map(function(l){var c=l.match(/^([^:]*):(.*)$/),u=ge(c,3),d=u[1],f=u[2];return d==="number"?Number(f):f}),value:o})})}},{key:"toJSON",value:function(){var n={};return this.map(function(r){var i=r.key,a=r.value;return n[i.join(".")]=a,null}),n}}]),t}(),Out=["name"],Aut=vr(function t(e){var n=this;gr(this,t),Y(this,"formHooked",!1),Y(this,"forceRootUpdate",void 0),Y(this,"subscribable",!0),Y(this,"store",{}),Y(this,"fieldEntities",[]),Y(this,"initialValues",{}),Y(this,"callbacks",{}),Y(this,"validateMessages",null),Y(this,"preserve",null),Y(this,"lastValidatePromise",null),Y(this,"getForm",function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}}),Y(this,"getInternalHooks",function(r){return r===_d?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(Wi(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),Y(this,"useSubscribe",function(r){n.subscribable=r}),Y(this,"prevWithoutPreserves",null),Y(this,"setInitialValues",function(r,i){if(n.initialValues=r||{},i){var a,o=Mh(r,n.store);(a=n.prevWithoutPreserves)===null||a===void 0||a.map(function(s){var l=s.key;o=us(o,l,el(r,l))}),n.prevWithoutPreserves=null,n.updateStore(o)}}),Y(this,"destroyForm",function(r){if(r)n.updateStore({});else{var i=new lh;n.getFieldEntities(!0).forEach(function(a){n.isMergedPreserve(a.isPreserve())||i.set(a.getNamePath(),!0)}),n.prevWithoutPreserves=i}}),Y(this,"getInitialValue",function(r){var i=el(n.initialValues,r);return r.length?Mh(i):i}),Y(this,"setCallbacks",function(r){n.callbacks=r}),Y(this,"setValidateMessages",function(r){n.validateMessages=r}),Y(this,"setPreserve",function(r){n.preserve=r}),Y(this,"watchList",[]),Y(this,"registerWatch",function(r){return n.watchList.push(r),function(){n.watchList=n.watchList.filter(function(i){return i!==r})}}),Y(this,"notifyWatch",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(n.watchList.length){var i=n.getFieldsValue(),a=n.getFieldsValue(!0);n.watchList.forEach(function(o){o(i,a,r)})}}),Y(this,"timeoutId",null),Y(this,"warningUnhooked",function(){}),Y(this,"updateStore",function(r){n.store=r}),Y(this,"getFieldEntities",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return r?n.fieldEntities.filter(function(i){return i.getNamePath().length}):n.fieldEntities}),Y(this,"getFieldsMap",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=new lh;return n.getFieldEntities(r).forEach(function(a){var o=a.getNamePath();i.set(o,a)}),i}),Y(this,"getFieldEntitiesForNamePathList",function(r){if(!r)return n.getFieldEntities(!0);var i=n.getFieldsMap(!0);return r.map(function(a){var o=lr(a);return i.get(o)||{INVALIDATE_NAME_PATH:lr(a)}})}),Y(this,"getFieldsValue",function(r,i){n.warningUnhooked();var a,o,s;if(r===!0||Array.isArray(r)?(a=r,o=i):r&&at(r)==="object"&&(s=r.strict,o=r.filter),a===!0&&!o)return n.store;var l=n.getFieldEntitiesForNamePathList(Array.isArray(a)?a:null),c=[];return l.forEach(function(u){var d,f,h="INVALIDATE_NAME_PATH"in u?u.INVALIDATE_NAME_PATH:u.getNamePath();if(s){var p,g;if((p=(g=u).isList)!==null&&p!==void 0&&p.call(g))return}else if(!a&&(d=(f=u).isListField)!==null&&d!==void 0&&d.call(f))return;if(!o)c.push(h);else{var m="getMeta"in u?u.getMeta():null;o(m)&&c.push(h)}}),$6(n.store,c.map(lr))}),Y(this,"getFieldValue",function(r){n.warningUnhooked();var i=lr(r);return el(n.store,i)}),Y(this,"getFieldsError",function(r){n.warningUnhooked();var i=n.getFieldEntitiesForNamePathList(r);return i.map(function(a,o){return a&&!("INVALIDATE_NAME_PATH"in a)?{name:a.getNamePath(),errors:a.getErrors(),warnings:a.getWarnings()}:{name:lr(r[o]),errors:[],warnings:[]}})}),Y(this,"getFieldError",function(r){n.warningUnhooked();var i=lr(r),a=n.getFieldsError([i])[0];return a.errors}),Y(this,"getFieldWarning",function(r){n.warningUnhooked();var i=lr(r),a=n.getFieldsError([i])[0];return a.warnings}),Y(this,"isFieldsTouched",function(){n.warningUnhooked();for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i[0],s=i[1],l,c=!1;i.length===0?l=null:i.length===1?Array.isArray(o)?(l=o.map(lr),c=!1):(l=null,c=o):(l=o.map(lr),c=s);var u=n.getFieldEntities(!0),d=function(m){return m.isFieldTouched()};if(!l)return c?u.every(function(g){return d(g)||g.isList()}):u.some(d);var f=new lh;l.forEach(function(g){f.set(g,[])}),u.forEach(function(g){var m=g.getNamePath();l.forEach(function(v){v.every(function(y,b){return m[b]===y})&&f.update(v,function(y){return[].concat(Be(y),[g])})})});var h=function(m){return m.some(d)},p=f.map(function(g){var m=g.value;return m});return c?p.every(h):p.some(h)}),Y(this,"isFieldTouched",function(r){return n.warningUnhooked(),n.isFieldsTouched([r])}),Y(this,"isFieldsValidating",function(r){n.warningUnhooked();var i=n.getFieldEntities();if(!r)return i.some(function(o){return o.isFieldValidating()});var a=r.map(lr);return i.some(function(o){var s=o.getNamePath();return rp(a,s)&&o.isFieldValidating()})}),Y(this,"isFieldValidating",function(r){return n.warningUnhooked(),n.isFieldsValidating([r])}),Y(this,"resetWithFieldInitialValue",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=new lh,a=n.getFieldEntities(!0);a.forEach(function(l){var c=l.props.initialValue,u=l.getNamePath();if(c!==void 0){var d=i.get(u)||new Set;d.add({entity:l,value:c}),i.set(u,d)}});var o=function(c){c.forEach(function(u){var d=u.props.initialValue;if(d!==void 0){var f=u.getNamePath(),h=n.getInitialValue(f);if(h!==void 0)Wi(!1,"Form already set 'initialValues' with path '".concat(f.join("."),"'. Field can not overwrite it."));else{var p=i.get(f);if(p&&p.size>1)Wi(!1,"Multiple Field with path '".concat(f.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(p){var g=n.getFieldValue(f),m=u.isListField();!m&&(!r.skipExist||g===void 0)&&n.updateStore(us(n.store,f,Be(p)[0].value))}}}})},s;r.entities?s=r.entities:r.namePathList?(s=[],r.namePathList.forEach(function(l){var c=i.get(l);if(c){var u;(u=s).push.apply(u,Be(Be(c).map(function(d){return d.entity})))}})):s=a,o(s)}),Y(this,"resetFields",function(r){n.warningUnhooked();var i=n.store;if(!r){n.updateStore(Mh(n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(i,null,{type:"reset"}),n.notifyWatch();return}var a=r.map(lr);a.forEach(function(o){var s=n.getInitialValue(o);n.updateStore(us(n.store,o,s))}),n.resetWithFieldInitialValue({namePathList:a}),n.notifyObservers(i,a,{type:"reset"}),n.notifyWatch(a)}),Y(this,"setFields",function(r){n.warningUnhooked();var i=n.store,a=[];r.forEach(function(o){var s=o.name,l=Ot(o,Out),c=lr(s);a.push(c),"value"in l&&n.updateStore(us(n.store,c,l.value)),n.notifyObservers(i,[c],{type:"setField",data:o})}),n.notifyWatch(a)}),Y(this,"getFields",function(){var r=n.getFieldEntities(!0),i=r.map(function(a){var o=a.getNamePath(),s=a.getMeta(),l=ie(ie({},s),{},{name:o,value:n.getFieldValue(o)});return Object.defineProperty(l,"originRCField",{value:!0}),l});return i}),Y(this,"initEntityValue",function(r){var i=r.props.initialValue;if(i!==void 0){var a=r.getNamePath(),o=el(n.store,a);o===void 0&&n.updateStore(us(n.store,a,i))}}),Y(this,"isMergedPreserve",function(r){var i=r!==void 0?r:n.preserve;return i??!0}),Y(this,"registerField",function(r){n.fieldEntities.push(r);var i=r.getNamePath();if(n.notifyWatch([i]),r.props.initialValue!==void 0){var a=n.store;n.resetWithFieldInitialValue({entities:[r],skipExist:!0}),n.notifyObservers(a,[r.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(o,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter(function(d){return d!==r}),!n.isMergedPreserve(s)&&(!o||l.length>1)){var c=o?void 0:n.getInitialValue(i);if(i.length&&n.getFieldValue(i)!==c&&n.fieldEntities.every(function(d){return!Sne(d.getNamePath(),i)})){var u=n.store;n.updateStore(us(u,i,c,!0)),n.notifyObservers(u,[i],{type:"remove"}),n.triggerDependenciesUpdate(u,i)}}n.notifyWatch([i])}}),Y(this,"dispatch",function(r){switch(r.type){case"updateValue":{var i=r.namePath,a=r.value;n.updateValue(i,a);break}case"validateField":{var o=r.namePath,s=r.triggerName;n.validateFields([o],{triggerName:s});break}}}),Y(this,"notifyObservers",function(r,i,a){if(n.subscribable){var o=ie(ie({},a),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach(function(s){var l=s.onStoreChange;l(r,i,o)})}else n.forceRootUpdate()}),Y(this,"triggerDependenciesUpdate",function(r,i){var a=n.getDependencyChildrenFields(i);return a.length&&n.validateFields(a),n.notifyObservers(r,a,{type:"dependenciesUpdate",relatedFields:[i].concat(Be(a))}),a}),Y(this,"updateValue",function(r,i){var a=lr(r),o=n.store;n.updateStore(us(n.store,a,i)),n.notifyObservers(o,[a],{type:"valueUpdate",source:"internal"}),n.notifyWatch([a]);var s=n.triggerDependenciesUpdate(o,a),l=n.callbacks.onValuesChange;if(l){var c=$6(n.store,[a]);l(c,n.getFieldsValue())}n.triggerOnFieldsChange([a].concat(Be(s)))}),Y(this,"setFieldsValue",function(r){n.warningUnhooked();var i=n.store;if(r){var a=Mh(n.store,r);n.updateStore(a)}n.notifyObservers(i,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()}),Y(this,"setFieldValue",function(r,i){n.setFields([{name:r,value:i,errors:[],warnings:[]}])}),Y(this,"getDependencyChildrenFields",function(r){var i=new Set,a=[],o=new lh;n.getFieldEntities().forEach(function(l){var c=l.props.dependencies;(c||[]).forEach(function(u){var d=lr(u);o.update(d,function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return f.add(l),f})})});var s=function l(c){var u=o.get(c)||new Set;u.forEach(function(d){if(!i.has(d)){i.add(d);var f=d.getNamePath();d.isFieldDirty()&&f.length&&(a.push(f),l(f))}})};return s(r),a}),Y(this,"triggerOnFieldsChange",function(r,i){var a=n.callbacks.onFieldsChange;if(a){var o=n.getFields();if(i){var s=new lh;i.forEach(function(c){var u=c.name,d=c.errors;s.set(u,d)}),o.forEach(function(c){c.errors=s.get(c.name)||c.errors})}var l=o.filter(function(c){var u=c.name;return rp(r,u)});l.length&&a(l,o)}}),Y(this,"validateFields",function(r,i){n.warningUnhooked();var a,o;Array.isArray(r)||typeof r=="string"||typeof i=="string"?(a=r,o=i):o=r;var s=!!a,l=s?a.map(lr):[],c=[],u=String(Date.now()),d=new Set,f=o||{},h=f.recursive,p=f.dirty;n.getFieldEntities(!0).forEach(function(y){if(s||l.push(y.getNamePath()),!(!y.props.rules||!y.props.rules.length)&&!(p&&!y.isFieldDirty())){var b=y.getNamePath();if(d.add(b.join(u)),!s||rp(l,b,h)){var w=y.validateRules(ie({validateMessages:ie(ie({},wne),n.validateMessages)},o));c.push(w.then(function(){return{name:b,errors:[],warnings:[]}}).catch(function(x){var $,C=[],E=[];return($=x.forEach)===null||$===void 0||$.call(x,function(I){var T=I.rule.warningOnly,N=I.errors;T?E.push.apply(E,Be(N)):C.push.apply(C,Be(N))}),C.length?Promise.reject({name:b,errors:C,warnings:E}):{name:b,errors:C,warnings:E}}))}}});var g=kut(c);n.lastValidatePromise=g,g.catch(function(y){return y}).then(function(y){var b=y.map(function(w){var x=w.name;return x});n.notifyObservers(n.store,b,{type:"validateFinish"}),n.triggerOnFieldsChange(b,y)});var m=g.then(function(){return n.lastValidatePromise===g?Promise.resolve(n.getFieldsValue(l)):Promise.reject([])}).catch(function(y){var b=y.filter(function(w){return w&&w.errors.length});return Promise.reject({values:n.getFieldsValue(l),errorFields:b,outOfDate:n.lastValidatePromise!==g})});m.catch(function(y){return y});var v=l.filter(function(y){return d.has(y.join(u))});return n.triggerOnFieldsChange(v),m}),Y(this,"submit",function(){n.warningUnhooked(),n.validateFields().then(function(r){var i=n.callbacks.onFinish;if(i)try{i(r)}catch(a){console.error(a)}}).catch(function(r){var i=n.callbacks.onFinishFailed;i&&i(r)})}),this.forceRootUpdate=e});function Ene(t){var e=S.useRef(),n=S.useState({}),r=ge(n,2),i=r[1];if(!e.current)if(t)e.current=t;else{var a=function(){i({})},o=new Aut(a);e.current=o.getForm()}return[e.current]}var gP=S.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),_ut=function(e){var n=e.validateMessages,r=e.onFormChange,i=e.onFormFinish,a=e.children,o=S.useContext(gP),s=S.useRef({});return S.createElement(gP.Provider,{value:ie(ie({},o),{},{validateMessages:ie(ie({},o.validateMessages),n),triggerFormChange:function(c,u){r&&r(c,{changedFields:u,forms:s.current}),o.triggerFormChange(c,u)},triggerFormFinish:function(c,u){i&&i(c,{values:u,forms:s.current}),o.triggerFormFinish(c,u)},registerForm:function(c,u){c&&(s.current=ie(ie({},s.current),{},Y({},c,u))),o.registerForm(c,u)},unregisterForm:function(c){var u=ie({},s.current);delete u[c],s.current=u,o.unregisterForm(c)}})},a)},Put=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],Rut=function(e,n){var r=e.name,i=e.initialValues,a=e.fields,o=e.form,s=e.preserve,l=e.children,c=e.component,u=c===void 0?"form":c,d=e.validateMessages,f=e.validateTrigger,h=f===void 0?"onChange":f,p=e.onValuesChange,g=e.onFieldsChange,m=e.onFinish,v=e.onFinishFailed,y=e.clearOnDestroy,b=Ot(e,Put),w=S.useRef(null),x=S.useContext(gP),$=Ene(o),C=ge($,1),E=C[0],I=E.getInternalHooks(_d),T=I.useSubscribe,N=I.setInitialValues,k=I.setCallbacks,O=I.setValidateMessages,_=I.setPreserve,P=I.destroyForm;S.useImperativeHandle(n,function(){return ie(ie({},E),{},{nativeElement:w.current})}),S.useEffect(function(){return x.registerForm(r,E),function(){x.unregisterForm(r)}},[x,E,r]),O(ie(ie({},x.validateMessages),d)),k({onValuesChange:p,onFieldsChange:function(G){if(x.triggerFormChange(r,G),g){for(var q=arguments.length,X=new Array(q>1?q-1:0),re=1;re<q;re++)X[re-1]=arguments[re];g.apply(void 0,[G].concat(X))}},onFinish:function(G){x.triggerFormFinish(r,G),m&&m(G)},onFinishFailed:v}),_(s);var D=S.useRef(null);N(i,!D.current),D.current||(D.current=!0),S.useEffect(function(){return function(){return P(y)}},[]);var L,R=typeof l=="function";if(R){var F=E.getFieldsValue(!0);L=l(F,E)}else L=l;T(!R);var V=S.useRef();S.useEffect(function(){Eut(V.current||[],a||[])||E.setFields(a||[]),V.current=a},[a,E]);var H=S.useMemo(function(){return ie(ie({},E),{},{validateTrigger:h})},[E,h]),U=S.createElement(X$.Provider,{value:null},S.createElement(om.Provider,{value:H},L));return u===!1?U:S.createElement(u,Qe({},b,{ref:w,onSubmit:function(G){G.preventDefault(),G.stopPropagation(),E.submit()},onReset:function(G){var q;G.preventDefault(),E.resetFields(),(q=b.onReset)===null||q===void 0||q.call(b,G)}}),U)};function E6(t){try{return JSON.stringify(t)}catch{return Math.random()}}function Dut(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[1],a=i===void 0?{}:i,o=Wct(a)?{form:a}:a,s=o.form,l=S.useState(),c=ge(l,2),u=c[0],d=c[1],f=S.useMemo(function(){return E6(u)},[u]),h=S.useRef(f);h.current=f;var p=S.useContext(om),g=s||p,m=g&&g._init,v=lr(r),y=S.useRef(v);return y.current=v,S.useEffect(function(){if(m){var b=g.getFieldsValue,w=g.getInternalHooks,x=w(_d),$=x.registerWatch,C=function(N,k){var O=o.preserve?k:N;return typeof r=="function"?r(O):el(O,y.current)},E=$(function(T,N){var k=C(T,N),O=E6(k);h.current!==O&&(h.current=O,d(k))}),I=C(b(),b(!0));return u!==I&&d(I),E}},[m]),u}var Fut=S.forwardRef(Rut),Yx=Fut;Yx.FormProvider=_ut;Yx.Field=$ne;Yx.List=Nut;Yx.useForm=Ene;Yx.useWatch=Dut;const vP=S.createContext({}),Mut=({children:t,status:e,override:n})=>{const r=S.useContext(vP),i=S.useMemo(()=>{const a=Object.assign({},r);return n&&delete a.isFormItemInput,e&&(delete a.status,delete a.hasFeedback,delete a.feedbackIcon),a},[e,n,r]);return S.createElement(vP.Provider,{value:i},t)},Lut=S.createContext(void 0),jut=t=>{const{space:e,form:n,children:r}=t;if(r==null)return null;let i=r;return n&&(i=B.createElement(Mut,{override:!0,status:!0},i)),e&&(i=B.createElement(mlt,null,i)),i};var zut=function(e){if(ma()&&window.document.documentElement){var n=Array.isArray(e)?e:[e],r=window.document.documentElement;return n.some(function(i){return i in r.style})}return!1};function T6(t,e){return zut(t)}const jT=t=>{const{prefixCls:e,className:n,style:r,size:i,shape:a}=t,o=ve({[`${e}-lg`]:i==="large",[`${e}-sm`]:i==="small"}),s=ve({[`${e}-circle`]:a==="circle",[`${e}-square`]:a==="square",[`${e}-round`]:a==="round"}),l=S.useMemo(()=>typeof i=="number"?{width:i,height:i,lineHeight:`${i}px`}:{},[i]);return S.createElement("span",{className:ve(e,o,s,n),style:Object.assign(Object.assign({},l),r)})},But=new hn("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),zT=t=>({height:t,lineHeight:Ce(t)}),ip=t=>Object.assign({width:t},zT(t)),Vut=t=>({background:t.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:But,animationDuration:t.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),BN=(t,e)=>Object.assign({width:e(t).mul(5).equal(),minWidth:e(t).mul(5).equal()},zT(t)),Wut=t=>{const{skeletonAvatarCls:e,gradientFromColor:n,controlHeight:r,controlHeightLG:i,controlHeightSM:a}=t;return{[e]:Object.assign({display:"inline-block",verticalAlign:"top",background:n},ip(r)),[`${e}${e}-circle`]:{borderRadius:"50%"},[`${e}${e}-lg`]:Object.assign({},ip(i)),[`${e}${e}-sm`]:Object.assign({},ip(a))}},Uut=t=>{const{controlHeight:e,borderRadiusSM:n,skeletonInputCls:r,controlHeightLG:i,controlHeightSM:a,gradientFromColor:o,calc:s}=t;return{[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:o,borderRadius:n},BN(e,s)),[`${r}-lg`]:Object.assign({},BN(i,s)),[`${r}-sm`]:Object.assign({},BN(a,s))}},I6=t=>Object.assign({width:t},zT(t)),Hut=t=>{const{skeletonImageCls:e,imageSizeBase:n,gradientFromColor:r,borderRadiusSM:i,calc:a}=t;return{[e]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:r,borderRadius:i},I6(a(n).mul(2).equal())),{[`${e}-path`]:{fill:"#bfbfbf"},[`${e}-svg`]:Object.assign(Object.assign({},I6(n)),{maxWidth:a(n).mul(4).equal(),maxHeight:a(n).mul(4).equal()}),[`${e}-svg${e}-svg-circle`]:{borderRadius:"50%"}}),[`${e}${e}-circle`]:{borderRadius:"50%"}}},VN=(t,e,n)=>{const{skeletonButtonCls:r}=t;return{[`${n}${r}-circle`]:{width:e,minWidth:e,borderRadius:"50%"},[`${n}${r}-round`]:{borderRadius:e}}},WN=(t,e)=>Object.assign({width:e(t).mul(2).equal(),minWidth:e(t).mul(2).equal()},zT(t)),Gut=t=>{const{borderRadiusSM:e,skeletonButtonCls:n,controlHeight:r,controlHeightLG:i,controlHeightSM:a,gradientFromColor:o,calc:s}=t;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:o,borderRadius:e,width:s(r).mul(2).equal(),minWidth:s(r).mul(2).equal()},WN(r,s))},VN(t,r,n)),{[`${n}-lg`]:Object.assign({},WN(i,s))}),VN(t,i,`${n}-lg`)),{[`${n}-sm`]:Object.assign({},WN(a,s))}),VN(t,a,`${n}-sm`))},qut=t=>{const{componentCls:e,skeletonAvatarCls:n,skeletonTitleCls:r,skeletonParagraphCls:i,skeletonButtonCls:a,skeletonInputCls:o,skeletonImageCls:s,controlHeight:l,controlHeightLG:c,controlHeightSM:u,gradientFromColor:d,padding:f,marginSM:h,borderRadius:p,titleHeight:g,blockRadius:m,paragraphLiHeight:v,controlHeightXS:y,paragraphMarginTop:b}=t;return{[e]:{display:"table",width:"100%",[`${e}-header`]:{display:"table-cell",paddingInlineEnd:f,verticalAlign:"top",[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:d},ip(l)),[`${n}-circle`]:{borderRadius:"50%"},[`${n}-lg`]:Object.assign({},ip(c)),[`${n}-sm`]:Object.assign({},ip(u))},[`${e}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[r]:{width:"100%",height:g,background:d,borderRadius:m,[`+ ${i}`]:{marginBlockStart:u}},[i]:{padding:0,"> li":{width:"100%",height:v,listStyle:"none",background:d,borderRadius:m,"+ li":{marginBlockStart:y}}},[`${i}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${e}-content`]:{[`${r}, ${i} > li`]:{borderRadius:p}}},[`${e}-with-avatar ${e}-content`]:{[r]:{marginBlockStart:h,[`+ ${i}`]:{marginBlockStart:b}}},[`${e}${e}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},Gut(t)),Wut(t)),Uut(t)),Hut(t)),[`${e}${e}-block`]:{width:"100%",[a]:{width:"100%"},[o]:{width:"100%"}},[`${e}${e}-active`]:{[`
        ${r},
        ${i} > li,
        ${n},
        ${a},
        ${o},
        ${s}
      `]:Object.assign({},Vut(t))}}},Kut=t=>{const{colorFillContent:e,colorFill:n}=t,r=e,i=n;return{color:r,colorGradientEnd:i,gradientFromColor:r,gradientToColor:i,titleHeight:t.controlHeight/2,blockRadius:t.borderRadiusSM,paragraphMarginTop:t.marginLG+t.marginXXS,paragraphLiHeight:t.controlHeight/2}},Lg=vo("Skeleton",t=>{const{componentCls:e,calc:n}=t,r=_r(t,{skeletonAvatarCls:`${e}-avatar`,skeletonTitleCls:`${e}-title`,skeletonParagraphCls:`${e}-paragraph`,skeletonButtonCls:`${e}-button`,skeletonInputCls:`${e}-input`,skeletonImageCls:`${e}-image`,imageSizeBase:n(t.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${t.gradientFromColor} 25%, ${t.gradientToColor} 37%, ${t.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[qut(r)]},Kut,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),Xut=t=>{const{prefixCls:e,className:n,rootClassName:r,active:i,shape:a="circle",size:o="default"}=t,{getPrefixCls:s}=S.useContext(pn),l=s("skeleton",e),[c,u,d]=Lg(l),f=Jo(t,["prefixCls","className"]),h=ve(l,`${l}-element`,{[`${l}-active`]:i},n,r,u,d);return c(S.createElement("div",{className:h},S.createElement(jT,Object.assign({prefixCls:`${l}-avatar`,shape:a,size:o},f))))},Yut=t=>{const{prefixCls:e,className:n,rootClassName:r,active:i,block:a=!1,size:o="default"}=t,{getPrefixCls:s}=S.useContext(pn),l=s("skeleton",e),[c,u,d]=Lg(l),f=Jo(t,["prefixCls"]),h=ve(l,`${l}-element`,{[`${l}-active`]:i,[`${l}-block`]:a},n,r,u,d);return c(S.createElement("div",{className:h},S.createElement(jT,Object.assign({prefixCls:`${l}-button`,size:o},f))))},Zut="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",Qut=t=>{const{prefixCls:e,className:n,rootClassName:r,style:i,active:a}=t,{getPrefixCls:o}=S.useContext(pn),s=o("skeleton",e),[l,c,u]=Lg(s),d=ve(s,`${s}-element`,{[`${s}-active`]:a},n,r,c,u);return l(S.createElement("div",{className:d},S.createElement("div",{className:ve(`${s}-image`,n),style:i},S.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${s}-image-svg`},S.createElement("title",null,"Image placeholder"),S.createElement("path",{d:Zut,className:`${s}-image-path`})))))},Jut=t=>{const{prefixCls:e,className:n,rootClassName:r,active:i,block:a,size:o="default"}=t,{getPrefixCls:s}=S.useContext(pn),l=s("skeleton",e),[c,u,d]=Lg(l),f=Jo(t,["prefixCls"]),h=ve(l,`${l}-element`,{[`${l}-active`]:i,[`${l}-block`]:a},n,r,u,d);return c(S.createElement("div",{className:h},S.createElement(jT,Object.assign({prefixCls:`${l}-input`,size:o},f))))},edt=t=>{const{prefixCls:e,className:n,rootClassName:r,style:i,active:a,children:o}=t,{getPrefixCls:s}=S.useContext(pn),l=s("skeleton",e),[c,u,d]=Lg(l),f=ve(l,`${l}-element`,{[`${l}-active`]:a},u,n,r,d);return c(S.createElement("div",{className:f},S.createElement("div",{className:ve(`${l}-image`,n),style:i},o)))},tdt=(t,e)=>{const{width:n,rows:r=2}=e;if(Array.isArray(n))return n[t];if(r-1===t)return n},ndt=t=>{const{prefixCls:e,className:n,style:r,rows:i=0}=t,a=Array.from({length:i}).map((o,s)=>S.createElement("li",{key:s,style:{width:tdt(s,t)}}));return S.createElement("ul",{className:ve(e,n),style:r},a)},rdt=({prefixCls:t,className:e,width:n,style:r})=>S.createElement("h3",{className:ve(t,e),style:Object.assign({width:n},r)});function UN(t){return t&&typeof t=="object"?t:{}}function idt(t,e){return t&&!e?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function adt(t,e){return!t&&e?{width:"38%"}:t&&e?{width:"50%"}:{}}function odt(t,e){const n={};return(!t||!e)&&(n.width="61%"),!t&&e?n.rows=3:n.rows=2,n}const jg=t=>{const{prefixCls:e,loading:n,className:r,rootClassName:i,style:a,children:o,avatar:s=!1,title:l=!0,paragraph:c=!0,active:u,round:d}=t,{getPrefixCls:f,direction:h,className:p,style:g}=Hf("skeleton"),m=f("skeleton",e),[v,y,b]=Lg(m);if(n||!("loading"in t)){const w=!!s,x=!!l,$=!!c;let C;if(w){const T=Object.assign(Object.assign({prefixCls:`${m}-avatar`},idt(x,$)),UN(s));C=S.createElement("div",{className:`${m}-header`},S.createElement(jT,Object.assign({},T)))}let E;if(x||$){let T;if(x){const k=Object.assign(Object.assign({prefixCls:`${m}-title`},adt(w,$)),UN(l));T=S.createElement(rdt,Object.assign({},k))}let N;if($){const k=Object.assign(Object.assign({prefixCls:`${m}-paragraph`},odt(w,x)),UN(c));N=S.createElement(ndt,Object.assign({},k))}E=S.createElement("div",{className:`${m}-content`},T,N)}const I=ve(m,{[`${m}-with-avatar`]:w,[`${m}-active`]:u,[`${m}-rtl`]:h==="rtl",[`${m}-round`]:d},p,r,i,y,b);return v(S.createElement("div",{className:I,style:Object.assign(Object.assign({},g),a)},C,E))}return o??null};jg.Button=Yut;jg.Avatar=Xut;jg.Input=Jut;jg.Image=Qut;jg.Node=edt;const Tne=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))};var sdt=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],ch=void 0;function ldt(t,e){var n=t.prefixCls,r=t.invalidate,i=t.item,a=t.renderItem,o=t.responsive,s=t.responsiveDisabled,l=t.registerSize,c=t.itemKey,u=t.className,d=t.style,f=t.children,h=t.display,p=t.order,g=t.component,m=g===void 0?"div":g,v=Ot(t,sdt),y=o&&!h;function b(E){l(c,E)}S.useEffect(function(){return function(){b(null)}},[]);var w=a&&i!==ch?a(i,{index:p}):f,x;r||(x={opacity:y?0:1,height:y?0:ch,overflowY:y?"hidden":ch,order:o?p:ch,pointerEvents:y?"none":ch,position:y?"absolute":ch});var $={};y&&($["aria-hidden"]=!0);var C=S.createElement(m,Qe({className:ve(!r&&n,u),style:ie(ie({},x),d)},$,v,{ref:e}),w);return o&&(C=S.createElement(hl,{onResize:function(I){var T=I.offsetWidth;b(T)},disabled:s},C)),C}var sy=S.forwardRef(ldt);sy.displayName="Item";function cdt(t){if(typeof MessageChannel>"u")ci(t);else{var e=new MessageChannel;e.port1.onmessage=function(){return t()},e.port2.postMessage(void 0)}}function udt(){var t=S.useRef(null),e=function(r){t.current||(t.current=[],cdt(function(){hu.unstable_batchedUpdates(function(){t.current.forEach(function(i){i()}),t.current=null})})),t.current.push(r)};return e}function vv(t,e){var n=S.useState(e),r=ge(n,2),i=r[0],a=r[1],o=zi(function(s){t(function(){a(s)})});return[i,o]}var Y$=B.createContext(null),ddt=["component"],fdt=["className"],hdt=["className"],pdt=function(e,n){var r=S.useContext(Y$);if(!r){var i=e.component,a=i===void 0?"div":i,o=Ot(e,ddt);return S.createElement(a,Qe({},o,{ref:n}))}var s=r.className,l=Ot(r,fdt),c=e.className,u=Ot(e,hdt);return S.createElement(Y$.Provider,{value:null},S.createElement(sy,Qe({ref:n,className:ve(s,c)},l,u)))},Ine=S.forwardRef(pdt);Ine.displayName="RawItem";var mdt=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],Nne="responsive",kne="invalidate";function gdt(t){return"+ ".concat(t.length," ...")}function vdt(t,e){var n=t.prefixCls,r=n===void 0?"rc-overflow":n,i=t.data,a=i===void 0?[]:i,o=t.renderItem,s=t.renderRawItem,l=t.itemKey,c=t.itemWidth,u=c===void 0?10:c,d=t.ssr,f=t.style,h=t.className,p=t.maxCount,g=t.renderRest,m=t.renderRawRest,v=t.suffix,y=t.component,b=y===void 0?"div":y,w=t.itemComponent,x=t.onVisibleChange,$=Ot(t,mdt),C=d==="full",E=udt(),I=vv(E,null),T=ge(I,2),N=T[0],k=T[1],O=N||0,_=vv(E,new Map),P=ge(_,2),D=P[0],L=P[1],R=vv(E,0),F=ge(R,2),V=F[0],H=F[1],U=vv(E,0),W=ge(U,2),G=W[0],q=W[1],X=vv(E,0),re=ge(X,2),ce=re[0],ee=re[1],se=S.useState(null),ue=ge(se,2),Q=ue[0],ye=ue[1],le=S.useState(null),xe=ge(le,2),be=xe[0],$e=xe[1],Ne=S.useMemo(function(){return be===null&&C?Number.MAX_SAFE_INTEGER:be||0},[be,N]),Ve=S.useState(!1),Pe=ge(Ve,2),ke=Pe[0],fe=Pe[1],pe="".concat(r,"-item"),Me=Math.max(V,G),He=p===Nne,je=a.length&&He,pt=p===kne,ut=je||typeof p=="number"&&a.length>p,rt=S.useMemo(function(){var dt=a;return je?N===null&&C?dt=a:dt=a.slice(0,Math.min(a.length,O/u)):typeof p=="number"&&(dt=a.slice(0,p)),dt},[a,u,N,p,je]),ft=S.useMemo(function(){return je?a.slice(Ne+1):a.slice(rt.length)},[a,rt,je,Ne]),We=S.useCallback(function(dt,Ze){var it;return typeof l=="function"?l(dt):(it=l&&(dt==null?void 0:dt[l]))!==null&&it!==void 0?it:Ze},[l]),Xe=S.useCallback(o||function(dt){return dt},[o]);function Le(dt,Ze,it){be===dt&&(Ze===void 0||Ze===Q)||($e(dt),it||(fe(dt<a.length-1),x==null||x(dt)),Ze!==void 0&&ye(Ze))}function Se(dt,Ze){k(Ze.clientWidth)}function Fe(dt,Ze){L(function(it){var zt=new Map(it);return Ze===null?zt.delete(dt):zt.set(dt,Ze),zt})}function me(dt,Ze){q(Ze),H(G)}function Ie(dt,Ze){ee(Ze)}function Ye(dt){return D.get(We(rt[dt],dt))}An(function(){if(O&&typeof Me=="number"&&rt){var dt=ce,Ze=rt.length,it=Ze-1;if(!Ze){Le(0,null);return}for(var zt=0;zt<Ze;zt+=1){var cn=Ye(zt);if(C&&(cn=cn||0),cn===void 0){Le(zt-1,void 0,!0);break}if(dt+=cn,it===0&&dt<=O||zt===it-1&&dt+Ye(it)<=O){Le(it,null);break}else if(dt+Me>O){Le(zt-1,dt-cn-ce+G);break}}v&&Ye(0)+ce>O&&ye(null)}},[O,D,G,ce,We,rt]);var Lt=ke&&!!ft.length,Hn={};Q!==null&&je&&(Hn={position:"absolute",left:Q,top:0});var Dn={prefixCls:pe,responsive:je,component:w,invalidate:pt},yr=s?function(dt,Ze){var it=We(dt,Ze);return S.createElement(Y$.Provider,{key:it,value:ie(ie({},Dn),{},{order:Ze,item:dt,itemKey:it,registerSize:Fe,display:Ze<=Ne})},s(dt,Ze))}:function(dt,Ze){var it=We(dt,Ze);return S.createElement(sy,Qe({},Dn,{order:Ze,key:it,item:dt,renderItem:Xe,itemKey:it,registerSize:Fe,display:Ze<=Ne}))},or={order:Lt?Ne:Number.MAX_SAFE_INTEGER,className:"".concat(pe,"-rest"),registerSize:me,display:Lt},ln=g||gdt,In=m?S.createElement(Y$.Provider,{value:ie(ie({},Dn),or)},m(ft)):S.createElement(sy,Qe({},Dn,or),typeof ln=="function"?ln(ft):ln),qt=S.createElement(b,Qe({className:ve(!pt&&r,h),style:f,ref:e},$),rt.map(yr),ut?In:null,v&&S.createElement(sy,Qe({},Dn,{responsive:He,responsiveDisabled:!je,order:Ne,className:"".concat(pe,"-suffix"),registerSize:Ie,display:!0,style:Hn}),v));return He?S.createElement(hl,{onResize:Se,disabled:!je},qt):qt}var Kl=S.forwardRef(vdt);Kl.displayName="Overflow";Kl.Item=Ine;Kl.RESPONSIVE=Nne;Kl.INVALIDATE=kne;function ydt(t){var e=t.prefixCls,n=t.align,r=t.arrow,i=t.arrowPos,a=r||{},o=a.className,s=a.content,l=i.x,c=l===void 0?0:l,u=i.y,d=u===void 0?0:u,f=S.useRef();if(!n||!n.points)return null;var h={position:"absolute"};if(n.autoArrow!==!1){var p=n.points[0],g=n.points[1],m=p[0],v=p[1],y=g[0],b=g[1];m===y||!["t","b"].includes(m)?h.top=d:m==="t"?h.top=0:h.bottom=0,v===b||!["l","r"].includes(v)?h.left=c:v==="l"?h.left=0:h.right=0}return S.createElement("div",{ref:f,className:ve("".concat(e,"-arrow"),o),style:h},s)}function bdt(t){var e=t.prefixCls,n=t.open,r=t.zIndex,i=t.mask,a=t.motion;return i?S.createElement(Sc,Qe({},a,{motionAppear:!0,visible:n,removeOnLeave:!0}),function(o){var s=o.className;return S.createElement("div",{style:{zIndex:r},className:ve("".concat(e,"-mask"),s)})}):null}var xdt=S.memo(function(t){var e=t.children;return e},function(t,e){return e.cache}),wdt=S.forwardRef(function(t,e){var n=t.popup,r=t.className,i=t.prefixCls,a=t.style,o=t.target,s=t.onVisibleChanged,l=t.open,c=t.keepDom,u=t.fresh,d=t.onClick,f=t.mask,h=t.arrow,p=t.arrowPos,g=t.align,m=t.motion,v=t.maskMotion,y=t.forceRender,b=t.getPopupContainer,w=t.autoDestroy,x=t.portal,$=t.zIndex,C=t.onMouseEnter,E=t.onMouseLeave,I=t.onPointerEnter,T=t.onPointerDownCapture,N=t.ready,k=t.offsetX,O=t.offsetY,_=t.offsetR,P=t.offsetB,D=t.onAlign,L=t.onPrepare,R=t.stretch,F=t.targetWidth,V=t.targetHeight,H=typeof n=="function"?n():n,U=l||c,W=(b==null?void 0:b.length)>0,G=S.useState(!b||!W),q=ge(G,2),X=q[0],re=q[1];if(An(function(){!X&&W&&o&&re(!0)},[X,W,o]),!X)return null;var ce="auto",ee={left:"-1000vw",top:"-1000vh",right:ce,bottom:ce};if(N||!l){var se,ue=g.points,Q=g.dynamicInset||((se=g._experimental)===null||se===void 0?void 0:se.dynamicInset),ye=Q&&ue[0][1]==="r",le=Q&&ue[0][0]==="b";ye?(ee.right=_,ee.left=ce):(ee.left=k,ee.right=ce),le?(ee.bottom=P,ee.top=ce):(ee.top=O,ee.bottom=ce)}var xe={};return R&&(R.includes("height")&&V?xe.height=V:R.includes("minHeight")&&V&&(xe.minHeight=V),R.includes("width")&&F?xe.width=F:R.includes("minWidth")&&F&&(xe.minWidth=F)),l||(xe.pointerEvents="none"),S.createElement(x,{open:y||U,getContainer:b&&function(){return b(o)},autoDestroy:w},S.createElement(bdt,{prefixCls:i,open:l,zIndex:$,mask:f,motion:v}),S.createElement(hl,{onResize:D,disabled:!l},function(be){return S.createElement(Sc,Qe({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:y,leavedClassName:"".concat(i,"-hidden")},m,{onAppearPrepare:L,onEnterPrepare:L,visible:l,onVisibleChanged:function(Ne){var Ve;m==null||(Ve=m.onVisibleChanged)===null||Ve===void 0||Ve.call(m,Ne),s(Ne)}}),function($e,Ne){var Ve=$e.className,Pe=$e.style,ke=ve(i,Ve,r);return S.createElement("div",{ref:qu(be,e,Ne),className:ke,style:ie(ie(ie(ie({"--arrow-x":"".concat(p.x||0,"px"),"--arrow-y":"".concat(p.y||0,"px")},ee),xe),Pe),{},{boxSizing:"border-box",zIndex:$},a),onMouseEnter:C,onMouseLeave:E,onPointerEnter:I,onClick:d,onPointerDownCapture:T},h&&S.createElement(ydt,{prefixCls:i,arrow:h,arrowPos:p,align:g}),S.createElement(xdt,{cache:!l&&!u},H))})}))}),Sdt=S.forwardRef(function(t,e){var n=t.children,r=t.getTriggerDOMNode,i=Uf(n),a=S.useCallback(function(s){D3(e,r?r(s):s)},[r]),o=Rg(a,Dg(n));return i?S.cloneElement(n,{ref:o}):n}),N6=S.createContext(null);function k6(t){return t?Array.isArray(t)?t:[t]:[]}function $dt(t,e,n,r){return S.useMemo(function(){var i=k6(n??e),a=k6(r??e),o=new Set(i),s=new Set(a);return t&&(o.has("hover")&&(o.delete("hover"),o.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[o,s]},[t,e,n,r])}function Cdt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function Edt(t,e,n,r){for(var i=n.points,a=Object.keys(t),o=0;o<a.length;o+=1){var s,l=a[o];if(Cdt((s=t[l])===null||s===void 0?void 0:s.points,i,r))return"".concat(e,"-placement-").concat(l)}return""}function O6(t,e,n,r){return e||(n?{motionName:"".concat(t,"-").concat(n)}:r?{motionName:r}:null)}function Zx(t){return t.ownerDocument.defaultView}function yP(t){for(var e=[],n=t==null?void 0:t.parentElement,r=["hidden","scroll","clip","auto"];n;){var i=Zx(n).getComputedStyle(n),a=i.overflowX,o=i.overflowY,s=i.overflow;[a,o,s].some(function(l){return r.includes(l)})&&e.push(n),n=n.parentElement}return e}function B0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?e:t}function yv(t){return B0(parseFloat(t),0)}function A6(t,e){var n=ie({},t);return(e||[]).forEach(function(r){if(!(r instanceof HTMLBodyElement||r instanceof HTMLHtmlElement)){var i=Zx(r).getComputedStyle(r),a=i.overflow,o=i.overflowClipMargin,s=i.borderTopWidth,l=i.borderBottomWidth,c=i.borderLeftWidth,u=i.borderRightWidth,d=r.getBoundingClientRect(),f=r.offsetHeight,h=r.clientHeight,p=r.offsetWidth,g=r.clientWidth,m=yv(s),v=yv(l),y=yv(c),b=yv(u),w=B0(Math.round(d.width/p*1e3)/1e3),x=B0(Math.round(d.height/f*1e3)/1e3),$=(p-g-y-b)*w,C=(f-h-m-v)*x,E=m*x,I=v*x,T=y*w,N=b*w,k=0,O=0;if(a==="clip"){var _=yv(o);k=_*w,O=_*x}var P=d.x+T-k,D=d.y+E-O,L=P+d.width+2*k-T-N-$,R=D+d.height+2*O-E-I-C;n.left=Math.max(n.left,P),n.top=Math.max(n.top,D),n.right=Math.min(n.right,L),n.bottom=Math.min(n.bottom,R)}}),n}function _6(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n="".concat(e),r=n.match(/^(.*)\%$/);return r?t*(parseFloat(r[1])/100):parseFloat(n)}function P6(t,e){var n=e||[],r=ge(n,2),i=r[0],a=r[1];return[_6(t.width,i),_6(t.height,a)]}function R6(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function uh(t,e){var n=e[0],r=e[1],i,a;return n==="t"?a=t.y:n==="b"?a=t.y+t.height:a=t.y+t.height/2,r==="l"?i=t.x:r==="r"?i=t.x+t.width:i=t.x+t.width/2,{x:i,y:a}}function Ac(t,e){var n={t:"b",b:"t",l:"r",r:"l"};return t.map(function(r,i){return i===e?n[r]||"c":r}).join("")}function Tdt(t,e,n,r,i,a,o){var s=S.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[r]||{}}),l=ge(s,2),c=l[0],u=l[1],d=S.useRef(0),f=S.useMemo(function(){return e?yP(e):[]},[e]),h=S.useRef({}),p=function(){h.current={}};t||p();var g=zi(function(){if(e&&n&&t){let Ji=function(Xf,kc){var Yf=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Me,e1=G.x+Xf,t1=G.y+kc,YT=e1+ye,et=t1+Q,yt=Math.max(e1,Yf.left),Fn=Math.max(t1,Yf.top),sr=Math.min(YT,Yf.right),Mn=Math.min(et,Yf.bottom);return Math.max(0,(sr-yt)*(Mn-Fn))},Kf=function(){Ki=G.y+it,Xi=Ki+Q,Yr=G.x+Ze,Ni=Yr+ye};var pL=Ji,mL=Kf,y,b,w,x,$=e,C=$.ownerDocument,E=Zx($),I=E.getComputedStyle($),T=I.width,N=I.height,k=I.position,O=$.style.left,_=$.style.top,P=$.style.right,D=$.style.bottom,L=$.style.overflow,R=ie(ie({},i[r]),a),F=C.createElement("div");(y=$.parentElement)===null||y===void 0||y.appendChild(F),F.style.left="".concat($.offsetLeft,"px"),F.style.top="".concat($.offsetTop,"px"),F.style.position=k,F.style.height="".concat($.offsetHeight,"px"),F.style.width="".concat($.offsetWidth,"px"),$.style.left="0",$.style.top="0",$.style.right="auto",$.style.bottom="auto",$.style.overflow="hidden";var V;if(Array.isArray(n))V={x:n[0],y:n[1],width:0,height:0};else{var H,U,W=n.getBoundingClientRect();W.x=(H=W.x)!==null&&H!==void 0?H:W.left,W.y=(U=W.y)!==null&&U!==void 0?U:W.top,V={x:W.x,y:W.y,width:W.width,height:W.height}}var G=$.getBoundingClientRect();G.x=(b=G.x)!==null&&b!==void 0?b:G.left,G.y=(w=G.y)!==null&&w!==void 0?w:G.top;var q=C.documentElement,X=q.clientWidth,re=q.clientHeight,ce=q.scrollWidth,ee=q.scrollHeight,se=q.scrollTop,ue=q.scrollLeft,Q=G.height,ye=G.width,le=V.height,xe=V.width,be={left:0,top:0,right:X,bottom:re},$e={left:-ue,top:-se,right:ce-ue,bottom:ee-se},Ne=R.htmlRegion,Ve="visible",Pe="visibleFirst";Ne!=="scroll"&&Ne!==Pe&&(Ne=Ve);var ke=Ne===Pe,fe=A6($e,f),pe=A6(be,f),Me=Ne===Ve?pe:fe,He=ke?pe:Me;$.style.left="auto",$.style.top="auto",$.style.right="0",$.style.bottom="0";var je=$.getBoundingClientRect();$.style.left=O,$.style.top=_,$.style.right=P,$.style.bottom=D,$.style.overflow=L,(x=$.parentElement)===null||x===void 0||x.removeChild(F);var pt=B0(Math.round(ye/parseFloat(T)*1e3)/1e3),ut=B0(Math.round(Q/parseFloat(N)*1e3)/1e3);if(pt===0||ut===0||N0(n)&&!X3(n))return;var rt=R.offset,ft=R.targetOffset,We=P6(G,rt),Xe=ge(We,2),Le=Xe[0],Se=Xe[1],Fe=P6(V,ft),me=ge(Fe,2),Ie=me[0],Ye=me[1];V.x-=Ie,V.y-=Ye;var Lt=R.points||[],Hn=ge(Lt,2),Dn=Hn[0],yr=Hn[1],or=R6(yr),ln=R6(Dn),In=uh(V,or),qt=uh(G,ln),dt=ie({},R),Ze=In.x-qt.x+Le,it=In.y-qt.y+Se,zt=Ji(Ze,it),cn=Ji(Ze,it,pe),vi=uh(V,["t","l"]),Bt=uh(G,["t","l"]),ba=uh(V,["b","r"]),yo=uh(G,["b","r"]),Vt=R.overflow||{},Kt=Vt.adjustX,Xr=Vt.adjustY,Yn=Vt.shiftX,Zn=Vt.shiftY,ja=function(kc){return typeof kc=="boolean"?kc:kc>=0},Ki,Xi,Yr,Ni;Kf();var ki=ja(Xr),br=ln[0]===or[0];if(ki&&ln[0]==="t"&&(Xi>He.bottom||h.current.bt)){var Qn=it;br?Qn-=Q-le:Qn=vi.y-yo.y-Se;var Il=Ji(Ze,Qn),Wt=Ji(Ze,Qn,pe);Il>zt||Il===zt&&(!ke||Wt>=cn)?(h.current.bt=!0,it=Qn,Se=-Se,dt.points=[Ac(ln,0),Ac(or,0)]):h.current.bt=!1}if(ki&&ln[0]==="b"&&(Ki<He.top||h.current.tb)){var st=it;br?st+=Q-le:st=ba.y-Bt.y-Se;var Dt=Ji(Ze,st),Qt=Ji(Ze,st,pe);Dt>zt||Dt===zt&&(!ke||Qt>=cn)?(h.current.tb=!0,it=st,Se=-Se,dt.points=[Ac(ln,0),Ac(or,0)]):h.current.tb=!1}var Zr=ja(Kt),Pr=ln[1]===or[1];if(Zr&&ln[1]==="l"&&(Ni>He.right||h.current.rl)){var Oi=Ze;Pr?Oi-=ye-xe:Oi=vi.x-yo.x-Le;var xr=Ji(Oi,it),Yi=Ji(Oi,it,pe);xr>zt||xr===zt&&(!ke||Yi>=cn)?(h.current.rl=!0,Ze=Oi,Le=-Le,dt.points=[Ac(ln,1),Ac(or,1)]):h.current.rl=!1}if(Zr&&ln[1]==="r"&&(Yr<He.left||h.current.lr)){var Qr=Ze;Pr?Qr+=ye-xe:Qr=ba.x-Bt.x-Le;var $c=Ji(Qr,it),Cc=Ji(Qr,it,pe);$c>zt||$c===zt&&(!ke||Cc>=cn)?(h.current.lr=!0,Ze=Qr,Le=-Le,dt.points=[Ac(ln,1),Ac(or,1)]):h.current.lr=!1}Kf();var Zi=Yn===!0?0:Yn;typeof Zi=="number"&&(Yr<pe.left&&(Ze-=Yr-pe.left-Le,V.x+xe<pe.left+Zi&&(Ze+=V.x-pe.left+xe-Zi)),Ni>pe.right&&(Ze-=Ni-pe.right-Le,V.x>pe.right-Zi&&(Ze+=V.x-pe.right+Zi)));var Qi=Zn===!0?0:Zn;typeof Qi=="number"&&(Ki<pe.top&&(it-=Ki-pe.top-Se,V.y+le<pe.top+Qi&&(it+=V.y-pe.top+le-Qi)),Xi>pe.bottom&&(it-=Xi-pe.bottom-Se,V.y>pe.bottom-Qi&&(it+=V.y-pe.bottom+Qi)));var Ec=G.x+Ze,Tc=Ec+ye,bo=G.y+it,Wg=bo+Q,mn=V.x,Xt=mn+xe,Jt=V.y,yi=Jt+le,bi=Math.max(Ec,mn),Ic=Math.min(Tc,Xt),Nc=(bi+Ic)/2,Ug=Nc-Ec,qf=Math.max(bo,Jt),Xu=Math.min(Wg,yi),Nl=(qf+Xu)/2,Yu=Nl-bo;o==null||o(e,dt);var Zu=je.right-G.x-(Ze+G.width),zs=je.bottom-G.y-(it+G.height);pt===1&&(Ze=Math.round(Ze),Zu=Math.round(Zu)),ut===1&&(it=Math.round(it),zs=Math.round(zs));var XT={ready:!0,offsetX:Ze/pt,offsetY:it/ut,offsetR:Zu/pt,offsetB:zs/ut,arrowX:Ug/pt,arrowY:Yu/ut,scaleX:pt,scaleY:ut,align:dt};u(XT)}}),m=function(){d.current+=1;var b=d.current;Promise.resolve().then(function(){d.current===b&&g()})},v=function(){u(function(b){return ie(ie({},b),{},{ready:!1})})};return An(v,[r]),An(function(){t||v()},[t]),[c.ready,c.offsetX,c.offsetY,c.offsetR,c.offsetB,c.arrowX,c.arrowY,c.scaleX,c.scaleY,c.align,m]}function Idt(t,e,n,r,i){An(function(){if(t&&e&&n){let f=function(){r(),i()};var d=f,a=e,o=n,s=yP(a),l=yP(o),c=Zx(o),u=new Set([c].concat(Be(s),Be(l)));return u.forEach(function(h){h.addEventListener("scroll",f,{passive:!0})}),c.addEventListener("resize",f,{passive:!0}),r(),function(){u.forEach(function(h){h.removeEventListener("scroll",f),c.removeEventListener("resize",f)})}}},[t,e,n])}function Ndt(t,e,n,r,i,a,o,s){var l=S.useRef(t);l.current=t;var c=S.useRef(!1);S.useEffect(function(){if(e&&r&&(!i||a)){var d=function(){c.current=!1},f=function(m){var v;l.current&&!o(((v=m.composedPath)===null||v===void 0||(v=v.call(m))===null||v===void 0?void 0:v[0])||m.target)&&!c.current&&s(!1)},h=Zx(r);h.addEventListener("pointerdown",d,!0),h.addEventListener("mousedown",f,!0),h.addEventListener("contextmenu",f,!0);var p=G$(n);return p&&(p.addEventListener("mousedown",f,!0),p.addEventListener("contextmenu",f,!0)),function(){h.removeEventListener("pointerdown",d,!0),h.removeEventListener("mousedown",f,!0),h.removeEventListener("contextmenu",f,!0),p&&(p.removeEventListener("mousedown",f,!0),p.removeEventListener("contextmenu",f,!0))}}},[e,n,r,i,a]);function u(){c.current=!0}return u}var kdt=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Odt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yne,e=S.forwardRef(function(n,r){var i=n.prefixCls,a=i===void 0?"rc-trigger-popup":i,o=n.children,s=n.action,l=s===void 0?"hover":s,c=n.showAction,u=n.hideAction,d=n.popupVisible,f=n.defaultPopupVisible,h=n.onPopupVisibleChange,p=n.afterPopupVisibleChange,g=n.mouseEnterDelay,m=n.mouseLeaveDelay,v=m===void 0?.1:m,y=n.focusDelay,b=n.blurDelay,w=n.mask,x=n.maskClosable,$=x===void 0?!0:x,C=n.getPopupContainer,E=n.forceRender,I=n.autoDestroy,T=n.destroyPopupOnHide,N=n.popup,k=n.popupClassName,O=n.popupStyle,_=n.popupPlacement,P=n.builtinPlacements,D=P===void 0?{}:P,L=n.popupAlign,R=n.zIndex,F=n.stretch,V=n.getPopupClassNameFromAlign,H=n.fresh,U=n.alignPoint,W=n.onPopupClick,G=n.onPopupAlign,q=n.arrow,X=n.popupMotion,re=n.maskMotion,ce=n.popupTransitionName,ee=n.popupAnimation,se=n.maskTransitionName,ue=n.maskAnimation,Q=n.className,ye=n.getTriggerDOMNode,le=Ot(n,kdt),xe=I||T||!1,be=S.useState(!1),$e=ge(be,2),Ne=$e[0],Ve=$e[1];An(function(){Ve(Tne())},[]);var Pe=S.useRef({}),ke=S.useContext(N6),fe=S.useMemo(function(){return{registerSubPopup:function(yt,Fn){Pe.current[yt]=Fn,ke==null||ke.registerSubPopup(yt,Fn)}}},[ke]),pe=bne(),Me=S.useState(null),He=ge(Me,2),je=He[0],pt=He[1],ut=S.useRef(null),rt=zi(function(et){ut.current=et,N0(et)&&je!==et&&pt(et),ke==null||ke.registerSubPopup(pe,et)}),ft=S.useState(null),We=ge(ft,2),Xe=We[0],Le=We[1],Se=S.useRef(null),Fe=zi(function(et){N0(et)&&Xe!==et&&(Le(et),Se.current=et)}),me=S.Children.only(o),Ie=(me==null?void 0:me.props)||{},Ye={},Lt=zi(function(et){var yt,Fn,sr=Xe;return(sr==null?void 0:sr.contains(et))||((yt=G$(sr))===null||yt===void 0?void 0:yt.host)===et||et===sr||(je==null?void 0:je.contains(et))||((Fn=G$(je))===null||Fn===void 0?void 0:Fn.host)===et||et===je||Object.values(Pe.current).some(function(Mn){return(Mn==null?void 0:Mn.contains(et))||et===Mn})}),Hn=O6(a,X,ee,ce),Dn=O6(a,re,ue,se),yr=S.useState(f||!1),or=ge(yr,2),ln=or[0],In=or[1],qt=d??ln,dt=zi(function(et){d===void 0&&In(et)});An(function(){In(d||!1)},[d]);var Ze=S.useRef(qt);Ze.current=qt;var it=S.useRef([]);it.current=[];var zt=zi(function(et){var yt;dt(et),((yt=it.current[it.current.length-1])!==null&&yt!==void 0?yt:qt)!==et&&(it.current.push(et),h==null||h(et))}),cn=S.useRef(),vi=function(){clearTimeout(cn.current)},Bt=function(yt){var Fn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;vi(),Fn===0?zt(yt):cn.current=setTimeout(function(){zt(yt)},Fn*1e3)};S.useEffect(function(){return vi},[]);var ba=S.useState(!1),yo=ge(ba,2),Vt=yo[0],Kt=yo[1];An(function(et){(!et||qt)&&Kt(!0)},[qt]);var Xr=S.useState(null),Yn=ge(Xr,2),Zn=Yn[0],ja=Yn[1],Ki=S.useState(null),Xi=ge(Ki,2),Yr=Xi[0],Ni=Xi[1],ki=function(yt){Ni([yt.clientX,yt.clientY])},br=Tdt(qt,je,U&&Yr!==null?Yr:Xe,_,D,L,G),Qn=ge(br,11),Il=Qn[0],Wt=Qn[1],st=Qn[2],Dt=Qn[3],Qt=Qn[4],Zr=Qn[5],Pr=Qn[6],Oi=Qn[7],xr=Qn[8],Yi=Qn[9],Qr=Qn[10],$c=$dt(Ne,l,c,u),Cc=ge($c,2),Zi=Cc[0],Qi=Cc[1],Ec=Zi.has("click"),Tc=Qi.has("click")||Qi.has("contextMenu"),bo=zi(function(){Vt||Qr()}),Wg=function(){Ze.current&&U&&Tc&&Bt(!1)};Idt(qt,Xe,je,bo,Wg),An(function(){bo()},[Yr,_]),An(function(){qt&&!(D!=null&&D[_])&&bo()},[JSON.stringify(L)]);var mn=S.useMemo(function(){var et=Edt(D,a,Yi,U);return ve(et,V==null?void 0:V(Yi))},[Yi,V,D,a,U]);S.useImperativeHandle(r,function(){return{nativeElement:Se.current,popupElement:ut.current,forceAlign:bo}});var Xt=S.useState(0),Jt=ge(Xt,2),yi=Jt[0],bi=Jt[1],Ic=S.useState(0),Nc=ge(Ic,2),Ug=Nc[0],qf=Nc[1],Xu=function(){if(F&&Xe){var yt=Xe.getBoundingClientRect();bi(yt.width),qf(yt.height)}},Nl=function(){Xu(),bo()},Yu=function(yt){Kt(!1),Qr(),p==null||p(yt)},Zu=function(){return new Promise(function(yt){Xu(),ja(function(){return yt})})};An(function(){Zn&&(Qr(),Zn(),ja(null))},[Zn]);function zs(et,yt,Fn,sr){Ye[et]=function(Mn){var n1;sr==null||sr(Mn),Bt(yt,Fn);for(var ZT=arguments.length,gL=new Array(ZT>1?ZT-1:0),r1=1;r1<ZT;r1++)gL[r1-1]=arguments[r1];(n1=Ie[et])===null||n1===void 0||n1.call.apply(n1,[Ie,Mn].concat(gL))}}(Ec||Tc)&&(Ye.onClick=function(et){var yt;Ze.current&&Tc?Bt(!1):!Ze.current&&Ec&&(ki(et),Bt(!0));for(var Fn=arguments.length,sr=new Array(Fn>1?Fn-1:0),Mn=1;Mn<Fn;Mn++)sr[Mn-1]=arguments[Mn];(yt=Ie.onClick)===null||yt===void 0||yt.call.apply(yt,[Ie,et].concat(sr))});var XT=Ndt(qt,Tc,Xe,je,w,$,Lt,Bt),pL=Zi.has("hover"),mL=Qi.has("hover"),Ji,Kf;pL&&(zs("onMouseEnter",!0,g,function(et){ki(et)}),zs("onPointerEnter",!0,g,function(et){ki(et)}),Ji=function(yt){(qt||Vt)&&je!==null&&je!==void 0&&je.contains(yt.target)&&Bt(!0,g)},U&&(Ye.onMouseMove=function(et){var yt;(yt=Ie.onMouseMove)===null||yt===void 0||yt.call(Ie,et)})),mL&&(zs("onMouseLeave",!1,v),zs("onPointerLeave",!1,v),Kf=function(){Bt(!1,v)}),Zi.has("focus")&&zs("onFocus",!0,y),Qi.has("focus")&&zs("onBlur",!1,b),Zi.has("contextMenu")&&(Ye.onContextMenu=function(et){var yt;Ze.current&&Qi.has("contextMenu")?Bt(!1):(ki(et),Bt(!0)),et.preventDefault();for(var Fn=arguments.length,sr=new Array(Fn>1?Fn-1:0),Mn=1;Mn<Fn;Mn++)sr[Mn-1]=arguments[Mn];(yt=Ie.onContextMenu)===null||yt===void 0||yt.call.apply(yt,[Ie,et].concat(sr))}),Q&&(Ye.className=ve(Ie.className,Q));var Xf=ie(ie({},Ie),Ye),kc={},Yf=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Yf.forEach(function(et){le[et]&&(kc[et]=function(){for(var yt,Fn=arguments.length,sr=new Array(Fn),Mn=0;Mn<Fn;Mn++)sr[Mn]=arguments[Mn];(yt=Xf[et])===null||yt===void 0||yt.call.apply(yt,[Xf].concat(sr)),le[et].apply(le,sr)})});var e1=S.cloneElement(me,ie(ie({},Xf),kc)),t1={x:Zr,y:Pr},YT=q?ie({},q!==!0?q:{}):null;return S.createElement(S.Fragment,null,S.createElement(hl,{disabled:!qt,ref:Fe,onResize:Nl},S.createElement(Sdt,{getTriggerDOMNode:ye},e1)),S.createElement(N6.Provider,{value:fe},S.createElement(wdt,{portal:t,ref:rt,prefixCls:a,popup:N,className:ve(k,mn),style:O,target:Xe,onMouseEnter:Ji,onMouseLeave:Kf,onPointerEnter:Ji,zIndex:R,open:qt,keepDom:Vt,fresh:H,onClick:W,onPointerDownCapture:XT,mask:w,motion:Hn,maskMotion:Dn,onVisibleChanged:Yu,onPrepare:Zu,forceRender:E,autoDestroy:xe,getPopupContainer:C,align:Yi,arrow:YT,arrowPos:t1,ready:Il,offsetX:Wt,offsetY:st,offsetR:Dt,offsetB:Qt,onAlign:bo,stretch:F,targetWidth:yi/Oi,targetHeight:Ug/xr})))});return e}const J3=Odt(yne);function Adt(t,e,n){return ve({[`${t}-status-success`]:e==="success",[`${t}-status-warning`]:e==="warning",[`${t}-status-error`]:e==="error",[`${t}-status-validating`]:e==="validating",[`${t}-has-feedback`]:n})}const _dt=(t,e)=>e||t,One=(t,e,n=void 0)=>{var r,i;const{variant:a,[t]:o}=S.useContext(pn),s=S.useContext(Lut),l=o==null?void 0:o.variant;let c;typeof e<"u"?c=e:n===!1?c="borderless":c=(i=(r=s??l)!==null&&r!==void 0?r:a)!==null&&i!==void 0?i:"outlined";const u=oot.includes(c);return[c,u]};var Pdt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},Rdt=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:Pdt}))},Ane=S.forwardRef(Rdt);function Ddt(){const[,t]=S.useReducer(e=>e+1,0);return t}function _ne(t){var e=t.children,n=t.prefixCls,r=t.id,i=t.overlayInnerStyle,a=t.bodyClassName,o=t.className,s=t.style;return S.createElement("div",{className:ve("".concat(n,"-content"),o),style:s},S.createElement("div",{className:ve("".concat(n,"-inner"),a),id:r,role:"tooltip",style:i},typeof e=="function"?e():e))}var dh={shiftX:64,adjustY:1},fh={adjustX:1,shiftY:!0},To=[0,0],Fdt={left:{points:["cr","cl"],overflow:fh,offset:[-4,0],targetOffset:To},right:{points:["cl","cr"],overflow:fh,offset:[4,0],targetOffset:To},top:{points:["bc","tc"],overflow:dh,offset:[0,-4],targetOffset:To},bottom:{points:["tc","bc"],overflow:dh,offset:[0,4],targetOffset:To},topLeft:{points:["bl","tl"],overflow:dh,offset:[0,-4],targetOffset:To},leftTop:{points:["tr","tl"],overflow:fh,offset:[-4,0],targetOffset:To},topRight:{points:["br","tr"],overflow:dh,offset:[0,-4],targetOffset:To},rightTop:{points:["tl","tr"],overflow:fh,offset:[4,0],targetOffset:To},bottomRight:{points:["tr","br"],overflow:dh,offset:[0,4],targetOffset:To},rightBottom:{points:["bl","br"],overflow:fh,offset:[4,0],targetOffset:To},bottomLeft:{points:["tl","bl"],overflow:dh,offset:[0,4],targetOffset:To},leftBottom:{points:["br","bl"],overflow:fh,offset:[-4,0],targetOffset:To}},Mdt=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],Ldt=function(e,n){var r=e.overlayClassName,i=e.trigger,a=i===void 0?["hover"]:i,o=e.mouseEnterDelay,s=o===void 0?0:o,l=e.mouseLeaveDelay,c=l===void 0?.1:l,u=e.overlayStyle,d=e.prefixCls,f=d===void 0?"rc-tooltip":d,h=e.children,p=e.onVisibleChange,g=e.afterVisibleChange,m=e.transitionName,v=e.animation,y=e.motion,b=e.placement,w=b===void 0?"right":b,x=e.align,$=x===void 0?{}:x,C=e.destroyTooltipOnHide,E=C===void 0?!1:C,I=e.defaultVisible,T=e.getTooltipContainer,N=e.overlayInnerStyle;e.arrowContent;var k=e.overlay,O=e.id,_=e.showArrow,P=_===void 0?!0:_,D=e.classNames,L=e.styles,R=Ot(e,Mdt),F=bne(O),V=S.useRef(null);S.useImperativeHandle(n,function(){return V.current});var H=ie({},R);"visible"in e&&(H.popupVisible=e.visible);var U=function(){return S.createElement(_ne,{key:"content",prefixCls:f,id:F,bodyClassName:D==null?void 0:D.body,overlayInnerStyle:ie(ie({},N),L==null?void 0:L.body)},k)},W=function(){var q=S.Children.only(h),X=(q==null?void 0:q.props)||{},re=ie(ie({},X),{},{"aria-describedby":k?F:null});return S.cloneElement(h,re)};return S.createElement(J3,Qe({popupClassName:ve(r,D==null?void 0:D.root),prefixCls:f,popup:U,action:a,builtinPlacements:Fdt,popupPlacement:w,ref:V,popupAlign:$,getPopupContainer:T,onPopupVisibleChange:p,afterPopupVisibleChange:g,popupTransitionName:m,popupAnimation:v,popupMotion:y,defaultPopupVisible:I,autoDestroy:E,mouseLeaveDelay:c,popupStyle:ie(ie({},u),L==null?void 0:L.root),mouseEnterDelay:s,arrow:P},H),W())};const jdt=S.forwardRef(Ldt);function zdt(t){const{sizePopupArrow:e,borderRadiusXS:n,borderRadiusOuter:r}=t,i=e/2,a=0,o=i,s=r*1/Math.sqrt(2),l=i-r*(1-1/Math.sqrt(2)),c=i-n*(1/Math.sqrt(2)),u=r*(Math.sqrt(2)-1)+n*(1/Math.sqrt(2)),d=2*i-c,f=u,h=2*i-s,p=l,g=2*i-a,m=o,v=i*Math.sqrt(2)+r*(Math.sqrt(2)-2),y=r*(Math.sqrt(2)-1),b=`polygon(${y}px 100%, 50% ${y}px, ${2*i-y}px 100%, ${y}px 100%)`,w=`path('M ${a} ${o} A ${r} ${r} 0 0 0 ${s} ${l} L ${c} ${u} A ${n} ${n} 0 0 1 ${d} ${f} L ${h} ${p} A ${r} ${r} 0 0 0 ${g} ${m} Z')`;return{arrowShadowWidth:v,arrowPath:w,arrowPolygon:b}}const Bdt=(t,e,n)=>{const{sizePopupArrow:r,arrowPolygon:i,arrowPath:a,arrowShadowWidth:o,borderRadiusXS:s,calc:l}=t;return{pointerEvents:"none",width:r,height:r,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:r,height:l(r).div(2).equal(),background:e,clipPath:{_multi_value_:!0,value:[i,a]},content:'""'},"&::after":{content:'""',position:"absolute",width:o,height:o,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${Ce(s)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:n,zIndex:0,background:"transparent"}}},Pne=8;function Rne(t){const{contentRadius:e,limitVerticalRadius:n}=t,r=e>12?e+2:12;return{arrowOffsetHorizontal:r,arrowOffsetVertical:n?Pne:r}}function rw(t,e){return t?e:{}}function Vdt(t,e,n){const{componentCls:r,boxShadowPopoverArrow:i,arrowOffsetVertical:a,arrowOffsetHorizontal:o}=t,{arrowDistance:s=0,arrowPlacement:l={left:!0,right:!0,top:!0,bottom:!0}}={};return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({[`${r}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},Bdt(t,e,i)),{"&:before":{background:e}})]},rw(!!l.top,{[[`&-placement-top > ${r}-arrow`,`&-placement-topLeft > ${r}-arrow`,`&-placement-topRight > ${r}-arrow`].join(",")]:{bottom:s,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":o,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:o}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${Ce(o)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:o}}}})),rw(!!l.bottom,{[[`&-placement-bottom > ${r}-arrow`,`&-placement-bottomLeft > ${r}-arrow`,`&-placement-bottomRight > ${r}-arrow`].join(",")]:{top:s,transform:"translateY(-100%)"},[`&-placement-bottom > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":o,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:o}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${Ce(o)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:o}}}})),rw(!!l.left,{[[`&-placement-left > ${r}-arrow`,`&-placement-leftTop > ${r}-arrow`,`&-placement-leftBottom > ${r}-arrow`].join(",")]:{right:{_skip_check_:!0,value:s},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${r}-arrow`]:{top:a},[`&-placement-leftBottom > ${r}-arrow`]:{bottom:a}})),rw(!!l.right,{[[`&-placement-right > ${r}-arrow`,`&-placement-rightTop > ${r}-arrow`,`&-placement-rightBottom > ${r}-arrow`].join(",")]:{left:{_skip_check_:!0,value:s},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${r}-arrow`]:{top:a},[`&-placement-rightBottom > ${r}-arrow`]:{bottom:a}}))}}function Wdt(t,e,n,r){if(r===!1)return{adjustX:!1,adjustY:!1};const i=r&&typeof r=="object"?r:{},a={};switch(t){case"top":case"bottom":a.shiftX=e.arrowOffsetHorizontal*2+n,a.shiftY=!0,a.adjustY=!0;break;case"left":case"right":a.shiftY=e.arrowOffsetVertical*2+n,a.shiftX=!0,a.adjustX=!0;break}const o=Object.assign(Object.assign({},a),i);return o.shiftX||(o.adjustX=!0),o.shiftY||(o.adjustY=!0),o}const D6={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},Udt={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},Hdt=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function Gdt(t){const{arrowWidth:e,autoAdjustOverflow:n,arrowPointAtCenter:r,offset:i,borderRadius:a}=t,o=e/2,s={};return Object.keys(D6).forEach(l=>{const c=r&&Udt[l]||D6[l],u=Object.assign(Object.assign({},c),{offset:[0,0],dynamicInset:!0});switch(s[l]=u,Hdt.has(l)&&(u.autoArrow=!1),l){case"top":case"topLeft":case"topRight":u.offset[1]=-o-i;break;case"bottom":case"bottomLeft":case"bottomRight":u.offset[1]=o+i;break;case"left":case"leftTop":case"leftBottom":u.offset[0]=-o-i;break;case"right":case"rightTop":case"rightBottom":u.offset[0]=o+i;break}const d=Rne({contentRadius:a,limitVerticalRadius:!0});if(r)switch(l){case"topLeft":case"bottomLeft":u.offset[0]=-d.arrowOffsetHorizontal-o;break;case"topRight":case"bottomRight":u.offset[0]=d.arrowOffsetHorizontal+o;break;case"leftTop":case"rightTop":u.offset[1]=-d.arrowOffsetHorizontal*2+o;break;case"leftBottom":case"rightBottom":u.offset[1]=d.arrowOffsetHorizontal*2-o;break}u.overflow=Wdt(l,d,e,n),u.htmlRegion="visibleFirst"}),s}const qdt=t=>{const{calc:e,componentCls:n,tooltipMaxWidth:r,tooltipColor:i,tooltipBg:a,tooltipBorderRadius:o,zIndexPopup:s,controlHeight:l,boxShadowSecondary:c,paddingSM:u,paddingXS:d,arrowOffsetHorizontal:f,sizePopupArrow:h}=t,p=e(o).add(h).add(f).equal(),g=e(o).mul(2).add(h).equal();return[{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},wc(t)),{position:"absolute",zIndex:s,display:"block",width:"max-content",maxWidth:r,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":a,[`${n}-inner`]:{minWidth:g,minHeight:l,padding:`${Ce(t.calc(u).div(2).equal())} ${Ce(d)}`,color:i,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:a,borderRadius:o,boxShadow:c,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:p},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${n}-inner`]:{borderRadius:t.min(o,Pne)}},[`${n}-content`]:{position:"relative"}}),Rot(t,(m,{darkColor:v})=>({[`&${n}-${m}`]:{[`${n}-inner`]:{backgroundColor:v},[`${n}-arrow`]:{"--antd-arrow-background-color":v}}}))),{"&-rtl":{direction:"rtl"}})},Vdt(t,"var(--antd-arrow-background-color)"),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]},Kdt=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+70},Rne({contentRadius:t.borderRadius,limitVerticalRadius:!0})),zdt(_r(t,{borderRadiusOuter:Math.min(t.borderRadiusOuter,4)}))),Dne=(t,e=!0)=>vo("Tooltip",r=>{const{borderRadius:i,colorTextLightSolid:a,colorBgSpotlight:o}=r,s=_r(r,{tooltipMaxWidth:250,tooltipColor:a,tooltipBorderRadius:i,tooltipBg:o});return[qdt(s),rct(r,"zoom-big-fast")]},Kdt,{resetStyle:!1,injectStyle:e})(t),Xdt=bf.map(t=>`${t}-inverse`);function Ydt(t,e=!0){return e?[].concat(Be(Xdt),Be(bf)).includes(t):bf.includes(t)}function Fne(t,e){const n=Ydt(e),r=ve({[`${t}-${e}`]:e&&n}),i={},a={};return e&&!n&&(i.background=e,a["--antd-arrow-background-color"]=e),{className:r,overlayStyle:i,arrowStyle:a}}const Zdt=t=>{const{prefixCls:e,className:n,placement:r="top",title:i,color:a,overlayInnerStyle:o}=t,{getPrefixCls:s}=S.useContext(pn),l=s("tooltip",e),[c,u,d]=Dne(l),f=Fne(l,a),h=f.arrowStyle,p=Object.assign(Object.assign({},o),f.overlayStyle),g=ve(u,d,l,`${l}-pure`,`${l}-placement-${r}`,n,f.className);return c(S.createElement("div",{className:g,style:h},S.createElement("div",{className:`${l}-arrow`}),S.createElement(_ne,Object.assign({},t,{className:u,prefixCls:l,overlayInnerStyle:p}),i)))};var Qdt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Jdt=S.forwardRef((t,e)=>{var n,r;const{prefixCls:i,openClassName:a,getTooltipContainer:o,color:s,overlayInnerStyle:l,children:c,afterOpenChange:u,afterVisibleChange:d,destroyTooltipOnHide:f,destroyOnHidden:h,arrow:p=!0,title:g,overlay:m,builtinPlacements:v,arrowPointAtCenter:y=!1,autoAdjustOverflow:b=!0,motion:w,getPopupContainer:x,placement:$="top",mouseEnterDelay:C=.1,mouseLeaveDelay:E=.1,overlayStyle:I,rootClassName:T,overlayClassName:N,styles:k,classNames:O}=t,_=Qdt(t,["prefixCls","openClassName","getTooltipContainer","color","overlayInnerStyle","children","afterOpenChange","afterVisibleChange","destroyTooltipOnHide","destroyOnHidden","arrow","title","overlay","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","motion","getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),P=!!p,[,D]=Ku(),{getPopupContainer:L,getPrefixCls:R,direction:F,className:V,style:H,classNames:U,styles:W}=Hf("tooltip"),G=xte(),q=S.useRef(null),X=()=>{var We;(We=q.current)===null||We===void 0||We.forceAlign()};S.useImperativeHandle(e,()=>{var We,Xe;return{forceAlign:X,forcePopupAlign:()=>{G.deprecated(!1,"forcePopupAlign","forceAlign"),X()},nativeElement:(We=q.current)===null||We===void 0?void 0:We.nativeElement,popupElement:(Xe=q.current)===null||Xe===void 0?void 0:Xe.popupElement}});const[re,ce]=Vo(!1,{value:(n=t.open)!==null&&n!==void 0?n:t.visible,defaultValue:(r=t.defaultOpen)!==null&&r!==void 0?r:t.defaultVisible}),ee=!g&&!m&&g!==0,se=We=>{var Xe,Le;ce(ee?!1:We),ee||((Xe=t.onOpenChange)===null||Xe===void 0||Xe.call(t,We),(Le=t.onVisibleChange)===null||Le===void 0||Le.call(t,We))},ue=S.useMemo(()=>{var We,Xe;let Le=y;return typeof p=="object"&&(Le=(Xe=(We=p.pointAtCenter)!==null&&We!==void 0?We:p.arrowPointAtCenter)!==null&&Xe!==void 0?Xe:y),v||Gdt({arrowPointAtCenter:Le,autoAdjustOverflow:b,arrowWidth:P?D.sizePopupArrow:0,borderRadius:D.borderRadius,offset:D.marginXXS})},[y,p,v,D]),Q=S.useMemo(()=>g===0?g:m||g||"",[m,g]),ye=S.createElement(jut,{space:!0},typeof Q=="function"?Q():Q),le=R("tooltip",i),xe=R(),be=t["data-popover-inject"];let $e=re;!("open"in t)&&!("visible"in t)&&ee&&($e=!1);const Ne=S.isValidElement(c)&&!tne(c)?c:S.createElement("span",null,c),Ve=Ne.props,Pe=!Ve.className||typeof Ve.className=="string"?ve(Ve.className,a||`${le}-open`):Ve.className,[ke,fe,pe]=Dne(le,!be),Me=Fne(le,s),He=Me.arrowStyle,je=ve(N,{[`${le}-rtl`]:F==="rtl"},Me.className,T,fe,pe,V,U.root,O==null?void 0:O.root),pt=ve(U.body,O==null?void 0:O.body),[ut,rt]=Ust("Tooltip",_.zIndex),ft=S.createElement(jdt,Object.assign({},_,{zIndex:ut,showArrow:P,placement:$,mouseEnterDelay:C,mouseLeaveDelay:E,prefixCls:le,classNames:{root:je,body:pt},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},He),W.root),H),I),k==null?void 0:k.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},W.body),l),k==null?void 0:k.body),Me.overlayStyle)},getTooltipContainer:x||o||L,ref:q,builtinPlacements:ue,overlay:ye,visible:$e,onVisibleChange:se,afterVisibleChange:u??d,arrowContent:S.createElement("span",{className:`${le}-arrow-content`}),motion:{motionName:ane(xe,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:h??!!f}),$e?xf(Ne,{className:Pe}):Ne);return ke(S.createElement(rne.Provider,{value:rt},ft))}),zg=Jdt;zg._InternalPanelDoNotUseOrYouWillBeFired=Zdt;var eft=ur.ESC,tft=ur.TAB;function nft(t){var e=t.visible,n=t.triggerRef,r=t.onVisibleChange,i=t.autoFocus,a=t.overlayRef,o=S.useRef(!1),s=function(){if(e){var d,f;(d=n.current)===null||d===void 0||(f=d.focus)===null||f===void 0||f.call(d),r==null||r(!1)}},l=function(){var d;return(d=a.current)!==null&&d!==void 0&&d.focus?(a.current.focus(),o.current=!0,!0):!1},c=function(d){switch(d.keyCode){case eft:s();break;case tft:{var f=!1;o.current||(f=l()),f?d.preventDefault():s();break}}};S.useEffect(function(){return e?(window.addEventListener("keydown",c),i&&ci(l,3),function(){window.removeEventListener("keydown",c),o.current=!1}):function(){o.current=!1}},[e])}var rft=S.forwardRef(function(t,e){var n=t.overlay,r=t.arrow,i=t.prefixCls,a=S.useMemo(function(){var s;return typeof n=="function"?s=n():s=n,s},[n]),o=qu(e,Dg(a));return B.createElement(B.Fragment,null,r&&B.createElement("div",{className:"".concat(i,"-arrow")}),B.cloneElement(a,{ref:Uf(a)?o:void 0}))}),hh={adjustX:1,adjustY:1},ph=[0,0],ift={topLeft:{points:["bl","tl"],overflow:hh,offset:[0,-4],targetOffset:ph},top:{points:["bc","tc"],overflow:hh,offset:[0,-4],targetOffset:ph},topRight:{points:["br","tr"],overflow:hh,offset:[0,-4],targetOffset:ph},bottomLeft:{points:["tl","bl"],overflow:hh,offset:[0,4],targetOffset:ph},bottom:{points:["tc","bc"],overflow:hh,offset:[0,4],targetOffset:ph},bottomRight:{points:["tr","br"],overflow:hh,offset:[0,4],targetOffset:ph}},aft=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function oft(t,e){var n,r=t.arrow,i=r===void 0?!1:r,a=t.prefixCls,o=a===void 0?"rc-dropdown":a,s=t.transitionName,l=t.animation,c=t.align,u=t.placement,d=u===void 0?"bottomLeft":u,f=t.placements,h=f===void 0?ift:f,p=t.getPopupContainer,g=t.showAction,m=t.hideAction,v=t.overlayClassName,y=t.overlayStyle,b=t.visible,w=t.trigger,x=w===void 0?["hover"]:w,$=t.autoFocus,C=t.overlay,E=t.children,I=t.onVisibleChange,T=Ot(t,aft),N=B.useState(),k=ge(N,2),O=k[0],_=k[1],P="visible"in t?b:O,D=B.useRef(null),L=B.useRef(null),R=B.useRef(null);B.useImperativeHandle(e,function(){return D.current});var F=function(ce){_(ce),I==null||I(ce)};nft({visible:P,triggerRef:R,onVisibleChange:F,autoFocus:$,overlayRef:L});var V=function(ce){var ee=t.onOverlayClick;_(!1),ee&&ee(ce)},H=function(){return B.createElement(rft,{ref:L,overlay:C,prefixCls:o,arrow:i})},U=function(){return typeof C=="function"?H:H()},W=function(){var ce=t.minOverlayWidthMatchTrigger,ee=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?ce:!ee},G=function(){var ce=t.openClassName;return ce!==void 0?ce:"".concat(o,"-open")},q=B.cloneElement(E,{className:ve((n=E.props)===null||n===void 0?void 0:n.className,P&&G()),ref:Uf(E)?qu(R,Dg(E)):void 0}),X=m;return!X&&x.indexOf("contextMenu")!==-1&&(X=["click"]),B.createElement(J3,Qe({builtinPlacements:h},T,{prefixCls:o,ref:D,popupClassName:ve(v,Y({},"".concat(o,"-show-arrow"),i)),popupStyle:y,action:x,showAction:g,hideAction:X,popupPlacement:d,popupAlign:c,popupTransitionName:s,popupAnimation:l,popupVisible:P,stretch:W()?"minWidth":"",popup:U(),onPopupVisibleChange:F,onPopupClick:V,getPopupContainer:p}),q)}const sft=B.forwardRef(oft);var Mne=S.createContext(null);function Lne(t,e){return t===void 0?null:"".concat(t,"-").concat(e)}function jne(t){var e=S.useContext(Mne);return Lne(e,t)}var lft=["children","locked"],_s=S.createContext(null);function cft(t,e){var n=ie({},t);return Object.keys(e).forEach(function(r){var i=e[r];i!==void 0&&(n[r]=i)}),n}function V0(t){var e=t.children,n=t.locked,r=Ot(t,lft),i=S.useContext(_s),a=TT(function(){return cft(i,r)},[i,r],function(o,s){return!n&&(o[0]!==s[0]||!_0(o[1],s[1],!0))});return S.createElement(_s.Provider,{value:a},e)}var uft=[],zne=S.createContext(null);function BT(){return S.useContext(zne)}var Bne=S.createContext(uft);function Qx(t){var e=S.useContext(Bne);return S.useMemo(function(){return t!==void 0?[].concat(Be(e),[t]):e},[e,t])}var Vne=S.createContext(null),eL=S.createContext({});function F6(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(X3(t)){var n=t.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||t.isContentEditable||n==="a"&&!!t.getAttribute("href"),i=t.getAttribute("tabindex"),a=Number(i),o=null;return i&&!Number.isNaN(a)?o=a:r&&o===null&&(o=0),r&&t.disabled&&(o=null),o!==null&&(o>=0||e&&o<0)}return!1}function dft(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=Be(t.querySelectorAll("*")).filter(function(r){return F6(r,e)});return F6(t,e)&&n.unshift(t),n}var bP=ur.LEFT,xP=ur.RIGHT,wP=ur.UP,Fw=ur.DOWN,Mw=ur.ENTER,Wne=ur.ESC,bv=ur.HOME,xv=ur.END,M6=[wP,Fw,bP,xP];function fft(t,e,n,r){var i,a="prev",o="next",s="children",l="parent";if(t==="inline"&&r===Mw)return{inlineTrigger:!0};var c=Y(Y({},wP,a),Fw,o),u=Y(Y(Y(Y({},bP,n?o:a),xP,n?a:o),Fw,s),Mw,s),d=Y(Y(Y(Y(Y(Y({},wP,a),Fw,o),Mw,s),Wne,l),bP,n?s:l),xP,n?l:s),f={inline:c,horizontal:u,vertical:d,inlineSub:c,horizontalSub:d,verticalSub:d},h=(i=f["".concat(t).concat(e?"":"Sub")])===null||i===void 0?void 0:i[r];switch(h){case a:return{offset:-1,sibling:!0};case o:return{offset:1,sibling:!0};case l:return{offset:-1,sibling:!1};case s:return{offset:1,sibling:!1};default:return null}}function hft(t){for(var e=t;e;){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}function pft(t,e){for(var n=t||document.activeElement;n;){if(e.has(n))return n;n=n.parentElement}return null}function tL(t,e){var n=dft(t,!0);return n.filter(function(r){return e.has(r)})}function L6(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!t)return null;var i=tL(t,e),a=i.length,o=i.findIndex(function(s){return n===s});return r<0?o===-1?o=a-1:o-=1:r>0&&(o+=1),o=(o+a)%a,i[o]}var SP=function(e,n){var r=new Set,i=new Map,a=new Map;return e.forEach(function(o){var s=document.querySelector("[data-menu-id='".concat(Lne(n,o),"']"));s&&(r.add(s),a.set(s,o),i.set(o,s))}),{elements:r,key2element:i,element2key:a}};function mft(t,e,n,r,i,a,o,s,l,c){var u=S.useRef(),d=S.useRef();d.current=e;var f=function(){ci.cancel(u.current)};return S.useEffect(function(){return function(){f()}},[]),function(h){var p=h.which;if([].concat(M6,[Mw,Wne,bv,xv]).includes(p)){var g=a(),m=SP(g,r),v=m,y=v.elements,b=v.key2element,w=v.element2key,x=b.get(e),$=pft(x,y),C=w.get($),E=fft(t,o(C,!0).length===1,n,p);if(!E&&p!==bv&&p!==xv)return;(M6.includes(p)||[bv,xv].includes(p))&&h.preventDefault();var I=function(L){if(L){var R=L,F=L.querySelector("a");F!=null&&F.getAttribute("href")&&(R=F);var V=w.get(L);s(V),f(),u.current=ci(function(){d.current===V&&R.focus()})}};if([bv,xv].includes(p)||E.sibling||!$){var T;!$||t==="inline"?T=i.current:T=hft($);var N,k=tL(T,y);p===bv?N=k[0]:p===xv?N=k[k.length-1]:N=L6(T,y,$,E.offset),I(N)}else if(E.inlineTrigger)l(C);else if(E.offset>0)l(C,!0),f(),u.current=ci(function(){m=SP(g,r);var D=$.getAttribute("aria-controls"),L=document.getElementById(D),R=L6(L,m.elements);I(R)},5);else if(E.offset<0){var O=o(C,!0),_=O[O.length-2],P=b.get(_);l(_,!1),I(P)}}c==null||c(h)}}function gft(t){Promise.resolve().then(t)}var nL="__RC_UTIL_PATH_SPLIT__",j6=function(e){return e.join(nL)},vft=function(e){return e.split(nL)},$P="rc-menu-more";function yft(){var t=S.useState({}),e=ge(t,2),n=e[1],r=S.useRef(new Map),i=S.useRef(new Map),a=S.useState([]),o=ge(a,2),s=o[0],l=o[1],c=S.useRef(0),u=S.useRef(!1),d=function(){u.current||n({})},f=S.useCallback(function(b,w){var x=j6(w);i.current.set(x,b),r.current.set(b,x),c.current+=1;var $=c.current;gft(function(){$===c.current&&d()})},[]),h=S.useCallback(function(b,w){var x=j6(w);i.current.delete(x),r.current.delete(b)},[]),p=S.useCallback(function(b){l(b)},[]),g=S.useCallback(function(b,w){var x=r.current.get(b)||"",$=vft(x);return w&&s.includes($[0])&&$.unshift($P),$},[s]),m=S.useCallback(function(b,w){return b.filter(function(x){return x!==void 0}).some(function(x){var $=g(x,!0);return $.includes(w)})},[g]),v=function(){var w=Be(r.current.keys());return s.length&&w.push($P),w},y=S.useCallback(function(b){var w="".concat(r.current.get(b)).concat(nL),x=new Set;return Be(i.current.keys()).forEach(function($){$.startsWith(w)&&x.add(i.current.get($))}),x},[]);return S.useEffect(function(){return function(){u.current=!0}},[]),{registerPath:f,unregisterPath:h,refreshOverflowKeys:p,isSubPathKey:m,getKeyPath:g,getKeys:v,getSubPathKeys:y}}function Lv(t){var e=S.useRef(t);e.current=t;var n=S.useCallback(function(){for(var r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(r=e.current)===null||r===void 0?void 0:r.call.apply(r,[e].concat(a))},[]);return t?n:void 0}var bft=Math.random().toFixed(5).toString().slice(2),z6=0;function xft(t){var e=Vo(t,{value:t}),n=ge(e,2),r=n[0],i=n[1];return S.useEffect(function(){z6+=1;var a="".concat(bft,"-").concat(z6);i("rc-menu-uuid-".concat(a))},[]),r}function Une(t,e,n,r){var i=S.useContext(_s),a=i.activeKey,o=i.onActive,s=i.onInactive,l={active:a===t};return e||(l.onMouseEnter=function(c){n==null||n({key:t,domEvent:c}),o(t)},l.onMouseLeave=function(c){r==null||r({key:t,domEvent:c}),s(t)}),l}function Hne(t){var e=S.useContext(_s),n=e.mode,r=e.rtl,i=e.inlineIndent;if(n!=="inline")return null;var a=t;return r?{paddingRight:a*i}:{paddingLeft:a*i}}function Gne(t){var e=t.icon,n=t.props,r=t.children,i;return e===null||e===!1?null:(typeof e=="function"?i=S.createElement(e,ie({},n)):typeof e!="boolean"&&(i=e),i||r||null)}var wft=["item"];function Z$(t){var e=t.item,n=Ot(t,wft);return Object.defineProperty(n,"item",{get:function(){return Wi(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),n}var Sft=["title","attribute","elementRef"],$ft=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],Cft=["active"],Eft=function(t){Ls(n,t);var e=js(n);function n(){return gr(this,n),e.apply(this,arguments)}return vr(n,[{key:"render",value:function(){var i=this.props,a=i.title,o=i.attribute,s=i.elementRef,l=Ot(i,Sft),c=Jo(l,["eventKey","popupClassName","popupOffset","onTitleClick"]);return Wi(!o,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),S.createElement(Kl.Item,Qe({},o,{title:typeof a=="string"?a:void 0},c,{ref:s}))}}]),n}(S.Component),Tft=S.forwardRef(function(t,e){var n=t.style,r=t.className,i=t.eventKey;t.warnKey;var a=t.disabled,o=t.itemIcon,s=t.children,l=t.role,c=t.onMouseEnter,u=t.onMouseLeave,d=t.onClick,f=t.onKeyDown,h=t.onFocus,p=Ot(t,$ft),g=jne(i),m=S.useContext(_s),v=m.prefixCls,y=m.onItemClick,b=m.disabled,w=m.overflowDisabled,x=m.itemIcon,$=m.selectedKeys,C=m.onActive,E=S.useContext(eL),I=E._internalRenderMenuItem,T="".concat(v,"-item"),N=S.useRef(),k=S.useRef(),O=b||a,_=Rg(e,k),P=Qx(i),D=function(ee){return{key:i,keyPath:Be(P).reverse(),item:N.current,domEvent:ee}},L=o||x,R=Une(i,O,c,u),F=R.active,V=Ot(R,Cft),H=$.includes(i),U=Hne(P.length),W=function(ee){if(!O){var se=D(ee);d==null||d(Z$(se)),y(se)}},G=function(ee){if(f==null||f(ee),ee.which===ur.ENTER){var se=D(ee);d==null||d(Z$(se)),y(se)}},q=function(ee){C(i),h==null||h(ee)},X={};t.role==="option"&&(X["aria-selected"]=H);var re=S.createElement(Eft,Qe({ref:N,elementRef:_,role:l===null?"none":l||"menuitem",tabIndex:a?null:-1,"data-menu-id":w&&g?null:g},Jo(p,["extra"]),V,X,{component:"li","aria-disabled":a,style:ie(ie({},U),n),className:ve(T,Y(Y(Y({},"".concat(T,"-active"),F),"".concat(T,"-selected"),H),"".concat(T,"-disabled"),O),r),onClick:W,onKeyDown:G,onFocus:q}),s,S.createElement(Gne,{props:ie(ie({},t),{},{isSelected:H}),icon:L}));return I&&(re=I(re,t,{selected:H})),re});function Ift(t,e){var n=t.eventKey,r=BT(),i=Qx(n);return S.useEffect(function(){if(r)return r.registerPath(n,i),function(){r.unregisterPath(n,i)}},[i]),r?null:S.createElement(Tft,Qe({},t,{ref:e}))}const VT=S.forwardRef(Ift);var Nft=["className","children"],kft=function(e,n){var r=e.className,i=e.children,a=Ot(e,Nft),o=S.useContext(_s),s=o.prefixCls,l=o.mode,c=o.rtl;return S.createElement("ul",Qe({className:ve(s,c&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat(l==="inline"?"inline":"vertical"),r),role:"menu"},a,{"data-menu-list":!0,ref:n}),i)},rL=S.forwardRef(kft);rL.displayName="SubMenuList";function iL(t,e){return wl(t).map(function(n,r){if(S.isValidElement(n)){var i,a,o=n.key,s=(i=(a=n.props)===null||a===void 0?void 0:a.eventKey)!==null&&i!==void 0?i:o,l=s==null;l&&(s="tmp_key-".concat([].concat(Be(e),[r]).join("-")));var c={key:s,eventKey:s};return S.cloneElement(n,c)}return n})}var Ri={adjustX:1,adjustY:1},Oft={topLeft:{points:["bl","tl"],overflow:Ri},topRight:{points:["br","tr"],overflow:Ri},bottomLeft:{points:["tl","bl"],overflow:Ri},bottomRight:{points:["tr","br"],overflow:Ri},leftTop:{points:["tr","tl"],overflow:Ri},leftBottom:{points:["br","bl"],overflow:Ri},rightTop:{points:["tl","tr"],overflow:Ri},rightBottom:{points:["bl","br"],overflow:Ri}},Aft={topLeft:{points:["bl","tl"],overflow:Ri},topRight:{points:["br","tr"],overflow:Ri},bottomLeft:{points:["tl","bl"],overflow:Ri},bottomRight:{points:["tr","br"],overflow:Ri},rightTop:{points:["tr","tl"],overflow:Ri},rightBottom:{points:["br","bl"],overflow:Ri},leftTop:{points:["tl","tr"],overflow:Ri},leftBottom:{points:["bl","br"],overflow:Ri}};function qne(t,e,n){if(e)return e;if(n)return n[t]||n.other}var _ft={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Pft(t){var e=t.prefixCls,n=t.visible,r=t.children,i=t.popup,a=t.popupStyle,o=t.popupClassName,s=t.popupOffset,l=t.disabled,c=t.mode,u=t.onVisibleChange,d=S.useContext(_s),f=d.getPopupContainer,h=d.rtl,p=d.subMenuOpenDelay,g=d.subMenuCloseDelay,m=d.builtinPlacements,v=d.triggerSubMenuAction,y=d.forceSubMenuRender,b=d.rootClassName,w=d.motion,x=d.defaultMotions,$=S.useState(!1),C=ge($,2),E=C[0],I=C[1],T=ie(h?ie({},Aft):ie({},Oft),m),N=_ft[c],k=qne(c,w,x),O=S.useRef(k);c!=="inline"&&(O.current=k);var _=ie(ie({},O.current),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),P=S.useRef();return S.useEffect(function(){return P.current=ci(function(){I(n)}),function(){ci.cancel(P.current)}},[n]),S.createElement(J3,{prefixCls:e,popupClassName:ve("".concat(e,"-popup"),Y({},"".concat(e,"-rtl"),h),o,b),stretch:c==="horizontal"?"minWidth":null,getPopupContainer:f,builtinPlacements:T,popupPlacement:N,popupVisible:E,popup:i,popupStyle:a,popupAlign:s&&{offset:s},action:l?[]:[v],mouseEnterDelay:p,mouseLeaveDelay:g,onPopupVisibleChange:u,forceRender:y,popupMotion:_,fresh:!0},r)}function Rft(t){var e=t.id,n=t.open,r=t.keyPath,i=t.children,a="inline",o=S.useContext(_s),s=o.prefixCls,l=o.forceSubMenuRender,c=o.motion,u=o.defaultMotions,d=o.mode,f=S.useRef(!1);f.current=d===a;var h=S.useState(!f.current),p=ge(h,2),g=p[0],m=p[1],v=f.current?n:!1;S.useEffect(function(){f.current&&m(!1)},[d]);var y=ie({},qne(a,c,u));r.length>1&&(y.motionAppear=!1);var b=y.onVisibleChanged;return y.onVisibleChanged=function(w){return!f.current&&!w&&m(!0),b==null?void 0:b(w)},g?null:S.createElement(V0,{mode:a,locked:!f.current},S.createElement(Sc,Qe({visible:v},y,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(s,"-hidden")}),function(w){var x=w.className,$=w.style;return S.createElement(rL,{id:e,className:x,style:$},i)}))}var Dft=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Fft=["active"],Mft=S.forwardRef(function(t,e){var n=t.style,r=t.className,i=t.title,a=t.eventKey;t.warnKey;var o=t.disabled,s=t.internalPopupClose,l=t.children,c=t.itemIcon,u=t.expandIcon,d=t.popupClassName,f=t.popupOffset,h=t.popupStyle,p=t.onClick,g=t.onMouseEnter,m=t.onMouseLeave,v=t.onTitleClick,y=t.onTitleMouseEnter,b=t.onTitleMouseLeave,w=Ot(t,Dft),x=jne(a),$=S.useContext(_s),C=$.prefixCls,E=$.mode,I=$.openKeys,T=$.disabled,N=$.overflowDisabled,k=$.activeKey,O=$.selectedKeys,_=$.itemIcon,P=$.expandIcon,D=$.onItemClick,L=$.onOpenChange,R=$.onActive,F=S.useContext(eL),V=F._internalRenderSubMenuItem,H=S.useContext(Vne),U=H.isSubPathKey,W=Qx(),G="".concat(C,"-submenu"),q=T||o,X=S.useRef(),re=S.useRef(),ce=c??_,ee=u??P,se=I.includes(a),ue=!N&&se,Q=U(O,a),ye=Une(a,q,y,b),le=ye.active,xe=Ot(ye,Fft),be=S.useState(!1),$e=ge(be,2),Ne=$e[0],Ve=$e[1],Pe=function(me){q||Ve(me)},ke=function(me){Pe(!0),g==null||g({key:a,domEvent:me})},fe=function(me){Pe(!1),m==null||m({key:a,domEvent:me})},pe=S.useMemo(function(){return le||(E!=="inline"?Ne||U([k],a):!1)},[E,le,k,Ne,a,U]),Me=Hne(W.length),He=function(me){q||(v==null||v({key:a,domEvent:me}),E==="inline"&&L(a,!se))},je=Lv(function(Fe){p==null||p(Z$(Fe)),D(Fe)}),pt=function(me){E!=="inline"&&L(a,me)},ut=function(){R(a)},rt=x&&"".concat(x,"-popup"),ft=S.useMemo(function(){return S.createElement(Gne,{icon:E!=="horizontal"?ee:void 0,props:ie(ie({},t),{},{isOpen:ue,isSubMenu:!0})},S.createElement("i",{className:"".concat(G,"-arrow")}))},[E,ee,t,ue,G]),We=S.createElement("div",Qe({role:"menuitem",style:Me,className:"".concat(G,"-title"),tabIndex:q?null:-1,ref:X,title:typeof i=="string"?i:null,"data-menu-id":N&&x?null:x,"aria-expanded":ue,"aria-haspopup":!0,"aria-controls":rt,"aria-disabled":q,onClick:He,onFocus:ut},xe),i,ft),Xe=S.useRef(E);if(E!=="inline"&&W.length>1?Xe.current="vertical":Xe.current=E,!N){var Le=Xe.current;We=S.createElement(Pft,{mode:Le,prefixCls:G,visible:!s&&ue&&E!=="inline",popupClassName:d,popupOffset:f,popupStyle:h,popup:S.createElement(V0,{mode:Le==="horizontal"?"vertical":Le},S.createElement(rL,{id:rt,ref:re},l)),disabled:q,onVisibleChange:pt},We)}var Se=S.createElement(Kl.Item,Qe({ref:e,role:"none"},w,{component:"li",style:n,className:ve(G,"".concat(G,"-").concat(E),r,Y(Y(Y(Y({},"".concat(G,"-open"),ue),"".concat(G,"-active"),pe),"".concat(G,"-selected"),Q),"".concat(G,"-disabled"),q)),onMouseEnter:ke,onMouseLeave:fe}),We,!N&&S.createElement(Rft,{id:rt,open:ue,keyPath:W},l));return V&&(Se=V(Se,t,{selected:Q,active:pe,open:ue,disabled:q})),S.createElement(V0,{onItemClick:je,mode:E==="horizontal"?"vertical":E,itemIcon:ce,expandIcon:ee},Se)}),aL=S.forwardRef(function(t,e){var n=t.eventKey,r=t.children,i=Qx(n),a=iL(r,i),o=BT();S.useEffect(function(){if(o)return o.registerPath(n,i),function(){o.unregisterPath(n,i)}},[i]);var s;return o?s=a:s=S.createElement(Mft,Qe({ref:e},t),a),S.createElement(Bne.Provider,{value:i},s)});function Kne(t){var e=t.className,n=t.style,r=S.useContext(_s),i=r.prefixCls,a=BT();return a?null:S.createElement("li",{role:"separator",className:ve("".concat(i,"-item-divider"),e),style:n})}var Lft=["className","title","eventKey","children"],jft=S.forwardRef(function(t,e){var n=t.className,r=t.title;t.eventKey;var i=t.children,a=Ot(t,Lft),o=S.useContext(_s),s=o.prefixCls,l="".concat(s,"-item-group");return S.createElement("li",Qe({ref:e,role:"presentation"},a,{onClick:function(u){return u.stopPropagation()},className:ve(l,n)}),S.createElement("div",{role:"presentation",className:"".concat(l,"-title"),title:typeof r=="string"?r:void 0},r),S.createElement("ul",{role:"group",className:"".concat(l,"-list")},i))}),Xne=S.forwardRef(function(t,e){var n=t.eventKey,r=t.children,i=Qx(n),a=iL(r,i),o=BT();return o?a:S.createElement(jft,Qe({ref:e},Jo(t,["warnKey"])),a)}),zft=["label","children","key","type","extra"];function CP(t,e,n){var r=e.item,i=e.group,a=e.submenu,o=e.divider;return(t||[]).map(function(s,l){if(s&&at(s)==="object"){var c=s,u=c.label,d=c.children,f=c.key,h=c.type,p=c.extra,g=Ot(c,zft),m=f??"tmp-".concat(l);return d||h==="group"?h==="group"?S.createElement(i,Qe({key:m},g,{title:u}),CP(d,e,n)):S.createElement(a,Qe({key:m},g,{title:u}),CP(d,e,n)):h==="divider"?S.createElement(o,Qe({key:m},g)):S.createElement(r,Qe({key:m},g,{extra:p}),u,(!!p||p===0)&&S.createElement("span",{className:"".concat(n,"-item-extra")},p))}return null}).filter(function(s){return s})}function B6(t,e,n,r,i){var a=t,o=ie({divider:Kne,item:VT,group:Xne,submenu:aL},r);return e&&(a=CP(e,o,i)),iL(a,n)}var Bft=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],ad=[],Vft=S.forwardRef(function(t,e){var n,r=t,i=r.prefixCls,a=i===void 0?"rc-menu":i,o=r.rootClassName,s=r.style,l=r.className,c=r.tabIndex,u=c===void 0?0:c,d=r.items,f=r.children,h=r.direction,p=r.id,g=r.mode,m=g===void 0?"vertical":g,v=r.inlineCollapsed,y=r.disabled,b=r.disabledOverflow,w=r.subMenuOpenDelay,x=w===void 0?.1:w,$=r.subMenuCloseDelay,C=$===void 0?.1:$,E=r.forceSubMenuRender,I=r.defaultOpenKeys,T=r.openKeys,N=r.activeKey,k=r.defaultActiveFirst,O=r.selectable,_=O===void 0?!0:O,P=r.multiple,D=P===void 0?!1:P,L=r.defaultSelectedKeys,R=r.selectedKeys,F=r.onSelect,V=r.onDeselect,H=r.inlineIndent,U=H===void 0?24:H,W=r.motion,G=r.defaultMotions,q=r.triggerSubMenuAction,X=q===void 0?"hover":q,re=r.builtinPlacements,ce=r.itemIcon,ee=r.expandIcon,se=r.overflowedIndicator,ue=se===void 0?"...":se,Q=r.overflowedIndicatorPopupClassName,ye=r.getPopupContainer,le=r.onClick,xe=r.onOpenChange,be=r.onKeyDown;r.openAnimation,r.openTransitionName;var $e=r._internalRenderMenuItem,Ne=r._internalRenderSubMenuItem,Ve=r._internalComponents,Pe=Ot(r,Bft),ke=S.useMemo(function(){return[B6(f,d,ad,Ve,a),B6(f,d,ad,{},a)]},[f,d,Ve]),fe=ge(ke,2),pe=fe[0],Me=fe[1],He=S.useState(!1),je=ge(He,2),pt=je[0],ut=je[1],rt=S.useRef(),ft=xft(p),We=h==="rtl",Xe=Vo(I,{value:T,postState:function(Xt){return Xt||ad}}),Le=ge(Xe,2),Se=Le[0],Fe=Le[1],me=function(Xt){var Jt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function yi(){Fe(Xt),xe==null||xe(Xt)}Jt?hu.flushSync(yi):yi()},Ie=S.useState(Se),Ye=ge(Ie,2),Lt=Ye[0],Hn=Ye[1],Dn=S.useRef(!1),yr=S.useMemo(function(){return(m==="inline"||m==="vertical")&&v?["vertical",v]:[m,!1]},[m,v]),or=ge(yr,2),ln=or[0],In=or[1],qt=ln==="inline",dt=S.useState(ln),Ze=ge(dt,2),it=Ze[0],zt=Ze[1],cn=S.useState(In),vi=ge(cn,2),Bt=vi[0],ba=vi[1];S.useEffect(function(){zt(ln),ba(In),Dn.current&&(qt?Fe(Lt):me(ad))},[ln,In]);var yo=S.useState(0),Vt=ge(yo,2),Kt=Vt[0],Xr=Vt[1],Yn=Kt>=pe.length-1||it!=="horizontal"||b;S.useEffect(function(){qt&&Hn(Se)},[Se]),S.useEffect(function(){return Dn.current=!0,function(){Dn.current=!1}},[]);var Zn=yft(),ja=Zn.registerPath,Ki=Zn.unregisterPath,Xi=Zn.refreshOverflowKeys,Yr=Zn.isSubPathKey,Ni=Zn.getKeyPath,ki=Zn.getKeys,br=Zn.getSubPathKeys,Qn=S.useMemo(function(){return{registerPath:ja,unregisterPath:Ki}},[ja,Ki]),Il=S.useMemo(function(){return{isSubPathKey:Yr}},[Yr]);S.useEffect(function(){Xi(Yn?ad:pe.slice(Kt+1).map(function(mn){return mn.key}))},[Kt,Yn]);var Wt=Vo(N||k&&((n=pe[0])===null||n===void 0?void 0:n.key),{value:N}),st=ge(Wt,2),Dt=st[0],Qt=st[1],Zr=Lv(function(mn){Qt(mn)}),Pr=Lv(function(){Qt(void 0)});S.useImperativeHandle(e,function(){return{list:rt.current,focus:function(Xt){var Jt,yi=ki(),bi=SP(yi,ft),Ic=bi.elements,Nc=bi.key2element,Ug=bi.element2key,qf=tL(rt.current,Ic),Xu=Dt??(qf[0]?Ug.get(qf[0]):(Jt=pe.find(function(Zu){return!Zu.props.disabled}))===null||Jt===void 0?void 0:Jt.key),Nl=Nc.get(Xu);if(Xu&&Nl){var Yu;Nl==null||(Yu=Nl.focus)===null||Yu===void 0||Yu.call(Nl,Xt)}}}});var Oi=Vo(L||[],{value:R,postState:function(Xt){return Array.isArray(Xt)?Xt:Xt==null?ad:[Xt]}}),xr=ge(Oi,2),Yi=xr[0],Qr=xr[1],$c=function(Xt){if(_){var Jt=Xt.key,yi=Yi.includes(Jt),bi;D?yi?bi=Yi.filter(function(Nc){return Nc!==Jt}):bi=[].concat(Be(Yi),[Jt]):bi=[Jt],Qr(bi);var Ic=ie(ie({},Xt),{},{selectedKeys:bi});yi?V==null||V(Ic):F==null||F(Ic)}!D&&Se.length&&it!=="inline"&&me(ad)},Cc=Lv(function(mn){le==null||le(Z$(mn)),$c(mn)}),Zi=Lv(function(mn,Xt){var Jt=Se.filter(function(bi){return bi!==mn});if(Xt)Jt.push(mn);else if(it!=="inline"){var yi=br(mn);Jt=Jt.filter(function(bi){return!yi.has(bi)})}_0(Se,Jt,!0)||me(Jt,!0)}),Qi=function(Xt,Jt){var yi=Jt??!Se.includes(Xt);Zi(Xt,yi)},Ec=mft(it,Dt,We,ft,rt,ki,Ni,Qt,Qi,be);S.useEffect(function(){ut(!0)},[]);var Tc=S.useMemo(function(){return{_internalRenderMenuItem:$e,_internalRenderSubMenuItem:Ne}},[$e,Ne]),bo=it!=="horizontal"||b?pe:pe.map(function(mn,Xt){return S.createElement(V0,{key:mn.key,overflowDisabled:Xt>Kt},mn)}),Wg=S.createElement(Kl,Qe({id:p,ref:rt,prefixCls:"".concat(a,"-overflow"),component:"ul",itemComponent:VT,className:ve(a,"".concat(a,"-root"),"".concat(a,"-").concat(it),l,Y(Y({},"".concat(a,"-inline-collapsed"),Bt),"".concat(a,"-rtl"),We),o),dir:h,style:s,role:"menu",tabIndex:u,data:bo,renderRawItem:function(Xt){return Xt},renderRawRest:function(Xt){var Jt=Xt.length,yi=Jt?pe.slice(-Jt):null;return S.createElement(aL,{eventKey:$P,title:ue,disabled:Yn,internalPopupClose:Jt===0,popupClassName:Q},yi)},maxCount:it!=="horizontal"||b?Kl.INVALIDATE:Kl.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(Xt){Xr(Xt)},onKeyDown:Ec},Pe));return S.createElement(eL.Provider,{value:Tc},S.createElement(Mne.Provider,{value:ft},S.createElement(V0,{prefixCls:a,rootClassName:o,mode:it,openKeys:Se,rtl:We,disabled:y,motion:pt?W:null,defaultMotions:pt?G:null,activeKey:Dt,onActive:Zr,onInactive:Pr,selectedKeys:Yi,inlineIndent:U,subMenuOpenDelay:x,subMenuCloseDelay:C,forceSubMenuRender:E,builtinPlacements:re,triggerSubMenuAction:X,getPopupContainer:ye,itemIcon:ce,expandIcon:ee,onItemClick:Cc,onOpenChange:Zi},S.createElement(Vne.Provider,{value:Il},Wg),S.createElement("div",{style:{display:"none"},"aria-hidden":!0},S.createElement(zne.Provider,{value:Qn},Me)))))}),Jx=Vft;Jx.Item=VT;Jx.SubMenu=aL;Jx.ItemGroup=Xne;Jx.Divider=Kne;var Wft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},Uft=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:Wft}))},Hft=S.forwardRef(Uft);function oL(t){return _r(t,{inputAffixPadding:t.paddingXXS})}const sL=t=>{const{controlHeight:e,fontSize:n,lineHeight:r,lineWidth:i,controlHeightSM:a,controlHeightLG:o,fontSizeLG:s,lineHeightLG:l,paddingSM:c,controlPaddingHorizontalSM:u,controlPaddingHorizontal:d,colorFillAlter:f,colorPrimaryHover:h,colorPrimary:p,controlOutlineWidth:g,controlOutline:m,colorErrorOutline:v,colorWarningOutline:y,colorBgContainer:b,inputFontSize:w,inputFontSizeLG:x,inputFontSizeSM:$}=t,C=w||n,E=$||C,I=x||s,T=Math.round((e-C*r)/2*10)/10-i,N=Math.round((a-E*r)/2*10)/10-i,k=Math.ceil((o-I*l)/2*10)/10-i;return{paddingBlock:Math.max(T,0),paddingBlockSM:Math.max(N,0),paddingBlockLG:Math.max(k,0),paddingInline:c-i,paddingInlineSM:u-i,paddingInlineLG:d-i,addonBg:f,activeBorderColor:p,hoverBorderColor:h,activeShadow:`0 0 0 ${g}px ${m}`,errorActiveShadow:`0 0 0 ${g}px ${v}`,warningActiveShadow:`0 0 0 ${g}px ${y}`,hoverBg:b,activeBg:b,inputFontSize:C,inputFontSizeLG:I,inputFontSizeSM:E}},Gft=t=>({borderColor:t.hoverBorderColor,backgroundColor:t.hoverBg}),lL=t=>({color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},Gft(_r(t,{hoverBorderColor:t.colorBorder,hoverBg:t.colorBgContainerDisabled})))}),Yne=(t,e)=>({background:t.colorBgContainer,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:e.borderColor,"&:hover":{borderColor:e.hoverBorderColor,backgroundColor:t.hoverBg},"&:focus, &:focus-within":{borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:t.activeBg}}),V6=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},Yne(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}}),[`&${t.componentCls}-status-${e.status}${t.componentCls}-disabled`]:{borderColor:e.borderColor}}),qft=(t,e)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yne(t,{borderColor:t.colorBorder,hoverBorderColor:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeShadow:t.activeShadow})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},lL(t))}),V6(t,{status:"error",borderColor:t.colorError,hoverBorderColor:t.colorErrorBorderHover,activeBorderColor:t.colorError,activeShadow:t.errorActiveShadow,affixColor:t.colorError})),V6(t,{status:"warning",borderColor:t.colorWarning,hoverBorderColor:t.colorWarningBorderHover,activeBorderColor:t.colorWarning,activeShadow:t.warningActiveShadow,affixColor:t.colorWarning})),e)}),W6=(t,e)=>({[`&${t.componentCls}-group-wrapper-status-${e.status}`]:{[`${t.componentCls}-group-addon`]:{borderColor:e.addonBorderColor,color:e.addonColor}}}),Kft=t=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group`]:{"&-addon":{background:t.addonBg,border:`${Ce(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},W6(t,{status:"error",addonBorderColor:t.colorError,addonColor:t.colorErrorText})),W6(t,{status:"warning",addonBorderColor:t.colorWarning,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group-addon`]:Object.assign({},lL(t))}})}),Xft=(t,e)=>{const{componentCls:n}=t;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${n}-disabled, &[disabled]`]:{color:t.colorTextDisabled,cursor:"not-allowed"},[`&${n}-status-error`]:{"&, & input, & textarea":{color:t.colorError}},[`&${n}-status-warning`]:{"&, & input, & textarea":{color:t.colorWarning}}},e)}},Zne=(t,e)=>{var n;return{background:e.bg,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:(n=e==null?void 0:e.inputColor)!==null&&n!==void 0?n:"unset"},"&:hover":{background:e.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:e.activeBorderColor,backgroundColor:t.activeBg}}},U6=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},Zne(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}})}),Yft=(t,e)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Zne(t,{bg:t.colorFillTertiary,hoverBg:t.colorFillSecondary,activeBorderColor:t.activeBorderColor})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},lL(t))}),U6(t,{status:"error",bg:t.colorErrorBg,hoverBg:t.colorErrorBgHover,activeBorderColor:t.colorError,inputColor:t.colorErrorText,affixColor:t.colorError})),U6(t,{status:"warning",bg:t.colorWarningBg,hoverBg:t.colorWarningBgHover,activeBorderColor:t.colorWarning,inputColor:t.colorWarningText,affixColor:t.colorWarning})),e)}),H6=(t,e)=>({[`&${t.componentCls}-group-wrapper-status-${e.status}`]:{[`${t.componentCls}-group-addon`]:{background:e.addonBg,color:e.addonColor}}}),Zft=t=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group-addon`]:{background:t.colorFillTertiary,"&:last-child":{position:"static"}}},H6(t,{status:"error",addonBg:t.colorErrorBg,addonColor:t.colorErrorText})),H6(t,{status:"warning",addonBg:t.colorWarningBg,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group`]:{"&-addon":{background:t.colorFillTertiary,color:t.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${Ce(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${Ce(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${Ce(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${Ce(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${Ce(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${Ce(t.lineWidth)} ${t.lineType} ${t.colorBorder}`}}}})}),Qne=(t,e)=>({background:t.colorBgContainer,borderWidth:`${Ce(t.lineWidth)} 0`,borderStyle:`${t.lineType} none`,borderColor:`transparent transparent ${e.borderColor} transparent`,borderRadius:0,"&:hover":{borderColor:`transparent transparent ${e.borderColor} transparent`,backgroundColor:t.hoverBg},"&:focus, &:focus-within":{borderColor:`transparent transparent ${e.borderColor} transparent`,outline:0,backgroundColor:t.activeBg}}),G6=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},Qne(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}}),[`&${t.componentCls}-status-${e.status}${t.componentCls}-disabled`]:{borderColor:`transparent transparent ${e.borderColor} transparent`}}),Qft=(t,e)=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Qne(t,{borderColor:t.colorBorder,hoverBorderColor:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeShadow:t.activeShadow})),{[`&${t.componentCls}-disabled, &[disabled]`]:{color:t.colorTextDisabled,boxShadow:"none",cursor:"not-allowed","&:hover":{borderColor:`transparent transparent ${t.colorBorder} transparent`}},"input[disabled], textarea[disabled]":{cursor:"not-allowed"}}),G6(t,{status:"error",borderColor:t.colorError,hoverBorderColor:t.colorErrorBorderHover,activeBorderColor:t.colorError,activeShadow:t.errorActiveShadow,affixColor:t.colorError})),G6(t,{status:"warning",borderColor:t.colorWarning,hoverBorderColor:t.colorWarningBorderHover,activeBorderColor:t.colorWarning,activeShadow:t.warningActiveShadow,affixColor:t.colorWarning})),e)}),Jft=t=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:t,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),Jne=t=>{const{paddingBlockLG:e,lineHeightLG:n,borderRadiusLG:r,paddingInlineLG:i}=t;return{padding:`${Ce(e)} ${Ce(i)}`,fontSize:t.inputFontSizeLG,lineHeight:n,borderRadius:r}},ere=t=>({padding:`${Ce(t.paddingBlockSM)} ${Ce(t.paddingInlineSM)}`,fontSize:t.inputFontSizeSM,borderRadius:t.borderRadiusSM}),tre=t=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${Ce(t.paddingBlock)} ${Ce(t.paddingInline)}`,color:t.colorText,fontSize:t.inputFontSize,lineHeight:t.lineHeight,borderRadius:t.borderRadius,transition:`all ${t.motionDurationMid}`},Jft(t.colorTextPlaceholder)),{"&-lg":Object.assign({},Jne(t)),"&-sm":Object.assign({},ere(t)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),eht=t=>{const{componentCls:e,antCls:n}=t;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:t.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${e}, &-lg > ${e}-group-addon`]:Object.assign({},Jne(t)),[`&-sm ${e}, &-sm > ${e}-group-addon`]:Object.assign({},ere(t)),[`&-lg ${n}-select-single ${n}-select-selector`]:{height:t.controlHeightLG},[`&-sm ${n}-select-single ${n}-select-selector`]:{height:t.controlHeightSM},[`> ${e}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${e}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${Ce(t.paddingInline)}`,color:t.colorText,fontWeight:"normal",fontSize:t.inputFontSize,textAlign:"center",borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`,lineHeight:1,[`${n}-select`]:{margin:`${Ce(t.calc(t.paddingBlock).add(1).mul(-1).equal())} ${Ce(t.calc(t.paddingInline).mul(-1).equal())}`,[`&${n}-select-single:not(${n}-select-customize-input):not(${n}-pagination-size-changer)`]:{[`${n}-select-selector`]:{backgroundColor:"inherit",border:`${Ce(t.lineWidth)} ${t.lineType} transparent`,boxShadow:"none"}}},[`${n}-cascader-picker`]:{margin:`-9px ${Ce(t.calc(t.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${n}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[e]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${e}-search-with-button &`]:{zIndex:0}}},[`> ${e}:first-child, ${e}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}-affix-wrapper`]:{[`&:not(:first-child) ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}:last-child, ${e}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${e}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${e}-search &`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius}},[`&:not(:first-child), ${e}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${e}-group-compact`]:Object.assign(Object.assign({display:"block"},Gf()),{[`${e}-group-addon, ${e}-group-wrap, > ${e}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:t.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${e}-affix-wrapper,
        & > ${e}-number-affix-wrapper,
        & > ${n}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderInlineEndWidth:t.lineWidth},[e]:{float:"none"},[`& > ${n}-select > ${n}-select-selector,
      & > ${n}-select-auto-complete ${e},
      & > ${n}-cascader-picker ${e},
      & > ${e}-group-wrapper ${e}`]:{borderInlineEndWidth:t.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${n}-select-focused`]:{zIndex:1},[`& > ${n}-select > ${n}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${n}-select:first-child > ${n}-select-selector,
      & > ${n}-select-auto-complete:first-child ${e},
      & > ${n}-cascader-picker:first-child ${e}`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius},[`& > *:last-child,
      & > ${n}-select:last-child > ${n}-select-selector,
      & > ${n}-cascader-picker:last-child ${e},
      & > ${n}-cascader-picker-focused:last-child ${e}`]:{borderInlineEndWidth:t.lineWidth,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius},[`& > ${n}-select-auto-complete ${e}`]:{verticalAlign:"top"},[`${e}-group-wrapper + ${e}-group-wrapper`]:{marginInlineStart:t.calc(t.lineWidth).mul(-1).equal(),[`${e}-affix-wrapper`]:{borderRadius:0}},[`${e}-group-wrapper:not(:last-child)`]:{[`&${e}-search > ${e}-group`]:{[`& > ${e}-group-addon > ${e}-search-button`]:{borderRadius:0},[`& > ${e}`]:{borderStartStartRadius:t.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:t.borderRadius}}}})}},tht=t=>{const{componentCls:e,controlHeightSM:n,lineWidth:r,calc:i}=t,o=i(n).sub(i(r).mul(2)).sub(16).div(2).equal();return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wc(t)),tre(t)),qft(t)),Yft(t)),Xft(t)),Qft(t)),{'&[type="color"]':{height:t.controlHeight,[`&${e}-lg`]:{height:t.controlHeightLG},[`&${e}-sm`]:{height:n,paddingTop:o,paddingBottom:o}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{appearance:"none"}})}},nht=t=>{const{componentCls:e}=t;return{[`${e}-clear-icon`]:{margin:0,padding:0,lineHeight:0,color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${t.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:t.colorIcon},"&:active":{color:t.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${Ce(t.inputAffixPadding)}`}}}},rht=t=>{const{componentCls:e,inputAffixPadding:n,colorTextDescription:r,motionDurationSlow:i,colorIcon:a,colorIconHover:o,iconCls:s}=t,l=`${e}-affix-wrapper`,c=`${e}-affix-wrapper-disabled`;return{[l]:Object.assign(Object.assign(Object.assign(Object.assign({},tre(t)),{display:"inline-flex",[`&:not(${e}-disabled):hover`]:{zIndex:1,[`${e}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${e}`]:{padding:0},[`> input${e}, > textarea${e}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[e]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:t.paddingXS}},"&-show-count-suffix":{color:r,direction:"ltr"},"&-show-count-has-suffix":{marginInlineEnd:t.paddingXXS},"&-prefix":{marginInlineEnd:n},"&-suffix":{marginInlineStart:n}}}),nht(t)),{[`${s}${e}-password-icon`]:{color:a,cursor:"pointer",transition:`all ${i}`,"&:hover":{color:o}}}),[`${e}-underlined`]:{borderRadius:0},[c]:{[`${s}${e}-password-icon`]:{color:a,cursor:"not-allowed","&:hover":{color:a}}}}},iht=t=>{const{componentCls:e,borderRadiusLG:n,borderRadiusSM:r}=t;return{[`${e}-group`]:Object.assign(Object.assign(Object.assign({},wc(t)),eht(t)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${e}-group-addon`]:{borderRadius:n,fontSize:t.inputFontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:r}}},Kft(t)),Zft(t)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})})}},aht=t=>{const{componentCls:e,antCls:n}=t,r=`${e}-search`;return{[r]:{[e]:{"&:hover, &:focus":{[`+ ${e}-group-addon ${r}-button:not(${n}-btn-color-primary):not(${n}-btn-variant-text)`]:{borderInlineStartColor:t.colorPrimaryHover}}},[`${e}-affix-wrapper`]:{height:t.controlHeight,borderRadius:0},[`${e}-lg`]:{lineHeight:t.calc(t.lineHeightLG).sub(2e-4).equal()},[`> ${e}-group`]:{[`> ${e}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${r}-button`]:{marginInlineEnd:-1,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${r}-button:not(${n}-btn-color-primary)`]:{color:t.colorTextDescription,"&:hover":{color:t.colorPrimaryHover},"&:active":{color:t.colorPrimaryActive},[`&${n}-btn-loading::before`]:{inset:0}}}},[`${r}-button`]:{height:t.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${e}-affix-wrapper, ${r}-button`]:{height:t.controlHeightLG}},"&-small":{[`${e}-affix-wrapper, ${r}-button`]:{height:t.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${e}-compact-item`]:{[`&:not(${e}-compact-last-item)`]:{[`${e}-group-addon`]:{[`${e}-search-button`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${e}-compact-first-item)`]:{[`${e},${e}-affix-wrapper`]:{borderRadius:0}},[`> ${e}-group-addon ${e}-search-button,
        > ${e},
        ${e}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${e}-affix-wrapper-focused`]:{zIndex:2}}}}},oht=t=>{const{componentCls:e}=t;return{[`${e}-out-of-range`]:{[`&, & input, & textarea, ${e}-show-count-suffix, ${e}-data-count`]:{color:t.colorError}}}},sht=vo(["Input","Shared"],t=>{const e=_r(t,oL(t));return[tht(e),rht(e)]},sL,{resetFont:!1});vo(["Input","Component"],t=>{const e=_r(t,oL(t));return[iht(e),aht(e),oht(e),gne(e)]},sL,{resetFont:!1});var lht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},cht=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:lht}))},uht=S.forwardRef(cht);const WT=S.createContext(null);var dht=function(e){var n=e.activeTabOffset,r=e.horizontal,i=e.rtl,a=e.indicator,o=a===void 0?{}:a,s=o.size,l=o.align,c=l===void 0?"center":l,u=S.useState(),d=ge(u,2),f=d[0],h=d[1],p=S.useRef(),g=B.useCallback(function(v){return typeof s=="function"?s(v):typeof s=="number"?s:v},[s]);function m(){ci.cancel(p.current)}return S.useEffect(function(){var v={};if(n)if(r){v.width=g(n.width);var y=i?"right":"left";c==="start"&&(v[y]=n[y]),c==="center"&&(v[y]=n[y]+n.width/2,v.transform=i?"translateX(50%)":"translateX(-50%)"),c==="end"&&(v[y]=n[y]+n.width,v.transform="translateX(-100%)")}else v.height=g(n.height),c==="start"&&(v.top=n.top),c==="center"&&(v.top=n.top+n.height/2,v.transform="translateY(-50%)"),c==="end"&&(v.top=n.top+n.height,v.transform="translateY(-100%)");return m(),p.current=ci(function(){var b=f&&v&&Object.keys(v).every(function(w){var x=v[w],$=f[w];return typeof x=="number"&&typeof $=="number"?Math.round(x)===Math.round($):x===$});b||h(v)}),m},[JSON.stringify(n),r,i,c,g]),{style:f}},q6={width:0,height:0,left:0,top:0};function fht(t,e,n){return S.useMemo(function(){for(var r,i=new Map,a=e.get((r=t[0])===null||r===void 0?void 0:r.key)||q6,o=a.left+a.width,s=0;s<t.length;s+=1){var l=t[s].key,c=e.get(l);if(!c){var u;c=e.get((u=t[s-1])===null||u===void 0?void 0:u.key)||q6}var d=i.get(l)||ie({},c);d.right=o-d.left-d.width,i.set(l,d)}return i},[t.map(function(r){return r.key}).join("_"),e,n])}function K6(t,e){var n=S.useRef(t),r=S.useState({}),i=ge(r,2),a=i[1];function o(s){var l=typeof s=="function"?s(n.current):s;l!==n.current&&e(l,n.current),n.current=l,a({})}return[n.current,o]}var hht=.1,X6=.01,Lw=20,Y6=Math.pow(.995,Lw);function pht(t,e){var n=S.useState(),r=ge(n,2),i=r[0],a=r[1],o=S.useState(0),s=ge(o,2),l=s[0],c=s[1],u=S.useState(0),d=ge(u,2),f=d[0],h=d[1],p=S.useState(),g=ge(p,2),m=g[0],v=g[1],y=S.useRef();function b(I){var T=I.touches[0],N=T.screenX,k=T.screenY;a({x:N,y:k}),window.clearInterval(y.current)}function w(I){if(i){var T=I.touches[0],N=T.screenX,k=T.screenY;a({x:N,y:k});var O=N-i.x,_=k-i.y;e(O,_);var P=Date.now();c(P),h(P-l),v({x:O,y:_})}}function x(){if(i&&(a(null),v(null),m)){var I=m.x/f,T=m.y/f,N=Math.abs(I),k=Math.abs(T);if(Math.max(N,k)<hht)return;var O=I,_=T;y.current=window.setInterval(function(){if(Math.abs(O)<X6&&Math.abs(_)<X6){window.clearInterval(y.current);return}O*=Y6,_*=Y6,e(O*Lw,_*Lw)},Lw)}}var $=S.useRef();function C(I){var T=I.deltaX,N=I.deltaY,k=0,O=Math.abs(T),_=Math.abs(N);O===_?k=$.current==="x"?T:N:O>_?(k=T,$.current="x"):(k=N,$.current="y"),e(-k,-k)&&I.preventDefault()}var E=S.useRef(null);E.current={onTouchStart:b,onTouchMove:w,onTouchEnd:x,onWheel:C},S.useEffect(function(){function I(O){E.current.onTouchStart(O)}function T(O){E.current.onTouchMove(O)}function N(O){E.current.onTouchEnd(O)}function k(O){E.current.onWheel(O)}return document.addEventListener("touchmove",T,{passive:!1}),document.addEventListener("touchend",N,{passive:!0}),t.current.addEventListener("touchstart",I,{passive:!0}),t.current.addEventListener("wheel",k,{passive:!1}),function(){document.removeEventListener("touchmove",T),document.removeEventListener("touchend",N)}},[])}function nre(t){var e=S.useState(0),n=ge(e,2),r=n[0],i=n[1],a=S.useRef(0),o=S.useRef();return o.current=t,D_(function(){var s;(s=o.current)===null||s===void 0||s.call(o)},[r]),function(){a.current===r&&(a.current+=1,i(a.current))}}function mht(t){var e=S.useRef([]),n=S.useState({}),r=ge(n,2),i=r[1],a=S.useRef(typeof t=="function"?t():t),o=nre(function(){var l=a.current;e.current.forEach(function(c){l=c(l)}),e.current=[],a.current=l,i({})});function s(l){e.current.push(l),o()}return[a.current,s]}var Z6={width:0,height:0,left:0,top:0,right:0};function ght(t,e,n,r,i,a,o){var s=o.tabs,l=o.tabPosition,c=o.rtl,u,d,f;return["top","bottom"].includes(l)?(u="width",d=c?"right":"left",f=Math.abs(n)):(u="height",d="top",f=-n),S.useMemo(function(){if(!s.length)return[0,0];for(var h=s.length,p=h,g=0;g<h;g+=1){var m=t.get(s[g].key)||Z6;if(Math.floor(m[d]+m[u])>Math.floor(f+e)){p=g-1;break}}for(var v=0,y=h-1;y>=0;y-=1){var b=t.get(s[y].key)||Z6;if(b[d]<f){v=y+1;break}}return v>=p?[0,0]:[v,p]},[t,e,r,i,a,f,l,s.map(function(h){return h.key}).join("_"),c])}function Q6(t){var e;return t instanceof Map?(e={},t.forEach(function(n,r){e[r]=n})):e=t,JSON.stringify(e)}var vht="TABS_DQ";function rre(t){return String(t).replace(/"/g,vht)}function cL(t,e,n,r){return!(!n||r||t===!1||t===void 0&&(e===!1||e===null))}var ire=S.forwardRef(function(t,e){var n=t.prefixCls,r=t.editable,i=t.locale,a=t.style;return!r||r.showAdd===!1?null:S.createElement("button",{ref:e,type:"button",className:"".concat(n,"-nav-add"),style:a,"aria-label":(i==null?void 0:i.addAriaLabel)||"Add tab",onClick:function(s){r.onEdit("add",{event:s})}},r.addIcon||"+")}),J6=S.forwardRef(function(t,e){var n=t.position,r=t.prefixCls,i=t.extra;if(!i)return null;var a,o={};return at(i)==="object"&&!S.isValidElement(i)?o=i:o.right=i,n==="right"&&(a=o.right),n==="left"&&(a=o.left),a?S.createElement("div",{className:"".concat(r,"-extra-content"),ref:e},a):null}),yht=S.forwardRef(function(t,e){var n=t.prefixCls,r=t.id,i=t.tabs,a=t.locale,o=t.mobile,s=t.more,l=s===void 0?{}:s,c=t.style,u=t.className,d=t.editable,f=t.tabBarGutter,h=t.rtl,p=t.removeAriaLabel,g=t.onTabClick,m=t.getPopupContainer,v=t.popupClassName,y=S.useState(!1),b=ge(y,2),w=b[0],x=b[1],$=S.useState(null),C=ge($,2),E=C[0],I=C[1],T=l.icon,N=T===void 0?"More":T,k="".concat(r,"-more-popup"),O="".concat(n,"-dropdown"),_=E!==null?"".concat(k,"-").concat(E):null,P=a==null?void 0:a.dropdownAriaLabel;function D(W,G){W.preventDefault(),W.stopPropagation(),d.onEdit("remove",{key:G,event:W})}var L=S.createElement(Jx,{onClick:function(G){var q=G.key,X=G.domEvent;g(q,X),x(!1)},prefixCls:"".concat(O,"-menu"),id:k,tabIndex:-1,role:"listbox","aria-activedescendant":_,selectedKeys:[E],"aria-label":P!==void 0?P:"expanded dropdown"},i.map(function(W){var G=W.closable,q=W.disabled,X=W.closeIcon,re=W.key,ce=W.label,ee=cL(G,X,d,q);return S.createElement(VT,{key:re,id:"".concat(k,"-").concat(re),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(re),disabled:q},S.createElement("span",null,ce),ee&&S.createElement("button",{type:"button","aria-label":p||"remove",tabIndex:0,className:"".concat(O,"-menu-item-remove"),onClick:function(ue){ue.stopPropagation(),D(ue,re)}},X||d.removeIcon||"×"))}));function R(W){for(var G=i.filter(function(ee){return!ee.disabled}),q=G.findIndex(function(ee){return ee.key===E})||0,X=G.length,re=0;re<X;re+=1){q=(q+W+X)%X;var ce=G[q];if(!ce.disabled){I(ce.key);return}}}function F(W){var G=W.which;if(!w){[ur.DOWN,ur.SPACE,ur.ENTER].includes(G)&&(x(!0),W.preventDefault());return}switch(G){case ur.UP:R(-1),W.preventDefault();break;case ur.DOWN:R(1),W.preventDefault();break;case ur.ESC:x(!1);break;case ur.SPACE:case ur.ENTER:E!==null&&g(E,W);break}}S.useEffect(function(){var W=document.getElementById(_);W&&W.scrollIntoView&&W.scrollIntoView(!1)},[E]),S.useEffect(function(){w||I(null)},[w]);var V=Y({},h?"marginRight":"marginLeft",f);i.length||(V.visibility="hidden",V.order=1);var H=ve(Y({},"".concat(O,"-rtl"),h)),U=o?null:S.createElement(sft,Qe({prefixCls:O,overlay:L,visible:i.length?w:!1,onVisibleChange:x,overlayClassName:ve(H,v),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:m},l),S.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:V,"aria-haspopup":"listbox","aria-controls":k,id:"".concat(r,"-more"),"aria-expanded":w,onKeyDown:F},N));return S.createElement("div",{className:ve("".concat(n,"-nav-operations"),u),style:c,ref:e},U,S.createElement(ire,{prefixCls:n,locale:a,editable:d}))});const bht=S.memo(yht,function(t,e){return e.tabMoving});var xht=function(e){var n=e.prefixCls,r=e.id,i=e.active,a=e.focus,o=e.tab,s=o.key,l=o.label,c=o.disabled,u=o.closeIcon,d=o.icon,f=e.closable,h=e.renderWrapper,p=e.removeAriaLabel,g=e.editable,m=e.onClick,v=e.onFocus,y=e.onBlur,b=e.onKeyDown,w=e.onMouseDown,x=e.onMouseUp,$=e.style,C=e.tabCount,E=e.currentPosition,I="".concat(n,"-tab"),T=cL(f,u,g,c);function N(D){c||m(D)}function k(D){D.preventDefault(),D.stopPropagation(),g.onEdit("remove",{key:s,event:D})}var O=S.useMemo(function(){return d&&typeof l=="string"?S.createElement("span",null,l):l},[l,d]),_=S.useRef(null);S.useEffect(function(){a&&_.current&&_.current.focus()},[a]);var P=S.createElement("div",{key:s,"data-node-key":rre(s),className:ve(I,Y(Y(Y(Y({},"".concat(I,"-with-remove"),T),"".concat(I,"-active"),i),"".concat(I,"-disabled"),c),"".concat(I,"-focus"),a)),style:$,onClick:N},S.createElement("div",{ref:_,role:"tab","aria-selected":i,id:r&&"".concat(r,"-tab-").concat(s),className:"".concat(I,"-btn"),"aria-controls":r&&"".concat(r,"-panel-").concat(s),"aria-disabled":c,tabIndex:c?null:i?0:-1,onClick:function(L){L.stopPropagation(),N(L)},onKeyDown:b,onMouseDown:w,onMouseUp:x,onFocus:v,onBlur:y},a&&S.createElement("div",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"Tab ".concat(E," of ").concat(C)),d&&S.createElement("span",{className:"".concat(I,"-icon")},d),l&&O),T&&S.createElement("button",{type:"button",role:"tab","aria-label":p||"remove",tabIndex:i?0:-1,className:"".concat(I,"-remove"),onClick:function(L){L.stopPropagation(),k(L)}},u||g.removeIcon||"×"));return h?h(P):P},wht=function(e,n){var r=e.offsetWidth,i=e.offsetHeight,a=e.offsetTop,o=e.offsetLeft,s=e.getBoundingClientRect(),l=s.width,c=s.height,u=s.left,d=s.top;return Math.abs(l-r)<1?[l,c,u-n.left,d-n.top]:[r,i,o,a]},mh=function(e){var n=e.current||{},r=n.offsetWidth,i=r===void 0?0:r,a=n.offsetHeight,o=a===void 0?0:a;if(e.current){var s=e.current.getBoundingClientRect(),l=s.width,c=s.height;if(Math.abs(l-i)<1)return[l,c]}return[i,o]},iw=function(e,n){return e[n?0:1]},eU=S.forwardRef(function(t,e){var n=t.className,r=t.style,i=t.id,a=t.animated,o=t.activeKey,s=t.rtl,l=t.extra,c=t.editable,u=t.locale,d=t.tabPosition,f=t.tabBarGutter,h=t.children,p=t.onTabClick,g=t.onTabScroll,m=t.indicator,v=S.useContext(WT),y=v.prefixCls,b=v.tabs,w=S.useRef(null),x=S.useRef(null),$=S.useRef(null),C=S.useRef(null),E=S.useRef(null),I=S.useRef(null),T=S.useRef(null),N=d==="top"||d==="bottom",k=K6(0,function(Wt,st){N&&g&&g({direction:Wt>st?"left":"right"})}),O=ge(k,2),_=O[0],P=O[1],D=K6(0,function(Wt,st){!N&&g&&g({direction:Wt>st?"top":"bottom"})}),L=ge(D,2),R=L[0],F=L[1],V=S.useState([0,0]),H=ge(V,2),U=H[0],W=H[1],G=S.useState([0,0]),q=ge(G,2),X=q[0],re=q[1],ce=S.useState([0,0]),ee=ge(ce,2),se=ee[0],ue=ee[1],Q=S.useState([0,0]),ye=ge(Q,2),le=ye[0],xe=ye[1],be=mht(new Map),$e=ge(be,2),Ne=$e[0],Ve=$e[1],Pe=fht(b,Ne,X[0]),ke=iw(U,N),fe=iw(X,N),pe=iw(se,N),Me=iw(le,N),He=Math.floor(ke)<Math.floor(fe+pe),je=He?ke-Me:ke-pe,pt="".concat(y,"-nav-operations-hidden"),ut=0,rt=0;N&&s?(ut=0,rt=Math.max(0,fe-je)):(ut=Math.min(0,je-fe),rt=0);function ft(Wt){return Wt<ut?ut:Wt>rt?rt:Wt}var We=S.useRef(null),Xe=S.useState(),Le=ge(Xe,2),Se=Le[0],Fe=Le[1];function me(){Fe(Date.now())}function Ie(){We.current&&clearTimeout(We.current)}pht(C,function(Wt,st){function Dt(Qt,Zr){Qt(function(Pr){var Oi=ft(Pr+Zr);return Oi})}return He?(N?Dt(P,Wt):Dt(F,st),Ie(),me(),!0):!1}),S.useEffect(function(){return Ie(),Se&&(We.current=setTimeout(function(){Fe(0)},100)),Ie},[Se]);var Ye=ght(Pe,je,N?_:R,fe,pe,Me,ie(ie({},t),{},{tabs:b})),Lt=ge(Ye,2),Hn=Lt[0],Dn=Lt[1],yr=zi(function(){var Wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o,st=Pe.get(Wt)||{width:0,height:0,left:0,right:0,top:0};if(N){var Dt=_;s?st.right<_?Dt=st.right:st.right+st.width>_+je&&(Dt=st.right+st.width-je):st.left<-_?Dt=-st.left:st.left+st.width>-_+je&&(Dt=-(st.left+st.width-je)),F(0),P(ft(Dt))}else{var Qt=R;st.top<-R?Qt=-st.top:st.top+st.height>-R+je&&(Qt=-(st.top+st.height-je)),P(0),F(ft(Qt))}}),or=S.useState(),ln=ge(or,2),In=ln[0],qt=ln[1],dt=S.useState(!1),Ze=ge(dt,2),it=Ze[0],zt=Ze[1],cn=b.filter(function(Wt){return!Wt.disabled}).map(function(Wt){return Wt.key}),vi=function(st){var Dt=cn.indexOf(In||o),Qt=cn.length,Zr=(Dt+st+Qt)%Qt,Pr=cn[Zr];qt(Pr)},Bt=function(st){var Dt=st.code,Qt=s&&N,Zr=cn[0],Pr=cn[cn.length-1];switch(Dt){case"ArrowLeft":{N&&vi(Qt?1:-1);break}case"ArrowRight":{N&&vi(Qt?-1:1);break}case"ArrowUp":{st.preventDefault(),N||vi(-1);break}case"ArrowDown":{st.preventDefault(),N||vi(1);break}case"Home":{st.preventDefault(),qt(Zr);break}case"End":{st.preventDefault(),qt(Pr);break}case"Enter":case"Space":{st.preventDefault(),p(In??o,st);break}case"Backspace":case"Delete":{var Oi=cn.indexOf(In),xr=b.find(function(Qr){return Qr.key===In}),Yi=cL(xr==null?void 0:xr.closable,xr==null?void 0:xr.closeIcon,c,xr==null?void 0:xr.disabled);Yi&&(st.preventDefault(),st.stopPropagation(),c.onEdit("remove",{key:In,event:st}),Oi===cn.length-1?vi(-1):vi(1));break}}},ba={};N?ba[s?"marginRight":"marginLeft"]=f:ba.marginTop=f;var yo=b.map(function(Wt,st){var Dt=Wt.key;return S.createElement(xht,{id:i,prefixCls:y,key:Dt,tab:Wt,style:st===0?void 0:ba,closable:Wt.closable,editable:c,active:Dt===o,focus:Dt===In,renderWrapper:h,removeAriaLabel:u==null?void 0:u.removeAriaLabel,tabCount:cn.length,currentPosition:st+1,onClick:function(Zr){p(Dt,Zr)},onKeyDown:Bt,onFocus:function(){it||qt(Dt),yr(Dt),me(),C.current&&(s||(C.current.scrollLeft=0),C.current.scrollTop=0)},onBlur:function(){qt(void 0)},onMouseDown:function(){zt(!0)},onMouseUp:function(){zt(!1)}})}),Vt=function(){return Ve(function(){var st,Dt=new Map,Qt=(st=E.current)===null||st===void 0?void 0:st.getBoundingClientRect();return b.forEach(function(Zr){var Pr,Oi=Zr.key,xr=(Pr=E.current)===null||Pr===void 0?void 0:Pr.querySelector('[data-node-key="'.concat(rre(Oi),'"]'));if(xr){var Yi=wht(xr,Qt),Qr=ge(Yi,4),$c=Qr[0],Cc=Qr[1],Zi=Qr[2],Qi=Qr[3];Dt.set(Oi,{width:$c,height:Cc,left:Zi,top:Qi})}}),Dt})};S.useEffect(function(){Vt()},[b.map(function(Wt){return Wt.key}).join("_")]);var Kt=nre(function(){var Wt=mh(w),st=mh(x),Dt=mh($);W([Wt[0]-st[0]-Dt[0],Wt[1]-st[1]-Dt[1]]);var Qt=mh(T);ue(Qt);var Zr=mh(I);xe(Zr);var Pr=mh(E);re([Pr[0]-Qt[0],Pr[1]-Qt[1]]),Vt()}),Xr=b.slice(0,Hn),Yn=b.slice(Dn+1),Zn=[].concat(Be(Xr),Be(Yn)),ja=Pe.get(o),Ki=dht({activeTabOffset:ja,horizontal:N,indicator:m,rtl:s}),Xi=Ki.style;S.useEffect(function(){yr()},[o,ut,rt,Q6(ja),Q6(Pe),N]),S.useEffect(function(){Kt()},[s]);var Yr=!!Zn.length,Ni="".concat(y,"-nav-wrap"),ki,br,Qn,Il;return N?s?(br=_>0,ki=_!==rt):(ki=_<0,br=_!==ut):(Qn=R<0,Il=R!==ut),S.createElement(hl,{onResize:Kt},S.createElement("div",{ref:Rg(e,w),role:"tablist","aria-orientation":N?"horizontal":"vertical",className:ve("".concat(y,"-nav"),n),style:r,onKeyDown:function(){me()}},S.createElement(J6,{ref:x,position:"left",extra:l,prefixCls:y}),S.createElement(hl,{onResize:Kt},S.createElement("div",{className:ve(Ni,Y(Y(Y(Y({},"".concat(Ni,"-ping-left"),ki),"".concat(Ni,"-ping-right"),br),"".concat(Ni,"-ping-top"),Qn),"".concat(Ni,"-ping-bottom"),Il)),ref:C},S.createElement(hl,{onResize:Kt},S.createElement("div",{ref:E,className:"".concat(y,"-nav-list"),style:{transform:"translate(".concat(_,"px, ").concat(R,"px)"),transition:Se?"none":void 0}},yo,S.createElement(ire,{ref:T,prefixCls:y,locale:u,editable:c,style:ie(ie({},yo.length===0?void 0:ba),{},{visibility:Yr?"hidden":null})}),S.createElement("div",{className:ve("".concat(y,"-ink-bar"),Y({},"".concat(y,"-ink-bar-animated"),a.inkBar)),style:Xi}))))),S.createElement(bht,Qe({},t,{removeAriaLabel:u==null?void 0:u.removeAriaLabel,ref:I,prefixCls:y,tabs:Zn,className:!Yr&&pt,tabMoving:!!Se})),S.createElement(J6,{ref:$,position:"right",extra:l,prefixCls:y})))}),are=S.forwardRef(function(t,e){var n=t.prefixCls,r=t.className,i=t.style,a=t.id,o=t.active,s=t.tabKey,l=t.children;return S.createElement("div",{id:a&&"".concat(a,"-panel-").concat(s),role:"tabpanel",tabIndex:o?0:-1,"aria-labelledby":a&&"".concat(a,"-tab-").concat(s),"aria-hidden":!o,style:i,className:ve(n,o&&"".concat(n,"-active"),r),ref:e},l)}),Sht=["renderTabBar"],$ht=["label","key"],Cht=function(e){var n=e.renderTabBar,r=Ot(e,Sht),i=S.useContext(WT),a=i.tabs;if(n){var o=ie(ie({},r),{},{panes:a.map(function(s){var l=s.label,c=s.key,u=Ot(s,$ht);return S.createElement(are,Qe({tab:l,key:c,tabKey:c},u))})});return n(o,eU)}return S.createElement(eU,r)},Eht=["key","forceRender","style","className","destroyInactiveTabPane"],Tht=function(e){var n=e.id,r=e.activeKey,i=e.animated,a=e.tabPosition,o=e.destroyInactiveTabPane,s=S.useContext(WT),l=s.prefixCls,c=s.tabs,u=i.tabPane,d="".concat(l,"-tabpane");return S.createElement("div",{className:ve("".concat(l,"-content-holder"))},S.createElement("div",{className:ve("".concat(l,"-content"),"".concat(l,"-content-").concat(a),Y({},"".concat(l,"-content-animated"),u))},c.map(function(f){var h=f.key,p=f.forceRender,g=f.style,m=f.className,v=f.destroyInactiveTabPane,y=Ot(f,Eht),b=h===r;return S.createElement(Sc,Qe({key:h,visible:b,forceRender:p,removeOnLeave:!!(o||v),leavedClassName:"".concat(d,"-hidden")},i.tabPaneMotion),function(w,x){var $=w.style,C=w.className;return S.createElement(are,Qe({},y,{prefixCls:d,id:n,tabKey:h,animated:u,active:b,style:ie(ie({},g),$),className:ve(m,C),ref:x}))})})))};function Iht(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},e;return t===!1?e={inkBar:!1,tabPane:!1}:t===!0?e={inkBar:!0,tabPane:!1}:e=ie({inkBar:!0},at(t)==="object"?t:{}),e.tabPaneMotion&&e.tabPane===void 0&&(e.tabPane=!0),!e.tabPaneMotion&&e.tabPane&&(e.tabPane=!1),e}var Nht=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","more","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicator"],tU=0,kht=S.forwardRef(function(t,e){var n=t.id,r=t.prefixCls,i=r===void 0?"rc-tabs":r,a=t.className,o=t.items,s=t.direction,l=t.activeKey,c=t.defaultActiveKey,u=t.editable,d=t.animated,f=t.tabPosition,h=f===void 0?"top":f,p=t.tabBarGutter,g=t.tabBarStyle,m=t.tabBarExtraContent,v=t.locale,y=t.more,b=t.destroyInactiveTabPane,w=t.renderTabBar,x=t.onChange,$=t.onTabClick,C=t.onTabScroll,E=t.getPopupContainer,I=t.popupClassName,T=t.indicator,N=Ot(t,Nht),k=S.useMemo(function(){return(o||[]).filter(function(le){return le&&at(le)==="object"&&"key"in le})},[o]),O=s==="rtl",_=Iht(d),P=S.useState(!1),D=ge(P,2),L=D[0],R=D[1];S.useEffect(function(){R(Tne())},[]);var F=Vo(function(){var le;return(le=k[0])===null||le===void 0?void 0:le.key},{value:l,defaultValue:c}),V=ge(F,2),H=V[0],U=V[1],W=S.useState(function(){return k.findIndex(function(le){return le.key===H})}),G=ge(W,2),q=G[0],X=G[1];S.useEffect(function(){var le=k.findIndex(function(be){return be.key===H});if(le===-1){var xe;le=Math.max(0,Math.min(q,k.length-1)),U((xe=k[le])===null||xe===void 0?void 0:xe.key)}X(le)},[k.map(function(le){return le.key}).join("_"),H,q]);var re=Vo(null,{value:n}),ce=ge(re,2),ee=ce[0],se=ce[1];S.useEffect(function(){n||(se("rc-tabs-".concat(tU)),tU+=1)},[]);function ue(le,xe){$==null||$(le,xe);var be=le!==H;U(le),be&&(x==null||x(le))}var Q={id:ee,activeKey:H,animated:_,tabPosition:h,rtl:O,mobile:L},ye=ie(ie({},Q),{},{editable:u,locale:v,more:y,tabBarGutter:p,onTabClick:ue,onTabScroll:C,extra:m,style:g,panes:null,getPopupContainer:E,popupClassName:I,indicator:T});return S.createElement(WT.Provider,{value:{tabs:k,prefixCls:i}},S.createElement("div",Qe({ref:e,id:n,className:ve(i,"".concat(i,"-").concat(h),Y(Y(Y({},"".concat(i,"-mobile"),L),"".concat(i,"-editable"),u),"".concat(i,"-rtl"),O),a)},N),S.createElement(Cht,Qe({},ye,{renderTabBar:w})),S.createElement(Tht,Qe({destroyInactiveTabPane:b},Q,{animated:_}))))});const Oht={motionAppear:!1,motionEnter:!0,motionLeave:!0};function Aht(t,e={inkBar:!0,tabPane:!1}){let n;return e===!1?n={inkBar:!1,tabPane:!1}:e===!0?n={inkBar:!0,tabPane:!0}:n=Object.assign({inkBar:!0},typeof e=="object"?e:{}),n.tabPane&&(n.tabPaneMotion=Object.assign(Object.assign({},Oht),{motionName:ane(t,"switch")})),n}var _ht=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Pht(t){return t.filter(e=>e)}function Rht(t,e){if(t)return t.map(r=>{var i;const a=(i=r.destroyOnHidden)!==null&&i!==void 0?i:r.destroyInactiveTabPane;return Object.assign(Object.assign({},r),{destroyInactiveTabPane:a})});const n=wl(e).map(r=>{if(S.isValidElement(r)){const{key:i,props:a}=r,o=a||{},{tab:s}=o,l=_ht(o,["tab"]);return Object.assign(Object.assign({key:String(i)},l),{label:s})}return null});return Pht(n)}const Dht=t=>{const{componentCls:e,motionDurationSlow:n}=t;return[{[e]:{[`${e}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${n}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${n}`}}}}},[l6(t,"slide-up"),l6(t,"slide-down")]]},Fht=t=>{const{componentCls:e,tabsCardPadding:n,cardBg:r,cardGutter:i,colorBorderSecondary:a,itemSelectedColor:o}=t;return{[`${e}-card`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{margin:0,padding:n,background:r,border:`${Ce(t.lineWidth)} ${t.lineType} ${a}`,transition:`all ${t.motionDurationSlow} ${t.motionEaseInOut}`},[`${e}-tab-active`]:{color:o,background:t.colorBgContainer},[`${e}-tab-focus`]:Object.assign({},q3(t,-3)),[`${e}-ink-bar`]:{visibility:"hidden"},[`& ${e}-tab${e}-tab-focus ${e}-tab-btn`]:{outline:"none"}},[`&${e}-top, &${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab + ${e}-tab`]:{marginLeft:{_skip_check_:!0,value:Ce(i)}}}},[`&${e}-top`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:`${Ce(t.borderRadiusLG)} ${Ce(t.borderRadiusLG)} 0 0`},[`${e}-tab-active`]:{borderBottomColor:t.colorBgContainer}}},[`&${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:`0 0 ${Ce(t.borderRadiusLG)} ${Ce(t.borderRadiusLG)}`},[`${e}-tab-active`]:{borderTopColor:t.colorBgContainer}}},[`&${e}-left, &${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab + ${e}-tab`]:{marginTop:Ce(i)}}},[`&${e}-left`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`${Ce(t.borderRadiusLG)} 0 0 ${Ce(t.borderRadiusLG)}`}},[`${e}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:t.colorBgContainer}}}},[`&${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${Ce(t.borderRadiusLG)} ${Ce(t.borderRadiusLG)} 0`}},[`${e}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:t.colorBgContainer}}}}}}},Mht=t=>{const{componentCls:e,itemHoverColor:n,dropdownEdgeChildVerticalPadding:r}=t;return{[`${e}-dropdown`]:Object.assign(Object.assign({},wc(t)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:t.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${e}-dropdown-menu`]:{maxHeight:t.tabsDropdownHeight,margin:0,padding:`${Ce(r)} 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:t.colorBgContainer,backgroundClip:"padding-box",borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary,"&-item":Object.assign(Object.assign({},Hx),{display:"flex",alignItems:"center",minWidth:t.tabsDropdownWidth,margin:0,padding:`${Ce(t.paddingXXS)} ${Ce(t.paddingSM)}`,color:t.colorText,fontWeight:"normal",fontSize:t.fontSize,lineHeight:t.lineHeight,cursor:"pointer",transition:`all ${t.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:t.marginSM},color:t.colorIcon,fontSize:t.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:n}},"&:hover":{background:t.controlItemBgHover},"&-disabled":{"&, &:hover":{color:t.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},Lht=t=>{const{componentCls:e,margin:n,colorBorderSecondary:r,horizontalMargin:i,verticalItemPadding:a,verticalItemMargin:o,calc:s}=t;return{[`${e}-top, ${e}-bottom`]:{flexDirection:"column",[`> ${e}-nav, > div > ${e}-nav`]:{margin:i,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${Ce(t.lineWidth)} ${t.lineType} ${r}`,content:"''"},[`${e}-ink-bar`]:{height:t.lineWidthBold,"&-animated":{transition:`width ${t.motionDurationSlow}, left ${t.motionDurationSlow},
            right ${t.motionDurationSlow}`}},[`${e}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:t.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:t.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:t.boxShadowTabsOverflowRight},[`&${e}-nav-wrap-ping-left::before`]:{opacity:1},[`&${e}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${e}-top`]:{[`> ${e}-nav,
        > div > ${e}-nav`]:{"&::before":{bottom:0},[`${e}-ink-bar`]:{bottom:0}}},[`${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{order:1,marginTop:n,marginBottom:0,"&::before":{top:0},[`${e}-ink-bar`]:{top:0}},[`> ${e}-content-holder, > div > ${e}-content-holder`]:{order:0}},[`${e}-left, ${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{flexDirection:"column",minWidth:s(t.controlHeight).mul(1.25).equal(),[`${e}-tab`]:{padding:a,textAlign:"center"},[`${e}-tab + ${e}-tab`]:{margin:o},[`${e}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:t.controlHeight},"&::before":{top:0,boxShadow:t.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:t.boxShadowTabsOverflowBottom},[`&${e}-nav-wrap-ping-top::before`]:{opacity:1},[`&${e}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${e}-ink-bar`]:{width:t.lineWidthBold,"&-animated":{transition:`height ${t.motionDurationSlow}, top ${t.motionDurationSlow}`}},[`${e}-nav-list, ${e}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${e}-left`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${e}-content-holder, > div > ${e}-content-holder`]:{marginLeft:{_skip_check_:!0,value:Ce(s(t.lineWidth).mul(-1).equal())},borderLeft:{_skip_check_:!0,value:`${Ce(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},[`> ${e}-content > ${e}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:t.paddingLG}}}},[`${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{order:1,[`${e}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${e}-content-holder, > div > ${e}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:s(t.lineWidth).mul(-1).equal()},borderRight:{_skip_check_:!0,value:`${Ce(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},[`> ${e}-content > ${e}-tabpane`]:{paddingRight:{_skip_check_:!0,value:t.paddingLG}}}}}},jht=t=>{const{componentCls:e,cardPaddingSM:n,cardPaddingLG:r,cardHeightSM:i,cardHeightLG:a,horizontalItemPaddingSM:o,horizontalItemPaddingLG:s}=t;return{[e]:{"&-small":{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:o,fontSize:t.titleFontSizeSM}}},"&-large":{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:s,fontSize:t.titleFontSizeLG,lineHeight:t.lineHeightLG}}}},[`${e}-card`]:{[`&${e}-small`]:{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:n},[`${e}-nav-add`]:{minWidth:i,minHeight:i}},[`&${e}-bottom`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:`0 0 ${Ce(t.borderRadius)} ${Ce(t.borderRadius)}`}},[`&${e}-top`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:`${Ce(t.borderRadius)} ${Ce(t.borderRadius)} 0 0`}},[`&${e}-right`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${Ce(t.borderRadius)} ${Ce(t.borderRadius)} 0`}}},[`&${e}-left`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`${Ce(t.borderRadius)} 0 0 ${Ce(t.borderRadius)}`}}}},[`&${e}-large`]:{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:r},[`${e}-nav-add`]:{minWidth:a,minHeight:a}}}}}},zht=t=>{const{componentCls:e,itemActiveColor:n,itemHoverColor:r,iconCls:i,tabsHorizontalItemMargin:a,horizontalItemPadding:o,itemSelectedColor:s,itemColor:l}=t,c=`${e}-tab`;return{[c]:{position:"relative",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",padding:o,fontSize:t.titleFontSize,background:"transparent",border:0,outline:"none",cursor:"pointer",color:l,"&-btn, &-remove":{"&:focus:not(:focus-visible), &:active":{color:n}},"&-btn":{outline:"none",transition:`all ${t.motionDurationSlow}`,[`${c}-icon:not(:last-child)`]:{marginInlineEnd:t.marginSM}},"&-remove":Object.assign({flex:"none",marginRight:{_skip_check_:!0,value:t.calc(t.marginXXS).mul(-1).equal()},marginLeft:{_skip_check_:!0,value:t.marginXS},color:t.colorIcon,fontSize:t.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${t.motionDurationSlow}`,"&:hover":{color:t.colorTextHeading}},L0(t)),"&:hover":{color:r},[`&${c}-active ${c}-btn`]:{color:s,textShadow:t.tabsActiveTextShadow},[`&${c}-focus ${c}-btn`]:Object.assign({},q3(t)),[`&${c}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed"},[`&${c}-disabled ${c}-btn, &${c}-disabled ${e}-remove`]:{"&:focus, &:active":{color:t.colorTextDisabled}},[`& ${c}-remove ${i}`]:{margin:0},[`${i}:not(:last-child)`]:{marginRight:{_skip_check_:!0,value:t.marginSM}}},[`${c} + ${c}`]:{margin:{_skip_check_:!0,value:a}}}},Bht=t=>{const{componentCls:e,tabsHorizontalItemMarginRTL:n,iconCls:r,cardGutter:i,calc:a}=t;return{[`${e}-rtl`]:{direction:"rtl",[`${e}-nav`]:{[`${e}-tab`]:{margin:{_skip_check_:!0,value:n},[`${e}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[r]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:Ce(t.marginSM)}},[`${e}-tab-remove`]:{marginRight:{_skip_check_:!0,value:Ce(t.marginXS)},marginLeft:{_skip_check_:!0,value:Ce(a(t.marginXXS).mul(-1).equal())},[r]:{margin:0}}}},[`&${e}-left`]:{[`> ${e}-nav`]:{order:1},[`> ${e}-content-holder`]:{order:0}},[`&${e}-right`]:{[`> ${e}-nav`]:{order:0},[`> ${e}-content-holder`]:{order:1}},[`&${e}-card${e}-top, &${e}-card${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab + ${e}-tab`]:{marginRight:{_skip_check_:!0,value:i},marginLeft:{_skip_check_:!0,value:0}}}}},[`${e}-dropdown-rtl`]:{direction:"rtl"},[`${e}-menu-item`]:{[`${e}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},Vht=t=>{const{componentCls:e,tabsCardPadding:n,cardHeight:r,cardGutter:i,itemHoverColor:a,itemActiveColor:o,colorBorderSecondary:s}=t;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},wc(t)),{display:"flex",[`> ${e}-nav, > div > ${e}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${e}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${t.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${e}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${t.motionDurationSlow}`},[`${e}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${e}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${e}-nav-more`]:{position:"relative",padding:n,background:"transparent",border:0,color:t.colorText,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:t.calc(t.controlHeightLG).div(8).equal(),transform:"translateY(100%)",content:"''"}},[`${e}-nav-add`]:Object.assign({minWidth:r,minHeight:r,marginLeft:{_skip_check_:!0,value:i},background:"transparent",border:`${Ce(t.lineWidth)} ${t.lineType} ${s}`,borderRadius:`${Ce(t.borderRadiusLG)} ${Ce(t.borderRadiusLG)} 0 0`,outline:"none",cursor:"pointer",color:t.colorText,transition:`all ${t.motionDurationSlow} ${t.motionEaseInOut}`,"&:hover":{color:a},"&:active, &:focus:not(:focus-visible)":{color:o}},L0(t,-3))},[`${e}-extra-content`]:{flex:"none"},[`${e}-ink-bar`]:{position:"absolute",background:t.inkBarColor,pointerEvents:"none"}}),zht(t)),{[`${e}-content`]:{position:"relative",width:"100%"},[`${e}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${e}-tabpane`]:Object.assign(Object.assign({},L0(t)),{"&-hidden":{display:"none"}})}),[`${e}-centered`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-nav-wrap`]:{[`&:not([class*='${e}-nav-wrap-ping']) > ${e}-nav-list`]:{margin:"auto"}}}}}},Wht=t=>{const{cardHeight:e,cardHeightSM:n,cardHeightLG:r,controlHeight:i,controlHeightLG:a}=t,o=e||a,s=n||i,l=r||a+8;return{zIndexPopup:t.zIndexPopupBase+50,cardBg:t.colorFillAlter,cardHeight:o,cardHeightSM:s,cardHeightLG:l,cardPadding:`${(o-t.fontHeight)/2-t.lineWidth}px ${t.padding}px`,cardPaddingSM:`${(s-t.fontHeight)/2-t.lineWidth}px ${t.paddingXS}px`,cardPaddingLG:`${(l-t.fontHeightLG)/2-t.lineWidth}px ${t.padding}px`,titleFontSize:t.fontSize,titleFontSizeLG:t.fontSizeLG,titleFontSizeSM:t.fontSize,inkBarColor:t.colorPrimary,horizontalMargin:`0 0 ${t.margin}px 0`,horizontalItemGutter:32,horizontalItemMargin:"",horizontalItemMarginRTL:"",horizontalItemPadding:`${t.paddingSM}px 0`,horizontalItemPaddingSM:`${t.paddingXS}px 0`,horizontalItemPaddingLG:`${t.padding}px 0`,verticalItemPadding:`${t.paddingXS}px ${t.paddingLG}px`,verticalItemMargin:`${t.margin}px 0 0 0`,itemColor:t.colorText,itemSelectedColor:t.colorPrimary,itemHoverColor:t.colorPrimaryHover,itemActiveColor:t.colorPrimaryActive,cardGutter:t.marginXXS/2}},Uht=vo("Tabs",t=>{const e=_r(t,{tabsCardPadding:t.cardPadding,dropdownEdgeChildVerticalPadding:t.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120,tabsHorizontalItemMargin:`0 0 0 ${Ce(t.horizontalItemGutter)}`,tabsHorizontalItemMarginRTL:`0 0 0 ${Ce(t.horizontalItemGutter)}`});return[jht(e),Bht(e),Lht(e),Mht(e),Fht(e),Vht(e),Dht(e)]},Wht),Hht=()=>null;var Ght=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const ore=t=>{var e,n,r,i,a,o,s,l,c,u,d;const{type:f,className:h,rootClassName:p,size:g,onEdit:m,hideAdd:v,centered:y,addIcon:b,removeIcon:w,moreIcon:x,more:$,popupClassName:C,children:E,items:I,animated:T,style:N,indicatorSize:k,indicator:O,destroyInactiveTabPane:_,destroyOnHidden:P}=t,D=Ght(t,["type","className","rootClassName","size","onEdit","hideAdd","centered","addIcon","removeIcon","moreIcon","more","popupClassName","children","items","animated","style","indicatorSize","indicator","destroyInactiveTabPane","destroyOnHidden"]),{prefixCls:L}=D,{direction:R,tabs:F,getPrefixCls:V,getPopupContainer:H}=S.useContext(pn),U=V("tabs",L),W=nne(U),[G,q,X]=Uht(U,W);let re;f==="editable-card"&&(re={onEdit:(le,{key:xe,event:be})=>{m==null||m(le==="add"?be:xe,le)},removeIcon:(e=w??(F==null?void 0:F.removeIcon))!==null&&e!==void 0?e:S.createElement(ene,null),addIcon:(b??(F==null?void 0:F.addIcon))||S.createElement(uht,null),showAdd:v!==!0});const ce=V(),ee=Kx(g),se=Rht(I,E),ue=Aht(U,T),Q=Object.assign(Object.assign({},F==null?void 0:F.style),N),ye={align:(n=O==null?void 0:O.align)!==null&&n!==void 0?n:(r=F==null?void 0:F.indicator)===null||r===void 0?void 0:r.align,size:(s=(a=(i=O==null?void 0:O.size)!==null&&i!==void 0?i:k)!==null&&a!==void 0?a:(o=F==null?void 0:F.indicator)===null||o===void 0?void 0:o.size)!==null&&s!==void 0?s:F==null?void 0:F.indicatorSize};return G(S.createElement(kht,Object.assign({direction:R,getPopupContainer:H},D,{items:se,className:ve({[`${U}-${ee}`]:ee,[`${U}-card`]:["card","editable-card"].includes(f),[`${U}-editable-card`]:f==="editable-card",[`${U}-centered`]:y},F==null?void 0:F.className,h,p,q,X,W),popupClassName:ve(C,q,X,W),style:Q,editable:re,more:Object.assign({icon:(d=(u=(c=(l=F==null?void 0:F.more)===null||l===void 0?void 0:l.icon)!==null&&c!==void 0?c:F==null?void 0:F.moreIcon)!==null&&u!==void 0?u:x)!==null&&d!==void 0?d:S.createElement(Hft,null),transitionName:`${ce}-slide-up`},$),prefixCls:U,animated:ue,indicator:ye,destroyInactiveTabPane:P??_})))};ore.TabPane=Hht;var qht=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const sre=t=>{var{prefixCls:e,className:n,hoverable:r=!0}=t,i=qht(t,["prefixCls","className","hoverable"]);const{getPrefixCls:a}=S.useContext(pn),o=a("card",e),s=ve(`${o}-grid`,n,{[`${o}-grid-hoverable`]:r});return S.createElement("div",Object.assign({},i,{className:s}))},Kht=t=>{const{antCls:e,componentCls:n,headerHeight:r,headerPadding:i,tabsMarginBottom:a}=t;return Object.assign(Object.assign({display:"flex",justifyContent:"center",flexDirection:"column",minHeight:r,marginBottom:-1,padding:`0 ${Ce(i)}`,color:t.colorTextHeading,fontWeight:t.fontWeightStrong,fontSize:t.headerFontSize,background:t.headerBg,borderBottom:`${Ce(t.lineWidth)} ${t.lineType} ${t.colorBorderSecondary}`,borderRadius:`${Ce(t.borderRadiusLG)} ${Ce(t.borderRadiusLG)} 0 0`},Gf()),{"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":Object.assign(Object.assign({display:"inline-block",flex:1},Hx),{[`
          > ${n}-typography,
          > ${n}-typography-edit-content
        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}}),[`${e}-tabs-top`]:{clear:"both",marginBottom:a,color:t.colorText,fontWeight:"normal",fontSize:t.fontSize,"&-bar":{borderBottom:`${Ce(t.lineWidth)} ${t.lineType} ${t.colorBorderSecondary}`}}})},Xht=t=>{const{cardPaddingBase:e,colorBorderSecondary:n,cardShadow:r,lineWidth:i}=t;return{width:"33.33%",padding:e,border:0,borderRadius:0,boxShadow:`
      ${Ce(i)} 0 0 0 ${n},
      0 ${Ce(i)} 0 0 ${n},
      ${Ce(i)} ${Ce(i)} 0 0 ${n},
      ${Ce(i)} 0 0 0 ${n} inset,
      0 ${Ce(i)} 0 0 ${n} inset;
    `,transition:`all ${t.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:r}}},Yht=t=>{const{componentCls:e,iconCls:n,actionsLiMargin:r,cardActionsIconSize:i,colorBorderSecondary:a,actionsBg:o}=t;return Object.assign(Object.assign({margin:0,padding:0,listStyle:"none",background:o,borderTop:`${Ce(t.lineWidth)} ${t.lineType} ${a}`,display:"flex",borderRadius:`0 0 ${Ce(t.borderRadiusLG)} ${Ce(t.borderRadiusLG)}`},Gf()),{"& > li":{margin:r,color:t.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:t.calc(t.cardActionsIconSize).mul(2).equal(),fontSize:t.fontSize,lineHeight:t.lineHeight,cursor:"pointer","&:hover":{color:t.colorPrimary,transition:`color ${t.motionDurationMid}`},[`a:not(${e}-btn), > ${n}`]:{display:"inline-block",width:"100%",color:t.colorIcon,lineHeight:Ce(t.fontHeight),transition:`color ${t.motionDurationMid}`,"&:hover":{color:t.colorPrimary}},[`> ${n}`]:{fontSize:i,lineHeight:Ce(t.calc(i).mul(t.lineHeight).equal())}},"&:not(:last-child)":{borderInlineEnd:`${Ce(t.lineWidth)} ${t.lineType} ${a}`}}})},Zht=t=>Object.assign(Object.assign({margin:`${Ce(t.calc(t.marginXXS).mul(-1).equal())} 0`,display:"flex"},Gf()),{"&-avatar":{paddingInlineEnd:t.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:t.marginXS}},"&-title":Object.assign({color:t.colorTextHeading,fontWeight:t.fontWeightStrong,fontSize:t.fontSizeLG},Hx),"&-description":{color:t.colorTextDescription}}),Qht=t=>{const{componentCls:e,colorFillAlter:n,headerPadding:r,bodyPadding:i}=t;return{[`${e}-head`]:{padding:`0 ${Ce(r)}`,background:n,"&-title":{fontSize:t.fontSize}},[`${e}-body`]:{padding:`${Ce(t.padding)} ${Ce(i)}`}}},Jht=t=>{const{componentCls:e}=t;return{overflow:"hidden",[`${e}-body`]:{userSelect:"none"}}},ept=t=>{const{componentCls:e,cardShadow:n,cardHeadPadding:r,colorBorderSecondary:i,boxShadowTertiary:a,bodyPadding:o,extraColor:s}=t;return{[e]:Object.assign(Object.assign({},wc(t)),{position:"relative",background:t.colorBgContainer,borderRadius:t.borderRadiusLG,[`&:not(${e}-bordered)`]:{boxShadow:a},[`${e}-head`]:Kht(t),[`${e}-extra`]:{marginInlineStart:"auto",color:s,fontWeight:"normal",fontSize:t.fontSize},[`${e}-body`]:Object.assign({padding:o,borderRadius:`0 0 ${Ce(t.borderRadiusLG)} ${Ce(t.borderRadiusLG)}`},Gf()),[`${e}-grid`]:Xht(t),[`${e}-cover`]:{"> *":{display:"block",width:"100%",borderRadius:`${Ce(t.borderRadiusLG)} ${Ce(t.borderRadiusLG)} 0 0`}},[`${e}-actions`]:Yht(t),[`${e}-meta`]:Zht(t)}),[`${e}-bordered`]:{border:`${Ce(t.lineWidth)} ${t.lineType} ${i}`,[`${e}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${e}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${t.motionDurationMid}, border-color ${t.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:n}},[`${e}-contain-grid`]:{borderRadius:`${Ce(t.borderRadiusLG)} ${Ce(t.borderRadiusLG)} 0 0 `,[`${e}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${e}-loading) ${e}-body`]:{marginBlockStart:t.calc(t.lineWidth).mul(-1).equal(),marginInlineStart:t.calc(t.lineWidth).mul(-1).equal(),padding:0}},[`${e}-contain-tabs`]:{[`> div${e}-head`]:{minHeight:0,[`${e}-head-title, ${e}-extra`]:{paddingTop:r}}},[`${e}-type-inner`]:Qht(t),[`${e}-loading`]:Jht(t),[`${e}-rtl`]:{direction:"rtl"}}},tpt=t=>{const{componentCls:e,bodyPaddingSM:n,headerPaddingSM:r,headerHeightSM:i,headerFontSizeSM:a}=t;return{[`${e}-small`]:{[`> ${e}-head`]:{minHeight:i,padding:`0 ${Ce(r)}`,fontSize:a,[`> ${e}-head-wrapper`]:{[`> ${e}-extra`]:{fontSize:t.fontSize}}},[`> ${e}-body`]:{padding:n}},[`${e}-small${e}-contain-tabs`]:{[`> ${e}-head`]:{[`${e}-head-title, ${e}-extra`]:{paddingTop:0,display:"flex",alignItems:"center"}}}}},npt=t=>{var e,n;return{headerBg:"transparent",headerFontSize:t.fontSizeLG,headerFontSizeSM:t.fontSize,headerHeight:t.fontSizeLG*t.lineHeightLG+t.padding*2,headerHeightSM:t.fontSize*t.lineHeight+t.paddingXS*2,actionsBg:t.colorBgContainer,actionsLiMargin:`${t.paddingSM}px 0`,tabsMarginBottom:-t.padding-t.lineWidth,extraColor:t.colorText,bodyPaddingSM:12,headerPaddingSM:12,bodyPadding:(e=t.bodyPadding)!==null&&e!==void 0?e:t.paddingLG,headerPadding:(n=t.headerPadding)!==null&&n!==void 0?n:t.paddingLG}},rpt=vo("Card",t=>{const e=_r(t,{cardShadow:t.boxShadowCard,cardHeadPadding:t.padding,cardPaddingBase:t.paddingLG,cardActionsIconSize:t.fontSize});return[ept(e),tpt(e)]},npt);var nU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const ipt=t=>{const{actionClasses:e,actions:n=[],actionStyle:r}=t;return S.createElement("ul",{className:e,style:r},n.map((i,a)=>{const o=`action-${a}`;return S.createElement("li",{style:{width:`${100/n.length}%`},key:o},S.createElement("span",null,i))}))},apt=S.forwardRef((t,e)=>{const{prefixCls:n,className:r,rootClassName:i,style:a,extra:o,headStyle:s={},bodyStyle:l={},title:c,loading:u,bordered:d,variant:f,size:h,type:p,cover:g,actions:m,tabList:v,children:y,activeTabKey:b,defaultActiveTabKey:w,tabBarExtraContent:x,hoverable:$,tabProps:C={},classNames:E,styles:I}=t,T=nU(t,["prefixCls","className","rootClassName","style","extra","headStyle","bodyStyle","title","loading","bordered","variant","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps","classNames","styles"]),{getPrefixCls:N,direction:k,card:O}=S.useContext(pn),[_]=One("card",f,d),P=Pe=>{var ke;(ke=t.onTabChange)===null||ke===void 0||ke.call(t,Pe)},D=Pe=>{var ke;return ve((ke=O==null?void 0:O.classNames)===null||ke===void 0?void 0:ke[Pe],E==null?void 0:E[Pe])},L=Pe=>{var ke;return Object.assign(Object.assign({},(ke=O==null?void 0:O.styles)===null||ke===void 0?void 0:ke[Pe]),I==null?void 0:I[Pe])},R=S.useMemo(()=>{let Pe=!1;return S.Children.forEach(y,ke=>{(ke==null?void 0:ke.type)===sre&&(Pe=!0)}),Pe},[y]),F=N("card",n),[V,H,U]=rpt(F),W=S.createElement(jg,{loading:!0,active:!0,paragraph:{rows:4},title:!1},y),G=b!==void 0,q=Object.assign(Object.assign({},C),{[G?"activeKey":"defaultActiveKey"]:G?b:w,tabBarExtraContent:x});let X;const re=Kx(h),ce=!re||re==="default"?"large":re,ee=v?S.createElement(ore,Object.assign({size:ce},q,{className:`${F}-head-tabs`,onChange:P,items:v.map(Pe=>{var{tab:ke}=Pe,fe=nU(Pe,["tab"]);return Object.assign({label:ke},fe)})})):null;if(c||o||ee){const Pe=ve(`${F}-head`,D("header")),ke=ve(`${F}-head-title`,D("title")),fe=ve(`${F}-extra`,D("extra")),pe=Object.assign(Object.assign({},s),L("header"));X=S.createElement("div",{className:Pe,style:pe},S.createElement("div",{className:`${F}-head-wrapper`},c&&S.createElement("div",{className:ke,style:L("title")},c),o&&S.createElement("div",{className:fe,style:L("extra")},o)),ee)}const se=ve(`${F}-cover`,D("cover")),ue=g?S.createElement("div",{className:se,style:L("cover")},g):null,Q=ve(`${F}-body`,D("body")),ye=Object.assign(Object.assign({},l),L("body")),le=S.createElement("div",{className:Q,style:ye},u?W:y),xe=ve(`${F}-actions`,D("actions")),be=m!=null&&m.length?S.createElement(ipt,{actionClasses:xe,actionStyle:L("actions"),actions:m}):null,$e=Jo(T,["onTabChange"]),Ne=ve(F,O==null?void 0:O.className,{[`${F}-loading`]:u,[`${F}-bordered`]:_!=="borderless",[`${F}-hoverable`]:$,[`${F}-contain-grid`]:R,[`${F}-contain-tabs`]:v==null?void 0:v.length,[`${F}-${re}`]:re,[`${F}-type-${p}`]:!!p,[`${F}-rtl`]:k==="rtl"},r,i,H,U),Ve=Object.assign(Object.assign({},O==null?void 0:O.style),a);return V(S.createElement("div",Object.assign({ref:e},$e,{className:Ne,style:Ve}),X,ue,le,be))});var opt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const spt=t=>{const{prefixCls:e,className:n,avatar:r,title:i,description:a}=t,o=opt(t,["prefixCls","className","avatar","title","description"]),{getPrefixCls:s}=S.useContext(pn),l=s("card",e),c=ve(`${l}-meta`,n),u=r?S.createElement("div",{className:`${l}-meta-avatar`},r):null,d=i?S.createElement("div",{className:`${l}-meta-title`},i):null,f=a?S.createElement("div",{className:`${l}-meta-description`},a):null,h=d||f?S.createElement("div",{className:`${l}-meta-detail`},d,f):null;return S.createElement("div",Object.assign({},o,{className:c}),u,h)},UT=apt;UT.Grid=sre;UT.Meta=spt;function lpt(t,e,n){var r=n||{},i=r.noTrailing,a=i===void 0?!1:i,o=r.noLeading,s=o===void 0?!1:o,l=r.debounceMode,c=l===void 0?void 0:l,u,d=!1,f=0;function h(){u&&clearTimeout(u)}function p(m){var v=m||{},y=v.upcomingOnly,b=y===void 0?!1:y;h(),d=!b}function g(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];var b=this,w=Date.now()-f;if(d)return;function x(){f=Date.now(),e.apply(b,v)}function $(){u=void 0}!s&&c&&!u&&x(),h(),c===void 0&&w>t?s?(f=Date.now(),a||(u=setTimeout(c?$:x,t))):x():a!==!0&&(u=setTimeout(c?$:x,c===void 0?t-w:t))}return g.cancel=p,g}function cpt(t,e,n){var r={},i=r.atBegin,a=i===void 0?!1:i;return lpt(t,e,{debounceMode:a!==!1})}function upt(t){return!!(t.addonBefore||t.addonAfter)}function dpt(t){return!!(t.prefix||t.suffix||t.allowClear)}function rU(t,e,n){var r=e.cloneNode(!0),i=Object.create(t,{target:{value:r},currentTarget:{value:r}});return r.value=n,typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"&&(r.selectionStart=e.selectionStart,r.selectionEnd=e.selectionEnd),r.setSelectionRange=function(){e.setSelectionRange.apply(e,arguments)},i}function iU(t,e,n,r){if(n){var i=e;if(e.type==="click"){i=rU(e,t,""),n(i);return}if(t.type!=="file"&&r!==void 0){i=rU(e,t,r),n(i);return}n(i)}}function fpt(t,e){if(t){t.focus(e);var n=e||{},r=n.cursor;if(r){var i=t.value.length;switch(r){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(i,i);break;default:t.setSelectionRange(0,i)}}}}var hpt=B.forwardRef(function(t,e){var n,r,i,a=t.inputElement,o=t.children,s=t.prefixCls,l=t.prefix,c=t.suffix,u=t.addonBefore,d=t.addonAfter,f=t.className,h=t.style,p=t.disabled,g=t.readOnly,m=t.focused,v=t.triggerFocus,y=t.allowClear,b=t.value,w=t.handleReset,x=t.hidden,$=t.classes,C=t.classNames,E=t.dataAttrs,I=t.styles,T=t.components,N=t.onClear,k=o??a,O=(T==null?void 0:T.affixWrapper)||"span",_=(T==null?void 0:T.groupWrapper)||"span",P=(T==null?void 0:T.wrapper)||"span",D=(T==null?void 0:T.groupAddon)||"span",L=S.useRef(null),R=function(xe){var be;(be=L.current)!==null&&be!==void 0&&be.contains(xe.target)&&(v==null||v())},F=dpt(t),V=S.cloneElement(k,{value:b,className:ve((n=k.props)===null||n===void 0?void 0:n.className,!F&&(C==null?void 0:C.variant))||null}),H=S.useRef(null);if(B.useImperativeHandle(e,function(){return{nativeElement:H.current||L.current}}),F){var U=null;if(y){var W=!p&&!g&&b,G="".concat(s,"-clear-icon"),q=at(y)==="object"&&y!==null&&y!==void 0&&y.clearIcon?y.clearIcon:"✖";U=B.createElement("button",{type:"button",tabIndex:-1,onClick:function(xe){w==null||w(xe),N==null||N()},onMouseDown:function(xe){return xe.preventDefault()},className:ve(G,Y(Y({},"".concat(G,"-hidden"),!W),"".concat(G,"-has-suffix"),!!c))},q)}var X="".concat(s,"-affix-wrapper"),re=ve(X,Y(Y(Y(Y(Y({},"".concat(s,"-disabled"),p),"".concat(X,"-disabled"),p),"".concat(X,"-focused"),m),"".concat(X,"-readonly"),g),"".concat(X,"-input-with-clear-btn"),c&&y&&b),$==null?void 0:$.affixWrapper,C==null?void 0:C.affixWrapper,C==null?void 0:C.variant),ce=(c||y)&&B.createElement("span",{className:ve("".concat(s,"-suffix"),C==null?void 0:C.suffix),style:I==null?void 0:I.suffix},U,c);V=B.createElement(O,Qe({className:re,style:I==null?void 0:I.affixWrapper,onClick:R},E==null?void 0:E.affixWrapper,{ref:L}),l&&B.createElement("span",{className:ve("".concat(s,"-prefix"),C==null?void 0:C.prefix),style:I==null?void 0:I.prefix},l),V,ce)}if(upt(t)){var ee="".concat(s,"-group"),se="".concat(ee,"-addon"),ue="".concat(ee,"-wrapper"),Q=ve("".concat(s,"-wrapper"),ee,$==null?void 0:$.wrapper,C==null?void 0:C.wrapper),ye=ve(ue,Y({},"".concat(ue,"-disabled"),p),$==null?void 0:$.group,C==null?void 0:C.groupWrapper);V=B.createElement(_,{className:ye,ref:H},B.createElement(P,{className:Q},u&&B.createElement(D,{className:se},u),V,d&&B.createElement(D,{className:se},d)))}return B.cloneElement(V,{className:ve((r=V.props)===null||r===void 0?void 0:r.className,f)||null,style:ie(ie({},(i=V.props)===null||i===void 0?void 0:i.style),h),hidden:x})}),ppt=["show"];function mpt(t,e){return S.useMemo(function(){var n={};e&&(n.show=at(e)==="object"&&e.formatter?e.formatter:!!e),n=ie(ie({},n),t);var r=n,i=r.show,a=Ot(r,ppt);return ie(ie({},a),{},{show:!!i,showFormatter:typeof i=="function"?i:void 0,strategy:a.strategy||function(o){return o.length}})},[t,e])}const gpt=t=>{let e;return typeof t=="object"&&(t!=null&&t.clearIcon)?e=t:t&&(e={clearIcon:B.createElement(Jte,null)}),e};function aU(t){return["small","middle","large"].includes(t)}function oU(t){return t?typeof t=="number"&&!Number.isNaN(t):!1}const lre=B.createContext({latestIndex:0}),vpt=lre.Provider,ypt=({className:t,index:e,children:n,split:r,style:i})=>{const{latestIndex:a}=S.useContext(lre);return n==null?null:S.createElement(S.Fragment,null,S.createElement("div",{className:t,style:i},n),e<a&&r&&S.createElement("span",{className:`${t}-split`},r))};var bpt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const xpt=S.forwardRef((t,e)=>{var n;const{getPrefixCls:r,direction:i,size:a,className:o,style:s,classNames:l,styles:c}=Hf("space"),{size:u=a??"small",align:d,className:f,rootClassName:h,children:p,direction:g="horizontal",prefixCls:m,split:v,style:y,wrap:b=!1,classNames:w,styles:x}=t,$=bpt(t,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[C,E]=Array.isArray(u)?u:[u,u],I=aU(E),T=aU(C),N=oU(E),k=oU(C),O=wl(p,{keepEmpty:!0}),_=d===void 0&&g==="horizontal"?"center":d,P=r("space",m),[D,L,R]=sne(P),F=ve(P,o,L,`${P}-${g}`,{[`${P}-rtl`]:i==="rtl",[`${P}-align-${_}`]:_,[`${P}-gap-row-${E}`]:I,[`${P}-gap-col-${C}`]:T},f,h,R),V=ve(`${P}-item`,(n=w==null?void 0:w.item)!==null&&n!==void 0?n:l.item);let H=0;const U=O.map((q,X)=>{var re;q!=null&&(H=X);const ce=(q==null?void 0:q.key)||`${V}-${X}`;return S.createElement(ypt,{className:V,key:ce,index:X,split:v,style:(re=x==null?void 0:x.item)!==null&&re!==void 0?re:c.item},q)}),W=S.useMemo(()=>({latestIndex:H}),[H]);if(O.length===0)return null;const G={};return b&&(G.flexWrap="wrap"),!T&&k&&(G.columnGap=C),!I&&N&&(G.rowGap=E),D(S.createElement("div",Object.assign({ref:e,className:F,style:Object.assign(Object.assign(Object.assign({},G),s),y)},$),S.createElement(vpt,{value:W},U)))}),cre=xpt;cre.Compact=vlt;var wpt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},Spt=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:wpt}))},$pt=S.forwardRef(Spt),Cpt=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,Ept=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],HN={},Ua;function Tpt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&HN[n])return HN[n];var r=window.getComputedStyle(t),i=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),a=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),o=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),s=Ept.map(function(c){return"".concat(c,":").concat(r.getPropertyValue(c))}).join(";"),l={sizingStyle:s,paddingSize:a,borderSize:o,boxSizing:i};return e&&n&&(HN[n]=l),l}function Ipt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Ua||(Ua=document.createElement("textarea"),Ua.setAttribute("tab-index","-1"),Ua.setAttribute("aria-hidden","true"),Ua.setAttribute("name","hiddenTextarea"),document.body.appendChild(Ua)),t.getAttribute("wrap")?Ua.setAttribute("wrap",t.getAttribute("wrap")):Ua.removeAttribute("wrap");var i=Tpt(t,e),a=i.paddingSize,o=i.borderSize,s=i.boxSizing,l=i.sizingStyle;Ua.setAttribute("style","".concat(l,";").concat(Cpt)),Ua.value=t.value||t.placeholder||"";var c=void 0,u=void 0,d,f=Ua.scrollHeight;if(s==="border-box"?f+=o:s==="content-box"&&(f-=a),n!==null||r!==null){Ua.value=" ";var h=Ua.scrollHeight-a;n!==null&&(c=h*n,s==="border-box"&&(c=c+a+o),f=Math.max(c,f)),r!==null&&(u=h*r,s==="border-box"&&(u=u+a+o),d=f>u?"":"hidden",f=Math.min(u,f))}var p={height:f,overflowY:d,resize:"none"};return c&&(p.minHeight=c),u&&(p.maxHeight=u),p}var Npt=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],GN=0,qN=1,KN=2,kpt=S.forwardRef(function(t,e){var n=t,r=n.prefixCls,i=n.defaultValue,a=n.value,o=n.autoSize,s=n.onResize,l=n.className,c=n.style,u=n.disabled,d=n.onChange;n.onInternalAutoSize;var f=Ot(n,Npt),h=Vo(i,{value:a,postState:function(G){return G??""}}),p=ge(h,2),g=p[0],m=p[1],v=function(G){m(G.target.value),d==null||d(G)},y=S.useRef();S.useImperativeHandle(e,function(){return{textArea:y.current}});var b=S.useMemo(function(){return o&&at(o)==="object"?[o.minRows,o.maxRows]:[]},[o]),w=ge(b,2),x=w[0],$=w[1],C=!!o,E=function(){try{if(document.activeElement===y.current){var G=y.current,q=G.selectionStart,X=G.selectionEnd,re=G.scrollTop;y.current.setSelectionRange(q,X),y.current.scrollTop=re}}catch{}},I=S.useState(KN),T=ge(I,2),N=T[0],k=T[1],O=S.useState(),_=ge(O,2),P=_[0],D=_[1],L=function(){k(GN)};An(function(){C&&L()},[a,x,$,C]),An(function(){if(N===GN)k(qN);else if(N===qN){var W=Ipt(y.current,!1,x,$);k(KN),D(W)}else E()},[N]);var R=S.useRef(),F=function(){ci.cancel(R.current)},V=function(G){N===KN&&(s==null||s(G),o&&(F(),R.current=ci(function(){L()})))};S.useEffect(function(){return F},[]);var H=C?P:null,U=ie(ie({},c),H);return(N===GN||N===qN)&&(U.overflowY="hidden",U.overflowX="hidden"),S.createElement(hl,{onResize:V,disabled:!(o||s)},S.createElement("textarea",Qe({},f,{ref:y,style:U,className:ve(r,l,Y({},"".concat(r,"-disabled"),u)),disabled:u,value:g,onChange:v})))}),Opt=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],Apt=B.forwardRef(function(t,e){var n,r=t.defaultValue,i=t.value,a=t.onFocus,o=t.onBlur,s=t.onChange,l=t.allowClear,c=t.maxLength,u=t.onCompositionStart,d=t.onCompositionEnd,f=t.suffix,h=t.prefixCls,p=h===void 0?"rc-textarea":h,g=t.showCount,m=t.count,v=t.className,y=t.style,b=t.disabled,w=t.hidden,x=t.classNames,$=t.styles,C=t.onResize,E=t.onClear,I=t.onPressEnter,T=t.readOnly,N=t.autoSize,k=t.onKeyDown,O=Ot(t,Opt),_=Vo(r,{value:i,defaultValue:r}),P=ge(_,2),D=P[0],L=P[1],R=D==null?"":String(D),F=B.useState(!1),V=ge(F,2),H=V[0],U=V[1],W=B.useRef(!1),G=B.useState(null),q=ge(G,2),X=q[0],re=q[1],ce=S.useRef(null),ee=S.useRef(null),se=function(){var Se;return(Se=ee.current)===null||Se===void 0?void 0:Se.textArea},ue=function(){se().focus()};S.useImperativeHandle(e,function(){var Le;return{resizableTextArea:ee.current,focus:ue,blur:function(){se().blur()},nativeElement:((Le=ce.current)===null||Le===void 0?void 0:Le.nativeElement)||se()}}),S.useEffect(function(){U(function(Le){return!b&&Le})},[b]);var Q=B.useState(null),ye=ge(Q,2),le=ye[0],xe=ye[1];B.useEffect(function(){if(le){var Le;(Le=se()).setSelectionRange.apply(Le,Be(le))}},[le]);var be=mpt(m,g),$e=(n=be.max)!==null&&n!==void 0?n:c,Ne=Number($e)>0,Ve=be.strategy(R),Pe=!!$e&&Ve>$e,ke=function(Se,Fe){var me=Fe;!W.current&&be.exceedFormatter&&be.max&&be.strategy(Fe)>be.max&&(me=be.exceedFormatter(Fe,{max:be.max}),Fe!==me&&xe([se().selectionStart||0,se().selectionEnd||0])),L(me),iU(Se.currentTarget,Se,s,me)},fe=function(Se){W.current=!0,u==null||u(Se)},pe=function(Se){W.current=!1,ke(Se,Se.currentTarget.value),d==null||d(Se)},Me=function(Se){ke(Se,Se.target.value)},He=function(Se){Se.key==="Enter"&&I&&I(Se),k==null||k(Se)},je=function(Se){U(!0),a==null||a(Se)},pt=function(Se){U(!1),o==null||o(Se)},ut=function(Se){L(""),ue(),iU(se(),Se,s)},rt=f,ft;be.show&&(be.showFormatter?ft=be.showFormatter({value:R,count:Ve,maxLength:$e}):ft="".concat(Ve).concat(Ne?" / ".concat($e):""),rt=B.createElement(B.Fragment,null,rt,B.createElement("span",{className:ve("".concat(p,"-data-count"),x==null?void 0:x.count),style:$==null?void 0:$.count},ft)));var We=function(Se){var Fe;C==null||C(Se),(Fe=se())!==null&&Fe!==void 0&&Fe.style.height&&re(!0)},Xe=!N&&!g&&!l;return B.createElement(hpt,{ref:ce,value:R,allowClear:l,handleReset:ut,suffix:rt,prefixCls:p,classNames:ie(ie({},x),{},{affixWrapper:ve(x==null?void 0:x.affixWrapper,Y(Y({},"".concat(p,"-show-count"),g),"".concat(p,"-textarea-allow-clear"),l))}),disabled:b,focused:H,className:ve(v,Pe&&"".concat(p,"-out-of-range")),style:ie(ie({},y),X&&!Xe?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof ft=="string"?ft:void 0}},hidden:w,readOnly:T,onClear:E},B.createElement(kpt,Qe({},O,{autoSize:N,maxLength:c,onKeyDown:He,onChange:Me,onFocus:je,onBlur:pt,onCompositionStart:fe,onCompositionEnd:pe,className:ve(x==null?void 0:x.textarea),style:ie(ie({},$==null?void 0:$.textarea),{},{resize:y==null?void 0:y.resize}),disabled:b,prefixCls:p,onResize:We,ref:ee,readOnly:T})))});const _pt=t=>{const{componentCls:e,paddingLG:n}=t,r=`${e}-textarea`;return{[`textarea${e}`]:{maxWidth:"100%",height:"auto",minHeight:t.controlHeight,lineHeight:t.lineHeight,verticalAlign:"bottom",transition:`all ${t.motionDurationSlow}`,resize:"vertical",[`&${e}-mouse-active`]:{transition:`all ${t.motionDurationSlow}, height 0s, width 0s`}},[`${e}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[r]:{position:"relative","&-show-count":{[`${e}-data-count`]:{position:"absolute",bottom:t.calc(t.fontSize).mul(t.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:t.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${e},
        &-affix-wrapper${r}-has-feedback ${e}
      `]:{paddingInlineEnd:n},[`&-affix-wrapper${e}-affix-wrapper`]:{padding:0,[`> textarea${e}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:t.calc(t.controlHeight).sub(t.calc(t.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${e}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${e}-clear-icon`]:{position:"absolute",insetInlineEnd:t.paddingInline,insetBlockStart:t.paddingXS},[`${r}-suffix`]:{position:"absolute",top:0,insetInlineEnd:t.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${e}-affix-wrapper-rtl`]:{[`${e}-suffix`]:{[`${e}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${e}-affix-wrapper-sm`]:{[`${e}-suffix`]:{[`${e}-clear-icon`]:{insetInlineEnd:t.paddingInlineSM}}}}}},Ppt=vo(["Input","TextArea"],t=>{const e=_r(t,oL(t));return[_pt(e)]},sL,{resetFont:!1});var Rpt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Dpt=S.forwardRef((t,e)=>{var n;const{prefixCls:r,bordered:i=!0,size:a,disabled:o,status:s,allowClear:l,classNames:c,rootClassName:u,className:d,style:f,styles:h,variant:p,showCount:g,onMouseDown:m,onResize:v}=t,y=Rpt(t,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:b,direction:w,allowClear:x,autoComplete:$,className:C,style:E,classNames:I,styles:T}=Hf("textArea"),N=S.useContext(im),k=o??N,{status:O,hasFeedback:_,feedbackIcon:P}=S.useContext(vP),D=_dt(O,s),L=S.useRef(null);S.useImperativeHandle(e,()=>{var be;return{resizableTextArea:(be=L.current)===null||be===void 0?void 0:be.resizableTextArea,focus:$e=>{var Ne,Ve;fpt((Ve=(Ne=L.current)===null||Ne===void 0?void 0:Ne.resizableTextArea)===null||Ve===void 0?void 0:Ve.textArea,$e)},blur:()=>{var $e;return($e=L.current)===null||$e===void 0?void 0:$e.blur()}}});const R=b("input",r),F=nne(R),[V,H,U]=sht(R,u),[W]=Ppt(R,F),{compactSize:G,compactItemClassnames:q}=cne(R,w),X=Kx(be=>{var $e;return($e=a??G)!==null&&$e!==void 0?$e:be}),[re,ce]=One("textArea",p,i),ee=gpt(l??x),[se,ue]=S.useState(!1),[Q,ye]=S.useState(!1),le=be=>{ue(!0),m==null||m(be);const $e=()=>{ue(!1),document.removeEventListener("mouseup",$e)};document.addEventListener("mouseup",$e)},xe=be=>{var $e,Ne;if(v==null||v(be),se&&typeof getComputedStyle=="function"){const Ve=(Ne=($e=L.current)===null||$e===void 0?void 0:$e.nativeElement)===null||Ne===void 0?void 0:Ne.querySelector("textarea");Ve&&getComputedStyle(Ve).resize==="both"&&ye(!0)}};return V(W(S.createElement(Apt,Object.assign({autoComplete:$},y,{style:Object.assign(Object.assign({},E),f),styles:Object.assign(Object.assign({},T),h),disabled:k,allowClear:ee,className:ve(U,F,d,u,q,C,Q&&`${R}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},c),I),{textarea:ve({[`${R}-sm`]:X==="small",[`${R}-lg`]:X==="large"},H,c==null?void 0:c.textarea,I.textarea,se&&`${R}-mouse-active`),variant:ve({[`${R}-${re}`]:ce},Adt(R,D)),affixWrapper:ve(`${R}-textarea-affix-wrapper`,{[`${R}-affix-wrapper-rtl`]:w==="rtl",[`${R}-affix-wrapper-sm`]:X==="small",[`${R}-affix-wrapper-lg`]:X==="large",[`${R}-textarea-show-count`]:g||((n=t.count)===null||n===void 0?void 0:n.show)},H)}),prefixCls:R,suffix:_&&S.createElement("span",{className:`${R}-textarea-suffix`},P),showCount:g,ref:L,onResize:xe,onMouseDown:le}))))}),Q$=100,ure=Q$/5,dre=Q$/2-ure/2,XN=dre*2*Math.PI,sU=50,lU=t=>{const{dotClassName:e,style:n,hasCircleCls:r}=t;return S.createElement("circle",{className:ve(`${e}-circle`,{[`${e}-circle-bg`]:r}),r:dre,cx:sU,cy:sU,strokeWidth:ure,style:n})},Fpt=({percent:t,prefixCls:e})=>{const n=`${e}-dot`,r=`${n}-holder`,i=`${r}-hidden`,[a,o]=S.useState(!1);An(()=>{t!==0&&o(!0)},[t!==0]);const s=Math.max(Math.min(t,100),0);if(!a)return null;const l={strokeDashoffset:`${XN/4}`,strokeDasharray:`${XN*s/100} ${XN*(100-s)/100}`};return S.createElement("span",{className:ve(r,`${n}-progress`,s<=0&&i)},S.createElement("svg",{viewBox:`0 0 ${Q$} ${Q$}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":s},S.createElement(lU,{dotClassName:n,hasCircleCls:!0}),S.createElement(lU,{dotClassName:n,style:l})))};function Mpt(t){const{prefixCls:e,percent:n=0}=t,r=`${e}-dot`,i=`${r}-holder`,a=`${i}-hidden`;return S.createElement(S.Fragment,null,S.createElement("span",{className:ve(i,n>0&&a)},S.createElement("span",{className:ve(r,`${e}-dot-spin`)},[1,2,3,4].map(o=>S.createElement("i",{className:`${e}-dot-item`,key:o})))),S.createElement(Fpt,{prefixCls:e,percent:n}))}function Lpt(t){const{prefixCls:e,indicator:n,percent:r}=t,i=`${e}-dot`;return n&&S.isValidElement(n)?xf(n,{className:ve(n.props.className,i),percent:r}):S.createElement(Mpt,{prefixCls:e,percent:r})}const jpt=new hn("antSpinMove",{to:{opacity:1}}),zpt=new hn("antRotate",{to:{transform:"rotate(405deg)"}}),Bpt=t=>{const{componentCls:e,calc:n}=t;return{[e]:Object.assign(Object.assign({},wc(t)),{position:"absolute",display:"none",color:t.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${t.motionDurationSlow} ${t.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${e}-text`]:{fontSize:t.fontSize,paddingTop:n(n(t.dotSize).sub(t.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:t.colorBgMask,zIndex:t.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${t.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[e]:{[`${e}-dot-holder`]:{color:t.colorWhite},[`${e}-text`]:{color:t.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${e}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:t.contentHeight,[`${e}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:n(t.dotSize).mul(-1).div(2).equal()},[`${e}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${t.colorBgContainer}`},[`&${e}-show-text ${e}-dot`]:{marginTop:n(t.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${e}-dot`]:{margin:n(t.dotSizeSM).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:n(n(t.dotSizeSM).sub(t.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:n(t.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${e}-dot`]:{margin:n(t.dotSizeLG).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:n(n(t.dotSizeLG).sub(t.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:n(t.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${e}-container`]:{position:"relative",transition:`opacity ${t.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:t.colorBgContainer,opacity:0,transition:`all ${t.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:t.spinDotDefault},[`${e}-dot-holder`]:{width:"1em",height:"1em",fontSize:t.dotSize,display:"inline-block",transition:`transform ${t.motionDurationSlow} ease, opacity ${t.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:t.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${e}-dot-progress`]:{position:"absolute",inset:0},[`${e}-dot`]:{position:"relative",display:"inline-block",fontSize:t.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:n(t.dotSize).sub(n(t.marginXXS).div(2)).div(2).equal(),height:n(t.dotSize).sub(n(t.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:jpt,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:zpt,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(r=>`${r} ${t.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:t.colorFillSecondary}},[`&-sm ${e}-dot`]:{"&, &-holder":{fontSize:t.dotSizeSM}},[`&-sm ${e}-dot-holder`]:{i:{width:n(n(t.dotSizeSM).sub(n(t.marginXXS).div(2))).div(2).equal(),height:n(n(t.dotSizeSM).sub(n(t.marginXXS).div(2))).div(2).equal()}},[`&-lg ${e}-dot`]:{"&, &-holder":{fontSize:t.dotSizeLG}},[`&-lg ${e}-dot-holder`]:{i:{width:n(n(t.dotSizeLG).sub(t.marginXXS)).div(2).equal(),height:n(n(t.dotSizeLG).sub(t.marginXXS)).div(2).equal()}},[`&${e}-show-text ${e}-text`]:{display:"block"}})}},Vpt=t=>{const{controlHeightLG:e,controlHeight:n}=t;return{contentHeight:400,dotSize:e/2,dotSizeSM:e*.35,dotSizeLG:n}},Wpt=vo("Spin",t=>{const e=_r(t,{spinDotDefault:t.colorTextDescription});return[Bpt(e)]},Vpt),Upt=200,cU=[[30,.05],[70,.03],[96,.01]];function Hpt(t,e){const[n,r]=S.useState(0),i=S.useRef(null),a=e==="auto";return S.useEffect(()=>(a&&t&&(r(0),i.current=setInterval(()=>{r(o=>{const s=100-o;for(let l=0;l<cU.length;l+=1){const[c,u]=cU[l];if(o<=c)return o+s*u}return o})},Upt)),()=>{clearInterval(i.current)}),[a,t]),a?n:e}var Gpt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};let fre;function qpt(t,e){return!!t&&!!e&&!Number.isNaN(Number(e))}const hre=t=>{var e;const{prefixCls:n,spinning:r=!0,delay:i=0,className:a,rootClassName:o,size:s="default",tip:l,wrapperClassName:c,style:u,children:d,fullscreen:f=!1,indicator:h,percent:p}=t,g=Gpt(t,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:m,direction:v,className:y,style:b,indicator:w}=Hf("spin"),x=m("spin",n),[$,C,E]=Wpt(x),[I,T]=S.useState(()=>r&&!qpt(r,i)),N=Hpt(I,p);S.useEffect(()=>{if(r){const R=cpt(i,()=>{T(!0)});return R(),()=>{var F;(F=R==null?void 0:R.cancel)===null||F===void 0||F.call(R)}}T(!1)},[i,r]);const k=S.useMemo(()=>typeof d<"u"&&!f,[d,f]),O=ve(x,y,{[`${x}-sm`]:s==="small",[`${x}-lg`]:s==="large",[`${x}-spinning`]:I,[`${x}-show-text`]:!!l,[`${x}-rtl`]:v==="rtl"},a,!f&&o,C,E),_=ve(`${x}-container`,{[`${x}-blur`]:I}),P=(e=h??w)!==null&&e!==void 0?e:fre,D=Object.assign(Object.assign({},b),u),L=S.createElement("div",Object.assign({},g,{style:D,className:O,"aria-live":"polite","aria-busy":I}),S.createElement(Lpt,{prefixCls:x,indicator:P,percent:N}),l&&(k||f)?S.createElement("div",{className:`${x}-text`},l):null);return $(k?S.createElement("div",Object.assign({},g,{className:ve(`${x}-nested-loading`,c,C,E)}),I&&S.createElement("div",{key:"loading"},L),S.createElement("div",{className:_,key:"container"},d)):f?S.createElement("div",{className:ve(`${x}-fullscreen`,{[`${x}-fullscreen-show`]:I},o,C,E)},L):L)};hre.setDefaultIndicator=t=>{fre=t};const Kpt=(t,e=!1)=>e&&t==null?[]:Array.isArray(t)?t:[t];var Xpt={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},Ypt=function(){var e=S.useRef([]),n=S.useRef(null);return S.useEffect(function(){var r=Date.now(),i=!1;e.current.forEach(function(a){if(a){i=!0;var o=a.style;o.transitionDuration=".3s, .3s, .3s, .06s",n.current&&r-n.current<100&&(o.transitionDuration="0s, 0s")}}),i&&(n.current=Date.now())}),e.current},uU=0,Zpt=ma();function Qpt(){var t;return Zpt?(t=uU,uU+=1):t="TEST_OR_SSR",t}const Jpt=function(t){var e=S.useState(),n=ge(e,2),r=n[0],i=n[1];return S.useEffect(function(){i("rc_progress_".concat(Qpt()))},[]),t||r};var dU=function(e){var n=e.bg,r=e.children;return S.createElement("div",{style:{width:"100%",height:"100%",background:n}},r)};function fU(t,e){return Object.keys(t).map(function(n){var r=parseFloat(n),i="".concat(Math.floor(r*e),"%");return"".concat(t[n]," ").concat(i)})}var emt=S.forwardRef(function(t,e){var n=t.prefixCls,r=t.color,i=t.gradientId,a=t.radius,o=t.style,s=t.ptg,l=t.strokeLinecap,c=t.strokeWidth,u=t.size,d=t.gapDegree,f=r&&at(r)==="object",h=f?"#FFF":void 0,p=u/2,g=S.createElement("circle",{className:"".concat(n,"-circle-path"),r:a,cx:p,cy:p,stroke:h,strokeLinecap:l,strokeWidth:c,opacity:s===0?0:1,style:o,ref:e});if(!f)return g;var m="".concat(i,"-conic"),v=d?"".concat(180+d/2,"deg"):"0deg",y=fU(r,(360-d)/360),b=fU(r,1),w="conic-gradient(from ".concat(v,", ").concat(y.join(", "),")"),x="linear-gradient(to ".concat(d?"bottom":"top",", ").concat(b.join(", "),")");return S.createElement(S.Fragment,null,S.createElement("mask",{id:m},g),S.createElement("foreignObject",{x:0,y:0,width:u,height:u,mask:"url(#".concat(m,")")},S.createElement(dU,{bg:x},S.createElement(dU,{bg:w}))))}),jv=100,YN=function(e,n,r,i,a,o,s,l,c,u){var d=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,f=r/100*360*((360-o)/360),h=o===0?0:{bottom:0,top:180,left:90,right:-90}[s],p=(100-i)/100*n;c==="round"&&i!==100&&(p+=u/2,p>=n&&(p=n-.01));var g=jv/2;return{stroke:typeof l=="string"?l:void 0,strokeDasharray:"".concat(n,"px ").concat(e),strokeDashoffset:p+d,transform:"rotate(".concat(a+f+h,"deg)"),transformOrigin:"".concat(g,"px ").concat(g,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},tmt=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function hU(t){var e=t??[];return Array.isArray(e)?e:[e]}var nmt=function(e){var n=ie(ie({},Xpt),e),r=n.id,i=n.prefixCls,a=n.steps,o=n.strokeWidth,s=n.trailWidth,l=n.gapDegree,c=l===void 0?0:l,u=n.gapPosition,d=n.trailColor,f=n.strokeLinecap,h=n.style,p=n.className,g=n.strokeColor,m=n.percent,v=Ot(n,tmt),y=jv/2,b=Jpt(r),w="".concat(b,"-gradient"),x=y-o/2,$=Math.PI*2*x,C=c>0?90+c/2:-90,E=$*((360-c)/360),I=at(a)==="object"?a:{count:a,gap:2},T=I.count,N=I.gap,k=hU(m),O=hU(g),_=O.find(function(H){return H&&at(H)==="object"}),P=_&&at(_)==="object",D=P?"butt":f,L=YN($,E,0,100,C,c,u,d,D,o),R=Ypt(),F=function(){var U=0;return k.map(function(W,G){var q=O[G]||O[O.length-1],X=YN($,E,U,W,C,c,u,q,D,o);return U+=W,S.createElement(emt,{key:G,color:q,ptg:W,radius:x,prefixCls:i,gradientId:w,style:X,strokeLinecap:D,strokeWidth:o,gapDegree:c,ref:function(ce){R[G]=ce},size:jv})}).reverse()},V=function(){var U=Math.round(T*(k[0]/100)),W=100/T,G=0;return new Array(T).fill(null).map(function(q,X){var re=X<=U-1?O[0]:d,ce=re&&at(re)==="object"?"url(#".concat(w,")"):void 0,ee=YN($,E,G,W,C,c,u,re,"butt",o,N);return G+=(E-ee.strokeDashoffset+N)*100/E,S.createElement("circle",{key:X,className:"".concat(i,"-circle-path"),r:x,cx:y,cy:y,stroke:ce,strokeWidth:o,opacity:1,style:ee,ref:function(ue){R[X]=ue}})})};return S.createElement("svg",Qe({className:ve("".concat(i,"-circle"),p),viewBox:"0 0 ".concat(jv," ").concat(jv),style:h,id:r,role:"presentation"},v),!T&&S.createElement("circle",{className:"".concat(i,"-circle-trail"),r:x,cx:y,cy:y,stroke:d,strokeLinecap:D,strokeWidth:s||o,style:L}),T?V():F())};function uu(t){return!t||t<0?0:t>100?100:t}function J$({success:t,successPercent:e}){let n=e;return t&&"progress"in t&&(n=t.progress),t&&"percent"in t&&(n=t.percent),n}const rmt=({percent:t,success:e,successPercent:n})=>{const r=uu(J$({success:e,successPercent:n}));return[r,uu(uu(t)-r)]},imt=({success:t={},strokeColor:e})=>{const{strokeColor:n}=t;return[n||np.green,e||null]},HT=(t,e,n)=>{var r,i,a,o;let s=-1,l=-1;if(e==="step"){const c=n.steps,u=n.strokeWidth;typeof t=="string"||typeof t>"u"?(s=t==="small"?2:14,l=u??8):typeof t=="number"?[s,l]=[t,t]:[s=14,l=8]=Array.isArray(t)?t:[t.width,t.height],s*=c}else if(e==="line"){const c=n==null?void 0:n.strokeWidth;typeof t=="string"||typeof t>"u"?l=c||(t==="small"?6:8):typeof t=="number"?[s,l]=[t,t]:[s=-1,l=8]=Array.isArray(t)?t:[t.width,t.height]}else(e==="circle"||e==="dashboard")&&(typeof t=="string"||typeof t>"u"?[s,l]=t==="small"?[60,60]:[120,120]:typeof t=="number"?[s,l]=[t,t]:Array.isArray(t)&&(s=(i=(r=t[0])!==null&&r!==void 0?r:t[1])!==null&&i!==void 0?i:120,l=(o=(a=t[0])!==null&&a!==void 0?a:t[1])!==null&&o!==void 0?o:120));return[s,l]},amt=3,omt=t=>amt/t*100,smt=t=>{const{prefixCls:e,trailColor:n=null,strokeLinecap:r="round",gapPosition:i,gapDegree:a,width:o=120,type:s,children:l,success:c,size:u=o,steps:d}=t,[f,h]=HT(u,"circle");let{strokeWidth:p}=t;p===void 0&&(p=Math.max(omt(f),6));const g={width:f,height:h,fontSize:f*.15+6},m=S.useMemo(()=>{if(a||a===0)return a;if(s==="dashboard")return 75},[a,s]),v=rmt(t),y=i||s==="dashboard"&&"bottom"||void 0,b=Object.prototype.toString.call(t.strokeColor)==="[object Object]",w=imt({success:c,strokeColor:t.strokeColor}),x=ve(`${e}-inner`,{[`${e}-circle-gradient`]:b}),$=S.createElement(nmt,{steps:d,percent:d?v[1]:v,strokeWidth:p,trailWidth:p,strokeColor:d?w[1]:w,strokeLinecap:r,trailColor:n,prefixCls:e,gapDegree:m,gapPosition:y}),C=f<=20,E=S.createElement("div",{className:x,style:g},$,!C&&l);return C?S.createElement(zg,{title:l},E):E},eC="--progress-line-stroke-color",pre="--progress-percent",pU=t=>{const e=t?"100%":"-100%";return new hn(`antProgress${t?"RTL":"LTR"}Active`,{"0%":{transform:`translateX(${e}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${e}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},lmt=t=>{const{componentCls:e,iconCls:n}=t;return{[e]:Object.assign(Object.assign({},wc(t)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:t.fontSize},[`${e}-outer`]:{display:"inline-flex",alignItems:"center",width:"100%"},[`${e}-inner`]:{position:"relative",display:"inline-block",width:"100%",flex:1,overflow:"hidden",verticalAlign:"middle",backgroundColor:t.remainingColor,borderRadius:t.lineBorderRadius},[`${e}-inner:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:t.defaultColor}},[`${e}-success-bg, ${e}-bg`]:{position:"relative",background:t.defaultColor,borderRadius:t.lineBorderRadius,transition:`all ${t.motionDurationSlow} ${t.motionEaseInOutCirc}`},[`${e}-layout-bottom`]:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",[`${e}-text`]:{width:"max-content",marginInlineStart:0,marginTop:t.marginXXS}},[`${e}-bg`]:{overflow:"hidden","&::after":{content:'""',background:{_multi_value_:!0,value:["inherit",`var(${eC})`]},height:"100%",width:`calc(1 / var(${pre}) * 100%)`,display:"block"},[`&${e}-bg-inner`]:{minWidth:"max-content","&::after":{content:"none"},[`${e}-text-inner`]:{color:t.colorWhite,[`&${e}-text-bright`]:{color:"rgba(0, 0, 0, 0.45)"}}}},[`${e}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:t.colorSuccess},[`${e}-text`]:{display:"inline-block",marginInlineStart:t.marginXS,color:t.colorText,lineHeight:1,width:"2em",whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[n]:{fontSize:t.fontSize},[`&${e}-text-outer`]:{width:"max-content"},[`&${e}-text-outer${e}-text-start`]:{width:"max-content",marginInlineStart:0,marginInlineEnd:t.marginXS}},[`${e}-text-inner`]:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",marginInlineStart:0,padding:`0 ${Ce(t.paddingXXS)}`,[`&${e}-text-start`]:{justifyContent:"start"},[`&${e}-text-end`]:{justifyContent:"end"}},[`&${e}-status-active`]:{[`${e}-bg::before`]:{position:"absolute",inset:0,backgroundColor:t.colorBgContainer,borderRadius:t.lineBorderRadius,opacity:0,animationName:pU(),animationDuration:t.progressActiveMotionDuration,animationTimingFunction:t.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${e}-rtl${e}-status-active`]:{[`${e}-bg::before`]:{animationName:pU(!0)}},[`&${e}-status-exception`]:{[`${e}-bg`]:{backgroundColor:t.colorError},[`${e}-text`]:{color:t.colorError}},[`&${e}-status-exception ${e}-inner:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:t.colorError}},[`&${e}-status-success`]:{[`${e}-bg`]:{backgroundColor:t.colorSuccess},[`${e}-text`]:{color:t.colorSuccess}},[`&${e}-status-success ${e}-inner:not(${e}-circle-gradient)`]:{[`${e}-circle-path`]:{stroke:t.colorSuccess}}})}},cmt=t=>{const{componentCls:e,iconCls:n}=t;return{[e]:{[`${e}-circle-trail`]:{stroke:t.remainingColor},[`&${e}-circle ${e}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${e}-circle ${e}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:t.circleTextColor,fontSize:t.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[n]:{fontSize:t.circleIconFontSize}},[`${e}-circle&-status-exception`]:{[`${e}-text`]:{color:t.colorError}},[`${e}-circle&-status-success`]:{[`${e}-text`]:{color:t.colorSuccess}}},[`${e}-inline-circle`]:{lineHeight:1,[`${e}-inner`]:{verticalAlign:"bottom"}}}},umt=t=>{const{componentCls:e}=t;return{[e]:{[`${e}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:t.progressStepMinWidth,marginInlineEnd:t.progressStepMarginInlineEnd,backgroundColor:t.remainingColor,transition:`all ${t.motionDurationSlow}`,"&-active":{backgroundColor:t.defaultColor}}}}}},dmt=t=>{const{componentCls:e,iconCls:n}=t;return{[e]:{[`${e}-small&-line, ${e}-small&-line ${e}-text ${n}`]:{fontSize:t.fontSizeSM}}}},fmt=t=>({circleTextColor:t.colorText,defaultColor:t.colorInfo,remainingColor:t.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:`${t.fontSize/t.fontSizeSM}em`}),hmt=vo("Progress",t=>{const e=t.calc(t.marginXXS).div(2).equal(),n=_r(t,{progressStepMarginInlineEnd:e,progressStepMinWidth:e,progressActiveMotionDuration:"2.4s"});return[lmt(n),cmt(n),umt(n),dmt(n)]},fmt);var pmt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const mmt=t=>{let e=[];return Object.keys(t).forEach(n=>{const r=parseFloat(n.replace(/%/g,""));Number.isNaN(r)||e.push({key:r,value:t[n]})}),e=e.sort((n,r)=>n.key-r.key),e.map(({key:n,value:r})=>`${r} ${n}%`).join(", ")},gmt=(t,e)=>{const{from:n=np.blue,to:r=np.blue,direction:i=e==="rtl"?"to left":"to right"}=t,a=pmt(t,["from","to","direction"]);if(Object.keys(a).length!==0){const s=mmt(a),l=`linear-gradient(${i}, ${s})`;return{background:l,[eC]:l}}const o=`linear-gradient(${i}, ${n}, ${r})`;return{background:o,[eC]:o}},vmt=t=>{const{prefixCls:e,direction:n,percent:r,size:i,strokeWidth:a,strokeColor:o,strokeLinecap:s="round",children:l,trailColor:c=null,percentPosition:u,success:d}=t,{align:f,type:h}=u,p=o&&typeof o!="string"?gmt(o,n):{[eC]:o,background:o},g=s==="square"||s==="butt"?0:void 0,m=i??[-1,a||(i==="small"?6:8)],[v,y]=HT(m,"line",{strokeWidth:a}),b={backgroundColor:c||void 0,borderRadius:g},w=Object.assign(Object.assign({width:`${uu(r)}%`,height:y,borderRadius:g},p),{[pre]:uu(r)/100}),x=J$(t),$={width:`${uu(x)}%`,height:y,borderRadius:g,backgroundColor:d==null?void 0:d.strokeColor},C={width:v<0?"100%":v},E=S.createElement("div",{className:`${e}-inner`,style:b},S.createElement("div",{className:ve(`${e}-bg`,`${e}-bg-${h}`),style:w},h==="inner"&&l),x!==void 0&&S.createElement("div",{className:`${e}-success-bg`,style:$})),I=h==="outer"&&f==="start",T=h==="outer"&&f==="end";return h==="outer"&&f==="center"?S.createElement("div",{className:`${e}-layout-bottom`},E,l):S.createElement("div",{className:`${e}-outer`,style:C},I&&l,E,T&&l)},ymt=t=>{const{size:e,steps:n,rounding:r=Math.round,percent:i=0,strokeWidth:a=8,strokeColor:o,trailColor:s=null,prefixCls:l,children:c}=t,u=r(n*(i/100)),f=e??[e==="small"?2:14,a],[h,p]=HT(f,"step",{steps:n,strokeWidth:a}),g=h/n,m=Array.from({length:n});for(let v=0;v<n;v++){const y=Array.isArray(o)?o[v]:o;m[v]=S.createElement("div",{key:v,className:ve(`${l}-steps-item`,{[`${l}-steps-item-active`]:v<=u-1}),style:{backgroundColor:v<=u-1?y:s,width:g,height:p}})}return S.createElement("div",{className:`${l}-steps-outer`},m,c)};var bmt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const xmt=["normal","exception","active","success"],wmt=S.forwardRef((t,e)=>{const{prefixCls:n,className:r,rootClassName:i,steps:a,strokeColor:o,percent:s=0,size:l="default",showInfo:c=!0,type:u="line",status:d,format:f,style:h,percentPosition:p={}}=t,g=bmt(t,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format","style","percentPosition"]),{align:m="end",type:v="outer"}=p,y=Array.isArray(o)?o[0]:o,b=typeof o=="string"||Array.isArray(o)?o:void 0,w=S.useMemo(()=>{if(y){const F=typeof y=="string"?y:Object.values(y)[0];return new Ir(F).isLight()}return!1},[o]),x=S.useMemo(()=>{var F,V;const H=J$(t);return parseInt(H!==void 0?(F=H??0)===null||F===void 0?void 0:F.toString():(V=s??0)===null||V===void 0?void 0:V.toString(),10)},[s,t.success,t.successPercent]),$=S.useMemo(()=>!xmt.includes(d)&&x>=100?"success":d||"normal",[d,x]),{getPrefixCls:C,direction:E,progress:I}=S.useContext(pn),T=C("progress",n),[N,k,O]=hmt(T),_=u==="line",P=_&&!a,D=S.useMemo(()=>{if(!c)return null;const F=J$(t);let V;const H=f||(W=>`${W}%`),U=_&&w&&v==="inner";return v==="inner"||f||$!=="exception"&&$!=="success"?V=H(uu(s),uu(F)):$==="exception"?V=_?S.createElement(Jte,null):S.createElement(ene,null):$==="success"&&(V=_?S.createElement(Nst,null):S.createElement(Ane,null)),S.createElement("span",{className:ve(`${T}-text`,{[`${T}-text-bright`]:U,[`${T}-text-${m}`]:P,[`${T}-text-${v}`]:P}),title:typeof V=="string"?V:void 0},V)},[c,s,x,$,u,T,f]);let L;u==="line"?L=a?S.createElement(ymt,Object.assign({},t,{strokeColor:b,prefixCls:T,steps:typeof a=="object"?a.count:a}),D):S.createElement(vmt,Object.assign({},t,{strokeColor:y,prefixCls:T,direction:E,percentPosition:{align:m,type:v}}),D):(u==="circle"||u==="dashboard")&&(L=S.createElement(smt,Object.assign({},t,{strokeColor:y,prefixCls:T,progressStatus:$}),D));const R=ve(T,`${T}-status-${$}`,{[`${T}-${u==="dashboard"&&"circle"||u}`]:u!=="line",[`${T}-inline-circle`]:u==="circle"&&HT(l,"circle")[0]<=20,[`${T}-line`]:P,[`${T}-line-align-${m}`]:P,[`${T}-line-position-${v}`]:P,[`${T}-steps`]:a,[`${T}-show-info`]:c,[`${T}-${l}`]:typeof l=="string",[`${T}-rtl`]:E==="rtl"},I==null?void 0:I.className,r,i,k,O);return N(S.createElement("div",Object.assign({ref:e,style:Object.assign(Object.assign({},I==null?void 0:I.style),h),className:R,role:"progressbar","aria-valuenow":x,"aria-valuemin":0,"aria-valuemax":100},Jo(g,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),L))});var Smt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},$mt=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:Smt}))},Cmt=S.forwardRef($mt),Emt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},Tmt=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:Emt}))},Imt=S.forwardRef(Tmt),Nmt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},kmt=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:Nmt}))},Omt=S.forwardRef(kmt),Amt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},_mt=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:Amt}))},Pmt=S.forwardRef(_mt),Rmt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},Dmt=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:Rmt}))},Fmt=S.forwardRef(Dmt),Mmt={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:n}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"},Lmt=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:Mmt}))},jmt=S.forwardRef(Lmt),zmt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},Bmt=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:zmt}))},Vmt=S.forwardRef(Bmt),Wmt={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:n}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:n}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:n}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"},Umt=function(e,n){return S.createElement(Kr,Qe({},e,{ref:n,icon:Wmt}))},Hmt=S.forwardRef(Umt),Gmt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const qmt=(t,e,n,r)=>{const{titleMarginBottom:i,fontWeightStrong:a}=r;return{marginBottom:i,color:n,fontWeight:a,fontSize:t,lineHeight:e}},Kmt=t=>{const e=[1,2,3,4,5],n={};return e.forEach(r=>{n[`
      h${r}&,
      div&-h${r},
      div&-h${r} > textarea,
      h${r}
    `]=qmt(t[`fontSizeHeading${r}`],t[`lineHeightHeading${r}`],t.colorTextHeading,t)}),n},Xmt=t=>{const{componentCls:e}=t;return{"a&, a":Object.assign(Object.assign({},Mte(t)),{userSelect:"text",[`&[disabled], &${e}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:t.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},Ymt=t=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:t.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:t.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:H$[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:t.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),Zmt=t=>{const{componentCls:e,paddingSM:n}=t,r=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:t.calc(t.paddingSM).mul(-1).equal(),marginTop:t.calc(r).mul(-1).equal(),marginBottom:`calc(1em - ${Ce(r)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:t.calc(t.marginXS).add(2).equal(),insetBlockEnd:t.marginXS,color:t.colorIcon,fontWeight:"normal",fontSize:t.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},Qmt=t=>({[`${t.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:t.colorSuccess}},[`${t.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),Jmt=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),egt=t=>{const{componentCls:e,titleMarginTop:n}=t;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorText,wordBreak:"break-word",lineHeight:t.lineHeight,[`&${e}-secondary`]:{color:t.colorTextDescription},[`&${e}-success`]:{color:t.colorSuccessText},[`&${e}-warning`]:{color:t.colorWarningText},[`&${e}-danger`]:{color:t.colorErrorText,"a&:active, a&:focus":{color:t.colorErrorTextActive},"a&:hover":{color:t.colorErrorTextHover}},[`&${e}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},Kmt(t)),{[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),Ymt(t)),Xmt(t)),{[`
        ${e}-expand,
        ${e}-collapse,
        ${e}-edit,
        ${e}-copy
      `]:Object.assign(Object.assign({},Mte(t)),{marginInlineStart:t.marginXXS})}),Zmt(t)),Qmt(t)),Jmt()),{"&-rtl":{direction:"rtl"}})}},tgt=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),mre=vo("Typography",t=>[egt(t)],tgt),ngt=t=>{const{prefixCls:e,"aria-label":n,className:r,style:i,direction:a,maxLength:o,autoSize:s=!0,value:l,onSave:c,onCancel:u,onEnd:d,component:f,enterIcon:h=S.createElement(Fmt,null)}=t,p=S.useRef(null),g=S.useRef(!1),m=S.useRef(null),[v,y]=S.useState(l);S.useEffect(()=>{y(l)},[l]),S.useEffect(()=>{var _;if(!((_=p.current)===null||_===void 0)&&_.resizableTextArea){const{textArea:P}=p.current.resizableTextArea;P.focus();const{length:D}=P.value;P.setSelectionRange(D,D)}},[]);const b=({target:_})=>{y(_.value.replace(/[\n\r]/g,""))},w=()=>{g.current=!0},x=()=>{g.current=!1},$=({keyCode:_})=>{g.current||(m.current=_)},C=()=>{c(v.trim())},E=({keyCode:_,ctrlKey:P,altKey:D,metaKey:L,shiftKey:R})=>{m.current!==_||g.current||P||D||L||R||(_===ur.ENTER?(C(),d==null||d()):_===ur.ESC&&u())},I=()=>{C()},[T,N,k]=mre(e),O=ve(e,`${e}-edit-content`,{[`${e}-rtl`]:a==="rtl",[`${e}-${f}`]:!!f},r,N,k);return T(S.createElement("div",{className:O,style:i},S.createElement(Dpt,{ref:p,maxLength:o,value:v,onChange:b,onKeyDown:$,onKeyUp:E,onCompositionStart:w,onCompositionEnd:x,onBlur:I,"aria-label":n,rows:1,autoSize:s}),h!==null?xf(h,{className:`${e}-edit-content-confirm`}):null))};var rgt=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||n.forEach(function(i){t.addRange(i)}),e&&e.focus()}},igt=rgt,mU={"text/plain":"Text","text/html":"Url",default:"Text"},agt="Copy to clipboard: #{key}, Enter";function ogt(t){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function sgt(t,e){var n,r,i,a,o,s,l=!1;e||(e={}),n=e.debug||!1;try{i=igt(),a=document.createRange(),o=document.getSelection(),s=document.createElement("span"),s.textContent=t,s.ariaHidden="true",s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",function(u){if(u.stopPropagation(),e.format)if(u.preventDefault(),typeof u.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var d=mU[e.format]||mU.default;window.clipboardData.setData(d,t)}else u.clipboardData.clearData(),u.clipboardData.setData(e.format,t);e.onCopy&&(u.preventDefault(),e.onCopy(u.clipboardData))}),document.body.appendChild(s),a.selectNodeContents(s),o.addRange(a);var c=document.execCommand("copy");if(!c)throw new Error("copy command was unsuccessful");l=!0}catch(u){n&&console.error("unable to copy using execCommand: ",u),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),l=!0}catch(d){n&&console.error("unable to copy using clipboardData: ",d),n&&console.error("falling back to prompt"),r=ogt("message"in e?e.message:agt),window.prompt(r,t)}}finally{o&&(typeof o.removeRange=="function"?o.removeRange(a):o.removeAllRanges()),s&&document.body.removeChild(s),i()}return l}var lgt=sgt;const cgt=Gt(lgt);var ugt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const dgt=({copyConfig:t,children:e})=>{const[n,r]=S.useState(!1),[i,a]=S.useState(!1),o=S.useRef(null),s=()=>{o.current&&clearTimeout(o.current)},l={};t.format&&(l.format=t.format),S.useEffect(()=>s,[]);const c=zi(u=>ugt(void 0,void 0,void 0,function*(){var d;u==null||u.preventDefault(),u==null||u.stopPropagation(),a(!0);try{const f=typeof t.text=="function"?yield t.text():t.text;cgt(f||Kpt(e,!0).join("")||"",l),a(!1),r(!0),s(),o.current=setTimeout(()=>{r(!1)},3e3),(d=t.onCopy)===null||d===void 0||d.call(t,u)}catch(f){throw a(!1),f}}));return{copied:n,copyLoading:i,onClick:c}};function ZN(t,e){return S.useMemo(()=>{const n=!!t;return[n,Object.assign(Object.assign({},e),n&&typeof t=="object"?t:null)]},[t])}const fgt=t=>{const e=S.useRef(void 0);return S.useEffect(()=>{e.current=t}),e.current},hgt=(t,e,n)=>S.useMemo(()=>t===!0?{title:e??n}:S.isValidElement(t)?{title:t}:typeof t=="object"?Object.assign({title:e??n},t):{title:t},[t,e,n]);var pgt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const gre=S.forwardRef((t,e)=>{const{prefixCls:n,component:r="article",className:i,rootClassName:a,setContentRef:o,children:s,direction:l,style:c}=t,u=pgt(t,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:d,direction:f,className:h,style:p}=Hf("typography"),g=l??f,m=o?qu(e,o):e,v=d("typography",n),[y,b,w]=mre(v),x=ve(v,h,{[`${v}-rtl`]:g==="rtl"},i,a,b,w),$=Object.assign(Object.assign({},p),c);return y(S.createElement(r,Object.assign({className:x,style:$,ref:m},u),s))});function gU(t){return t===!1?[!1,!1]:Array.isArray(t)?t:[t]}function QN(t,e,n){return t===!0||t===void 0?e:t||n&&e}function mgt(t){const e=document.createElement("em");t.appendChild(e);const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return t.removeChild(e),n.left>r.left||r.right>n.right||n.top>r.top||r.bottom>n.bottom}const uL=t=>["string","number"].includes(typeof t),ggt=({prefixCls:t,copied:e,locale:n,iconOnly:r,tooltips:i,icon:a,tabIndex:o,onCopy:s,loading:l})=>{const c=gU(i),u=gU(a),{copied:d,copy:f}=n??{},h=e?d:f,p=QN(c[e?1:0],h),g=typeof p=="string"?p:h;return S.createElement(zg,{title:p},S.createElement("button",{type:"button",className:ve(`${t}-copy`,{[`${t}-copy-success`]:e,[`${t}-copy-icon-only`]:r}),onClick:s,"aria-label":g,tabIndex:o},e?QN(u[1],S.createElement(Ane,null),!0):QN(u[0],l?S.createElement(q$,null):S.createElement(Cmt,null),!0)))},aw=S.forwardRef(({style:t,children:e},n)=>{const r=S.useRef(null);return S.useImperativeHandle(n,()=>({isExceed:()=>{const i=r.current;return i.scrollHeight>i.clientHeight},getHeight:()=>r.current.clientHeight})),S.createElement("span",{"aria-hidden":!0,ref:r,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},t)},e)}),vgt=t=>t.reduce((e,n)=>e+(uL(n)?String(n).length:1),0);function vU(t,e){let n=0;const r=[];for(let i=0;i<t.length;i+=1){if(n===e)return r;const a=t[i],s=uL(a)?String(a).length:1,l=n+s;if(l>e){const c=e-n;return r.push(String(a).slice(0,c)),r}r.push(a),n=l}return t}const JN=0,ek=1,tk=2,nk=3,yU=4,ow={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function ygt(t){const{enableMeasure:e,width:n,text:r,children:i,rows:a,expanded:o,miscDeps:s,onEllipsis:l}=t,c=S.useMemo(()=>wl(r),[r]),u=S.useMemo(()=>vgt(c),[r]),d=S.useMemo(()=>i(c,!1),[r]),[f,h]=S.useState(null),p=S.useRef(null),g=S.useRef(null),m=S.useRef(null),v=S.useRef(null),y=S.useRef(null),[b,w]=S.useState(!1),[x,$]=S.useState(JN),[C,E]=S.useState(0),[I,T]=S.useState(null);An(()=>{$(e&&n&&u?ek:JN)},[n,r,a,e,c]),An(()=>{var _,P,D,L;if(x===ek){$(tk);const R=g.current&&getComputedStyle(g.current).whiteSpace;T(R)}else if(x===tk){const R=!!(!((_=m.current)===null||_===void 0)&&_.isExceed());$(R?nk:yU),h(R?[0,u]:null),w(R);const F=((P=m.current)===null||P===void 0?void 0:P.getHeight())||0,V=a===1?0:((D=v.current)===null||D===void 0?void 0:D.getHeight())||0,H=((L=y.current)===null||L===void 0?void 0:L.getHeight())||0,U=Math.max(F,V+H);E(U+1),l(R)}},[x]);const N=f?Math.ceil((f[0]+f[1])/2):0;An(()=>{var _;const[P,D]=f||[0,0];if(P!==D){const R=(((_=p.current)===null||_===void 0?void 0:_.getHeight())||0)>C;let F=N;D-P===1&&(F=R?P:D),h(R?[P,F]:[F,D])}},[f,N]);const k=S.useMemo(()=>{if(!e)return i(c,!1);if(x!==nk||!f||f[0]!==f[1]){const _=i(c,!1);return[yU,JN].includes(x)?_:S.createElement("span",{style:Object.assign(Object.assign({},ow),{WebkitLineClamp:a})},_)}return i(o?c:vU(c,f[0]),b)},[o,x,f,c].concat(Be(s))),O={width:n,margin:0,padding:0,whiteSpace:I==="nowrap"?"normal":"inherit"};return S.createElement(S.Fragment,null,k,x===tk&&S.createElement(S.Fragment,null,S.createElement(aw,{style:Object.assign(Object.assign(Object.assign({},O),ow),{WebkitLineClamp:a}),ref:m},d),S.createElement(aw,{style:Object.assign(Object.assign(Object.assign({},O),ow),{WebkitLineClamp:a-1}),ref:v},d),S.createElement(aw,{style:Object.assign(Object.assign(Object.assign({},O),ow),{WebkitLineClamp:1}),ref:y},i([],!0))),x===nk&&f&&f[0]!==f[1]&&S.createElement(aw,{style:Object.assign(Object.assign({},O),{top:400}),ref:p},i(vU(c,N),!0)),x===ek&&S.createElement("span",{style:{whiteSpace:"inherit"},ref:g}))}const bgt=({enableEllipsis:t,isEllipsis:e,children:n,tooltipProps:r})=>!(r!=null&&r.title)||!t?n:S.createElement(zg,Object.assign({open:e?void 0:!1},r),n);var xgt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function wgt({mark:t,code:e,underline:n,delete:r,strong:i,keyboard:a,italic:o},s){let l=s;function c(u,d){d&&(l=S.createElement(u,{},l))}return c("strong",i),c("u",n),c("del",r),c("code",e),c("mark",t),c("kbd",a),c("i",o),l}const Sgt="...",GT=S.forwardRef((t,e)=>{var n;const{prefixCls:r,className:i,style:a,type:o,disabled:s,children:l,ellipsis:c,editable:u,copyable:d,component:f,title:h}=t,p=xgt(t,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:g,direction:m}=S.useContext(pn),[v]=Ste("Text"),y=S.useRef(null),b=S.useRef(null),w=g("typography",r),x=Jo(p,["mark","code","delete","underline","strong","keyboard","italic"]),[$,C]=ZN(u),[E,I]=Vo(!1,{value:C.editing}),{triggerType:T=["icon"]}=C,N=me=>{var Ie;me&&((Ie=C.onStart)===null||Ie===void 0||Ie.call(C)),I(me)},k=fgt(E);An(()=>{var me;!E&&k&&((me=b.current)===null||me===void 0||me.focus())},[E]);const O=me=>{me==null||me.preventDefault(),N(!0)},_=me=>{var Ie;(Ie=C.onChange)===null||Ie===void 0||Ie.call(C,me),N(!1)},P=()=>{var me;(me=C.onCancel)===null||me===void 0||me.call(C),N(!1)},[D,L]=ZN(d),{copied:R,copyLoading:F,onClick:V}=dgt({copyConfig:L,children:l}),[H,U]=S.useState(!1),[W,G]=S.useState(!1),[q,X]=S.useState(!1),[re,ce]=S.useState(!1),[ee,se]=S.useState(!0),[ue,Q]=ZN(c,{expandable:!1,symbol:me=>me?v==null?void 0:v.collapse:v==null?void 0:v.expand}),[ye,le]=Vo(Q.defaultExpanded||!1,{value:Q.expanded}),xe=ue&&(!ye||Q.expandable==="collapsible"),{rows:be=1}=Q,$e=S.useMemo(()=>xe&&(Q.suffix!==void 0||Q.onEllipsis||Q.expandable||$||D),[xe,Q,$,D]);An(()=>{ue&&!$e&&(U(T6("webkitLineClamp")),G(T6("textOverflow")))},[$e,ue]);const[Ne,Ve]=S.useState(xe),Pe=S.useMemo(()=>$e?!1:be===1?W:H,[$e,W,H]);An(()=>{Ve(Pe&&xe)},[Pe,xe]);const ke=xe&&(Ne?re:q),fe=xe&&be===1&&Ne,pe=xe&&be>1&&Ne,Me=(me,Ie)=>{var Ye;le(Ie.expanded),(Ye=Q.onExpand)===null||Ye===void 0||Ye.call(Q,me,Ie)},[He,je]=S.useState(0),pt=({offsetWidth:me})=>{je(me)},ut=me=>{var Ie;X(me),q!==me&&((Ie=Q.onEllipsis)===null||Ie===void 0||Ie.call(Q,me))};S.useEffect(()=>{const me=y.current;if(ue&&Ne&&me){const Ie=mgt(me);re!==Ie&&ce(Ie)}},[ue,Ne,l,pe,ee,He]),S.useEffect(()=>{const me=y.current;if(typeof IntersectionObserver>"u"||!me||!Ne||!xe)return;const Ie=new IntersectionObserver(()=>{se(!!me.offsetParent)});return Ie.observe(me),()=>{Ie.disconnect()}},[Ne,xe]);const rt=hgt(Q.tooltip,C.text,l),ft=S.useMemo(()=>{if(!(!ue||Ne))return[C.text,l,h,rt.title].find(uL)},[ue,Ne,h,rt.title,ke]);if(E)return S.createElement(ngt,{value:(n=C.text)!==null&&n!==void 0?n:typeof l=="string"?l:"",onSave:_,onCancel:P,onEnd:C.onEnd,prefixCls:w,className:i,style:a,direction:m,component:f,maxLength:C.maxLength,autoSize:C.autoSize,enterIcon:C.enterIcon});const We=()=>{const{expandable:me,symbol:Ie}=Q;return me?S.createElement("button",{type:"button",key:"expand",className:`${w}-${ye?"collapse":"expand"}`,onClick:Ye=>Me(Ye,{expanded:!ye}),"aria-label":ye?v.collapse:v==null?void 0:v.expand},typeof Ie=="function"?Ie(ye):Ie):null},Xe=()=>{if(!$)return;const{icon:me,tooltip:Ie,tabIndex:Ye}=C,Lt=wl(Ie)[0]||(v==null?void 0:v.edit),Hn=typeof Lt=="string"?Lt:"";return T.includes("icon")?S.createElement(zg,{key:"edit",title:Ie===!1?"":Lt},S.createElement("button",{type:"button",ref:b,className:`${w}-edit`,onClick:O,"aria-label":Hn,tabIndex:Ye},me||S.createElement(Pmt,{role:"button"}))):null},Le=()=>D?S.createElement(ggt,Object.assign({key:"copy"},L,{prefixCls:w,copied:R,locale:v,onCopy:V,loading:F,iconOnly:l==null})):null,Se=me=>[me&&We(),Xe(),Le()],Fe=me=>[me&&!ye&&S.createElement("span",{"aria-hidden":!0,key:"ellipsis"},Sgt),Q.suffix,Se(me)];return S.createElement(hl,{onResize:pt,disabled:!xe},me=>S.createElement(bgt,{tooltipProps:rt,enableEllipsis:xe,isEllipsis:ke},S.createElement(gre,Object.assign({className:ve({[`${w}-${o}`]:o,[`${w}-disabled`]:s,[`${w}-ellipsis`]:ue,[`${w}-ellipsis-single-line`]:fe,[`${w}-ellipsis-multiple-line`]:pe},i),prefixCls:r,style:Object.assign(Object.assign({},a),{WebkitLineClamp:pe?be:void 0}),component:f,ref:qu(me,y,e),direction:m,onClick:T.includes("text")?O:void 0,"aria-label":ft==null?void 0:ft.toString(),title:h},x),S.createElement(ygt,{enableMeasure:xe&&!Ne,text:l,rows:be,width:He,onEllipsis:ut,expanded:ye,miscDeps:[R,ye,F,$,D,v]},(Ie,Ye)=>wgt(t,S.createElement(S.Fragment,null,Ie.length>0&&Ye&&!ye&&ft?S.createElement("span",{key:"show-content","aria-hidden":!0},Ie):Ie,Fe(Ye)))))))});var $gt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Cgt=S.forwardRef((t,e)=>{var{ellipsis:n,rel:r}=t,i=$gt(t,["ellipsis","rel"]);const a=Object.assign(Object.assign({},i),{rel:r===void 0&&i.target==="_blank"?"noopener noreferrer":r});return delete a.navigate,S.createElement(GT,Object.assign({},a,{ref:e,ellipsis:!!n,component:"a"}))}),Egt=S.forwardRef((t,e)=>S.createElement(GT,Object.assign({ref:e},t,{component:"div"})));var Tgt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Igt=(t,e)=>{var{ellipsis:n}=t,r=Tgt(t,["ellipsis"]);const i=S.useMemo(()=>n&&typeof n=="object"?Jo(n,["expandable","rows"]):n,[n]);return S.createElement(GT,Object.assign({ref:e},r,{ellipsis:i,component:"span"}))},Ngt=S.forwardRef(Igt);var kgt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Ogt=[1,2,3,4,5],Agt=S.forwardRef((t,e)=>{const{level:n=1}=t,r=kgt(t,["level"]),i=Ogt.includes(n)?`h${n}`:"h1";return S.createElement(GT,Object.assign({ref:e},r,{component:i}))}),Bg=gre;Bg.Text=Ngt;Bg.Link=Cgt;Bg.Title=Agt;Bg.Paragraph=Egt;const rk=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=t.type||"",a=i.replace(/\/.*$/,"");return n.some(function(o){var s=o.trim();if(/^\*(\/\*)?$/.test(o))return!0;if(s.charAt(0)==="."){var l=r.toLowerCase(),c=s.toLowerCase(),u=[c];return(c===".jpg"||c===".jpeg")&&(u=[".jpg",".jpeg"]),u.some(function(d){return l.endsWith(d)})}return/\/\*$/.test(s)?a===s.replace(/\/.*$/,""):i===s?!0:/^\w+$/.test(s)?(Wi(!1,"Upload takes an invalidate 'accept' type '".concat(s,"'.Skip for check.")),!0):!1})}return!0};function _gt(t,e){var n="cannot ".concat(t.method," ").concat(t.action," ").concat(e.status,"'"),r=new Error(n);return r.status=e.status,r.method=t.method,r.url=t.action,r}function bU(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}function Pgt(t){var e=new XMLHttpRequest;t.onProgress&&e.upload&&(e.upload.onprogress=function(a){a.total>0&&(a.percent=a.loaded/a.total*100),t.onProgress(a)});var n=new FormData;t.data&&Object.keys(t.data).forEach(function(i){var a=t.data[i];if(Array.isArray(a)){a.forEach(function(o){n.append("".concat(i,"[]"),o)});return}n.append(i,a)}),t.file instanceof Blob?n.append(t.filename,t.file,t.file.name):n.append(t.filename,t.file),e.onerror=function(a){t.onError(a)},e.onload=function(){return e.status<200||e.status>=300?t.onError(_gt(t,e),bU(e)):t.onSuccess(bU(e),e)},e.open(t.method,t.action,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var r=t.headers||{};return r["X-Requested-With"]!==null&&e.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach(function(i){r[i]!==null&&e.setRequestHeader(i,r[i])}),e.send(n),{abort:function(){e.abort()}}}var Rgt=function(){var t=ro(vn().mark(function e(n,r){var i,a,o,s,l,c,u,d;return vn().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:c=function(){return c=ro(vn().mark(function g(m){return vn().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",new Promise(function(b){m.file(function(w){r(w)?(m.fullPath&&!w.webkitRelativePath&&(Object.defineProperties(w,{webkitRelativePath:{writable:!0}}),w.webkitRelativePath=m.fullPath.replace(/^\//,""),Object.defineProperties(w,{webkitRelativePath:{writable:!1}})),b(w)):b(null)})}));case 1:case"end":return y.stop()}},g)})),c.apply(this,arguments)},l=function(g){return c.apply(this,arguments)},s=function(){return s=ro(vn().mark(function g(m){var v,y,b,w,x;return vn().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:v=m.createReader(),y=[];case 2:return C.next=5,new Promise(function(E){v.readEntries(E,function(){return E([])})});case 5:if(b=C.sent,w=b.length,w){C.next=9;break}return C.abrupt("break",12);case 9:for(x=0;x<w;x++)y.push(b[x]);C.next=2;break;case 12:return C.abrupt("return",y);case 13:case"end":return C.stop()}},g)})),s.apply(this,arguments)},o=function(g){return s.apply(this,arguments)},i=[],a=[],n.forEach(function(p){return a.push(p.webkitGetAsEntry())}),u=function(){var p=ro(vn().mark(function g(m,v){var y,b;return vn().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(m){x.next=2;break}return x.abrupt("return");case 2:if(m.path=v||"",!m.isFile){x.next=10;break}return x.next=6,l(m);case 6:y=x.sent,y&&i.push(y),x.next=15;break;case 10:if(!m.isDirectory){x.next=15;break}return x.next=13,o(m);case 13:b=x.sent,a.push.apply(a,Be(b));case 15:case"end":return x.stop()}},g)}));return function(m,v){return p.apply(this,arguments)}}(),d=0;case 9:if(!(d<a.length)){h.next=15;break}return h.next=12,u(a[d]);case 12:d++,h.next=9;break;case 15:return h.abrupt("return",i);case 16:case"end":return h.stop()}},e)}));return function(n,r){return t.apply(this,arguments)}}(),Dgt=+new Date,Fgt=0;function ik(){return"rc-upload-".concat(Dgt,"-").concat(++Fgt)}var Mgt=["component","prefixCls","className","classNames","disabled","id","name","style","styles","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave","hasControlInside"],Lgt=function(t){Ls(n,t);var e=js(n);function n(){var r;gr(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),Y(ht(r),"state",{uid:ik()}),Y(ht(r),"reqs",{}),Y(ht(r),"fileInput",void 0),Y(ht(r),"_isMounted",void 0),Y(ht(r),"onChange",function(s){var l=r.props,c=l.accept,u=l.directory,d=s.target.files,f=Be(d).filter(function(h){return!u||rk(h,c)});r.uploadFiles(f),r.reset()}),Y(ht(r),"onClick",function(s){var l=r.fileInput;if(l){var c=s.target,u=r.props.onClick;if(c&&c.tagName==="BUTTON"){var d=l.parentNode;d.focus(),c.blur()}l.click(),u&&u(s)}}),Y(ht(r),"onKeyDown",function(s){s.key==="Enter"&&r.onClick(s)}),Y(ht(r),"onFileDropOrPaste",function(){var s=ro(vn().mark(function l(c){var u,d,f,h,p,g,m,v,y;return vn().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(c.preventDefault(),c.type!=="dragover"){w.next=3;break}return w.abrupt("return");case 3:if(u=r.props,d=u.multiple,f=u.accept,h=u.directory,p=[],g=[],c.type==="drop"?(m=c.dataTransfer,p=Be(m.items||[]),g=Be(m.files||[])):c.type==="paste"&&(v=c.clipboardData,p=Be(v.items||[]),g=Be(v.files||[])),!h){w.next=14;break}return w.next=10,Rgt(Array.prototype.slice.call(p),function(x){return rk(x,r.props.accept)});case 10:g=w.sent,r.uploadFiles(g),w.next=17;break;case 14:y=Be(g).filter(function(x){return rk(x,f)}),d===!1&&(y=g.slice(0,1)),r.uploadFiles(y);case 17:case"end":return w.stop()}},l)}));return function(l){return s.apply(this,arguments)}}()),Y(ht(r),"onPrePaste",function(s){var l=r.props.pastable;l&&r.onFileDropOrPaste(s)}),Y(ht(r),"uploadFiles",function(s){var l=Be(s),c=l.map(function(u){return u.uid=ik(),r.processFile(u,l)});Promise.all(c).then(function(u){var d=r.props.onBatchStart;d==null||d(u.map(function(f){var h=f.origin,p=f.parsedFile;return{file:h,parsedFile:p}})),u.filter(function(f){return f.parsedFile!==null}).forEach(function(f){r.post(f)})})}),Y(ht(r),"processFile",function(){var s=ro(vn().mark(function l(c,u){var d,f,h,p,g,m,v,y,b;return vn().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(d=r.props.beforeUpload,f=c,!d){x.next=14;break}return x.prev=3,x.next=6,d(c,u);case 6:f=x.sent,x.next=12;break;case 9:x.prev=9,x.t0=x.catch(3),f=!1;case 12:if(f!==!1){x.next=14;break}return x.abrupt("return",{origin:c,parsedFile:null,action:null,data:null});case 14:if(h=r.props.action,typeof h!="function"){x.next=21;break}return x.next=18,h(c);case 18:p=x.sent,x.next=22;break;case 21:p=h;case 22:if(g=r.props.data,typeof g!="function"){x.next=29;break}return x.next=26,g(c);case 26:m=x.sent,x.next=30;break;case 29:m=g;case 30:return v=(at(f)==="object"||typeof f=="string")&&f?f:c,v instanceof File?y=v:y=new File([v],c.name,{type:c.type}),b=y,b.uid=c.uid,x.abrupt("return",{origin:c,data:m,parsedFile:b,action:p});case 35:case"end":return x.stop()}},l,null,[[3,9]])}));return function(l,c){return s.apply(this,arguments)}}()),Y(ht(r),"saveFileInput",function(s){r.fileInput=s}),r}return vr(n,[{key:"componentDidMount",value:function(){this._isMounted=!0;var i=this.props.pastable;i&&document.addEventListener("paste",this.onPrePaste)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort(),document.removeEventListener("paste",this.onPrePaste)}},{key:"componentDidUpdate",value:function(i){var a=this.props.pastable;a&&!i.pastable?document.addEventListener("paste",this.onPrePaste):!a&&i.pastable&&document.removeEventListener("paste",this.onPrePaste)}},{key:"post",value:function(i){var a=this,o=i.data,s=i.origin,l=i.action,c=i.parsedFile;if(this._isMounted){var u=this.props,d=u.onStart,f=u.customRequest,h=u.name,p=u.headers,g=u.withCredentials,m=u.method,v=s.uid,y=f||Pgt,b={action:l,filename:h,data:o,file:c,headers:p,withCredentials:g,method:m||"post",onProgress:function(x){var $=a.props.onProgress;$==null||$(x,c)},onSuccess:function(x,$){var C=a.props.onSuccess;C==null||C(x,c,$),delete a.reqs[v]},onError:function(x,$){var C=a.props.onError;C==null||C(x,$,c),delete a.reqs[v]}};d(s),this.reqs[v]=y(b)}}},{key:"reset",value:function(){this.setState({uid:ik()})}},{key:"abort",value:function(i){var a=this.reqs;if(i){var o=i.uid?i.uid:i;a[o]&&a[o].abort&&a[o].abort(),delete a[o]}else Object.keys(a).forEach(function(s){a[s]&&a[s].abort&&a[s].abort(),delete a[s]})}},{key:"render",value:function(){var i=this.props,a=i.component,o=i.prefixCls,s=i.className,l=i.classNames,c=l===void 0?{}:l,u=i.disabled,d=i.id,f=i.name,h=i.style,p=i.styles,g=p===void 0?{}:p,m=i.multiple,v=i.accept,y=i.capture,b=i.children,w=i.directory,x=i.openFileDialogOnClick,$=i.onMouseEnter,C=i.onMouseLeave,E=i.hasControlInside,I=Ot(i,Mgt),T=ve(Y(Y(Y({},o,!0),"".concat(o,"-disabled"),u),s,s)),N=w?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},k=u?{}:{onClick:x?this.onClick:function(){},onKeyDown:x?this.onKeyDown:function(){},onMouseEnter:$,onMouseLeave:C,onDrop:this.onFileDropOrPaste,onDragOver:this.onFileDropOrPaste,tabIndex:E?void 0:"0"};return B.createElement(a,Qe({},k,{className:T,role:E?void 0:"button",style:h}),B.createElement("input",Qe({},Lst(I,{aria:!0,data:!0}),{id:d,name:f,disabled:u,type:"file",ref:this.saveFileInput,onClick:function(_){return _.stopPropagation()},key:this.state.uid,style:ie({display:"none"},g.input),className:c.input,accept:v},N,{multiple:m,onChange:this.onChange},y!=null?{capture:y}:{})),b)}}]),n}(S.Component);function ak(){}var EP=function(t){Ls(n,t);var e=js(n);function n(){var r;gr(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),Y(ht(r),"uploader",void 0),Y(ht(r),"saveUploader",function(s){r.uploader=s}),r}return vr(n,[{key:"abort",value:function(i){this.uploader.abort(i)}},{key:"render",value:function(){return B.createElement(Lgt,Qe({},this.props,{ref:this.saveUploader}))}}]),n}(S.Component);Y(EP,"defaultProps",{component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:ak,onError:ak,onSuccess:ak,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0,hasControlInside:!1});const jgt=t=>{const{componentCls:e,iconCls:n}=t;return{[`${e}-wrapper`]:{[`${e}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:t.colorFillAlter,border:`${Ce(t.lineWidth)} dashed ${t.colorBorder}`,borderRadius:t.borderRadiusLG,cursor:"pointer",transition:`border-color ${t.motionDurationSlow}`,[e]:{padding:t.padding},[`${e}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none",borderRadius:t.borderRadiusLG,"&:focus-visible":{outline:`${Ce(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`}},[`${e}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`
          &:not(${e}-disabled):hover,
          &-hover:not(${e}-disabled)
        `]:{borderColor:t.colorPrimaryHover},[`p${e}-drag-icon`]:{marginBottom:t.margin,[n]:{color:t.colorPrimary,fontSize:t.uploadThumbnailSize}},[`p${e}-text`]:{margin:`0 0 ${Ce(t.marginXXS)}`,color:t.colorTextHeading,fontSize:t.fontSizeLG},[`p${e}-hint`]:{color:t.colorTextDescription,fontSize:t.fontSize},[`&${e}-disabled`]:{[`p${e}-drag-icon ${n},
            p${e}-text,
            p${e}-hint
          `]:{color:t.colorTextDisabled}}}}}},zgt=t=>{const{componentCls:e,iconCls:n,fontSize:r,lineHeight:i,calc:a}=t,o=`${e}-list-item`,s=`${o}-actions`,l=`${o}-action`;return{[`${e}-wrapper`]:{[`${e}-list`]:Object.assign(Object.assign({},Gf()),{lineHeight:t.lineHeight,[o]:{position:"relative",height:a(t.lineHeight).mul(r).equal(),marginTop:t.marginXS,fontSize:r,display:"flex",alignItems:"center",transition:`background-color ${t.motionDurationSlow}`,borderRadius:t.borderRadiusSM,"&:hover":{backgroundColor:t.controlItemBgHover},[`${o}-name`]:Object.assign(Object.assign({},Hx),{padding:`0 ${Ce(t.paddingXS)}`,lineHeight:i,flex:"auto",transition:`all ${t.motionDurationSlow}`}),[s]:{whiteSpace:"nowrap",[l]:{opacity:0},[n]:{color:t.actionsColor,transition:`all ${t.motionDurationSlow}`},[`
              ${l}:focus-visible,
              &.picture ${l}
            `]:{opacity:1}},[`${e}-icon ${n}`]:{color:t.colorIcon,fontSize:r},[`${o}-progress`]:{position:"absolute",bottom:t.calc(t.uploadProgressOffset).mul(-1).equal(),width:"100%",paddingInlineStart:a(r).add(t.paddingXS).equal(),fontSize:r,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${o}:hover ${l}`]:{opacity:1},[`${o}-error`]:{color:t.colorError,[`${o}-name, ${e}-icon ${n}`]:{color:t.colorError},[s]:{[`${n}, ${n}:hover`]:{color:t.colorError},[l]:{opacity:1}}},[`${e}-list-item-container`]:{transition:`opacity ${t.motionDurationSlow}, height ${t.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},Bgt=t=>{const{componentCls:e}=t,n=new hn("uploadAnimateInlineIn",{from:{width:0,height:0,padding:0,opacity:0,margin:t.calc(t.marginXS).div(-2).equal()}}),r=new hn("uploadAnimateInlineOut",{to:{width:0,height:0,padding:0,opacity:0,margin:t.calc(t.marginXS).div(-2).equal()}}),i=`${e}-animate-inline`;return[{[`${e}-wrapper`]:{[`${i}-appear, ${i}-enter, ${i}-leave`]:{animationDuration:t.motionDurationSlow,animationTimingFunction:t.motionEaseInOutCirc,animationFillMode:"forwards"},[`${i}-appear, ${i}-enter`]:{animationName:n},[`${i}-leave`]:{animationName:r}}},{[`${e}-wrapper`]:Flt(t)},n,r]},Vgt=t=>{const{componentCls:e,iconCls:n,uploadThumbnailSize:r,uploadProgressOffset:i,calc:a}=t,o=`${e}-list`,s=`${o}-item`;return{[`${e}-wrapper`]:{[`
        ${o}${o}-picture,
        ${o}${o}-picture-card,
        ${o}${o}-picture-circle
      `]:{[s]:{position:"relative",height:a(r).add(a(t.lineWidth).mul(2)).add(a(t.paddingXS).mul(2)).equal(),padding:t.paddingXS,border:`${Ce(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadiusLG,"&:hover":{background:"transparent"},[`${s}-thumbnail`]:Object.assign(Object.assign({},Hx),{width:r,height:r,lineHeight:Ce(a(r).add(t.paddingSM).equal()),textAlign:"center",flex:"none",[n]:{fontSize:t.fontSizeHeading2,color:t.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${s}-progress`]:{bottom:i,width:`calc(100% - ${Ce(a(t.paddingSM).mul(2).equal())})`,marginTop:0,paddingInlineStart:a(r).add(t.paddingXS).equal()}},[`${s}-error`]:{borderColor:t.colorError,[`${s}-thumbnail ${n}`]:{[`svg path[fill='${rm[0]}']`]:{fill:t.colorErrorBg},[`svg path[fill='${rm.primary}']`]:{fill:t.colorError}}},[`${s}-uploading`]:{borderStyle:"dashed",[`${s}-name`]:{marginBottom:i}}},[`${o}${o}-picture-circle ${s}`]:{[`&, &::before, ${s}-thumbnail`]:{borderRadius:"50%"}}}}},Wgt=t=>{const{componentCls:e,iconCls:n,fontSizeLG:r,colorTextLightSolid:i,calc:a}=t,o=`${e}-list`,s=`${o}-item`,l=t.uploadPicCardSize;return{[`
      ${e}-wrapper${e}-picture-card-wrapper,
      ${e}-wrapper${e}-picture-circle-wrapper
    `]:Object.assign(Object.assign({},Gf()),{display:"block",[`${e}${e}-select`]:{width:l,height:l,textAlign:"center",verticalAlign:"top",backgroundColor:t.colorFillAlter,border:`${Ce(t.lineWidth)} dashed ${t.colorBorder}`,borderRadius:t.borderRadiusLG,cursor:"pointer",transition:`border-color ${t.motionDurationSlow}`,[`> ${e}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${e}-disabled):hover`]:{borderColor:t.colorPrimary}},[`${o}${o}-picture-card, ${o}${o}-picture-circle`]:{display:"flex",flexWrap:"wrap","@supports not (gap: 1px)":{"& > *":{marginBlockEnd:t.marginXS,marginInlineEnd:t.marginXS}},"@supports (gap: 1px)":{gap:t.marginXS},[`${o}-item-container`]:{display:"inline-block",width:l,height:l,verticalAlign:"top"},"&::after":{display:"none"},"&::before":{display:"none"},[s]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${Ce(a(t.paddingXS).mul(2).equal())})`,height:`calc(100% - ${Ce(a(t.paddingXS).mul(2).equal())})`,backgroundColor:t.colorBgMask,opacity:0,transition:`all ${t.motionDurationSlow}`,content:'" "'}},[`${s}:hover`]:{[`&::before, ${s}-actions`]:{opacity:1}},[`${s}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${t.motionDurationSlow}`,[`
            ${n}-eye,
            ${n}-download,
            ${n}-delete
          `]:{zIndex:10,width:r,margin:`0 ${Ce(t.marginXXS)}`,fontSize:r,cursor:"pointer",transition:`all ${t.motionDurationSlow}`,color:i,"&:hover":{color:i},svg:{verticalAlign:"baseline"}}},[`${s}-thumbnail, ${s}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${s}-name`]:{display:"none",textAlign:"center"},[`${s}-file + ${s}-name`]:{position:"absolute",bottom:t.margin,display:"block",width:`calc(100% - ${Ce(a(t.paddingXS).mul(2).equal())})`},[`${s}-uploading`]:{[`&${s}`]:{backgroundColor:t.colorFillAlter},[`&::before, ${n}-eye, ${n}-download, ${n}-delete`]:{display:"none"}},[`${s}-progress`]:{bottom:t.marginXL,width:`calc(100% - ${Ce(a(t.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}}),[`${e}-wrapper${e}-picture-circle-wrapper`]:{[`${e}${e}-select`]:{borderRadius:"50%"}}}},Ugt=t=>{const{componentCls:e}=t;return{[`${e}-rtl`]:{direction:"rtl"}}},Hgt=t=>{const{componentCls:e,colorTextDisabled:n}=t;return{[`${e}-wrapper`]:Object.assign(Object.assign({},wc(t)),{[e]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${e}-select`]:{display:"inline-block"},[`${e}-hidden`]:{display:"none"},[`${e}-disabled`]:{color:n,cursor:"not-allowed"}})}},Ggt=t=>({actionsColor:t.colorIcon}),qgt=vo("Upload",t=>{const{fontSizeHeading3:e,fontHeight:n,lineWidth:r,controlHeightLG:i,calc:a}=t,o=_r(t,{uploadThumbnailSize:a(e).mul(2).equal(),uploadProgressOffset:a(a(n).div(2)).add(r).equal(),uploadPicCardSize:a(i).mul(2.55).equal()});return[Hgt(o),jgt(o),Vgt(o),Wgt(o),zgt(o),Bgt(o),Ugt(o),Alt(o)]},Ggt);function sw(t){return Object.assign(Object.assign({},t),{lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.name,size:t.size,type:t.type,uid:t.uid,percent:0,originFileObj:t})}function lw(t,e){const n=Be(e),r=n.findIndex(({uid:i})=>i===t.uid);return r===-1?n.push(t):n[r]=t,n}function ok(t,e){const n=t.uid!==void 0?"uid":"name";return e.filter(r=>r[n]===t[n])[0]}function Kgt(t,e){const n=t.uid!==void 0?"uid":"name",r=e.filter(i=>i[n]!==t[n]);return r.length===e.length?null:r}const Xgt=(t="")=>{const e=t.split("/"),r=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(r)||[""])[0]},vre=t=>t.indexOf("image/")===0,Ygt=t=>{if(t.type&&!t.thumbUrl)return vre(t.type);const e=t.thumbUrl||t.url||"",n=Xgt(e);return/^data:image\//.test(e)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(n)?!0:!(/^data:/.test(e)||n)},_c=200;function Zgt(t){return new Promise(e=>{if(!t.type||!vre(t.type)){e("");return}const n=document.createElement("canvas");n.width=_c,n.height=_c,n.style.cssText=`position: fixed; left: 0; top: 0; width: ${_c}px; height: ${_c}px; z-index: 9999; display: none;`,document.body.appendChild(n);const r=n.getContext("2d"),i=new Image;if(i.onload=()=>{const{width:a,height:o}=i;let s=_c,l=_c,c=0,u=0;a>o?(l=o*(_c/a),u=-(l-s)/2):(s=a*(_c/o),c=-(s-l)/2),r.drawImage(i,c,u,s,l);const d=n.toDataURL();document.body.removeChild(n),window.URL.revokeObjectURL(i.src),e(d)},i.crossOrigin="anonymous",t.type.startsWith("image/svg+xml")){const a=new FileReader;a.onload=()=>{a.result&&typeof a.result=="string"&&(i.src=a.result)},a.readAsDataURL(t)}else if(t.type.startsWith("image/gif")){const a=new FileReader;a.onload=()=>{a.result&&e(a.result)},a.readAsDataURL(t)}else i.src=window.URL.createObjectURL(t)})}const Qgt=S.forwardRef(({prefixCls:t,className:e,style:n,locale:r,listType:i,file:a,items:o,progress:s,iconRender:l,actionIconRender:c,itemRender:u,isImgUrl:d,showPreviewIcon:f,showRemoveIcon:h,showDownloadIcon:p,previewIcon:g,removeIcon:m,downloadIcon:v,extra:y,onPreview:b,onDownload:w,onClose:x},$)=>{var C,E;const{status:I}=a,[T,N]=S.useState(I);S.useEffect(()=>{I!=="removed"&&N(I)},[I]);const[k,O]=S.useState(!1);S.useEffect(()=>{const Q=setTimeout(()=>{O(!0)},300);return()=>{clearTimeout(Q)}},[]);const _=l(a);let P=S.createElement("div",{className:`${t}-icon`},_);if(i==="picture"||i==="picture-card"||i==="picture-circle")if(T==="uploading"||!a.thumbUrl&&!a.url){const Q=ve(`${t}-list-item-thumbnail`,{[`${t}-list-item-file`]:T!=="uploading"});P=S.createElement("div",{className:Q},_)}else{const Q=d!=null&&d(a)?S.createElement("img",{src:a.thumbUrl||a.url,alt:a.name,className:`${t}-list-item-image`,crossOrigin:a.crossOrigin}):_,ye=ve(`${t}-list-item-thumbnail`,{[`${t}-list-item-file`]:d&&!d(a)});P=S.createElement("a",{className:ye,onClick:le=>b(a,le),href:a.url||a.thumbUrl,target:"_blank",rel:"noopener noreferrer"},Q)}const D=ve(`${t}-list-item`,`${t}-list-item-${T}`),L=typeof a.linkProps=="string"?JSON.parse(a.linkProps):a.linkProps,R=(typeof h=="function"?h(a):h)?c((typeof m=="function"?m(a):m)||S.createElement(Imt,null),()=>x(a),t,r.removeFile,!0):null,F=(typeof p=="function"?p(a):p)&&T==="done"?c((typeof v=="function"?v(a):v)||S.createElement(Omt,null),()=>w(a),t,r.downloadFile):null,V=i!=="picture-card"&&i!=="picture-circle"&&S.createElement("span",{key:"download-delete",className:ve(`${t}-list-item-actions`,{picture:i==="picture"})},F,R),H=typeof y=="function"?y(a):y,U=H&&S.createElement("span",{className:`${t}-list-item-extra`},H),W=ve(`${t}-list-item-name`),G=a.url?S.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:W,title:a.name},L,{href:a.url,onClick:Q=>b(a,Q)}),a.name,U):S.createElement("span",{key:"view",className:W,onClick:Q=>b(a,Q),title:a.name},a.name,U),q=(typeof f=="function"?f(a):f)&&(a.url||a.thumbUrl)?S.createElement("a",{href:a.url||a.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:Q=>b(a,Q),title:r.previewFile},typeof g=="function"?g(a):g||S.createElement($pt,null)):null,X=(i==="picture-card"||i==="picture-circle")&&T!=="uploading"&&S.createElement("span",{className:`${t}-list-item-actions`},q,T==="done"&&F,R),{getPrefixCls:re}=S.useContext(pn),ce=re(),ee=S.createElement("div",{className:D},P,G,V,X,k&&S.createElement(Sc,{motionName:`${ce}-fade`,visible:T==="uploading",motionDeadline:2e3},({className:Q})=>{const ye="percent"in a?S.createElement(wmt,Object.assign({},s,{type:"line",percent:a.percent,"aria-label":a["aria-label"],"aria-labelledby":a["aria-labelledby"]})):null;return S.createElement("div",{className:ve(`${t}-list-item-progress`,Q)},ye)})),se=a.response&&typeof a.response=="string"?a.response:((C=a.error)===null||C===void 0?void 0:C.statusText)||((E=a.error)===null||E===void 0?void 0:E.message)||r.uploadError,ue=T==="error"?S.createElement(zg,{title:se,getPopupContainer:Q=>Q.parentNode},ee):ee;return S.createElement("div",{className:ve(`${t}-list-item-container`,e),style:n,ref:$},u?u(ue,a,o,{download:w.bind(null,a),preview:b.bind(null,a),remove:x.bind(null,a)}):ue)}),Jgt=(t,e)=>{const{listType:n="text",previewFile:r=Zgt,onPreview:i,onDownload:a,onRemove:o,locale:s,iconRender:l,isImageUrl:c=Ygt,prefixCls:u,items:d=[],showPreviewIcon:f=!0,showRemoveIcon:h=!0,showDownloadIcon:p=!1,removeIcon:g,previewIcon:m,downloadIcon:v,extra:y,progress:b={size:[-1,2],showInfo:!1},appendAction:w,appendActionVisible:x=!0,itemRender:$,disabled:C}=t,E=Ddt(),[I,T]=S.useState(!1),N=["picture-card","picture-circle"].includes(n);S.useEffect(()=>{n.startsWith("picture")&&(d||[]).forEach(W=>{!(W.originFileObj instanceof File||W.originFileObj instanceof Blob)||W.thumbUrl!==void 0||(W.thumbUrl="",r==null||r(W.originFileObj).then(G=>{W.thumbUrl=G||"",E()}))})},[n,d,r]),S.useEffect(()=>{T(!0)},[]);const k=(W,G)=>{if(i)return G==null||G.preventDefault(),i(W)},O=W=>{typeof a=="function"?a(W):W.url&&window.open(W.url)},_=W=>{o==null||o(W)},P=W=>{if(l)return l(W,n);const G=W.status==="uploading";if(n.startsWith("picture")){const q=n==="picture"?S.createElement(q$,null):s.uploading,X=c!=null&&c(W)?S.createElement(Hmt,null):S.createElement(jmt,null);return G?q:X}return G?S.createElement(q$,null):S.createElement(Vmt,null)},D=(W,G,q,X,re)=>{const ce={type:"text",size:"small",title:X,onClick:ee=>{var se,ue;G(),S.isValidElement(W)&&((ue=(se=W.props).onClick)===null||ue===void 0||ue.call(se,ee))},className:`${q}-list-item-action`,disabled:re?C:!1};return S.isValidElement(W)?S.createElement(z0,Object.assign({},ce,{icon:xf(W,Object.assign(Object.assign({},W.props),{onClick:()=>{}}))})):S.createElement(z0,Object.assign({},ce),S.createElement("span",null,W))};S.useImperativeHandle(e,()=>({handlePreview:k,handleDownload:O}));const{getPrefixCls:L}=S.useContext(pn),R=L("upload",u),F=L(),V=ve(`${R}-list`,`${R}-list-${n}`),H=S.useMemo(()=>Jo(ilt(F),["onAppearEnd","onEnterEnd","onLeaveEnd"]),[F]),U=Object.assign(Object.assign({},N?{}:H),{motionDeadline:2e3,motionName:`${R}-${N?"animate-inline":"animate"}`,keys:Be(d.map(W=>({key:W.uid,file:W}))),motionAppear:I});return S.createElement("div",{className:V},S.createElement(sst,Object.assign({},U,{component:!1}),({key:W,file:G,className:q,style:X})=>S.createElement(Qgt,{key:W,locale:s,prefixCls:R,className:q,style:X,file:G,items:d,progress:b,listType:n,isImgUrl:c,showPreviewIcon:f,showRemoveIcon:h,showDownloadIcon:p,removeIcon:g,previewIcon:m,downloadIcon:v,extra:y,iconRender:P,actionIconRender:D,itemRender:$,onPreview:k,onDownload:O,onClose:_})),w&&S.createElement(Sc,Object.assign({},U,{visible:x,forceRender:!0}),({className:W,style:G})=>xf(w,q=>({className:ve(q.className,W),style:Object.assign(Object.assign(Object.assign({},G),{pointerEvents:W?"none":void 0}),q.style)}))))},evt=S.forwardRef(Jgt);var tvt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,[])).next())})};const zv=`__LIST_IGNORE_${Date.now()}__`,nvt=(t,e)=>{const{fileList:n,defaultFileList:r,onRemove:i,showUploadList:a=!0,listType:o="text",onPreview:s,onDownload:l,onChange:c,onDrop:u,previewFile:d,disabled:f,locale:h,iconRender:p,isImageUrl:g,progress:m,prefixCls:v,className:y,type:b="select",children:w,style:x,itemRender:$,maxCount:C,data:E={},multiple:I=!1,hasControlInside:T=!0,action:N="",accept:k="",supportServerRender:O=!0,rootClassName:_}=t,P=S.useContext(im),D=f??P,[L,R]=Vo(r||[],{value:n,postState:Se=>Se??[]}),[F,V]=S.useState("drop"),H=S.useRef(null),U=S.useRef(null);S.useMemo(()=>{const Se=Date.now();(n||[]).forEach((Fe,me)=>{!Fe.uid&&!Object.isFrozen(Fe)&&(Fe.uid=`__AUTO__${Se}_${me}__`)})},[n]);const W=(Se,Fe,me)=>{let Ie=Be(Fe),Ye=!1;C===1?Ie=Ie.slice(-1):C&&(Ye=Ie.length>C,Ie=Ie.slice(0,C)),hu.flushSync(()=>{R(Ie)});const Lt={file:Se,fileList:Ie};me&&(Lt.event=me),(!Ye||Se.status==="removed"||Ie.some(Hn=>Hn.uid===Se.uid))&&hu.flushSync(()=>{c==null||c(Lt)})},G=(Se,Fe)=>tvt(void 0,void 0,void 0,function*(){const{beforeUpload:me,transformFile:Ie}=t;let Ye=Se;if(me){const Lt=yield me(Se,Fe);if(Lt===!1)return!1;if(delete Se[zv],Lt===zv)return Object.defineProperty(Se,zv,{value:!0,configurable:!0}),!1;typeof Lt=="object"&&Lt&&(Ye=Lt)}return Ie&&(Ye=yield Ie(Ye)),Ye}),q=Se=>{const Fe=Se.filter(Ye=>!Ye.file[zv]);if(!Fe.length)return;const me=Fe.map(Ye=>sw(Ye.file));let Ie=Be(L);me.forEach(Ye=>{Ie=lw(Ye,Ie)}),me.forEach((Ye,Lt)=>{let Hn=Ye;if(Fe[Lt].parsedFile)Ye.status="uploading";else{const{originFileObj:Dn}=Ye;let yr;try{yr=new File([Dn],Dn.name,{type:Dn.type})}catch{yr=new Blob([Dn],{type:Dn.type}),yr.name=Dn.name,yr.lastModifiedDate=new Date,yr.lastModified=new Date().getTime()}yr.uid=Ye.uid,Hn=yr}W(Hn,Ie)})},X=(Se,Fe,me)=>{try{typeof Se=="string"&&(Se=JSON.parse(Se))}catch{}if(!ok(Fe,L))return;const Ie=sw(Fe);Ie.status="done",Ie.percent=100,Ie.response=Se,Ie.xhr=me;const Ye=lw(Ie,L);W(Ie,Ye)},re=(Se,Fe)=>{if(!ok(Fe,L))return;const me=sw(Fe);me.status="uploading",me.percent=Se.percent;const Ie=lw(me,L);W(me,Ie,Se)},ce=(Se,Fe,me)=>{if(!ok(me,L))return;const Ie=sw(me);Ie.error=Se,Ie.response=Fe,Ie.status="error";const Ye=lw(Ie,L);W(Ie,Ye)},ee=Se=>{let Fe;Promise.resolve(typeof i=="function"?i(Se):i).then(me=>{var Ie;if(me===!1)return;const Ye=Kgt(Se,L);Ye&&(Fe=Object.assign(Object.assign({},Se),{status:"removed"}),L==null||L.forEach(Lt=>{const Hn=Fe.uid!==void 0?"uid":"name";Lt[Hn]===Fe[Hn]&&!Object.isFrozen(Lt)&&(Lt.status="removed")}),(Ie=H.current)===null||Ie===void 0||Ie.abort(Fe),W(Fe,Ye))})},se=Se=>{V(Se.type),Se.type==="drop"&&(u==null||u(Se))};S.useImperativeHandle(e,()=>({onBatchStart:q,onSuccess:X,onProgress:re,onError:ce,fileList:L,upload:H.current,nativeElement:U.current}));const{getPrefixCls:ue,direction:Q,upload:ye}=S.useContext(pn),le=ue("upload",v),xe=Object.assign(Object.assign({onBatchStart:q,onError:ce,onProgress:re,onSuccess:X},t),{data:E,multiple:I,action:N,accept:k,supportServerRender:O,prefixCls:le,disabled:D,beforeUpload:G,onChange:void 0,hasControlInside:T});delete xe.className,delete xe.style,(!w||D)&&delete xe.id;const be=`${le}-wrapper`,[$e,Ne,Ve]=qgt(le,be),[Pe]=Ste("Upload",yf.Upload),{showRemoveIcon:ke,showPreviewIcon:fe,showDownloadIcon:pe,removeIcon:Me,previewIcon:He,downloadIcon:je,extra:pt}=typeof a=="boolean"?{}:a,ut=typeof ke>"u"?!D:ke,rt=(Se,Fe)=>a?S.createElement(evt,{prefixCls:le,listType:o,items:L,previewFile:d,onPreview:s,onDownload:l,onRemove:ee,showRemoveIcon:ut,showPreviewIcon:fe,showDownloadIcon:pe,removeIcon:Me,previewIcon:He,downloadIcon:je,iconRender:p,extra:pt,locale:Object.assign(Object.assign({},Pe),h),isImageUrl:g,progress:m,appendAction:Se,appendActionVisible:Fe,itemRender:$,disabled:D}):Se,ft=ve(be,y,_,Ne,Ve,ye==null?void 0:ye.className,{[`${le}-rtl`]:Q==="rtl",[`${le}-picture-card-wrapper`]:o==="picture-card",[`${le}-picture-circle-wrapper`]:o==="picture-circle"}),We=Object.assign(Object.assign({},ye==null?void 0:ye.style),x);if(b==="drag"){const Se=ve(Ne,le,`${le}-drag`,{[`${le}-drag-uploading`]:L.some(Fe=>Fe.status==="uploading"),[`${le}-drag-hover`]:F==="dragover",[`${le}-disabled`]:D,[`${le}-rtl`]:Q==="rtl"});return $e(S.createElement("span",{className:ft,ref:U},S.createElement("div",{className:Se,style:We,onDrop:se,onDragOver:se,onDragLeave:se},S.createElement(EP,Object.assign({},xe,{ref:H,className:`${le}-btn`}),S.createElement("div",{className:`${le}-drag-container`},w))),rt()))}const Xe=ve(le,`${le}-select`,{[`${le}-disabled`]:D,[`${le}-hidden`]:!w}),Le=S.createElement("div",{className:Xe},S.createElement(EP,Object.assign({},xe,{ref:H})));return $e(o==="picture-card"||o==="picture-circle"?S.createElement("span",{className:ft,ref:U},rt(Le,!!w)):S.createElement("span",{className:ft,ref:U},Le,rt()))},yre=S.forwardRef(nvt);var rvt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const ivt=S.forwardRef((t,e)=>{var{style:n,height:r,hasControlInside:i=!1}=t,a=rvt(t,["style","height","hasControlInside"]);return S.createElement(yre,Object.assign({ref:e,hasControlInside:i},a,{type:"drag",style:Object.assign(Object.assign({},n),{height:r})}))}),dL=yre;dL.Dragger=ivt;dL.LIST_IGNORE=zv;const bre=S.createContext({}),avt={aliceblue:"9ehhb",antiquewhite:"9sgk7",aqua:"1ekf",aquamarine:"4zsno",azure:"9eiv3",beige:"9lhp8",bisque:"9zg04",black:"0",blanchedalmond:"9zhe5",blue:"73",blueviolet:"5e31e",brown:"6g016",burlywood:"8ouiv",cadetblue:"3qba8",chartreuse:"4zshs",chocolate:"87k0u",coral:"9yvyo",cornflowerblue:"3xael",cornsilk:"9zjz0",crimson:"8l4xo",cyan:"1ekf",darkblue:"3v",darkcyan:"rkb",darkgoldenrod:"776yz",darkgray:"6mbhl",darkgreen:"jr4",darkgrey:"6mbhl",darkkhaki:"7ehkb",darkmagenta:"5f91n",darkolivegreen:"3bzfz",darkorange:"9yygw",darkorchid:"5z6x8",darkred:"5f8xs",darksalmon:"9441m",darkseagreen:"5lwgf",darkslateblue:"2th1n",darkslategray:"1ugcv",darkslategrey:"1ugcv",darkturquoise:"14up",darkviolet:"5rw7n",deeppink:"9yavn",deepskyblue:"11xb",dimgray:"442g9",dimgrey:"442g9",dodgerblue:"16xof",firebrick:"6y7tu",floralwhite:"9zkds",forestgreen:"1cisi",fuchsia:"9y70f",gainsboro:"8m8kc",ghostwhite:"9pq0v",goldenrod:"8j4f4",gold:"9zda8",gray:"50i2o",green:"pa8",greenyellow:"6senj",grey:"50i2o",honeydew:"9eiuo",hotpink:"9yrp0",indianred:"80gnw",indigo:"2xcoy",ivory:"9zldc",khaki:"9edu4",lavenderblush:"9ziet",lavender:"90c8q",lawngreen:"4vk74",lemonchiffon:"9zkct",lightblue:"6s73a",lightcoral:"9dtog",lightcyan:"8s1rz",lightgoldenrodyellow:"9sjiq",lightgray:"89jo3",lightgreen:"5nkwg",lightgrey:"89jo3",lightpink:"9z6wx",lightsalmon:"9z2ii",lightseagreen:"19xgq",lightskyblue:"5arju",lightslategray:"4nwk9",lightslategrey:"4nwk9",lightsteelblue:"6wau6",lightyellow:"9zlcw",lime:"1edc",limegreen:"1zcxe",linen:"9shk6",magenta:"9y70f",maroon:"4zsow",mediumaquamarine:"40eju",mediumblue:"5p",mediumorchid:"79qkz",mediumpurple:"5r3rv",mediumseagreen:"2d9ip",mediumslateblue:"4tcku",mediumspringgreen:"1di2",mediumturquoise:"2uabw",mediumvioletred:"7rn9h",midnightblue:"z980",mintcream:"9ljp6",mistyrose:"9zg0x",moccasin:"9zfzp",navajowhite:"9zest",navy:"3k",oldlace:"9wq92",olive:"50hz4",olivedrab:"472ub",orange:"9z3eo",orangered:"9ykg0",orchid:"8iu3a",palegoldenrod:"9bl4a",palegreen:"5yw0o",paleturquoise:"6v4ku",palevioletred:"8k8lv",papayawhip:"9zi6t",peachpuff:"9ze0p",peru:"80oqn",pink:"9z8wb",plum:"8nba5",powderblue:"6wgdi",purple:"4zssg",rebeccapurple:"3zk49",red:"9y6tc",rosybrown:"7cv4f",royalblue:"2jvtt",saddlebrown:"5fmkz",salmon:"9rvci",sandybrown:"9jn1c",seagreen:"1tdnb",seashell:"9zje6",sienna:"6973h",silver:"7ir40",skyblue:"5arjf",slateblue:"45e4t",slategray:"4e100",slategrey:"4e100",snow:"9zke2",springgreen:"1egv",steelblue:"2r1kk",tan:"87yx8",teal:"pds",thistle:"8ggk8",tomato:"9yqfb",turquoise:"2j4r4",violet:"9b10u",wheat:"9ld4j",white:"9zldr",whitesmoke:"9lhpx",yellow:"9zl6o",yellowgreen:"61fzm"},ti=Math.round;function sk(t,e){const n=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map(i=>parseFloat(i));for(let i=0;i<3;i+=1)r[i]=e(r[i]||0,n[i]||"",i);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const xU=(t,e,n)=>n===0?t:t/100;function wv(t,e){const n=e||255;return t>n?n:t<0?0:t}class zh{constructor(e){za(this,"isValid",!0);za(this,"r",0);za(this,"g",0);za(this,"b",0);za(this,"a",1);za(this,"_h");za(this,"_s");za(this,"_l");za(this,"_v");za(this,"_max");za(this,"_min");za(this,"_brightness");function n(i){return i[0]in e&&i[1]in e&&i[2]in e}if(e)if(typeof e=="string"){let a=function(o){return i.startsWith(o)};var r=a;const i=e.trim();if(/^#?[A-F\d]{3,8}$/i.test(i))this.fromHexString(i);else if(a("rgb"))this.fromRgbString(i);else if(a("hsl"))this.fromHslString(i);else if(a("hsv")||a("hsb"))this.fromHsvString(i);else{const o=avt[i.toLowerCase()];o&&this.fromHexString(parseInt(o,36).toString(16).padStart(6,"0"))}}else if(e instanceof zh)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(n("rgb"))this.r=wv(e.r),this.g=wv(e.g),this.b=wv(e.b),this.a=typeof e.a=="number"?wv(e.a,1):1;else if(n("hsl"))this.fromHsl(e);else if(n("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const n=this.toHsv();return n.h=e,this._c(n)}getLuminance(){function e(a){const o=a/255;return o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)}const n=e(this.r),r=e(this.g),i=e(this.b);return .2126*n+.7152*r+.0722*i}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=ti(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()-e/100;return i<0&&(i=0),this._c({h:n,s:r,l:i,a:this.a})}lighten(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()+e/100;return i>1&&(i=1),this._c({h:n,s:r,l:i,a:this.a})}mix(e,n=50){const r=this._c(e),i=n/100,a=s=>(r[s]-this[s])*i+this[s],o={r:ti(a("r")),g:ti(a("g")),b:ti(a("b")),a:ti(a("a")*100)/100};return this._c(o)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const n=this._c(e),r=this.a+n.a*(1-this.a),i=a=>ti((this[a]*this.a+n[a]*n.a*(1-this.a))/r);return this._c({r:i("r"),g:i("g"),b:i("b"),a:r})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const n=(this.r||0).toString(16);e+=n.length===2?n:"0"+n;const r=(this.g||0).toString(16);e+=r.length===2?r:"0"+r;const i=(this.b||0).toString(16);if(e+=i.length===2?i:"0"+i,typeof this.a=="number"&&this.a>=0&&this.a<1){const a=ti(this.a*255).toString(16);e+=a.length===2?a:"0"+a}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),n=ti(this.getSaturation()*100),r=ti(this.getLightness()*100);return this.a!==1?`hsla(${e},${n}%,${r}%,${this.a})`:`hsl(${e},${n}%,${r}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,n,r){const i=this.clone();return i[e]=wv(n,r),i}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const n=e.replace("#","");function r(i,a){return parseInt(n[i]+n[a||i],16)}n.length<6?(this.r=r(0),this.g=r(1),this.b=r(2),this.a=n[3]?r(3)/255:1):(this.r=r(0,1),this.g=r(2,3),this.b=r(4,5),this.a=n[6]?r(6,7)/255:1)}fromHsl({h:e,s:n,l:r,a:i}){if(this._h=e%360,this._s=n,this._l=r,this.a=typeof i=="number"?i:1,n<=0){const f=ti(r*255);this.r=f,this.g=f,this.b=f}let a=0,o=0,s=0;const l=e/60,c=(1-Math.abs(2*r-1))*n,u=c*(1-Math.abs(l%2-1));l>=0&&l<1?(a=c,o=u):l>=1&&l<2?(a=u,o=c):l>=2&&l<3?(o=c,s=u):l>=3&&l<4?(o=u,s=c):l>=4&&l<5?(a=u,s=c):l>=5&&l<6&&(a=c,s=u);const d=r-c/2;this.r=ti((a+d)*255),this.g=ti((o+d)*255),this.b=ti((s+d)*255)}fromHsv({h:e,s:n,v:r,a:i}){this._h=e%360,this._s=n,this._v=r,this.a=typeof i=="number"?i:1;const a=ti(r*255);if(this.r=a,this.g=a,this.b=a,n<=0)return;const o=e/60,s=Math.floor(o),l=o-s,c=ti(r*(1-n)*255),u=ti(r*(1-n*l)*255),d=ti(r*(1-n*(1-l))*255);switch(s){case 0:this.g=d,this.b=c;break;case 1:this.r=u,this.b=c;break;case 2:this.r=c,this.b=d;break;case 3:this.r=c,this.g=u;break;case 4:this.r=d,this.g=c;break;case 5:default:this.g=c,this.b=u;break}}fromHsvString(e){const n=sk(e,xU);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(e){const n=sk(e,xU);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(e){const n=sk(e,(r,i)=>i.includes("%")?ti(r/100*255):r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}}const cw=2,wU=.16,ovt=.05,svt=.05,lvt=.15,xre=5,wre=4,cvt=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function SU(t,e,n){let r;return Math.round(t.h)>=60&&Math.round(t.h)<=240?r=n?Math.round(t.h)-cw*e:Math.round(t.h)+cw*e:r=n?Math.round(t.h)+cw*e:Math.round(t.h)-cw*e,r<0?r+=360:r>=360&&(r-=360),r}function $U(t,e,n){if(t.h===0&&t.s===0)return t.s;let r;return n?r=t.s-wU*e:e===wre?r=t.s+wU:r=t.s+ovt*e,r>1&&(r=1),n&&e===xre&&r>.1&&(r=.1),r<.06&&(r=.06),Math.round(r*100)/100}function CU(t,e,n){let r;return n?r=t.v+svt*e:r=t.v-lvt*e,r=Math.max(0,Math.min(1,r)),Math.round(r*100)/100}function uvt(t,e={}){const n=[],r=new zh(t),i=r.toHsv();for(let a=xre;a>0;a-=1){const o=new zh({h:SU(i,a,!0),s:$U(i,a,!0),v:CU(i,a,!0)});n.push(o)}n.push(r);for(let a=1;a<=wre;a+=1){const o=new zh({h:SU(i,a),s:$U(i,a),v:CU(i,a)});n.push(o)}return e.theme==="dark"?cvt.map(({index:a,amount:o})=>new zh(e.backgroundColor||"#141414").mix(n[a],o).toHexString()):n.map(a=>a.toHexString())}const TP=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];TP.primary=TP[5];function dvt(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function fvt(t,e){if(!t)return!1;if(t.contains)return t.contains(e);let n=e;for(;n;){if(n===t)return!0;n=n.parentNode}return!1}const EU="data-rc-order",TU="data-rc-priority",hvt="rc-util-key",IP=new Map;function Sre({mark:t}={}){return t?t.startsWith("data-")?t:`data-${t}`:hvt}function fL(t){return t.attachTo?t.attachTo:document.querySelector("head")||document.body}function pvt(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function hL(t){return Array.from((IP.get(t)||t).children).filter(e=>e.tagName==="STYLE")}function $re(t,e={}){if(!dvt())return null;const{csp:n,prepend:r,priority:i=0}=e,a=pvt(r),o=a==="prependQueue",s=document.createElement("style");s.setAttribute(EU,a),o&&i&&s.setAttribute(TU,`${i}`),n!=null&&n.nonce&&(s.nonce=n==null?void 0:n.nonce),s.innerHTML=t;const l=fL(e),{firstChild:c}=l;if(r){if(o){const u=(e.styles||hL(l)).filter(d=>{if(!["prepend","prependQueue"].includes(d.getAttribute(EU)))return!1;const f=Number(d.getAttribute(TU)||0);return i>=f});if(u.length)return l.insertBefore(s,u[u.length-1].nextSibling),s}l.insertBefore(s,c)}else l.appendChild(s);return s}function mvt(t,e={}){let{styles:n}=e;return n||(n=hL(fL(e))),n.find(r=>r.getAttribute(Sre(e))===t)}function gvt(t,e){const n=IP.get(t);if(!n||!fvt(document,n)){const r=$re("",e),{parentNode:i}=r;IP.set(t,i),t.removeChild(r)}}function vvt(t,e,n={}){var l,c,u;const r=fL(n),i=hL(r),a={...n,styles:i};gvt(r,a);const o=mvt(e,a);if(o)return(l=a.csp)!=null&&l.nonce&&o.nonce!==((c=a.csp)==null?void 0:c.nonce)&&(o.nonce=(u=a.csp)==null?void 0:u.nonce),o.innerHTML!==t&&(o.innerHTML=t),o;const s=$re(t,a);return s.setAttribute(Sre(a),e),s}function Cre(t){var e;return(e=t==null?void 0:t.getRootNode)==null?void 0:e.call(t)}function yvt(t){return Cre(t)instanceof ShadowRoot}function bvt(t){return yvt(t)?Cre(t):null}let NP={};const xvt=t=>{};function wvt(t,e){}function Svt(t,e){}function $vt(){NP={}}function Ere(t,e,n){!e&&!NP[n]&&(t(!1,n),NP[n]=!0)}function qT(t,e){Ere(wvt,t,e)}function Cvt(t,e){Ere(Svt,t,e)}qT.preMessage=xvt;qT.resetWarned=$vt;qT.noteOnce=Cvt;function Evt(t){return t.replace(/-(.)/g,(e,n)=>n.toUpperCase())}function Tvt(t,e){qT(t,`[@ant-design/icons] ${e}`)}function IU(t){return typeof t=="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(typeof t.icon=="object"||typeof t.icon=="function")}function NU(t={}){return Object.keys(t).reduce((e,n)=>{const r=t[n];switch(n){case"class":e.className=r,delete e.class;break;default:delete e[n],e[Evt(n)]=r}return e},{})}function kP(t,e,n){return n?B.createElement(t.tag,{key:e,...NU(t.attrs),...n},(t.children||[]).map((r,i)=>kP(r,`${e}-${t.tag}-${i}`))):B.createElement(t.tag,{key:e,...NU(t.attrs)},(t.children||[]).map((r,i)=>kP(r,`${e}-${t.tag}-${i}`)))}function Tre(t){return uvt(t)[0]}function Ire(t){return t?Array.isArray(t)?t:[t]:[]}const Ivt=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Nvt=t=>{const{csp:e,prefixCls:n,layer:r}=S.useContext(bre);let i=Ivt;n&&(i=i.replace(/anticon/g,n)),r&&(i=`@layer ${r} {
${i}
}`),S.useEffect(()=>{const a=t.current,o=bvt(a);vvt(i,"@ant-design-icons",{prepend:!r,csp:e,attachTo:o})},[])},ly={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function kvt({primaryColor:t,secondaryColor:e}){ly.primaryColor=t,ly.secondaryColor=e||Tre(t),ly.calculated=!!e}function Ovt(){return{...ly}}const Vg=t=>{const{icon:e,className:n,onClick:r,style:i,primaryColor:a,secondaryColor:o,...s}=t,l=S.useRef();let c=ly;if(a&&(c={primaryColor:a,secondaryColor:o||Tre(a)}),Nvt(l),Tvt(IU(e),`icon should be icon definiton, but got ${e}`),!IU(e))return null;let u=e;return u&&typeof u.icon=="function"&&(u={...u,icon:u.icon(c.primaryColor,c.secondaryColor)}),kP(u.icon,`svg-${u.name}`,{className:n,onClick:r,style:i,"data-icon":u.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",...s,ref:l})};Vg.displayName="IconReact";Vg.getTwoToneColors=Ovt;Vg.setTwoToneColors=kvt;function Nre(t){const[e,n]=Ire(t);return Vg.setTwoToneColors({primaryColor:e,secondaryColor:n})}function Avt(){const t=Vg.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}function OP(){return OP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OP.apply(this,arguments)}Nre(TP.primary);const KT=S.forwardRef((t,e)=>{const{className:n,icon:r,spin:i,rotate:a,tabIndex:o,onClick:s,twoToneColor:l,...c}=t,{prefixCls:u="anticon",rootClassName:d}=S.useContext(bre),f=ve(d,u,{[`${u}-${r.name}`]:!!r.name,[`${u}-spin`]:!!i||r.name==="loading"},n);let h=o;h===void 0&&s&&(h=-1);const p=a?{msTransform:`rotate(${a}deg)`,transform:`rotate(${a}deg)`}:void 0,[g,m]=Ire(l);return S.createElement("span",OP({role:"img","aria-label":r.name},c,{ref:e,tabIndex:h,onClick:s,className:f}),S.createElement(Vg,{icon:r,primaryColor:g,secondaryColor:m,style:p}))});KT.displayName="AntdIcon";KT.getTwoToneColor=Avt;KT.setTwoToneColor=Nre;function AP(){return AP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AP.apply(this,arguments)}const _vt=(t,e)=>S.createElement(KT,AP({},t,{ref:e,icon:Gmt})),Pvt=S.forwardRef(_vt),{Title:gh,Text:od}=Bg,Rvt=()=>{const[t,e]=S.useState(null),[n,r]=S.useState(!0),[i,a]=S.useState(null);if(S.useEffect(()=>{const s=async()=>{try{const c=await fetch("https://traffic-monitoring-backend.onrender.com/metrics");if(!c.ok)throw new Error("Failed to fetch metrics");const u=await c.json();e(u.metrics),a(null)}catch(c){a(c instanceof Error?c.message:"Failed to fetch metrics")}finally{r(!1)}};s();const l=setInterval(s,3e4);return()=>clearInterval(l)},[]),n)return M.jsx(hre,{size:"large"});if(i)return M.jsx(od,{type:"danger",children:i});if(!t)return null;const o=s=>{const l=Math.floor(s/3600),c=Math.floor(s%3600/60);return`${l}h ${c}m`};return M.jsx(UT,{title:"System Metrics",style:{margin:"20px 0"},children:M.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[M.jsxs("div",{children:[M.jsx(gh,{level:5,children:"Total Requests"}),M.jsx(od,{children:t.total_requests})]}),M.jsxs("div",{children:[M.jsx(gh,{level:5,children:"Successful Analyses"}),M.jsx(od,{children:t.successful_analyses})]}),M.jsxs("div",{children:[M.jsx(gh,{level:5,children:"Failed Analyses"}),M.jsx(od,{children:t.failed_analyses})]}),M.jsxs("div",{children:[M.jsx(gh,{level:5,children:"Average Processing Time"}),M.jsxs(od,{children:[t.average_processing_time.toFixed(2),"s"]})]}),M.jsxs("div",{children:[M.jsx(gh,{level:5,children:"System Uptime"}),M.jsx(od,{children:o(t.uptime)})]}),M.jsxs("div",{children:[M.jsx(gh,{level:5,children:"Status"}),M.jsx(od,{type:t.status==="operational"?"success":"warning",children:t.status})]})]})})},Ws={Vehicles:"#3B82F6",Humans:"#EF4444",Animals:"#F59E0B",vehicleTypes:["#3B82F6","#2563EB","#60A5FA","#14B8A6","#0D9488"]},Dvt=()=>{const[t,e]=S.useState(null),[n,r]=S.useState(null),[i,a]=S.useState(.5),[o,s]=S.useState(.45),[l,c]=S.useState(3),[u,d]=S.useState(!1),[f,h]=S.useState(!1),[p,g]=S.useState(!1),[m,v]=S.useState([]),[y,b]=S.useState({vehicleCount:0,humanCount:0,animalCount:0,congestion:qa.Low,incident:!1,frameNumber:0}),[w,x]=S.useState({averageVehicleCount:0,averageHumanCount:0,averageAnimalCount:0,totalIncidents:0,finalCongestionLevel:qa.Low}),[$,C]=S.useState([]),[E,I]=S.useState([]),[T,N]=S.useState([]),[k,O]=S.useState(0),[_,P]=S.useState(null),[D,L]=S.useState(!0),[R,F]=S.useState(!1),[V,H]=S.useState([]),[U,W]=S.useState(null),[G,q]=S.useState(null),X=S.useRef(null),re=S.useRef(null),ce=S.useRef(null);S.useEffect(()=>{(async()=>{try{L(!0),await cK();const pe=await Vrt.load();P(pe),console.log("COCO-SSD Model loaded successfully")}catch(pe){console.error("Failed to load COCO-SSD model:",pe)}finally{L(!1)}})()},[]);const ee=S.useCallback(()=>{if(v([]),b({vehicleCount:0,humanCount:0,animalCount:0,congestion:qa.Low,incident:!1,frameNumber:0}),x({averageVehicleCount:0,averageHumanCount:0,averageAnimalCount:0,totalIncidents:0,finalCongestionLevel:qa.Low}),C([]),I([]),N([]),O(0),g(!1),h(!1),X.current&&(X.current.currentTime=0,X.current.pause()),re.current){const fe=re.current.getContext("2d");fe==null||fe.clearRect(0,0,re.current.width,re.current.height)}},[]);S.useEffect(()=>{t?(r(t.name),ee(),X.current&&(X.current.src=URL.createObjectURL(t),X.current.onloadedmetadata=()=>{if(X.current&&re.current){re.current.width=X.current.videoWidth,re.current.height=X.current.videoHeight;const fe=re.current.getContext("2d");fe&&fe.drawImage(X.current,0,0,re.current.width,re.current.height)}})):(r(null),X.current&&(X.current.src=""))},[t,ee]);const se=S.useCallback(()=>{if(m.length===0&&!u)return;const fe=m.reduce((We,Xe)=>We+Xe.vehicles.total,0),pe=m.reduce((We,Xe)=>We+Xe.humans.total,0),Me=m.reduce((We,Xe)=>We+Xe.animals.total,0),He=m.length>0?fe/m.length:0,je=m.length>0?pe/m.length:0,pt=m.length>0?Me/m.length:0,ut=m.filter(We=>We.incident).length,rt=m.length>0?m[m.length-1].congestion:qa.Low;x({averageVehicleCount:parseFloat(He.toFixed(2)),averageHumanCount:parseFloat(je.toFixed(2)),averageAnimalCount:parseFloat(pt.toFixed(2)),totalIncidents:ut,finalCongestionLevel:rt});const ft={};m.forEach(We=>Object.entries(We.vehicles.types).forEach(([Xe,Le])=>ft[Xe]=(ft[Xe]||0)+Le)),C(Object.entries(ft).map(([We,Xe])=>({name:We,value:Xe}))),I([{name:"Vehicles",value:fe},{name:"Humans",value:pe},{name:"Animals",value:Me}]),g(!0),d(!1),h(!1)},[m,u]),ue=S.useCallback(fe=>{if(!re.current||!X.current)return;const pe=re.current.getContext("2d");pe&&(pe.drawImage(X.current,0,0,re.current.width,re.current.height),pe.font="bold 10px Inter, sans-serif",fe.forEach(Me=>{let He="#64748B",je="#0A0F1E",pt="",ut="rgba(100, 116, 139, 0.7)";if(Iv.includes(Me.class)&&Me.score>=i)He=Ws.Vehicles,ut=`${Ws.Vehicles}B3`,je="#FFFFFF",pt="V: ";else if(Nv.includes(Me.class)&&Me.score>=i)He=Ws.Humans,ut=`${Ws.Humans}B3`,je="#FFFFFF",pt="H: ";else if(kv.includes(Me.class)&&Me.score>=i)He=Ws.Animals,ut=`${Ws.Animals}B3`,je="#FFFFFF",pt="A: ";else return;const[rt,ft,We,Xe]=Me.bbox;pe.strokeStyle=He,pe.lineWidth=1.5,pe.strokeRect(rt,ft,We,Xe);const Le=`${pt}${Me.class} (${Math.round(Me.score*100)}%)`,Se=pe.measureText(Le),Fe=3,me=12;pe.fillStyle=ut,pe.fillRect(rt,ft-me-Fe,Se.width+Fe*2,me+Fe),pe.fillStyle=je,pe.fillText(Le,rt+Fe,ft-Fe)}))},[i,Nv,kv,Iv]),Q=S.useCallback(async()=>{if(!u||!_||!X.current||X.current.paused||X.current.ended||f){u&&X.current&&X.current.ended&&se(),u&&!f&&X.current&&!X.current.ended&&(ce.current=requestAnimationFrame(Q));return}const fe=X.current.currentTime;if(O(pe=>pe+1),k%l===0){const pe=await _.detect(X.current);ue(pe);const Me=pe.filter(me=>Iv.includes(me.class)&&me.score>=i),He=pe.filter(me=>Nv.includes(me.class)&&me.score>=i),je=pe.filter(me=>kv.includes(me.class)&&me.score>=i),pt=me=>{const Ie={};return me.forEach(Ye=>Ie[Ye.class]=(Ie[Ye.class]||0)+1),{total:me.length,types:Ie}},ut=pt(Me),rt=pt(He),ft=pt(je),We=ut.total,Xe=[...T,We];Xe.length>Ba.INCIDENT_WINDOW_SIZE&&Xe.shift(),N(Xe);let Le=qa.Low;We>Ba.CONGESTION_THRESHOLD_HIGH?Le=qa.High:We>Ba.CONGESTION_THRESHOLD_MEDIUM&&(Le=qa.Medium);let Se=!1;if(Xe.length===Ba.INCIDENT_WINDOW_SIZE){const Ie=Xe.slice(0,-1).reduce((Ye,Lt)=>Ye+Lt,0)/(Ba.INCIDENT_WINDOW_SIZE-1);Math.abs(We-Ie)>=Ba.INCIDENT_DEVIATION_THRESHOLD&&Ba.INCIDENT_WINDOW_SIZE-1>0&&(Se=!0)}const Fe={frame:Math.floor(fe*(X.current.playbackRate||1)*30),timestamp:Date.now(),vehicles:ut,humans:rt,animals:ft,congestion:Le,incident:Se,relativeTime:fe};v(me=>[...me,Fe]),b({vehicleCount:We,humanCount:rt.total,animalCount:ft.total,congestion:Le,incident:Se,frameNumber:Fe.frame})}else if(re.current&&X.current){const pe=re.current.getContext("2d");pe&&pe.drawImage(X.current,0,0,re.current.width,re.current.height)}ce.current=requestAnimationFrame(Q)},[u,_,l,k,i,T,ue,se,f,Nv,kv,Iv]);S.useEffect(()=>(u&&!f&&X.current&&!X.current.ended?ce.current=requestAnimationFrame(Q):(ce.current&&cancelAnimationFrame(ce.current),u&&X.current&&X.current.ended&&se()),()=>{ce.current&&cancelAnimationFrame(ce.current)}),[u,f,Q,se]),S.useCallback(()=>{var fe;if(!t){alert("Awaiting video feed. Please upload.");return}if(D){alert("Cognitive matrix still loading. Please standby.");return}if(!_){alert("AI core offline. Cannot initiate analysis.");return}p?(ee(),setTimeout(()=>{var pe;d(!0),h(!1),(pe=X.current)==null||pe.play().catch(Me=>console.error("Video playback malfunction:",Me))},100)):(d(!0),h(!1),(fe=X.current)==null||fe.play().catch(pe=>console.error("Video playback malfunction:",pe)))},[t,D,_,ee,p]);const ye=()=>{const fe=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(m,null,2))}`,pe=document.createElement("a");pe.href=fe,pe.download=`traffic_analysis_log_${(n==null?void 0:n.split(".")[0].replace(/[^a-z0-9]/gi,"_"))||"data"}.json`,pe.click()},le=()=>{X.current&&t&&(X.current.play(),h(!1))},xe=()=>{var fe;(fe=X.current)==null||fe.pause(),h(!0)},be=()=>{if(X.current&&t)if(ee(),re.current){const fe=re.current.getContext("2d");X.current.onseeked=()=>{fe&&X.current&&X.current.videoWidth>0&&(re.current.width=X.current.videoWidth,re.current.height=X.current.videoHeight,fe.drawImage(X.current,0,0,re.current.width,re.current.height)),X.current.onseeked=null},X.current.currentTime=0}else X.current.currentTime=0};S.useEffect(()=>{const fe=X.current,pe=()=>{u&&se()};return fe==null||fe.addEventListener("ended",pe),()=>fe==null?void 0:fe.removeEventListener("ended",pe)},[u,se]);const $e=({level:fe})=>{let pe="bg-accent-green/20 text-accent-green",Me="border-accent-green/50";return fe===qa.Medium?(pe="bg-accent-orange/20 text-accent-orange",Me="border-accent-orange/50"):fe===qa.High&&(pe="bg-accent-red/20 text-accent-red",Me="border-accent-red/50"),M.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full border ${pe} ${Me} shadow-sm`,children:fe.toUpperCase()})},Ne=({detected:fe})=>{const pe=fe?"bg-accent-red/20 text-accent-red":"bg-accent-green/20 text-accent-green",Me=fe?"border-accent-red/50":"border-accent-green/50",He=fe?JI:r_e,je=fe?"text-accent-red":"text-accent-green";return M.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full border ${pe} ${Me} shadow-sm`,children:[M.jsx(He,{className:`w-3 h-3 mr-1 ${je}`}),fe?"ALERT":"NOMINAL"]})},Ve=({title:fe,value:pe,icon:Me,bgColorClass:He})=>M.jsxs("div",{className:"bg-background-card p-4 rounded-lg shadow-elevation-medium flex items-center space-x-4 border border-border-ui-default",children:[M.jsx("div",{className:`p-3 rounded-lg ${He}`,children:Me}),M.jsxs("div",{children:[M.jsx("p",{className:"text-2xl font-bold text-content-display",children:pe}),M.jsx("p",{className:"text-sm text-content-secondary",children:fe})]})]}),Pe=async fe=>{var Me;const pe=(Me=fe.target.files)==null?void 0:Me[0];if(pe){d(!0),q(null);try{const He=new FormData;He.append("file",pe);const je=await fetch("http://localhost:8000/analyze",{method:"POST",body:He});if(!je.ok)throw new Error("Analysis failed");const pt=await je.json();W(pt)}catch(He){q("Failed to analyze video"),console.error(He)}finally{d(!1)}}},ke=()=>{if(!U)return null;const fe=Object.entries(U.class_counts).map(([pe,Me])=>({name:pe,count:Me}));return M.jsxs("div",{className:"analysis-results",children:[M.jsx("h2",{children:"Analysis Results"}),M.jsxs("div",{className:"stats",children:[M.jsxs("p",{children:["Total Frames: ",U.total_frames]}),M.jsxs("p",{children:["Total Objects: ",U.total_objects]})]}),M.jsx("div",{className:"chart",children:M.jsxs(DD,{width:600,height:300,data:fe,children:[M.jsx(rb,{strokeDasharray:"3 3"}),M.jsx(Ru,{dataKey:"name"}),M.jsx(Du,{}),M.jsx($a,{}),M.jsx(xs,{}),M.jsx(ol,{type:"monotone",dataKey:"count",stroke:"#8884d8"})]})})]})};return M.jsxs("div",{className:"app",children:[M.jsx("header",{className:"app-header",children:M.jsx("h1",{children:"Real-Time Traffic Monitoring"})}),M.jsxs("main",{className:"app-main",children:[M.jsx(Rvt,{}),M.jsx(UT,{title:"Video Upload",style:{marginBottom:"20px"},children:M.jsxs(cre,{direction:"vertical",style:{width:"100%"},children:[M.jsx(dL,{accept:"video/*",beforeUpload:Pe,showUploadList:!1,children:M.jsx(z0,{icon:M.jsx(Pvt,{}),children:"Upload Video"})}),t&&M.jsxs(Bg.Text,{children:["Selected file: ",t.name]})]})}),D&&M.jsxs("div",{className:"mb-4 flex items-center text-accent-orange text-sm p-2.5 bg-background-card border border-accent-orange/50 rounded-md shadow-elevation-low",children:[M.jsx(s_e,{className:"w-4 h-4 mr-2"}),"AI CORE INITIALIZING..."]}),!_&&!D&&M.jsx("div",{className:"mb-4 text-accent-red text-sm p-2.5 bg-background-card border border-accent-red/50 rounded-md shadow-elevation-low",children:"CRITICAL ERROR: AI CORE OFFLINE."}),M.jsxs("section",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-6",children:[M.jsx(Ve,{title:"Vehicles Detected",value:y.vehicleCount,icon:M.jsx(n_e,{className:"w-6 h-6 text-white"}),bgColorClass:"bg-accent-blue"}),M.jsx(Ve,{title:"Pedestrians",value:y.humanCount,icon:M.jsx(N5,{className:"w-6 h-6 text-white"}),bgColorClass:"bg-accent-red"})," ",M.jsx(Ve,{title:"Fauna Count",value:y.animalCount,icon:M.jsx(k5,{className:"w-6 h-6 text-white"}),bgColorClass:"bg-accent-orange"})," ",M.jsx(Ve,{title:"Anomaly Status",value:y.incident?"ALERT":"NOMINAL",icon:M.jsx(JI,{className:"w-6 h-6 text-white"}),bgColorClass:y.incident?"bg-accent-red":"bg-accent-green"})]}),M.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 mb-8",children:[M.jsxs("div",{className:"lg:col-span-3 bg-black/50 p-1 rounded-lg shadow-elevation-high border border-border-ui-default flex flex-col items-center justify-center relative min-h-[300px] aspect-video",children:[M.jsx("video",{ref:X,className:"hidden",playsInline:!0,muted:!0}),M.jsx("canvas",{ref:re,className:"w-full h-full object-contain rounded-md bg-black"}),!t&&M.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center text-content-muted bg-black/70 rounded-md p-4 border-2 border-dashed border-border-ui-default/50",children:[M.jsx(e_e,{className:"w-16 h-16 mb-4 text-border-ui-default"}),M.jsx("p",{className:"text-lg font-medium text-content-secondary",children:"Awaiting Video Feed..."}),M.jsx("p",{className:"text-sm",children:"Supported: .mp4, .avi, .mov, .webm"})]}),t&&!u&&!p&&M.jsx("div",{className:"absolute bottom-16 left-1/2 -translate-x-1/2 text-accent-link bg-black/60 px-3 py-1.5 rounded-md text-xs tracking-wider shadow-md",children:"SYSTEM READY. INITIATE ANALYSIS."}),M.jsxs("div",{className:"w-full p-2 mt-0 flex justify-center space-x-2 bg-black/40 backdrop-blur-sm rounded-b-md absolute bottom-0 left-0 border-t border-border-ui-default/30",children:[M.jsxs("button",{onClick:le,disabled:!t||u&&!f,className:"flex items-center px-3 py-1.5 text-xs bg-accent-green hover:bg-emerald-400 text-white font-semibold rounded-md disabled:bg-gray-600 disabled:text-gray-400 transition-colors shadow-sm hover:shadow-elevation-medium active:translate-y-px",children:[M.jsx(YAe,{className:"w-3.5 h-3.5 mr-1.5"})," PLAY"]}),M.jsxs("button",{onClick:xe,disabled:!t||!u&&!p||f,className:"flex items-center px-3 py-1.5 text-xs bg-accent-orange hover:bg-amber-400 text-background-primary font-semibold rounded-md disabled:bg-gray-600 disabled:text-gray-400 transition-colors shadow-sm hover:shadow-elevation-medium active:translate-y-px",children:[M.jsx(ZAe,{className:"w-3.5 h-3.5 mr-1.5"})," PAUSE"]}),M.jsxs("button",{onClick:be,disabled:!t,className:"flex items-center px-3 py-1.5 text-xs bg-accent-blue hover:bg-blue-400 text-white font-semibold rounded-md disabled:bg-gray-600 disabled:text-gray-400 transition-colors shadow-sm hover:shadow-elevation-medium active:translate-y-px",children:[M.jsx(QAe,{className:"w-3.5 h-3.5 mr-1.5"})," RESET"]})]})]}),M.jsxs("div",{className:"lg:col-span-2 bg-background-card p-5 rounded-lg shadow-elevation-high border border-border-ui-default flex flex-col justify-between",children:[M.jsxs("div",{children:[M.jsxs("div",{className:"flex justify-between items-center mb-4 pb-2 border-b border-border-ui-default",children:[M.jsx("h3",{className:"text-lg font-semibold text-content-display tracking-wider",children:"LIVE STATISTICS"}),M.jsxs("div",{className:"text-xs px-2 py-1 bg-background-panel text-accent-link font-medium rounded-md border border-accent-link/50",children:["F#: ",y.frameNumber]})]}),M.jsxs("div",{className:"space-y-3 text-sm",children:[M.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-background-panel rounded-md border border-border-ui-default/70",children:[M.jsxs("span",{className:"flex items-center text-content-secondary",children:[M.jsx(a_e,{className:"w-4 h-4 mr-2 text-accent-blue"}),"Vehicles:"]}),M.jsx("strong",{className:"text-content-display text-base",children:y.vehicleCount})]}),M.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-background-panel rounded-md border border-border-ui-default/70",children:[M.jsxs("span",{className:"flex items-center text-content-secondary",children:[M.jsx(N5,{className:"w-4 h-4 mr-2 text-accent-red"}),"Pedestrians:"]}),M.jsx("strong",{className:"text-content-display text-base",children:y.humanCount})]}),M.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-background-panel rounded-md border border-border-ui-default/70",children:[M.jsxs("span",{className:"flex items-center text-content-secondary",children:[M.jsx(k5,{className:"w-4 h-4 mr-2 text-accent-orange"}),"Fauna:"]}),M.jsx("strong",{className:"text-content-display text-base",children:y.animalCount})]}),M.jsx("div",{className:"pt-2.5 mt-2.5 border-t border-border-ui-default"}),M.jsxs("div",{className:"flex items-center justify-between",children:[M.jsxs("span",{className:"flex items-center text-content-secondary",children:[M.jsx(i_e,{className:"w-4 h-4 mr-2 text-content-muted"}),"Density:"]}),M.jsx($e,{level:y.congestion})]}),M.jsxs("div",{className:"flex items-center justify-between",children:[M.jsxs("span",{className:"flex items-center text-content-secondary",children:[M.jsx(JI,{className:"w-4 h-4 mr-2 text-content-muted"}),"Anomaly:"]}),M.jsx(Ne,{detected:y.incident})]})]})]}),p&&M.jsxs("div",{className:"mt-4 pt-3 border-t border-border-ui-default",children:[M.jsx("h3",{className:"text-sm font-semibold mb-1.5 text-content-display tracking-wider",children:"ANALYSIS COMPLETE"}),M.jsxs("div",{className:"text-xs space-y-1 text-content-secondary",children:[M.jsxs("p",{children:["Avg Vehicles: ",M.jsx("strong",{className:"text-content-primary",children:w.averageVehicleCount})]}),M.jsxs("p",{children:["Total Anomalies: ",M.jsx("strong",{className:"text-content-primary",children:w.totalIncidents})]}),M.jsxs("p",{children:["Final Density: ",M.jsx($e,{level:w.finalCongestionLevel})]})]})]})]})]}),M.jsxs("section",{className:"mb-8",children:[M.jsx(GAe,{data:m,title:"Detection Overview"})," "]}),p&&M.jsxs("section",{className:"mt-10 pt-6 border-t-2 border-accent-blue/30",children:[M.jsx("h2",{className:"text-2xl lg:text-3xl font-bold mb-6 text-content-display tracking-wider",children:"DETAILED REPORTING"}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[M.jsx(KAe,{data:m,title:"Object Composition"}),M.jsx(XAe,{data:m,title:"Density & Anomaly Events"}),M.jsx(I5,{data:$,title:"Vehicular Distribution",colors:Ws.vehicleTypes}),M.jsx(I5,{data:E,title:"Overall Categorization",colors:{Vehicles:Ws.Vehicles,Humans:Ws.Humans,Animals:Ws.Animals}})]}),M.jsxs("div",{className:"bg-background-card p-5 rounded-lg shadow-elevation-medium border border-border-ui-default overflow-x-auto mb-6",children:[M.jsxs("h3",{className:"text-base font-semibold mb-3 text-content-display tracking-wider",children:["DATA LOG PREVIEW (HEAD/TAIL: ",Ba.LOG_PREVIEW_COUNT,")"]}),m.length>0?M.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-border-ui-default scrollbar-track-background-card",children:M.jsxs("table",{className:"min-w-full text-xs table-fixed",children:[M.jsx("thead",{className:"bg-background-panel",children:M.jsx("tr",{children:["F#","T(s)","Veh","Ped","Fau","Density","Anomaly"].map(fe=>M.jsx("th",{className:"px-3 py-2 text-left font-medium text-content-secondary uppercase tracking-wider",children:fe},fe))})}),M.jsxs("tbody",{className:"divide-y divide-border-ui-default",children:[m.slice(0,Ba.LOG_PREVIEW_COUNT).map(fe=>M.jsxs("tr",{className:"hover:bg-background-panel transition-colors",children:[M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:fe.frame}),M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:fe.relativeTime.toFixed(1)}),M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:fe.vehicles.total}),M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:fe.humans.total}),M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:fe.animals.total}),M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:M.jsx($e,{level:fe.congestion})}),M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:M.jsx(Ne,{detected:fe.incident})})]},`f-${fe.frame}-${fe.timestamp}`)),m.length>Ba.LOG_PREVIEW_COUNT*2&&M.jsx("tr",{children:M.jsxs("td",{colSpan:7,className:"text-center py-2 text-content-muted italic tracking-widest",children:["... (",m.length-Ba.LOG_PREVIEW_COUNT*2," more entries) ..."]})}),m.slice(Math.max(Ba.LOG_PREVIEW_COUNT,m.length-Ba.LOG_PREVIEW_COUNT)).map(fe=>M.jsxs("tr",{className:"hover:bg-background-panel transition-colors",children:[M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:fe.frame}),M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:fe.relativeTime.toFixed(1)}),M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:fe.vehicles.total}),M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:fe.humans.total}),M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:fe.animals.total}),M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:M.jsx($e,{level:fe.congestion})}),M.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:M.jsx(Ne,{detected:fe.incident})})]},`l-${fe.frame}-${fe.timestamp}`))]})]})}):M.jsx("p",{className:"text-content-muted p-4 text-center",children:"No log data available for preview."})]}),M.jsxs("button",{onClick:ye,className:"mt-4 py-2.5 px-6 bg-accent-green hover:bg-emerald-400 text-white font-semibold rounded-md transition-colors shadow-md hover:shadow-elevation-medium active:translate-y-px flex items-center",children:[M.jsx(JAe,{className:"w-5 h-5 mr-2"}),"EXTRACT FULL DATA LOG"]})]}),M.jsxs("footer",{className:"text-center text-xs text-content-muted py-8 mt-10 border-t border-border-ui-default/70",children:["TRAFFIC ANALYSIS SYSTEM v3.0 // © ",new Date().getFullYear()," // TF.js CORE"]})]}),R&&M.jsx(p_e,{onClose:()=>F(!1)}),ke()]})},kre=document.getElementById("root");if(!kre)throw new Error("Could not find root element to mount to");const Fvt=lk.createRoot(kre);Fvt.render(M.jsx(B.StrictMode,{children:M.jsx(Dvt,{})}));
